{"version":3,"file":"js/tableHeadTopDemo.c87850a2.js","mappings":"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","sources":["webpack://oms-frontend/./src/views/demo/constColumns.js","webpack://oms-frontend/./src/views/demo/tableHeadTop.vue","webpack://oms-frontend/./src/views/demo/tableHeadTop.vue?b4ba","webpack://oms-frontend/./src/views/demo/tableHeadTopDemo.vue","webpack://oms-frontend/./src/views/demo/tableHeadTopDemo.vue?1e73"],"sourcesContent":["\n//折叠/不折叠表格表头\nexport const revenueColumns = [\n  {\n    title: '分析项',\n    dataIndex: 'analysis',\n    fixed:'left',\n  },\n  {\n    title: '1月',\n    dataIndex: 'month1',\n  },\n  {\n    title: '2月',\n    dataIndex: 'month2',\n  },\n  {\n    title: '3月',\n    dataIndex: 'month3',\n  },\n  {\n    title: '4月',\n    dataIndex: 'month4',\n  },\n  {\n    title: '5月',\n    dataIndex: 'month5',\n  },\n  {\n    title: '6月',\n    dataIndex: 'month6',\n  },\n  {\n    title: '7月',\n    dataIndex: 'month7',\n  },\n  {\n    title: '8月',\n    dataIndex: 'month8',\n  },\n  {\n    title: '9月',\n    dataIndex: 'month9',\n  },\n  {\n    title: '10月',\n    dataIndex: 'month10',\n  },\n  {\n    title: '11月',\n    dataIndex: 'month11',\n  },\n  {\n    title: '12月',\n    dataIndex: 'month12',\n  },\n  {\n    title: '累计',\n    dataIndex: 'total',\n  } \n]\n//环差比表头\nexport const differentColumns =[\n  {\n    title: '分析项',\n    dataIndex: 'analysis',\n    fixed:'left',\n  },\n  {\n      title:'10月',\n      dataIndex: 'month10',\n      titleSlotName:'monthBefore',\n  },\n  {\n      title:'11月',\n      dataIndex: 'month11',\n      titleSlotName:'monthAfter',\n  },\n  {\n    title:\"11-10月\",\n    dataIndex: 'monthDifferent',\n    headerCellStyle : {'backgroundColor' : 'rgb(229, 247, 247)'},\n  },\n  {\n    title:\"月环比\",\n    dataIndex: 'MonthonMonth',\n    headerCellStyle : {'backgroundColor' : 'rgb(229, 247, 247)'},\n  },\n  {\n    title:\"Q2\",\n    dataIndex: 'Q2',\n    titleSlotName:'QBefore',\n  },\n  {\n    title:\"Q3\",\n    dataIndex: 'Q3',\n    titleSlotName:'QAfter',\n  },\n  {\n    title:\"Q3-Q2\",\n    dataIndex: 'QDifferent',\n    headerCellStyle : {'backgroundColor' : 'rgb(229, 247, 247)'},\n  },\n  {\n    title:\"Q环比\",\n    dataIndex: 'QonQ',\n    headerCellStyle : {'backgroundColor' : 'rgb(229, 247, 247)'},\n  },\n \n]\n\nexport const tableHeadTopColumns = [\n  {\n    title: '分析项',\n    dataIndex: 'analysis',\n    fixed:'left',\n    width: 140\n  },\n  {\n    title: '1月',\n    dataIndex: 'month1',\n    width: 140\n  },\n  {\n    title: '2月',\n    dataIndex: 'month2',\n    width: 140\n  },\n  {\n    title: '3月',\n    dataIndex: 'month3',\n    width: 140\n  },\n  {\n    title: '4月',\n    dataIndex: 'month4',\n    width: 140\n  },\n  {\n    title: '5月',\n    dataIndex: 'month5',\n    width: 140\n  },\n  {\n    title: '6月',\n    dataIndex: 'month6',\n    width: 140\n  },\n  {\n    title: '7月',\n    dataIndex: 'month7',\n    width: 140\n  },\n  {\n    title: '8月',\n    dataIndex: 'month8',\n    width: 140\n  },\n  {\n    title: '9月',\n    dataIndex: 'month9',\n    width: 140\n  },\n  {\n    title: '10月',\n    dataIndex: 'month10',\n    width: 140\n  },\n  {\n    title: '11月',\n    dataIndex: 'month11',\n    width: 140\n  },\n  {\n    title: '12月',\n    dataIndex: 'month12',\n    width: 140\n  },\n  {\n    title: '累计',\n    dataIndex: 'total',\n    width: 140,\n  } \n]\n","<template>\n    <main ref='contentRef'>\n        <div class=\"table-header-mask\" ref=\"tableHeaderMaskRef\"></div>\n          <div ref='tableContentRef'>\n            <a-table \n                :columns=\"props.tableProps.columns\"  \n                :data=\"props.tableProps.dataSource\"  \n                :loading=\"props.tableProps.loading\"\n                :pagination=\"props.tableProps.pagination\" \n            >\n                <template #thead>\n                    <thead ref=\"theadRef\"></thead>\n                </template>\n            </a-table>\n          </div>\n      </main>\n  </template>\n  \n  \n  <script setup>\n  import { ref,reactive,onMounted,onBeforeUnmount, nextTick,defineExpose } from 'vue';\n  import { getCurrentInstance } from \"@vue/runtime-core\";\n  let $bus = getCurrentInstance().appContext.config.globalProperties.$bus;\n  const props = defineProps({\n    tableProps : {\n        type : Object,\n        required : true\n    },\n    scrollEvtName : {\n        type : String,\n        required : true\n    },\n    rootDom : {\n        type : String,\n        required : true\n    }\n  })\n  const theadRef = ref(null)\n  let headsWidth = []\n  const contentRef = ref(null)\n  let isFirstCreate = true\n  const tableContentRef = ref(null)\n  const tableHeaderMaskRef = ref(null)\n  let rootEl = null\n  onMounted(()=>{\n    computedThWidth()\n    rootEl = document.querySelector(props.rootDom) \n    if(rootEl)rootEl.scrollTop = 0\n    let scrollContainerElTop\n    nextTick(()=>{\n        let getELContainerDOMRect = rootEl.getBoundingClientRect()\n        scrollContainerElTop = parseFloat(getELContainerDOMRect.top)\n    })\n    $bus.on(props.scrollEvtName,(obj)=>{\n        let domDOMRect = tableContentRef.value.getBoundingClientRect()\n        let domTop = parseFloat(domDOMRect.top)\n        let domBottom = parseFloat(domDOMRect.bottom)\n        scrollFn(obj.scrollTop,obj.direction,domTop,scrollContainerElTop ,domBottom)\n    })\n  })\n\n  function computedThWidth(){\n    theadRef.value.querySelectorAll('tr th').forEach(el=>{\n        let style = getComputedStyle(el)\n        headsWidth.push(el.offsetWidth)\n    })\n  }\n  let creatHeaderContainer\n  let isFirstInsert = true\n  let initialDomScrollTop = 0\n  function scrollFn( scrollTop,direction,domTop,domContainerTop,domBottom ){\n    if(direction === 'down'){\n        if(isFirstCreate){\n            let tableHeadEl =theadRef.value\n            let cloneTableHeadEl = tableHeadEl.cloneNode(true)\n                cloneTableHeadEl.querySelectorAll('tr th').forEach((el,i)=>{\n                el.style.width =  headsWidth[i] + 'px'\n                el.style.display = 'inline-block'\n            })\n            creatHeaderContainer= document.createElement('div')\n            let div1 = document.createElement('div')\n            creatHeaderContainer.className = '_tableHeadTopContainer '\n            div1.className = '_tableHeadTopContent'\n            creatHeaderContainer.appendChild(div1)\n            \n            div1.appendChild(cloneTableHeadEl)\n            isFirstCreate = false\n        }\n        function scrollEvtFn(e){\n            creatHeaderContainer.scrollLeft = e.target.scrollLeft\n            creatHeaderContainer.parentNode.scrollLeft = e.target.scrollLeft\n        }\n        \n        if( (domTop <= domContainerTop) && isFirstInsert){\n            let tableHeadEl =theadRef.value\n            initialDomScrollTop = scrollTop\n            tableHeadEl.parentNode.parentNode.insertBefore(creatHeaderContainer,tableHeadEl.parentNode.parentNode.firstElementChild)\n            creatHeaderContainer.scrollLeft = creatHeaderContainer.parentNode.scrollLeft\n            creatHeaderContainer.addEventListener('scroll',scrollEvtFn)\n            creatHeaderContainer.parentNode.addEventListener('scroll',scrollEvtFn)\n            isFirstInsert = false\n        }\n        if(!isFirstCreate && (domTop <= domContainerTop)){\n            let tableHeadEl =theadRef.value\n            creatHeaderContainer.scrollLeft = tableHeadEl.parentNode.parentNode.scrollLeft\n            creatHeaderContainer.style.display = 'block'\n            creatHeaderContainer.style.top = domContainerTop+26  + 'px'\n            tableHeaderMaskRef.value.classList.add('table-header-mask-active')\n            tableHeaderMaskRef.value.style.top = domContainerTop+'px'\n        }\n        if( (domBottom <= domContainerTop) && creatHeaderContainer ){\n            creatHeaderContainer.style.display = 'none'\n            tableHeaderMaskRef.value.classList.remove('table-header-mask-active')\n        }\n    }\n    if(direction === 'up' && creatHeaderContainer){\n        if(domBottom >= domContainerTop){\n            creatHeaderContainer.style.display = 'block'\n            tableHeaderMaskRef.value.classList.add('table-header-mask-active')\n        }\n        if(domTop >= domContainerTop){\n            creatHeaderContainer.style.top = domTop+26 + 'px'\n            tableHeaderMaskRef.value.classList.remove('table-header-mask-active')\n        }\n        if(scrollTop <= initialDomScrollTop){\n            creatHeaderContainer.style.display = 'none'\n        }\n    }\n    creatHeaderContainer.style.width = contentRef.value.offsetWidth + 'px'\n    tableHeaderMaskRef.value.style.width = contentRef.value.offsetWidth+2 + 'px'\n  }\n  defineExpose({\n    computedThWidth\n  })\n  onBeforeUnmount(()=>{\n    $bus.off(props.scrollEvtName)\n  })\n  </script>\n  \n  <style lang=\"scss\">\n._tableHeadTopContainer  {\n    position : fixed;\n    z-index : 100 ;\n    overflow-x : auto;\n}\n._tableHeadTopContainer  {\n  &::-webkit-scrollbar {\n    height: 0;\n  }\n}\n._tableHeadTopContent {\n    width : max-content;\n}\n\n.table-header-mask{\n    height: 26px;\n    background-color: var(--color-bg-3);\n    display: none;\n}\n.table-header-mask-active{\n    display: block;\n    position: fixed;\n    width: 100%;\n    z-index: 100;\n}\n  </style>","import script from \"./tableHeadTop.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./tableHeadTop.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./tableHeadTop.vue?vue&type=style&index=0&id=35b753e6&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n    <div class='defaultPadding'>\n        <div>\n            <table-head-top \n                :tableProps=\"tableContent\" \n                rootDom=\"#a-layout-main\" \n                scrollEvtName=\"handleScroll\"\n            >\n            </table-head-top>\n        </div>\n        <div class=\"m-t-100\">\n            <table-head-top \n                :tableProps=\"tableContent\" \n                rootDom=\"#a-layout-main\" \n                scrollEvtName=\"handleScroll\"\n            >\n            </table-head-top>\n        </div>\n        <div class=\"m-t-100\">\n            <table-head-top \n                :tableProps=\"tableContent\" \n                rootDom=\"#a-layout-main\" \n                scrollEvtName=\"handleScroll\"\n            >\n            </table-head-top>\n        </div>\n    </div>\n</template>\n\n<script setup>\nimport tableHeadTop from './tableHeadTop.vue'\nimport {tableHeadTopColumns} from './constColumns.js';\nimport { reactive,markRaw } from 'vue'\nconst tableContent = reactive({\n    columns : tableHeadTopColumns,\n    dataSource : [],\n    loading: false,\n    pagination : false\n})\n//获取列表数据\n  const getList = ()=>{\n    tableContent.loading = true\n    let data = []\n    for (let i = 0; i < 20; i++) {\n        let obj = {}\n        tableHeadTopColumns.forEach((item,j)=>{\n            obj[item.dataIndex] = item.title+i*j\n        })\n        data.push(obj)\n    }\n    tableContent.dataSource = data\n    tableContent.loading = false\n  }\n  getList()\n</script>\n\n<style lang=\"scss\">\n.m-t-100{\n    margin-top : 100px;\n}\n</style>","import script from \"./tableHeadTopDemo.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./tableHeadTopDemo.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./tableHeadTopDemo.vue?vue&type=style&index=0&id=53fad097&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["revenueColumns","title","dataIndex","fixed","differentColumns","titleSlotName","headerCellStyle","tableHeadTopColumns","width","$bus","getCurrentInstance","appContext","config","globalProperties","theadRef","ref","headsWidth","contentRef","isFirstCreate","tableContentRef","tableHeaderMaskRef","creatHeaderContainer","rootEl","computedThWidth","value","querySelectorAll","forEach","el","getComputedStyle","push","offsetWidth","onMounted","scrollContainerElTop","document","querySelector","props","rootDom","scrollTop","nextTick","getELContainerDOMRect","getBoundingClientRect","parseFloat","top","on","scrollEvtName","obj","domDOMRect","domTop","domBottom","bottom","scrollFn","direction","isFirstInsert","initialDomScrollTop","domContainerTop","tableHeadEl","cloneTableHeadEl","cloneNode","i","style","display","createElement","div1","className","appendChild","scrollEvtFn","e","scrollLeft","target","parentNode","insertBefore","firstElementChild","addEventListener","classList","add","remove","expose","onBeforeUnmount","off","__exports__","tableContent","reactive","columns","dataSource","loading","pagination","getList","data","item","j"],"sourceRoot":""}