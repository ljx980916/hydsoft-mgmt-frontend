{"version":3,"file":"js/loopAnalyze.22ff90ea.js","mappings":"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","sources":["webpack://oms-frontend/./src/api/loopAnalyze.js","webpack://oms-frontend/./src/components/canvasContainer.vue","webpack://oms-frontend/./src/components/canvasContainer.vue?bdf4","webpack://oms-frontend/./src/views/LeanAnalyze/loopAnalyze.vue","webpack://oms-frontend/./src/views/LeanAnalyze/loopAnalyze.vue?4432","webpack://oms-frontend/./src/api/preRealComparsion.js","webpack://oms-frontend/./src/views/LeanAnalyze/preRealComparsion.vue","webpack://oms-frontend/./src/views/LeanAnalyze/preRealComparsion.vue?a6b4"],"sourcesContent":["import request from '@/utils/request'\n// 环比分析部门级别查询接口\nexport function getDepartmentRingList (parameter) {\n    return request({\n        url: '/LinkAnalysis/queryLinkAnalysisList',\n        method: 'post',\n        data: parameter,\n        timeout : 1000 * 60 * 3\n    })\n}\n// 环比分析客户级别查询接口\nexport function getCustomerRingList (parameter) {\n  return request({\n      url: '/LinkAnalysis/getCustomerLink',\n      method: 'post',\n      data: parameter,\n      timeout : 1000 * 60 * 3\n  })\n}\n// 环比分析项目级别查询接口\nexport function getProjectRingList (parameter) {\n  return request({\n      url: '/LinkAnalysis/getProjectLink',\n      method: 'post',\n      data: parameter,\n      timeout : 1000 * 60 * 3\n  })\n}\n\nexport function queryYoyAnalysis (parameter) {\n  return request({\n      url: '/yoyAnalysis/queryYoyAnalysis',\n      method: 'post',\n      data: parameter,\n      timeout : 1000 * 60 * 3\n  })\n}\n//客户环同同比分析项集团客户维度查询接口\nexport function getCustomerYoyAnalysis (parameter) {\n  return request({\n      url: '/yoyAnalysis/getCustomerYoyAnalysis',\n      method: 'post',\n      data: parameter,\n      timeout : 1000 * 60 * 3\n  })\n}\n//客户环同同比分析项目维度查询接口\nexport function getProjectYoyAnalysis (parameter) {\n  return request({\n      url: '/yoyAnalysis/getProjectYoyAnalysis',\n      method: 'post',\n      data: parameter,\n      timeout : 1000 * 60 * 3\n  })\n}","<template>\n  <canvas\n    :width=\"props.width\"\n    :height=\"props.height\"\n    ref=\"canvasEl\"\n    :style=\"{\n      padding: '10px',\n      backgroundColor: 'rgb(var(--arcoblue-1))',\n    }\"\n  ></canvas>\n</template>\n\n<script setup>\nimport { ref, onMounted, watch } from \"vue\";\nconst props = defineProps({\n  // 折线路径数据\n  route: {\n    type: Array,\n    default: () => [],\n  },\n  height: {\n    type: Number,\n    default: 20,\n  },\n  width: {\n    type: Number,\n    default: 50,\n  },\n});\nwatch(\n  () => props.route,\n  (old, newProps) => {\n    if (old !== newProps) {\n      animate();\n    }\n  },\n);\nconst canvasEl = ref(null);\nconst animate = () => {\n  let ctx = canvasEl.value && canvasEl.value.getContext(\"2d\");\n  ctx.clearRect(0, 0, props.width, props.height);\n  ctx.translate(0, props.height);\n  ctx.scale(1, -1);\n  ctx.moveTo(...props.route[0]);\n  ctx.clearRect(0, 0, 50, 20);\n  props.route.forEach(item => {\n    ctx.lineTo(...item);\n    ctx.strokeStyle = \"blue\";\n    ctx.stroke();\n  });\n};\nonMounted(() => {\n  animate();\n});\n</script>\n","import script from \"./canvasContainer.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./canvasContainer.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n  <div class=\"defaultPadding\">\n    <div>\n      <a-space wrap>\n        <span>部门名称：</span>\n        <a-select :style=\"{ width: '230px' }\" placeholder=\"输入并选择部门名称\" allow-search>\n          <a-option>Beijing</a-option>\n          <a-option>Shanghai</a-option>\n          <a-option>Guangzhou</a-option>\n          <a-option disabled>Disabled</a-option>\n        </a-select>\n        <span class=\"m-l-16\">客户名称：</span>\n        <a-select :style=\"{ width: '230px' }\" placeholder=\"输入并选择客户名称\" allow-search>\n          <a-option>Beijing</a-option>\n          <a-option>Shanghai</a-option>\n          <a-option>Guangzhou</a-option>\n          <a-option disabled>Disabled</a-option>\n        </a-select>\n        <span class=\"m-l-16\">项目名称：</span>\n        <a-select :style=\"{ width: '230px' }\" placeholder=\"输入项目名称\" allow-search>\n          <a-option>Beijing</a-option>\n          <a-option>Shanghai</a-option>\n          <a-option>Guangzhou</a-option>\n          <a-option disabled>Disabled</a-option>\n        </a-select>\n        <a-button type=\"primary\" style=\"margin-left: 16px\" @click=\"handleSearch\">\n          <template #icon>\n            <icon-search />\n          </template>\n          <template #default>搜索</template>\n        </a-button>\n        <a-button @click=\"handleReset\">\n          <template #icon>\n            <icon-refresh />\n          </template>\n          <template #default>重置</template>\n        </a-button>\n      </a-space>\n    </div>\n    <div class=\"m-t-20 flex-between\">\n      <div style=\"align-self: flex-start\">\n        <div class=\"m-b-20\">\n          <a-space wrap>\n            <div class=\"border-r\">\n              <a-space>\n                <a-tag\n                  v-for=\"(item, index) of tabChangeColumInfo.columnTabs\"\n                  :key=\"index\"\n                  :color=\"item.isShow === 1 ? 'arcoblue' : ''\"\n                  size=\"large\"\n                  class=\"pointer\"\n                  @click=\"handleTabChange(item)\"\n                >\n                  {{ item.title }}\n                </a-tag>\n              </a-space>\n            </div>\n            <a-tag\n              v-for=\"(item, index) of tabChangeColumInfo.up\"\n              :key=\"index\"\n              :color=\"item.isShow === 1 ? 'arcoblue' : ''\"\n              size=\"large\"\n              class=\"pointer\"\n              @click=\"handleHasSonTabChange(item)\"\n            >\n              {{ item.title }}\n            </a-tag>\n            <icon-up-circle class=\"pointer\" v-if=\"isFold\" size=\"20\" @click=\"handleUp\" />\n            <icon-down-circle class=\"pointer\" v-else size=\"20\" @click=\"handleDown\" />\n          </a-space>\n        </div>\n        <transition appear>\n          <div v-show=\"isFold\">\n            <a-space wrap>\n              <a-tag\n                v-for=\"(item, index) of tabChangeColumInfo.down\"\n                :key=\"index\"\n                :color=\"item.isShow === 1 ? 'arcoblue' : ''\"\n                size=\"large\"\n                class=\"pointer\"\n                @click=\"handleHasSonTabChange(item)\"\n              >\n                {{ item.title }}\n              </a-tag>\n            </a-space>\n          </div>\n        </transition>\n      </div>\n      <div style=\"align-self: flex-start\">\n        <a-radio-group type=\"button\" v-model:model-value=\"selectMonth\" size=\"large\" @change=\"handleMonthChange\">\n          <a-radio value=\"3\">近3个月</a-radio>\n          <a-radio value=\"6\">近6个月</a-radio>\n          <a-radio value=\"12\">近12个月</a-radio>\n        </a-radio-group>\n      </div>\n    </div>\n    <div class=\"m-t-20\">\n      <a-table\n        :columns=\"tableInfo.columns\"\n        :data=\"tableInfo.data\"\n        column-resizable\n        :scroll=\"{ maxHeight: tableInfo.maxHeight }\"\n        :scrollbar=\"{ x: true, y: 1500 }\"\n        :pagination=\"false\"\n        :loading=\"tableInfo.loading\"\n        :bordered=\"{ cell: true }\"\n        ref=\"tableRef\"\n      >\n        <template #[canvasLine1]=\"{ record }\">\n          <canvasVue :route=\"record[canvasLine1]\" :height=\"20\" :width=\"50\" />\n        </template>\n        <template #[canvasLine2]=\"{ record }\">\n          <canvasVue :route=\"record[canvasLine2]\" :height=\"20\" :width=\"50\" />\n        </template>\n        <template #[canvasLine3]=\"{ record }\">\n          <canvasVue :route=\"record[canvasLine3]\" :height=\"20\" :width=\"50\" />\n        </template>\n      </a-table>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { onBeforeMount, reactive, ref, nextTick, onMounted, toRaw } from \"vue\";\nimport { useTagColumnListStore } from \"../../store/index\";\nimport { getDepartmentRingList } from \"@/api/loopAnalyze.js\";\nimport { getNMonthsAgo } from \"../../utils/util\";\nimport canvasVue from \"@/components/canvasContainer.vue\";\nimport { Message } from \"@arco-design/web-vue\";\nlet tagColumnList = useTagColumnListStore();\nlet columConfig = {};\nconst isFold = ref(false);\nconst tableInfo = reactive({\n  columns: [],\n  data: [],\n  maxHeight: \"200px\",\n  loading: false,\n});\nconst selectMonth = ref(\"3\");\nconst tableRef = ref(null);\nconst tabChangeColumInfo = reactive({\n  columnTabs: [],\n  up: [],\n  down: [],\n});\nconst canvasLine1 = ref(\"\");\nconst canvasLine2 = ref(\"\");\nconst canvasLine3 = ref(\"\");\nonMounted(() => {\n  if (tableRef.value) {\n    let head = tableRef.value.$el;\n    nextTick(() => {\n      let innerHeight = window.innerHeight;\n      let elHeight = head.getBoundingClientRect().top;\n      tableInfo.maxHeight = innerHeight - elHeight - 30 + \"px\";\n    });\n  }\n});\n// 初始化\nconst seltColumns = () => {\n  let tagColumns = toRaw(tagColumnList.getTagColumnList) || [];\n  let currentPageColumn = tagColumns.filter(item => item.report === \"环比分析\") || [];\n  if (currentPageColumn.length) {\n    currentPageColumn[0].tier.forEach((item, index) => {\n      let tabs = [];\n      let columnTabs = [];\n      let columnHasSonTabs = [];\n      let noHiddenColumn = [];\n      let defaultColumHasSonTabs = [];\n      let defaultColumnTabs = [];\n      item.tags.forEach(jtem => {\n        tabs.push(jtem.tag);\n        jtem.columns.forEach(ktem => {\n          let { col, conf, title } = ktem;\n          conf = conf || {};\n          let columnItemConfig = {\n            title,\n            dataIndex: col,\n            align: conf.align,\n            cellStyle: { \"text-align\": conf.cellAlign },\n            width: conf.width,\n            ellipsis: true,\n            headerCellClass: \"noEllipsis\",\n            slotName: col,\n          };\n          columnItemConfig.isShow = conf.isShow;\n          if (conf.fixed !== undefined) {\n            columnItemConfig.fixed = conf.fixed;\n          }\n          if (conf.toFixed !== undefined) {\n            if (conf.showPercent) {\n              columnItemConfig.render = ({ record }) => {\n                return record[col];\n              };\n            } else {\n              columnItemConfig.render = ({ record }) => {\n                return record[col];\n              };\n            }\n          }\n          if (conf.canHide === 1) {\n            if (conf.parentCol === 0) {\n              columnTabs.push(columnItemConfig);\n            } else {\n              columnHasSonTabs.push(columnItemConfig);\n            }\n          } else {\n            noHiddenColumn.push(columnItemConfig);\n          }\n          if (conf.parentCol === 1) {\n            defaultColumHasSonTabs.push(columnItemConfig);\n          } else {\n            defaultColumnTabs.push(columnItemConfig);\n          }\n        });\n      });\n      columConfig[\"level\" + (index + 1)] = {\n        tabs,\n        params: item.params || [],\n        columnTabs,\n        columnHasSonTabs,\n        noHiddenColumn,\n        defaultColumnTabs,\n        defaultColumHasSonTabs,\n      };\n    });\n  }\n  tabChangeColumInfo.columnTabs = columConfig.level1.columnTabs;\n  tabChangeColumInfo.up = columConfig.level1.columnHasSonTabs.slice(0, 5);\n  tabChangeColumInfo.down = columConfig.level1.columnHasSonTabs.slice(5);\n};\nlet filterShowChildrenColumn = [];\n// 更换表头\nconst analysiisColumn = () => {\n  let { columnTabs, noHiddenColumn, defaultColumHasSonTabs } = columConfig.level1;\n  let num = 6;\n  switch (selectMonth.value) {\n    case \"3\":\n      let months1 = getNMonthsAgo(3);\n      let children1 = [];\n      let filterHasSonShowColumn1 = defaultColumHasSonTabs.filter(item => item.isShow === 1);\n      months1.forEach((item, i) => {\n        let columnHasSonConfig = {};\n        columnHasSonConfig.title = `${item[0]}年${item[1]}月`;\n        columnHasSonConfig.children = filterHasSonShowColumn1.map((jtem, j) => {\n          num++;\n          return {\n            ...jtem,\n            dataIndex: `${item[0]}${(\"\" + item[1]).padStart(2, \"0\")}col${num}`,\n            slotName: `${item[0]}${(\"\" + item[1]).padStart(2, \"0\")}col${num}`,\n          };\n        });\n        children1.push(columnHasSonConfig);\n      });\n      num = 0;\n      filterShowChildrenColumn = children1;\n      break;\n    case \"6\":\n      let months2 = getNMonthsAgo(6);\n      let children2 = [];\n      let filterHasSonShowColumn2 = defaultColumHasSonTabs.filter(item => item.isShow === 1);\n      months2.forEach((item, i) => {\n        let columnHasSonConfig = {};\n        columnHasSonConfig.title = `${item[0]}年${item[1]}月`;\n        columnHasSonConfig.children = filterHasSonShowColumn2.map((jtem, j) => {\n          num++;\n          return {\n            ...jtem,\n            dataIndex: `${item[0]}${(\"\" + item[1]).padStart(2, \"0\")}col${num}`,\n            slotName: `${item[0]}${(\"\" + item[1]).padStart(2, \"0\")}col${num}`,\n          };\n        });\n        children2.push(columnHasSonConfig);\n      });\n      num = 0;\n      filterShowChildrenColumn = children2;\n      break;\n    case \"12\":\n      let months3 = getNMonthsAgo(12);\n      let children3 = [];\n      let filterHasSonShowColumn3 = defaultColumHasSonTabs.filter(item => item.isShow === 1);\n      months3.forEach((item, i) => {\n        let columnHasSonConfig = {};\n        columnHasSonConfig.title = `${item[0]}年${item[1]}月`;\n        columnHasSonConfig.children = filterHasSonShowColumn3.map((jtem, j) => {\n          num++;\n          return {\n            ...jtem,\n            dataIndex: `${item[0]}${(\"\" + item[1]).padStart(2, \"0\")}col${num}`,\n            slotName: `${item[0]}${(\"\" + item[1]).padStart(2, \"0\")}col${num}`,\n          };\n        });\n        children3.push(columnHasSonConfig);\n      });\n      num = 0;\n      filterShowChildrenColumn = children3;\n      break;\n    default:\n      break;\n  }\n  filterShowChildrenColumn.forEach(item => {\n    if (item.children?.length) {\n      item.children = item.children.filter(jtem => jtem.isShow === 1);\n    }\n  });\n  let filterAllShowColumn = [...columnTabs.filter(item => item.isShow === 1), ...noHiddenColumn, ...filterShowChildrenColumn];\n  let number = 0;\n  filterAllShowColumn.forEach(item => {\n    number += 1;\n    if (!item.children) {\n      item.dataIndex = `colNo${number}`;\n      item.slotName = `colNo${number}`;\n    } else {\n      number = number - 1;\n      item.children.forEach(jtem => {\n        number += 1;\n        jtem.dataIndex = `colNo${number}`;\n        jtem.slotName = `colNo${number}`;\n      });\n    }\n  });\n  tableInfo.columns = filterAllShowColumn;\n  var index = tableInfo.columns.findIndex(item => item.children);\n  canvasLine3.value = tableInfo.columns[index - 1].dataIndex;\n  canvasLine2.value = tableInfo.columns[index - 2].dataIndex;\n  canvasLine1.value = tableInfo.columns[index - 3].dataIndex;\n};\n// 切换时间区间\nconst handleMonthChange = month => {\n  selectMonth.value = month;\n  analysiisColumn();\n  getList();\n};\nonBeforeMount(() => {\n  seltColumns();\n  analysiisColumn();\n  getList();\n});\n// 点击部门名称 客户名称\nconst handleTabChange = tab => {\n  switch (tab.isShow) {\n    case 0:\n      tab.isShow = 1;\n      changeShowStatus({\n        type: \"parent\",\n        title: tab.title,\n        val: 1,\n      });\n      break;\n    case 1:\n      tab.isShow = 0;\n      changeShowStatus({\n        type: \"parent\",\n        title: tab.title,\n        val: 0,\n      });\n      break;\n    default:\n      break;\n  }\n};\n// 点击部门名称 客户名称之外的标签\nconst handleHasSonTabChange = tab => {\n  switch (tab.isShow) {\n    case 0:\n      tab.isShow = 1;\n      changeShowStatus({\n        type: \"self\",\n        title: tab.title,\n        val: 1,\n      });\n      break;\n    case 1:\n      tab.isShow = 0;\n      changeShowStatus({\n        type: \"self\",\n        title: tab.title,\n        val: 0,\n      });\n      break;\n    default:\n      break;\n  }\n};\n// 更改高亮状态并更换表头\nconst changeShowStatus = obj => {\n  let { columnTabs, noHiddenColumn, defaultColumHasSonTabs } = columConfig.level1;\n  let columnsArr = [];\n  let filterHasSonShowColumn = defaultColumHasSonTabs.filter(item => item.isShow === 1);\n  if (obj.type === \"parent\") {\n    columnTabs.forEach(item => {\n      if (obj.title === item.title) {\n        item.isShow = obj.val;\n      }\n    });\n  }\n  if (obj.type === \"self\") {\n    defaultColumHasSonTabs.forEach(item => {\n      if (obj.title === item.title) {\n        item.isShow = obj.val;\n      }\n    });\n  }\n  let months = getNMonthsAgo(selectMonth.value);\n  let children = [];\n  let num = 0;\n  months.forEach((item, i) => {\n    let columnHasSonConfig = {};\n    columnHasSonConfig.title = `${item[0]}年${item[1]}月`;\n    columnHasSonConfig.children = filterHasSonShowColumn.map((jtem, j) => {\n      num++;\n      return {\n        ...jtem,\n        dataIndex: `${item[0]}${(\"\" + item[1]).padStart(2, \"0\")}col${num}`,\n        slotName: `${item[0]}${(\"\" + item[1]).padStart(2, \"0\")}col${num}`,\n      };\n    });\n    children.push(columnHasSonConfig);\n  });\n  columnsArr = [...columnTabs.filter(item => item.isShow === 1), ...noHiddenColumn, ...children];\n  let number = 0;\n  columnsArr.forEach(item => {\n    number += 1;\n    if (!item.children) {\n      item.dataIndex = `colNo${number}`;\n      item.slotName = `colNo${number}`;\n    } else {\n      number = number - 1;\n      item.children.forEach(jtem => {\n        number += 1;\n        jtem.dataIndex = `colNo${number}`;\n        jtem.slotName = `colNo${number}`;\n      });\n    }\n  });\n  tableInfo.columns = columnsArr;\n  var index = tableInfo.columns.findIndex(item => item.children);\n  canvasLine3.value = tableInfo.columns[index - 1].dataIndex;\n  canvasLine2.value = tableInfo.columns[index - 2].dataIndex;\n  canvasLine1.value = tableInfo.columns[index - 3].dataIndex;\n  getList();\n};\n// 获取列表数据\nconst getList = () => {\n  tableInfo.data = [];\n  tableInfo.loading = true;\n  let arr = [];\n  var newColumns = JSON.parse(JSON.stringify(tableInfo.columns));\n  newColumns.forEach(item => {\n    if (item.title === \"部门名称\") {\n      arr.push(\"deptName\");\n    }\n    if (item.title === \"客户名称\") {\n      arr.push(\"customerName\");\n    }\n    if (item.title === \"项目名称\") {\n      arr.push(\"projectName\");\n    }\n    if (item.title === \"收入趋势\") {\n      arr.push(\"canvasLine1\");\n    }\n    if (item.title === \"成本趋势\") {\n      arr.push(\"canvasLine2\");\n    }\n    if (item.title === \"毛利率趋势\") {\n      arr.push(\"canvasLine3\");\n    }\n    if (item.children) {\n      item.children.forEach(jtem => {\n        if (jtem.title === \"人数\") {\n          arr.push(\"colNo1\");\n        }\n        if (jtem.title === \"营业收入\") {\n          arr.push(\"colNo2\");\n        }\n        if (jtem.title === \"销售毛利\") {\n          arr.push(\"colNo3\");\n        }\n        if (jtem.title === \"销售毛利率\") {\n          arr.push(\"colNo4\");\n        }\n        if (jtem.title === \"直接成本\") {\n          arr.push(\"colNo5\");\n        }\n        if (jtem.title === \"人均营业收入\") {\n          arr.push(\"colNo6\");\n        }\n        if (jtem.title === \"人均直接成本\") {\n          arr.push(\"colNo7\");\n        }\n        if (jtem.title === \"未完工项目成本\") {\n          arr.push(\"colNo8\");\n        }\n        if (jtem.title === \"招聘费用\") {\n          arr.push(\"colNo9\");\n        }\n        if (jtem.title === \"销售费用\") {\n          arr.push(\"colNo10\");\n        }\n        if (jtem.title === \"管理费用\") {\n          arr.push(\"colNo11\");\n        }\n      });\n    }\n  });\n  const params = {\n    interval: Number(selectMonth.value),\n    dynamicHeaderParam: Array.from(new Set(arr)),\n    xAxis: 50,\n    yAxis: 20,\n  };\n  getDepartmentRingList(params)\n    .then(res => {\n      if (res.code == \"200\") {\n        tableInfo.data = res.data;\n      }\n    })\n    .catch(e => {\n      Message.error(e.message || \"请求失败\");\n    })\n    .finally(() => {\n      tableInfo.loading = false;\n    });\n};\n// 查询\nconst handleSearch = () => {\n  getList();\n};\n// 重置\nconst handleReset = () => {};\n// 打开\nconst handleUp = () => {\n  isFold.value = false;\n};\n// 关闭\nconst handleDown = () => {\n  isFold.value = true;\n};\n</script>\n\n<style lang=\"scss\">\n.draw-enter-active,\n.draw-leave-active {\n  transition: all 0.2s;\n}\n.draw-enter-from,\n.draw-leave-to {\n  max-height: 0;\n}\n.border-r {\n  padding-right: 10px;\n  border-right: 1px solid #ebebeb;\n}\n</style>\n","import script from \"./loopAnalyze.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./loopAnalyze.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./loopAnalyze.vue?vue&type=style&index=0&id=70d2c160&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import request from '@/utils/request'\n\nexport function getPretrialComparisonList (parameter) {\n    return request({\n        url: '/PrerenalComparison/getPretrialComparisonList',\n        method: 'post',\n        data: parameter\n    })\n}","<template>\n  <div class=\"defaultPadding\">\n    <!-- 查询表单 -->\n    <div>\n      <a-space wrap>\n        <span>年份：</span>\n        <a-year-picker v-model=\"yearNow\" disabled style=\"width: 120px; border-radius: 4px\" :allow-clear=\"false\" />\n        <a-button type=\"primary\" style=\"margin-left: 16px\" @click=\"handleSearch\">\n          <template #icon>\n            <icon-search />\n          </template>\n          <template #default>搜索</template>\n        </a-button>\n        <a-button @click=\"handleReset\">\n          <template #icon>\n            <icon-refresh />\n          </template>\n          <template #default>重置</template>\n        </a-button>\n      </a-space>\n    </div>\n    <div class=\"m-t-20 flex-between\">\n      <div style=\"align-self: flex-start\">\n        <div class=\"m-b-20\">\n          <a-space wrap>\n            <a-tag\n              v-for=\"(item, index) of tabChangeColumInfo.tabList\"\n              :key=\"index\"\n              :color=\"item.isShow === 1 ? 'arcoblue' : ''\"\n              size=\"large\"\n              class=\"pointer\"\n              @click=\"handleHasSonTabChange(item)\"\n            >\n              {{ item.configType }}\n            </a-tag>\n          </a-space>\n        </div>\n      </div>\n    </div>\n    <!-- 表格  -->\n    <div class=\"m-t-20\">\n      <a-table\n        :columns=\"tableInfo.columns\"\n        :data=\"tableInfo.data\"\n        column-resizable\n        :scroll=\"{ maxHeight: tableInfo.maxHeight }\"\n        :scrollbar=\"{ x: true, y: 750 }\"\n        :pagination=\"false\"\n        :loading=\"tableInfo.loading\"\n        :bordered=\"false\"\n        ref=\"tableRef\"\n        :expanded-keys=\"tableInfo.defaultExpandedKeys\"\n        @expanded-change=\"expandedChange\"\n      >\n      <template #columTitleSlot=\"{ column }\">\n        <a-tooltip style=\"width:max-content\" :content=\"column.title\">\n          <a href=\"javaScript:void(0)\" style=\"color: #333;\"> {{ column.title }}</a>\n        </a-tooltip>\n      </template>\n    </a-table>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { onBeforeMount, reactive, ref, nextTick, onMounted, toRaw } from \"vue\";\nimport { useTagColumnListStore } from \"../../store/index\";\nimport { getPretrialComparisonList } from \"@/api/preRealComparsion.js\";\nimport { getCurrentDate, dataAddKey, toInteger } from \"../../utils/util\";\nlet tagColumnList = useTagColumnListStore();\nlet columConfig = {};\nlet { year, month } = getCurrentDate();\nlet currentDate = `${year}`;\nlet months = `${month}`;\nconst regex = /(\\d+)月/g;\nconst yearNow = ref(currentDate);\nconst tableInfo = reactive({\n  columns: [],\n  data: [],\n  maxHeight: \"200px\",\n  loading: false,\n  defaultExpandedKeys: [],\n});\nconst tableRef = ref(null);\nconst tabChangeColumInfo = reactive({\n  tabList: [],\n});\nonMounted(() => {\n  if (tableRef.value) {\n    let head = tableRef.value.$el;\n    nextTick(() => {\n      let innerHeight = window.innerHeight;\n      let elHeight = head.getBoundingClientRect().top;\n      tableInfo.maxHeight = innerHeight - elHeight - 30 + \"px\";\n    });\n  }\n});\n// 初始化\nconst seltColumns = () => {\n  let tagColumns = toRaw(tagColumnList.getTagColumnList) || [];\n  let currentPageColumn = tagColumns.filter(item => item.report === \"预实对比\") || [];\n  if (currentPageColumn.length) {\n    if (months[0] == 0) {\n      months = months[1];\n    }\n    currentPageColumn[0].tier.forEach((item, index) => {\n      let tabs = [];\n      let columnTabs = []; // 可点击高亮不高亮的标签\n      let noHiddenColumn = []; // 不可点击高亮不高亮的标签\n      item.tags.forEach(jtem => {\n        tabs.push(jtem.tag);\n        jtem.columns.forEach(ktem => {\n          let { col, conf, title } = ktem;\n          if (title.indexOf(\"月\") !== -1) {\n            title = title.replace(regex, `${months}月`);\n          }\n          conf = conf || {};\n          let columnItemConfig = {\n            title,\n            dataIndex: col,\n            align: conf.align,\n            cellStyle: { \"text-align\": conf.cellAlign },\n            width: conf.width,\n            ellipsis: true,\n            headerCellClass: \"noEllipsis\",\n            slotName: col,\n            isShow: conf.isShow,\n            configType: conf.configType,\n            parentCol: conf.parentCol,\n            titleSlotName : 'columTitleSlot'\n          };\n          if (conf.canHide === 1) {\n            columnTabs.push(columnItemConfig); // 可以点击高亮的 === 有children的\n          } else {\n            noHiddenColumn.push(columnItemConfig); // 不可以点击高亮的 === 固定在表格的\n          }\n          // 去重\n          let map = new Map();\n          for (let i of columnTabs) {\n            if (!map.has(i.configType)) {\n              map.set(i.configType, i);\n            }\n          }\n          tabChangeColumInfo.tabList = [...map.values()];\n        });\n      });\n      columConfig = {\n        tabs,\n        params: item.params || [],\n        columnTabs,\n        noHiddenColumn,\n      };\n    });\n  }\n};\n// 更换表头\nconst analysiisColumn = () => {\n  let { columnTabs, noHiddenColumn } = columConfig;\n  let filterHasSonShowColumn1 = columnTabs.filter(item => item.isShow === 1);\n  let columnHasSonConfig = new Map();\n  filterHasSonShowColumn1.forEach(item => {\n    if (columnHasSonConfig.has(item.parentCol)) {\n      let value = columnHasSonConfig.get(item.parentCol);\n      value.children.push(item);\n      columnHasSonConfig.set(item.parentCol, value);\n    } else {\n      columnHasSonConfig.set(item.parentCol, {\n        title: item.parentCol,\n        children: [item],\n      });\n    }\n  });\n  let number = 0;\n  columnHasSonConfig.forEach(item => {\n    number += 1;\n    if (!item.children) {\n      item.dataIndex = `colNo${number}`;\n      item.slotName = `colNo${number}`;\n    } else {\n      number = number - 1;\n      item.children.forEach(jtem => {\n        number += 1;\n        jtem.dataIndex = `colNo${number}`;\n        jtem.slotName = `colNo${number}`;\n        jtem.render = ({ record }) => {\n          return <span innerHTML={toInteger(record[jtem.dataIndex])}></span>;\n        };\n      });\n    }\n  });\n  let filterAllShowColumn = [...noHiddenColumn, ...columnHasSonConfig.values()];\n  tableInfo.columns = filterAllShowColumn;\n};\nonBeforeMount(() => {\n  seltColumns();\n  analysiisColumn();\n  getList();\n});\n// 点击标签\nconst handleHasSonTabChange = tab => {\n  switch (tab.isShow) {\n    case 0:\n      tab.isShow = 1;\n      changeShowStatus({\n        type: \"self\",\n        configType: tab.configType,\n        val: 1,\n      });\n      break;\n    case 1:\n      tab.isShow = 0;\n      changeShowStatus({\n        type: \"self\",\n        configType: tab.configType,\n        val: 0,\n      });\n      break;\n    default:\n      break;\n  }\n};\n// 更改高亮状态并更换表头\nconst changeShowStatus = obj => {\n  let { columnTabs, noHiddenColumn } = columConfig;\n  let columnsArr = [];\n  if (obj.type === \"self\") {\n    columnTabs.forEach(item => {\n      if (obj.configType === item.configType) {\n        item.isShow = obj.val;\n      }\n    });\n  }\n  let filterHasSonShowColumn = columnTabs.filter(item => item.isShow === 1);\n  let columnHasSonConfig = new Map();\n  filterHasSonShowColumn.forEach(item => {\n    if (columnHasSonConfig.has(item.parentCol)) {\n      let value = columnHasSonConfig.get(item.parentCol);\n      value.children.push(item);\n      columnHasSonConfig.set(item.parentCol, value);\n    } else {\n      columnHasSonConfig.set(item.parentCol, {\n        title: item.parentCol,\n        children: [item],\n      });\n    }\n  });\n  let number = 0;\n  columnHasSonConfig.forEach(item => {\n    number += 1;\n    if (!item.children) {\n      item.dataIndex = `colNo${number}`;\n      item.slotName = `colNo${number}`;\n    } else {\n      number = number - 1;\n      item.children.forEach(jtem => {\n        number += 1;\n        jtem.dataIndex = `colNo${number}`;\n        jtem.slotName = `colNo${number}`;\n        jtem.render = ({ record }) => {\n          return <span innerHTML={toInteger(record[jtem.dataIndex])}></span>;\n        };\n      });\n    }\n  });\n  columnsArr = [...noHiddenColumn, ...columnHasSonConfig.values()];\n\n  tableInfo.columns = columnsArr;\n  getList();\n};\n// 获取列表数据\nconst getList = () => {\n  tableInfo.data = [];\n  tableInfo.loading = true;\n  let arr = [];\n  var newColumns = JSON.parse(JSON.stringify(tableInfo.columns));\n  newColumns.forEach(item => {\n    if (item.title === \"部门名称\") {\n      arr.push(\"deptName\");\n    }\n    if (item.title === \"人数累计\") {\n      arr.push(\"colNo1\");\n    }\n    if (item.title === \"营业收入累计\") {\n      arr.push(\"colNo2\");\n    }\n    if (item.title === \"销售毛利累计\" || item.title === \"销售毛利率累计\") {\n      arr.push(\"colNo3\");\n    }\n    if (item.title === \"考核经营净利润累计\" || item.title === \"考核经营净利润率累计\") {\n      arr.push(\"colNo4\");\n    }\n    if (item.title === \"招聘费用累计\") {\n      arr.push(\"colNo5\");\n    }\n    if (item.title === \"销售费用累计\") {\n      arr.push(\"colNo6\");\n    }\n    if (item.title === \"管理费用累计\") {\n      arr.push(\"colNo7\");\n    }\n  });\n  const params = {\n    dynamicHeaderParam: Array.from(new Set(arr)),\n    tagKey: \"prerealComparison\",\n  };\n  getPretrialComparisonList(params).then(res => {\n    if (res.code == \"200\") {\n      let data = dataAddKey(res.data, \"key\", \"id\");\n      tableInfo.data = data;\n      let keys = [];\n      res.data.forEach(item => keys.push(item.id));\n      tableInfo.defaultExpandedKeys = keys;\n    }\n  }).catch(e=>{\n    Message.error(e.message || '请求数据错误')\n  }).finally(()=>{\n    tableInfo.loading = false\n  })\n};\nconst expandedChange = rowKeys => {\n  tableInfo.defaultExpandedKeys = rowKeys;\n};\n// 查询\nconst handleSearch = () => {\n  getList();\n};\n// 重置\nconst handleReset = () => {};\n</script>\n\n<style lang=\"scss\">\n.draw-enter-active,\n.draw-leave-active {\n  transition: all 0.2s;\n}\n.draw-enter-from,\n.draw-leave-to {\n  max-height: 0;\n}\n.border-r {\n  padding-right: 10px;\n  border-right: 1px solid #ebebeb;\n}\n</style>\n","import script from \"./preRealComparsion.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./preRealComparsion.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./preRealComparsion.vue?vue&type=style&index=0&id=5050b2e2&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["getDepartmentRingList","parameter","request","url","method","data","timeout","getCustomerRingList","getProjectRingList","queryYoyAnalysis","getCustomerYoyAnalysis","getProjectYoyAnalysis","watch","props","route","old","newProps","animate","canvasEl","ref","ctx","value","getContext","clearRect","width","height","translate","scale","moveTo","forEach","item","lineTo","strokeStyle","stroke","onMounted","__exports__","tagColumnList","useTagColumnListStore","columConfig","isFold","tableInfo","reactive","columns","maxHeight","loading","selectMonth","tableRef","tabChangeColumInfo","columnTabs","up","down","canvasLine1","canvasLine2","canvasLine3","head","$el","nextTick","innerHeight","window","elHeight","getBoundingClientRect","top","seltColumns","tagColumns","toRaw","getTagColumnList","currentPageColumn","filter","report","length","tier","index","tabs","columnHasSonTabs","noHiddenColumn","defaultColumHasSonTabs","defaultColumnTabs","tags","jtem","push","tag","ktem","col","conf","title","columnItemConfig","dataIndex","align","cellStyle","cellAlign","ellipsis","headerCellClass","slotName","isShow","undefined","fixed","toFixed","showPercent","render","record","canHide","parentCol","params","level1","slice","filterShowChildrenColumn","analysiisColumn","num","months1","getNMonthsAgo","children1","filterHasSonShowColumn1","i","columnHasSonConfig","children","map","j","padStart","months2","children2","filterHasSonShowColumn2","months3","children3","filterHasSonShowColumn3","filterAllShowColumn","number","findIndex","handleMonthChange","month","getList","onBeforeMount","handleTabChange","tab","changeShowStatus","type","val","handleHasSonTabChange","obj","columnsArr","filterHasSonShowColumn","months","arr","newColumns","JSON","parse","stringify","interval","Number","dynamicHeaderParam","Array","from","Set","xAxis","yAxis","then","res","code","catch","e","Message","error","message","finally","handleSearch","handleReset","handleUp","handleDown","getPretrialComparisonList","year","getCurrentDate","currentDate","regex","yearNow","defaultExpandedKeys","tabList","indexOf","replace","configType","titleSlotName","Map","has","set","values","get","toInteger","tagKey","dataAddKey","keys","id","expandedChange","rowKeys"],"sourceRoot":""}