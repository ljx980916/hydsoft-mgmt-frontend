"use strict";(self["webpackChunkoms_frontend"]=self["webpackChunkoms_frontend"]||[]).push([[177],{3669:function(e,t,a){a.d(t,{J4:function(){return n},bu:function(){return o},d2:function(){return s},n0:function(){return i}});var l=a(4471);function n(e){return(0,l.Z)({url:"/mdm/listPieChartStatistics",method:"post",data:e})}function i(e){return(0,l.Z)({url:"/mdm/listCauseGroupStatistics",method:"post",data:e})}function o(e){return(0,l.Z)({url:"/mdm/listHistogramStatistics",method:"post",data:e})}function s(e){return(0,l.Z)({url:"/mdm/listStatisticsDetail",method:"post",data:e})}},485:function(e,t,a){a.r(t),a.d(t,{default:function(){return E}});a(7658);var l=a(3396),n=a(7139),i=a(4870),o=a(6221),s=a(4722),p=a(2483),r=a(3669),d=a(6797),u=a.n(d);const c=e=>((0,l.dD)("data-v-331ea963"),e=e(),(0,l.Cn)(),e),m={style:{position:"relative",overflow:"hidden"},class:"defaultPadding"},f=c((()=>(0,l._)("p",{class:"tip"},[(0,l._)("span",null,"提示：点击饼状图切换事业群")],-1))),h=c((()=>(0,l._)("div",{id:"pie"},null,-1))),x={class:"modal"},v={class:"title"},g={class:"subtitle"},y=c((()=>(0,l._)("span",null,"C1人数",-1))),w=c((()=>(0,l._)("span",{class:"m-r-8"},"G人数",-1))),_=c((()=>(0,l._)("span",null,"C2人数",-1))),P=c((()=>(0,l._)("span",{class:"m-r-12"},"S人数",-1))),b=c((()=>(0,l._)("span",{class:"m-r-10"},"R人数",-1))),C={class:"m-l-40"},I=c((()=>(0,l._)("span",null,"正式人数",-1))),S=c((()=>(0,l._)("span",null,"兼职人数",-1))),B=c((()=>(0,l._)("span",null,"实习人数",-1))),G={class:"time"};var z={__name:"staticPicture",setup(e){let t=(0,l.FN)().appContext.config.globalProperties.$bus;const a=(0,p.tv)(),d=((0,p.yj)(),(0,i.qj)({title:"各BG汇总",c1People:1477,Gpeople:60,c2People:100,sPeople:4,rPeople:200,formalPeople:1477,partTimePeople:60,practicePeople:100}));let{year:c,month:z,days:k}=(0,s.Xn)(),A=`${c}/${z}/${k}`;const E=(0,i.iH)(!1),D=(0,i.iH)(!1);var T,L,F=[],N=[],H=[],U=[],O=[],W=[],$=["#8E83BD","#F0886F","#6D99C8","#C59E63","#4D8192","#7DAE99"],Z=0;const j=(0,i.iH)("1"),R=(0,i.iH)(-1),V=(0,i.iH)([{label:"1",value:"近12月"},{label:"2",value:"近26周"},{label:"3",value:"近30自然日"}]);(0,l.m0)((()=>{t.emit("updateStructure",[{type:"text",color:"#333",msg:"人员分析"},{type:"text",color:"#333",msg:"人员统计"}])}));const X=()=>{N=[],F=[],Z=0,(0,r.J4)().then((e=>{if("000000000000"===e.code){e.data.forEach((e=>{F.push({name:e.deptName,value:e.extendColumn2}),Z+=e.extendColumn2})),N=F.map(((e,t)=>({name:e.name,value:e.value,label:{color:$[t]}}))),J();const t=["BG1","BG2","BG3","BG4"];t.forEach(((e,t)=>{d.title===e&&T.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:t})}))}}))},J=()=>{null!=T&&""!=T&&void 0!=T&&T.dispose();var e=document.getElementById("pie");if(e){T=o.S1(e);var t={tooltip:{trigger:"item",triggerOn:"none",formatter:"{b}",position:function(e,t,a,l,n){return"BG1"==t.name?{left:l.x,top:l.y+50}:"BG3"==t.name?{left:l.x+30,top:l.y+50}:"BG4"==t.name?{left:l.x,top:l.y}:"BG2"==t.name?{left:l.x+60,top:l.y+50}:void 0}},title:{text:"总人数",subtext:(0,s.ke)(Z),textStyle:{fontSize:"14px",color:"#6B7785",fontWeight:300,fontFamily:"PingFangSC-Thin"},subtextStyle:{fontSize:"18px",color:"#6B7785",fontWeight:500,fontFamily:"PingFang SC"},textAlign:"center",x:"48.3%",y:"38.5%"},animation:!1,color:["#8E83BD","#F0886F","#6D99C8","#C59E63","#4D8192","#7DAE99"],legend:{bottom:-5,itemGap:20,itemWidth:20,data:F},series:[{radius:["53%","80%"],center:["49%","47%"],type:"pie",label:{position:"inner",color:"#fff",fontSize:"14px",textAlign:"left"},emphasis:{itemStyle:{shadowBlur:6,shadowOffsetX:0,shadowColor:"rgba(100, 114, 123, 0.5)"},label:{show:!0,formatter:"{b}",fontSize:"18px",color:"#fff"},scale:!0,scaleSize:10},data:F,startAngle:45,clockwise:!1},{radius:["53%","80%"],center:["49%","47%"],type:"pie",label:{formatter:function(e){let t=(0,s.ke)(e.value);return t},position:"outer",fontSize:"14px",textAlign:"left"},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(100, 114, 123, 0.5)"},label:{show:!0},scale:!0,scaleSize:10},data:N,startAngle:45,clockwise:!1}]};t&&T.setOption(t),window.addEventListener("resize",q),T.on("click",(function(e){R.value=e.dataIndex,E.value=!0,d.title=e.name;for(var t=0;t<N.length;t++)t!=e.dataIndex&&T.dispatchAction({type:"downplay",seriesIndex:0,dataIndex:t});T.dispatchAction({type:"hideTip",seriesIndex:0,dataIndex:e.dataIndex}),T.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:e.dataIndex})})),T.on("mouseover",(function(e){e.dataIndex==R.value||e.name==d.title?T.dispatchAction({type:"hideTip",seriesIndex:0,dataIndex:e.dataIndex}):T.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:e.dataIndex})})),T.on("mouseout",(function(e){T.dispatchAction({type:"hideTip",seriesIndex:0,dataIndex:e.dataIndex})}))}},q=()=>{T.resize()},K=e=>{"SPAN"===e.target.tagName||D.value||"BUTTON"===e.target.tagName||(E.value?(M(d.title),E.value=!1,ee(j.value)):(d.title="各BG汇总",J(),M("各BG汇总"),ee(j.value))),D.value&&(D.value=!1)},M=e=>{if("各BG汇总"!==e){const e=new FormData;e.append("deptName",d.title),(0,r.n0)(e).then((e=>{const{code:t,data:a}=e;"000000000000"===t&&(d.c1People=a.C1,d.Gpeople=a.G,d.c2People=a.C2,d.sPeople=a.S,d.rPeople=a.R,d.formalPeople=a.official,d.partTimePeople=a.pluralistic,d.practicePeople=a.practice)}))}else(0,r.n0)().then((e=>{const{code:t,data:a}=e;"000000000000"===t&&(d.c1People=a.C1,d.Gpeople=a.G,d.c2People=a.C2,d.sPeople=a.S,d.rPeople=a.R,d.formalPeople=a.official,d.partTimePeople=a.pluralistic,d.practicePeople=a.practice,d.title="各BG汇总")}))},Y=()=>{a.push({path:"/staticDetail",state:{deptName:"各BG汇总"===d.title?"全部":d.title}})},Q=()=>{D.value=!0},ee=e=>{const t=new FormData;t.append("histogram",e),"各BG汇总"!==d.title&&t.append("deptName",d.title),(0,r.bu)(t).then((t=>{"000000000000"==t.code&&(U=[],H=[],O=[],W=[],"1"==e?t.data.forEach((e=>{if("2022"!==e.extendColumn1.slice(0,4)){const a=e.extendColumn1.split("-"),l=a[0],n=a[1];var t=`${l}.${n}`;W.push(t),O.push(e.extendColumn2),H.push(e.extendColumn3),U.push(e.extendColumn4)}})):t.data.forEach((e=>{O.push(e.extendColumn2),H.push(e.extendColumn3),U.push(e.extendColumn4);const t=u()(e.extendColumn1),a=t.format("M/D");W.push(a)})),te())}))},te=()=>{null!=L&&""!=L&&void 0!=L&&L.dispose();var e=document.getElementById("post");if(e){L=o.S1(e);const a=["#69D1B0","#F98981","#3491FA"];var t={color:a,tooltip:{axisPointer:{type:"cross"},extraCssText:"text-align: left;",formatter:e=>0==e.seriesIndex||1==e.seriesIndex||2==e.seriesIndex?"时间："+e.name+"</br>"+e.seriesName+"："+e.value:void 0},grid:{right:"10%",left:"20%",top:"8%"},legend:{data:["入职人数","离职人数","在职员工人数"],bottom:"2%",itemGap:26},xAxis:[{type:"category",axisTick:{alignWithLabel:!0},axisLabel:{interval:"auto"},data:W}],yAxis:[{type:"value",name:"柱状",position:"left",alignTicks:!0,splitLine:!1,axisLine:{show:!0},axisLabel:{formatter:"{value}"}},{type:"value",name:"折线",position:"left",alignTicks:!0,splitLine:!1,offset:50,axisLine:{show:!0,lineStyle:{color:a[2]}},axisLabel:{formatter:"{value}"}}],series:[{name:"入职人数",type:"bar",data:H},{name:"离职人数",type:"bar",data:U},{name:"在职员工人数",type:"line",yAxisIndex:1,data:O}]};t&&L.setOption(t),window.addEventListener("resize",ae)}},ae=()=>{L.resize()},le=e=>{j.value=e,ee(e)};return(0,l.bv)((()=>{document.addEventListener("click",K),d.title=history.state.deptName?"全部"==history.state.deptName?"各BG汇总":history.state.deptName:"各BG汇总",M(d.title),X(),ee(j.value)})),(0,l.Ah)((()=>{window.removeEventListener("resize",q),document.removeEventListener("click",K),window.removeEventListener("resize",ae)})),(e,t)=>{const a=(0,l.up)("a-button"),o=(0,l.up)("a-radio"),p=(0,l.up)("a-radio-group");return(0,l.wg)(),(0,l.iD)("div",m,[f,h,(0,l._)("div",x,[(0,l._)("p",v,"在职人数统计："+(0,n.zw)(d.title),1),(0,l._)("p",g,(0,n.zw)((0,i.SU)(A)),1),(0,l._)("ul",null,[(0,l._)("div",null,[(0,l._)("li",null,[y,(0,l._)("span",null,(0,n.zw)((0,i.SU)(s.ke)(d.c1People)),1)]),(0,l._)("li",null,[w,(0,l._)("span",null,(0,n.zw)(d.Gpeople),1)]),(0,l._)("li",null,[_,(0,l._)("span",null,(0,n.zw)(d.c2People),1)]),(0,l._)("li",null,[P,(0,l._)("span",null,(0,n.zw)(d.sPeople),1)]),(0,l._)("li",null,[b,(0,l._)("span",null,(0,n.zw)(d.rPeople),1)])]),(0,l._)("div",C,[(0,l._)("li",null,[I,(0,l._)("span",null,(0,n.zw)((0,i.SU)(s.ke)(d.formalPeople)),1)]),(0,l._)("li",null,[S,(0,l._)("span",null,(0,n.zw)(d.partTimePeople),1)]),(0,l._)("li",null,[B,(0,l._)("span",null,(0,n.zw)(d.practicePeople),1)])])]),(0,l.Wm)(a,{class:"button",type:"primary",onClick:Y},{default:(0,l.w5)((()=>[(0,l.Uk)("明细")])),_:1})]),(0,l._)("div",G,[(0,l.Wm)(p,{type:"button",size:"large",modelValue:j.value,"onUpdate:modelValue":t[0]||(t[0]=e=>j.value=e),onChange:le},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(V.value,(e=>((0,l.wg)(),(0,l.j4)(o,{value:e.label},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.value),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])]),(0,l._)("div",{id:"post",onClick:Q})])}}},k=a(89);const A=(0,k.Z)(z,[["__scopeId","data-v-331ea963"]]);var E=A}}]);
//# sourceMappingURL=staticPicture.c9560c87.js.map