{"version":3,"file":"js/roleManage.e0b98c8d.js","mappings":"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","sources":["webpack://mgmt-frontend/./src/views/system/constColumns.js","webpack://mgmt-frontend/./src/components/tableContainer.vue","webpack://mgmt-frontend/./src/components/tableContainer.vue?de49","webpack://mgmt-frontend/./src/api/roleManage.js","webpack://mgmt-frontend/./src/views/system/roleManage.vue","webpack://mgmt-frontend/./src/views/system/roleManage.vue?e157","webpack://mgmt-frontend/./src/views/system/taskManage.vue","webpack://mgmt-frontend/./src/views/system/taskManage.vue?c503"],"sourcesContent":["// 用户管理表头\nexport const userListColumns = [\n  {\n    title: '工号',\n    dataIndex: 'workNo',\n  }, \n  {\n    title: '姓名',\n    dataIndex: 'name',\n    slotName : 'name',\n  },\n  {\n    title: '所属部门',\n    dataIndex: 'deptName',\n  },\n  {\n    title: '邮箱',\n    dataIndex: 'email',\n  }, \n  {\n    title: '账户状态',\n    dataIndex: 'flag',\n    slotName:'flag_view',\n        \n  },\n  {\n    title: '操作',\n    dataIndex: 'action',\n    slotName : 'action',\n  }\n];\n// 菜单管理表头\nexport const menuListColumns= [\n    {\n      title: '菜单名称',\n      dataIndex: 'name',\n      key: 'name',\n      width: '20%'\n    },\n    {\n      title: '图标',\n      dataIndex: 'icon',\n      key: 'icon',\n    },\n    {\n      title: '类型',\n      dataIndex: 'type',\n      key: 'type',\n      slotName : 'type_view'\n    },\n    {\n      title: '排序号',\n      dataIndex: 'sort',\n      key: 'sort',\n    },\n    {\n      title: 'URL',\n      dataIndex: 'url',\n      key: 'url',\n    },\n    {\n      title: '授权标识',\n      dataIndex: 'perms',\n      key: 'perms',\n    },\n    {\n      title: '操作',\n      dataIndex: 'action',\n      key: 'action',\n\n      slotName : 'action'\n    }\n  ]\n// 角色管理表头\nexport const roleListColumns = [\n    {\n        title: '角色名称',\n        dataIndex: 'name',\n      },\n      {\n        title: '备注',\n        dataIndex: 'remarks',\n        \n      },\n      {\n        title: '角色编码',\n        dataIndex: 'code',\n        \n      },\n      {\n        title: '创建时间',\n        dataIndex: 'createTime',\n        width : 200\n      },\n      {\n        title: '操作',\n        dataIndex: 'action',\n        slotName : 'action'\n      }\n]","<template>\n  <div>\n    <div>\n      <div class=\"m-b-20\">\n        <div class=\"flex-between\" style=\"height: 40px;\">\n          <a-radio-group type=\"button\" size=\"large\" :model-value=\"props.chekedValue\" @change=\"radioChange\">\n            <a-radio v-for=\"item of props.tabs\" :value=\"item.key\">{{ item.name }}</a-radio>\n          </a-radio-group>\n          <slot></slot>\n        </div>\n        <div>\n          <div class=\"tool-grid\">\n            <!-- 只看我的 -->\n            <div v-if=\"props.menuName === 'USER'\">\n              <a-switch :value=\"switchStatus\" @change=\"handleSwitch\">\n                <template #checked>ON</template>\n                <template #unchecked>OFF</template>\n              </a-switch>\n              <span>只看我的</span>\n            </div>\n            <!-- 导出excel -->\n            <a-button type=\"primary\" v-if=\"props.menuName === 'USER'\">\n              <template #icon>\n                <icon-download />\n              </template>\n              <template #default>导出excel</template>\n            </a-button>\n            <!-- 配置列 -->\n            <a-button class=\"config\" type=\"primary\" @click=\"handleSetColumns\" v-if=\"props.menuName === 'USER'\">\n              <template #icon>\n                <icon-home />\n              </template>\n              <template #default>配置列</template>\n            </a-button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- 表格内容 -->\n    <div>\n      <a-table\n        :columns=\"(props.tableColumns.length && props.tableColumns) || tableInfo.tableColumns\"\n        :data=\"(props.tableData.length && props.tableData) || tableInfo.tableData\"\n        column-resizable\n        :bordered=\"false\"\n        :scroll=\"{ x: '100%', y: props.scrollY }\"\n        :scrollbar=\"false\"\n        :loading=\"props.loading\"\n        :pagination=\"{\n          total: paginationTotal,\n          current: paginationCurrent,\n          pageSize: paginationPageSize,\n          showTotal: true,\n          showPageSize: true,\n          showJumper: true,\n          onChange: paginationChange,\n          onPageSizeChange: paginationPageSizeChange,\n        }\"\n      >\n        <template #type_view=\"{ record }\">\n          <div>{{ record.type === 0 ? \"目录\" : record.type === 1 ? \"菜单\" : \"按钮\" }}</div>\n        </template>\n        <template #role_view=\"{ record }\">\n          <div v-for=\"(item, i) in record.roles\" :key=\"i\">{{ item.name }}</div>\n        </template>\n        <template #flag_view=\"{ record }\">\n          <span class=\"red\" v-if=\"record.flag === 0\">禁用</span>\n          <span class=\"green\" v-if=\"record.flag === 1\">启用</span>\n        </template>\n        <template #action=\"{ record }\">\n          <a-popconfirm content=\"你确定要启用这个用户吗?\" type=\"error\" @ok=\"handleUpdateFlag(record)\">\n            <a-button type=\"text\" v-if=\"props.menuName == 'user' && record.flag === 0\">启用</a-button>\n          </a-popconfirm>\n          <a-divider v-if=\"props.menuName == 'user' && record.flag === 0\" direction=\"vertical\" />\n          <a-button type=\"text\" v-if=\"props.menuName == 'user' && record.flag === 0\" style=\"color: #999999\">禁用</a-button>\n          <a-button type=\"text\" v-if=\"props.menuName == 'user' && record.flag === 1\" style=\"color: #999999\">启用</a-button>\n          <a-divider v-if=\"props.menuName == 'user' && record.flag === 1\" direction=\"vertical\" />\n          <a-popconfirm content=\"你确定要禁用这个用户吗?\" type=\"error\" @ok=\"handleUpdateFlag(record)\">\n            <a-button type=\"text\" v-if=\"props.menuName == 'user' && record.flag === 1\">禁用</a-button>\n          </a-popconfirm>\n          <!-- 查看 -->\n          <a-button type=\"text\" v-if=\"props.menuName == 'USER'\" @click=\"handleDetail(record, 'view')\">查看</a-button>\n          <a-divider v-if=\"props.menuName == 'user'\" direction=\"vertical\" />\n          <!-- 编辑 -->\n          <a-button\n            v-if=\"permissions.includes('menu:edit') && record.code !== 'admin'\"\n            type=\"text\"\n            @click=\"handleEdit(record, 'edit')\"\n          >\n            编辑\n          </a-button>\n          <a-divider\n            v-if=\"props.menuName == 'menu' || (props.menuName == 'role' && record.code !== 'admin')\"\n            direction=\"vertical\"\n          />\n          <!-- 删除 -->\n          <a-popconfirm content=\"确定要删除吗?\" type=\"error\" @ok=\"handleDeleteMenu(record)\">\n            <a-button\n              type=\"text\"\n              v-if=\"\n                permissions.includes('menu:delete') &&\n                (props.menuName == 'menu' || (props.menuName == 'role' && record.code !== 'admin'))\n              \"\n            >\n              删除\n            </a-button>\n          </a-popconfirm>\n        </template>\n      </a-table>\n    </div>\n    <!-- 表单数据 -->\n    <a-modal v-model:visible=\"modalVisible\" title=\"选择表格项\">\n      <a-checkbox-group @change=\"columnSelected\" v-model=\"defaultCheckList\">\n        <a-checkbox v-for=\"item of setColumns\" :key=\"item.dataIndex\" :value=\"item.dataIndex\">\n          {{ item.title }}\n        </a-checkbox>\n      </a-checkbox-group>\n      <template #footer>\n        <a-button type=\"primary\" @click=\"columnOK\">确定</a-button>\n      </template>\n    </a-modal>\n  </div>\n</template>\n\n<script setup>\nimport { reactive, ref } from \"vue\";\nimport { userListColumns } from \"../views/system/constColumns\";\nimport { Message } from \"@arco-design/web-vue\";\nimport { useMenuStore } from \"../store/index\";\nconst permissions = useMenuStore().getPermission;\nconst props = defineProps({\n  tabs: {\n    type: Array,\n    default: () => [],\n  },\n  chekedValue: {\n    type: String,\n    default: \"\",\n  },\n  // 表头\n  tableColumns: {\n    type: Array,\n    default: () => [],\n  },\n  // 表单数据\n  tableData: {\n    type: Array,\n    default: () => [],\n  },\n  // 菜单名称(根据菜单名称判断显示指定按钮)\n  menuName: {\n    type: String,\n    default: \"\",\n  },\n  loading : {\n    type : Boolean,\n    default : false\n  },\n  scrollY : {\n    type : String,\n    default : '600px'\n  },\n  setColumns: {\n    type: Array,\n    default: () => [],\n  },\n  switchStatus: {\n    type: Boolean,\n    default: false,\n  },\n  exportExcel: {\n    type: String,\n    default: \"\",\n  },\n  paginationTotal: {\n    type: Number,\n    default: 10,\n  },\n  paginationCurrent: {\n    type: Number,\n    default: 1,\n  },\n  paginationPageSize: {\n    type: Number,\n    default: 10,\n  },\n});\n// 表头信息\nconst tableInfo = reactive({\n  tableColumns: [\n    {\n      title: \"自定义列1\",\n      dataIndex: \"customColumn1\",\n      width: 200,\n    },\n    {\n      title: \"自定义列2\",\n      dataIndex: \"customColumn2\",\n      width: 200,\n    },\n    {\n      title: \"自定义列3\",\n      dataIndex: \"customColumn3\",\n      width: 200,\n    },\n    {\n      title: \"自定义列4\",\n      dataIndex: \"customColumn4\",\n      width: 200,\n    },\n    {\n      title: \"自定义列5\",\n      dataIndex: \"customColumn5\",\n      width: 200,\n    },\n    {\n      title: \"自定义列6\",\n      dataIndex: \"customColumn6\",\n      width: 200,\n    },\n  ],\n  tableData: [],\n});\nconst emit = defineEmits([\n  \"switchClick\",\n  \"paginationCurrentChange\",\n  \"paginationPageSizeChange\",\n  \"handleEdit\",\n  \"handleDeleteMenu\",\n  \"handleUpdateFlag\",\n  \"columnOK\",\n  \"radioChange\",\n]);\nconst modalVisible = ref(false);\nconst defaultCheckList = ref([]);\nconst checkedValues = ref([]);\nconst userTableColumns = ref(userListColumns);\nlet actionColumn = userListColumns.filter(item => item.dataIndex !== \"action\") || [];\n// 打开配置列\nconst handleSetColumns = () => {\n  modalVisible.value = true;\n};\n// 配置列多选框更改\nconst columnSelected = values => {\n  checkedValues.value = values;\n};\n// 打开配置列勾选表格中已有的表头\nconst setTableColumns = () => {\n  let cachColumns = JSON.parse(localStorage.getItem(\"userListColumns\"));\n  if (cachColumns) {\n    userTableColumns.value = cachColumns;\n    defaultCheckList.value = cachColumns.map(item => item.dataIndex);\n  } else {\n    var selectedColumsArr = [];\n    actionColumn.forEach(item => {\n      selectedColumsArr.push(item.dataIndex);\n      defaultCheckList.value = selectedColumsArr;\n    });\n  }\n};\nsetTableColumns();\n// 配置列确认\nconst columnOK = () => {\n  if (defaultCheckList.value.length === 1 && defaultCheckList.value[0] === \"action\") {\n    return Message.error(\"至少选择一项\");\n  } else {\n    emit(\"columnOK\", defaultCheckList.value);\n    modalVisible.value = false;\n  }\n};\n// 只看我的\nconst handleSwitch = bool => {\n  emit(\"switchClick\", !bool);\n};\n// 更改当前页\nconst paginationChange = current => {\n  emit(\"paginationCurrentChange\", current);\n};\n// 更改页容量\nconst paginationPageSizeChange = pageSize => {\n  emit(\"paginationPageSizeChange\", pageSize);\n};\n// 编辑\nconst handleEdit = (record, type) => {\n  emit(\"handleEdit\", record, type);\n};\n// 删除\nconst handleDeleteMenu = record => {\n  emit(\"handleDeleteMenu\", record);\n};\n// 查看\nconst handleDetail = record => {\n  emit(\"handleDetail\", record);\n};\n// 更改状态\nconst handleUpdateFlag = record => {\n  emit(\"handleUpdateFlag\", record);\n};\n//tab切换\nconst radioChange = val => {\n  emit(\"radioChange\", val);\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.header-grid {\n  display: grid;\n  grid-template-columns: 10fr 6fr;\n  gap: 20px;\n}\n.tool-grid {\n  display: grid;\n  grid-template-columns: repeat(3, auto);\n  column-gap: 15px;\n  row-gap: 20px;\n  grid-auto-flow: row;\n}\n.m-b-20 {\n  margin-bottom: 20px;\n}\n.config {\n  position: absolute;\n  width: 100px;\n  top: 210px;\n  height: 36px;\n  right: 70px;\n}\n</style>\n","import script from \"./tableContainer.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./tableContainer.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./tableContainer.vue?vue&type=style&index=0&id=53477c82&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/lijiaxin/Documents/workspace/hydsoft-mgmt-frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-53477c82\"]])\n\nexport default __exports__","import request from '@/utils/request'\n\nexport function roleList (parameter) {\n    return request({\n        url: '/system/role/list?code=' + parameter.code + '&pageNum=' + parameter.pageNum + '&pageSize=' + parameter.pageSize,\n        method: 'get'\n    })\n}\n\nexport function addRole (parameter) {\n    return request({\n        url: '/system/role/save',\n        method: 'post',\n        data: parameter\n    })\n}\n\nexport function editRole (parameter) {\n    return request({\n        url: '/system/role/update',\n        method: 'put',\n        data: parameter\n    })\n}\n\nexport function delRole (parameter) {\n    return request({\n        url: '/system/role/delete?roleId=' + parameter.id,\n        method: 'delete'\n    })\n}\n\nexport function roleInfo (parameter) {\n    return request({\n        url: '/system/role/info?roleId=' + parameter.id,\n        method: 'get'\n    })\n}","<template>\n  <div class=\"defaultPadding\">\n    <!-- 搜索栏 -->\n    <a-space>\n      <span>角色编码：</span>\n      <a-input v-model=\"roleCode\" placeholder=\"请输入角色编码\" class=\"w-200\" />\n      <a-button class=\"m-l-16\" type=\"primary\" @click=\"searchBase\">\n        <template #icon>\n          <icon-search />\n        </template>\n        <template #default>搜索</template>\n      </a-button>\n      <a-button class=\"m-l-8\" @click=\"setBase\">\n        <template #icon>\n          <icon-refresh />\n        </template>\n        <template #default>重置</template>\n      </a-button>\n    </a-space>\n    <!-- 新建角色 -->\n    <div class=\"m-t-20\">\n      <a-button type=\"primary\" @click=\"handleDetail({}, 'new')\" v-if=\"permissions.includes('role:add')\">\n        <template #icon>\n          <icon-plus />\n        </template>\n        <template #default>新建角色</template>\n      </a-button>\n    </div>\n    <!-- 表格内容 -->\n    <TableContainer\n      class=\"m-t-20\"\n      column-resizable\n      :scroll=\"{ y: 600 }\"\n      :scrollbar=\"false\"\n      :loading=\"dataContent.loading\"\n      :paginationTotal=\"dataContent.pagination.total\"\n      :paginationPageSize=\"dataContent.pagination.pageSize\"\n      :paginationCurrent=\"dataContent.pagination.pageNum\"\n      :tableColumns=\"dataContent.columns\"\n      :table-data=\"dataContent.dataSource\"\n      :menu-name=\"dataContent.menuName\"\n      @handleEdit=\"handleDetail\"\n      @handleDeleteMenu=\"delRoleItem\"\n      @paginationCurrentChange=\"paginationCurrentChange\"\n      @paginationPageSizeChange=\"paginationPageSizeChange\"\n    ></TableContainer>\n    <!-- 添加角色表单 -->\n    <a-modal :mask=\"true\" v-model:visible=\"addRoleModal\" title=\"添加角色\">\n      <a-form :model=\"form\" ref=\"formRef\">\n        <a-form-item field=\"name\" label=\"角色名称\" :rules=\"[{ required: true, message: '请输入角色名称' }]\">\n          <a-input type=\"text\" placeholder=\"请输入角色名称\" v-model=\"form.name\"></a-input>\n        </a-form-item>\n        <a-form-item field=\"code\" label=\"角色编码\" :rules=\"[{ required: true, message: '请输入角色编码' }]\">\n          <a-input type=\"text\" placeholder=\"请输入角色编码\" v-model=\"form.code\"></a-input>\n        </a-form-item>\n        <a-form-item field=\"remarks\" label=\"备注\" :rules=\"[{ required: true, message: '请输入备注' }]\">\n          <a-input type=\"text\" placeholder=\"请输入备注\" v-model=\"form.remarks\"></a-input>\n        </a-form-item>\n        <a-form-item field=\"isShowTab\" label=\"显示页签\" :rules=\"[{ required: true, message: '请选择是否显示页签' }]\">\n          <a-radio-group v-model:model-value=\"form.isShowTab\" style=\"margin-top: 10px;\">\n            <a-radio :value=\"true\">是</a-radio>\n            <a-radio :value=\"false\">否</a-radio>\n          </a-radio-group>\n        </a-form-item>\n        <a-form-item field=\"defaultCheckedList\" label=\"授权菜单\">\n          <a-tree\n            :checkable=\"true\"\n            :checkStrictly=\"false\"\n            :data=\"casList\"\n            v-model:checked-keys=\"defaultCheckedList\"\n            @check=\"onCheckTree\"\n          />\n        </a-form-item>\n      </a-form>\n      <template #footer>\n        <a-button @click=\"handleModalCancel\">取消</a-button>\n        <a-button type=\"primary\" @click=\"handleModalOk\">确定</a-button>\n      </template>\n    </a-modal>\n  </div>\n</template>\n\n<script setup>\nimport { reactive, ref, toRaw, onBeforeMount } from \"vue\";\nimport { roleListColumns } from \"./constColumns\";\nimport { roleList, addRole, editRole, delRole, roleInfo, } from \"@/api/roleManage\";\nimport { list } from \"@/api/menu\";\nimport { Message } from \"@arco-design/web-vue\";\nimport TableContainer from \"@/components/tableContainer.vue\";\nimport { useMenuStore } from \"../../store/index\";\nimport { getCurrentInstance } from \"@vue/runtime-core\";\nconst permissions = useMenuStore().getPermission;\nlet $bus = getCurrentInstance().appContext.config.globalProperties.$bus;\nonBeforeMount(() => {\n  $bus.emit(\"updateStructure\", [{ type: \"text\", color: \"#333\", msg: \"角色列表\" }]);\n});\n\nconst roleCode = ref(\"\");\nconst dataContent = reactive({\n  columns: roleListColumns,\n  dataSource: [],\n  loading: false,\n  pagination: {\n    pageNum: 1,\n    pageSize: 10,\n    total: 0,\n  },\n  menuName: \"role\",\n});\nconst addRoleModal = ref(false);\nconst form = reactive({\n  name: \"\",\n  code: \"\",\n  remarks: \"\",\n});\nconst defaultCheckedList = ref([]);\nconst casList = ref([]);\n\nconst roleId = ref(\"\");\nconst selectedList = ref([]);\nconst formRef = ref();\n\nconst treeData = arr => {\n  const treeArr = [];\n  arr.forEach(item => {\n    let obj = { title: item.name, key: item.id };\n    if (item.children && item.children.length) {\n      obj.children = treeData(item.children);\n      treeArr.push(obj);\n    } else {\n      treeArr.push(obj);\n    }\n  });\n  return treeArr;\n};\n// 获取角色管理列表\nconst getRoleList = () => {\n  dataContent.loading = true;\n  let obj = {\n    code: roleCode.value,\n    pageNum: dataContent.pagination.pageNum,\n    pageSize: dataContent.pagination.pageSize,\n  };\n  roleList(obj).then(res => {\n    if (res.code === \"000000000000\") {\n      res.data.list.forEach((item, i) => {\n        item.key = i;\n      });\n      dataContent.dataSource = res.data.list;\n      dataContent.pagination.total = Number(res.data.total);\n    }\n    dataContent.loading = false;\n  });\n};\ngetRoleList();\n// 获取菜单列表\nconst getMenuList = () => {\n  list().then(res => {\n    if (res.code === \"000000000000\") {\n      let arr = [];\n      res.data.forEach(item => {\n        item.children = [];\n        item.key = item.id;\n        if (item.parentId === \"000000\") {\n          arr.push(item);\n        }\n        res.data.forEach(val => {\n          if (val.parentId === item.id) {\n            item.children.push(val);\n          }\n        });\n      });\n      casList.value = treeData(arr.slice());\n    }\n  });\n};\ngetMenuList();\n// 查询\nconst searchBase = () => {\n  getRoleList();\n};\n// 重置\nconst setBase = () => {\n  roleCode.value = \"\";\n  getRoleList();\n};\n// 编辑\nconst handleDetail = (obj, type) => {\n  formRef.value.resetFields();\n  addRoleModal.value = true;\n  roleId.value = type === \"new\" ? \"\" : obj.id;\n  if (type === \"edit\") {\n    roleInfo(obj).then(res => {\n      form.name = res.data.name;\n      form.code = res.data.code;\n      form.remarks = res.data.remarks;\n      form.isShowTab = res.data.isShowTab\n      let newArr = [];\n      selectedList.value = res.data.menuIdList;\n      res.data.menuIdList.forEach(item => {\n        checkedSelect(item, casList.value, newArr);\n      });\n      defaultCheckedList.value = newArr;\n    });\n  }\n};\n// 多选\nconst checkedSelect = (id, data, newArr) => {\n  data = toRaw(data);\n  data.forEach(item => {\n    if (item.key === id) {\n      if (!item.children) {\n        newArr.push(item.key);\n      }\n    } else {\n      if (item.children && item.children.length > 0) {\n        checkedSelect(id, item.children, newArr);\n      }\n    }\n  });\n};\n// 删除\nconst delRoleItem = record => {\n  delRole(record).then(res => {\n    if (res.code === \"000000000000\") {\n      Message.success(\"删除成功!\");\n      getRoleList();\n    } else {\n      Message.error(res.message);\n    }\n  });\n};\n// 表单取消\nconst handleModalCancel = () => {\n  addRoleModal.value = false;\n};\n// 表单确定\nconst handleModalOk = () => {\n  if (selectedList.value.length === 0) {\n    Message.error(\"请选择菜单权限\");\n    return;\n  }\n  let values = toRaw(form);\n  values.id = roleId.value;\n  values.menuIdList = selectedList.value;\n  formRef.value.validate(err => {\n    if (!err) {\n      values.isShowTab = values.isShowTab?1:0\n      if (values.id === \"\") {\n        addRole(values).then(res => {\n          if (res.code === \"000000000000\") {\n            Message.success(\"新建成功!\");\n            getRoleList();\n          } else {\n            Message.error(res.message);\n          }\n        });\n      } else {\n        editRole(values).then(res => {\n          if (res.code === \"000000000000\") {\n            Message.success(\"更新成功!\");\n            getRoleList();\n          } else {\n            Message.error(res.message);\n          }\n        });\n      }\n      addRoleModal.value = false;\n    }\n  });\n};\nconst onCheckTree = (checkedKeys, info) => {\n  let list = [];\n  list = list.concat(checkedKeys).concat(info.halfCheckedKeys);\n  selectedList.value = list;\n};\n// 更改当前页码\nconst paginationCurrentChange = current => {\n  dataContent.pagination.pageNum = current;\n  getRoleList();\n};\n// 更改页容量\nconst paginationPageSizeChange = pageSize => {\n  dataContent.pagination.pageSize = pageSize;\n  getRoleList();\n};\n</script>\n\n<style lang=\"scss\">\n.w-200 {\n  width: 200px;\n}\n\n.m-t-20 {\n  margin-top: 20px;\n}\n</style>\n","import script from \"./roleManage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./roleManage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./roleManage.vue?vue&type=style&index=0&id=5c62daea&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n  <div>\n    任务管理(待开发中...)\n  </div>\n</template>\n\n<script setup>\n\n</script>\n\n<style>\n\n</style>","import { render } from \"./taskManage.vue?vue&type=template&id=e22dbe84\"\nconst script = {}\n\nimport exportComponent from \"/Users/lijiaxin/Documents/workspace/hydsoft-mgmt-frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["userListColumns","title","dataIndex","slotName","menuListColumns","key","width","roleListColumns","permissions","useMenuStore","getPermission","tableInfo","reactive","tableColumns","tableData","modalVisible","ref","defaultCheckList","checkedValues","userTableColumns","actionColumn","filter","item","handleSetColumns","value","columnSelected","values","setTableColumns","cachColumns","JSON","parse","localStorage","getItem","map","selectedColumsArr","forEach","push","columnOK","length","Message","error","emit","handleSwitch","bool","paginationChange","current","paginationPageSizeChange","pageSize","handleEdit","record","type","handleDeleteMenu","handleDetail","handleUpdateFlag","radioChange","val","__exports__","roleList","parameter","request","url","code","pageNum","method","addRole","data","editRole","delRole","id","roleInfo","$bus","getCurrentInstance","appContext","config","globalProperties","onBeforeMount","color","msg","roleCode","dataContent","columns","dataSource","loading","pagination","total","menuName","addRoleModal","form","name","remarks","defaultCheckedList","casList","roleId","selectedList","formRef","treeData","arr","treeArr","obj","children","getRoleList","then","res","list","i","Number","getMenuList","parentId","slice","searchBase","setBase","resetFields","isShowTab","newArr","menuIdList","checkedSelect","toRaw","delRoleItem","success","message","handleModalCancel","handleModalOk","validate","err","onCheckTree","checkedKeys","info","concat","halfCheckedKeys","paginationCurrentChange","_createElementBlock","script","render"],"sourceRoot":""}