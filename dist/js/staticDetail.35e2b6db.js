"use strict";(self["webpackChunkoms_frontend"]=self["webpackChunkoms_frontend"]||[]).push([[847],{3669:function(e,l,t){t.d(l,{J4:function(){return n},bu:function(){return i},d2:function(){return u},n0:function(){return d}});var a=t(4471);function n(e){return(0,a.Z)({url:"/mdm/listPieChartStatistics",method:"post",data:e})}function d(e){return(0,a.Z)({url:"/mdm/listCauseGroupStatistics",method:"post",data:e})}function i(e){return(0,a.Z)({url:"/mdm/listHistogramStatistics",method:"post",data:e})}function u(e){return(0,a.Z)({url:"/mdm/listStatisticsDetail",method:"post",data:e})}},7109:function(e,l,t){t.r(l),t.d(l,{default:function(){return k}});t(7658);var a=t(3396),n=t(7139),d=t(3669),i=t(4870),u=t(4842),r=t(2483);const o=[{title:"部门名称",dataIndex:"deptName",width:158,slotName:"deptName"},{title:()=>(0,a.Wm)("div",null,[(0,a.Wm)("p",null,[(0,a.Uk)("部门"),(0,a.Wm)("br",null,null),(0,a.Uk)("负责人")])]),dataIndex:"deptLeaderName",align:"center",width:74},{title:()=>(0,a.Wm)("div",null,[(0,a.Wm)("p",null,[(0,a.Uk)("在职人员"),(0,a.Wm)("br",null,null),(0,a.Uk)("总数")])]),dataIndex:"total",headerCellStyle:{"text-align":"center"},bodyCellStyle:{"text-align":"right"},width:90},{title:()=>(0,a.Wm)("div",null,[(0,a.Wm)("p",null,[(0,a.Uk)("在职"),(0,a.Wm)("br",null,null),(0,a.Uk)("C1人数")])]),dataIndex:"c1",width:78,headerCellStyle:{"text-align":"center"},bodyCellStyle:{"text-align":"right"}},{title:()=>(0,a.Wm)("div",null,[(0,a.Wm)("p",null,[(0,a.Uk)("在职"),(0,a.Wm)("br",null,null),(0,a.Uk)("G人数")])]),dataIndex:"g",headerCellStyle:{"text-align":"center"},bodyCellStyle:{"text-align":"right"},width:72},{title:()=>(0,a.Wm)("div",null,[(0,a.Wm)("p",null,[(0,a.Uk)("在职"),(0,a.Wm)("br",null,null),(0,a.Uk)("C2人数")])]),dataIndex:"c2",headerCellStyle:{"text-align":"center"},bodyCellStyle:{"text-align":"right"},width:78},{title:()=>(0,a.Wm)("div",null,[(0,a.Wm)("p",null,[(0,a.Uk)("在职"),(0,a.Wm)("br",null,null),(0,a.Uk)("S人数")])]),dataIndex:"s",headerCellStyle:{"text-align":"center"},bodyCellStyle:{"text-align":"right"},width:72},{title:()=>(0,a.Wm)("div",null,[(0,a.Wm)("p",null,[(0,a.Uk)("在职"),(0,a.Wm)("br",null,null),(0,a.Uk)("R人数")])]),dataIndex:"r",headerCellStyle:{"text-align":"center"},bodyCellStyle:{"text-align":"right"},width:72},{title:()=>(0,a.Wm)("div",null,[(0,a.Wm)("p",null,[(0,a.Uk)("在职人员"),(0,a.Wm)("br",null,null),(0,a.Uk)("正式人数")])]),dataIndex:"official",headerCellStyle:{"text-align":"center"},bodyCellStyle:{"text-align":"right"},width:90},{title:()=>(0,a.Wm)("div",null,[(0,a.Wm)("p",null,[(0,a.Uk)("在职人员"),(0,a.Wm)("br",null,null),(0,a.Uk)("兼职人数")])]),dataIndex:"pluralistic",headerCellStyle:{"text-align":"center"},bodyCellStyle:{"text-align":"right"},width:90},{title:()=>(0,a.Wm)("div",null,[(0,a.Wm)("p",null,[(0,a.Uk)("在职人员"),(0,a.Wm)("br",null,null),(0,a.Uk)("实习人数")])]),dataIndex:"practice",headerCellStyle:{"text-align":"center"},bodyCellStyle:{"text-align":"right"},width:90},{title:()=>(0,a.Wm)("div",null,[(0,a.Wm)("p",null,[(0,a.Uk)("入职"),(0,a.Wm)("br",null,null),(0,a.Uk)("人数")])]),dataIndex:"entry",headerCellStyle:{"text-align":"center"},bodyCellStyle:{"text-align":"right"},width:60},{title:()=>(0,a.Wm)("div",null,[(0,a.Wm)("p",null,[(0,a.Uk)("离职"),(0,a.Wm)("br",null,null),(0,a.Uk)("人数")])]),dataIndex:"dimission",headerCellStyle:{"text-align":"center"},bodyCellStyle:{"text-align":"right"},width:60}];var c=t(4722),m=t(6797),s=t.n(m);const p={class:"defaultPadding"},g=(0,a._)("span",null,"部门名称：",-1),h=(0,a._)("span",null,"日期：",-1),f={class:"pointer"};var y={__name:"staticDetail",setup(e){let l=(0,a.FN)().appContext.config.globalProperties.$bus;const t=(0,r.tv)(),m=((0,r.yj)(),(0,i.iH)(null)),y=(0,i.iH)(""),x=(0,i.iH)(new Date),k=(0,i.iH)(history.state.deptName),v=(0,i.iH)(["全部","BG1","BG2","BG3","BG4"]),W=(0,i.qj)({loading:!1,columns:o,defaultExpandedKeys:[],dataSource:[]});(0,a.m0)((()=>{l.emit("updateStructure",[{type:"text",color:"#333",msg:"人员分析"},{type:"button",color:"#5370FD",msg:"人员统计",params:"level1"},{type:"text",color:"#333",msg:"人员明细"}])})),l.on("goBack",(e=>{if("level1"==e){let e=[{type:"text",color:"#333",msg:"人员分析"},{type:"text",color:"#333",msg:"人员统计"}];l.emit("updateStructure",e),t.push({path:"/staticPicture",state:{deptName:k.value}})}})),(0,a.Ah)((()=>{l.off("goBack")}));const w=e=>{W.defaultExpandedKeys=e},b=e=>e.valueOf()<s()("2023-01-01 00:00:00").valueOf()||e.valueOf()>s()().valueOf(),C=e=>{const l=e.lastIndexOf("-");return e.substring(l+1)},S=e=>{x.value=new Date(e),I()},U=e=>{k.value=e,I()};(0,a.bv)((()=>{if(m.value){let e=m.value.$el;(0,a.Y3)((()=>{let l=window.innerHeight,t=e.getBoundingClientRect().top;y.value=l-t-30+"px"}))}})),(0,a.wF)((()=>{I()}));const _=e=>(Array.isArray(e)&&e.forEach((e=>{e.c1=(0,c.ke)(e.c1),e.c2=(0,c.ke)(e.c2),e.g=(0,c.ke)(e.g),e.r=(0,c.ke)(e.r),e.s=(0,c.ke)(e.s),e.entry=(0,c.ke)(e.entry),e.official=(0,c.ke)(e.official),e.practice=(0,c.ke)(e.practice),e.total=(0,c.ke)(e.total),e.dimission=(0,c.ke)(e.dimission),e.pluralistic=(0,c.ke)(e.pluralistic),e.children&&_(e.children)})),e),I=()=>{var e=x.value.getFullYear(),l=x.value.getMonth()+1;l=l<10?"0"+l:l;var t=x.value.getDate();t=t<10?"0"+t:t;const a=new FormData;"全部"!==k.value&&a.append("deptName",k.value),a.append("time",`${e}-${l}-${t}`),W.loading=!0,(0,d.d2)(a).then((e=>{if("000000000000"===e.code&&e.data&&e.data.length>0){let l=(0,c.th)(e.data,"key","deptName");W.dataSource=_(l);let t=[];e.data.forEach((e=>t.push(e.deptName))),W.defaultExpandedKeys=t}})).catch((e=>{u.Z.error(e.message||"请求失败")})).finally((()=>{W.loading=!1}))};return(e,l)=>{const t=(0,a.up)("a-option"),d=(0,a.up)("a-select"),i=(0,a.up)("a-space"),u=(0,a.up)("a-col"),r=(0,a.up)("a-date-picker"),o=(0,a.up)("a-row"),c=(0,a.up)("a-popover"),s=(0,a.up)("a-table");return(0,a.wg)(),(0,a.iD)("div",p,[(0,a.Wm)(o,{gutter:[14,20],align:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{flex:"230px"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[g,(0,a.Wm)(d,{modelValue:k.value,"onUpdate:modelValue":l[0]||(l[0]=e=>k.value=e),placeholder:"请选择部门",style:{width:"130px"},onChange:U},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(v.value,((e,l)=>((0,a.wg)(),(0,a.j4)(t,{value:e,key:l},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,a.Wm)(u,{flex:"200px"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[h,(0,a.Wm)(r,{format:"YYYY-MM-DD","allow-clear":!1,disabledDate:b,"model-value":x.value,onChange:S,style:{width:"130px"}},null,8,["model-value"])])),_:1})])),_:1}),(0,a.Wm)(u,{flex:"85px"}),(0,a.Wm)(u,{flex:"auto"})])),_:1}),(0,a.Wm)(o,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{span:24},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{ref_key:"level1tableRef",ref:m,class:"m-t-20","column-resizable":"",columns:W.columns,data:W.dataSource,loading:W.loading,"expanded-keys":W.defaultExpandedKeys,scrollbar:!1,scroll:{maxHeight:y.value},onExpandedChange:w,pagination:!1},{deptName:(0,a.w5)((({record:e})=>[(0,a.Wm)(c,{"content-style":{background:"rgba(0,0,0,.8)",color:"#fff"},"arrow-style":{background:"rgba(0,0,0,.8)"}},{content:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.deptName),1)])),default:(0,a.w5)((()=>[(0,a._)("span",f,(0,n.zw)(C(e.deptName)),1)])),_:2},1032,["content-style","arrow-style"])])),_:1},8,["columns","data","loading","expanded-keys","scroll"])])),_:1})])),_:1})])}}};const x=y;var k=x}}]);
//# sourceMappingURL=staticDetail.35e2b6db.js.map