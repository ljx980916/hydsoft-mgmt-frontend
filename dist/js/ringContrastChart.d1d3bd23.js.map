{"version":3,"file":"js/ringContrastChart.d1d3bd23.js","mappings":"sWAEO,SAASA,EAAqBC,GACjC,OAAOC,EAAAA,EAAAA,GAAQ,CACXC,IAAK,oCACLC,OAAQ,OACRC,KAAMJ,GAEd,CAEO,SAASK,EAAsBL,GAClC,OAAOC,EAAAA,EAAAA,GAAQ,CACXC,IAAK,qCACLC,OAAQ,OACRC,KAAMJ,GAEd,CAGO,SAASM,EAAeN,GAC3B,OAAOC,EAAAA,EAAAA,GAAQ,CACXC,IAAK,+BACLC,OAAQ,OACRC,KAAMJ,GAEd,CAGO,SAASO,EAAmBP,GAC/B,OAAOC,EAAAA,EAAAA,GAAQ,CACXC,IAAK,mCACLC,OAAQ,OACRC,KAAMJ,GAEd,CAGO,SAASQ,EAA2BR,GACvC,OAAOC,EAAAA,EAAAA,GAAQ,CACXC,IAAK,kCACLC,OAAQ,OACRC,KAAMJ,GAEd,CAEO,SAASS,EAA8BT,GAC1C,OAAOC,EAAAA,EAAAA,GAAQ,CACXC,IAAK,6CACLC,OAAQ,OACRC,KAAMJ,GAEd,CAEO,SAASU,EAAkBV,GAC9B,OAAOC,EAAAA,EAAAA,GAAQ,CACXC,IAAK,iCACLC,OAAQ,OACRC,KAAMJ,GAEd,CAGO,SAASW,EAAYX,GACxB,OAAOC,EAAAA,EAAAA,GAAQ,CACXC,IAAK,4BACLC,OAAQ,OACRC,KAAMJ,GAEd,CAGO,SAASY,EAAWZ,GACvB,OAAOC,EAAAA,EAAAA,GAAQ,CACXC,IAAK,2BACLC,OAAQ,OACRC,KAAMJ,GAEd,C,wXCRA,MAAMa,EAAWC,EAAQ,MACnBC,EAAYD,EAAQ,MACpBE,EAAYF,EAAQ,MAC1B,IAAI,SAAEG,EAAQ,SAACC,EAAQ,OAACC,EAAM,MAACC,EAAK,WAACC,EAAU,aAACC,EAAY,YAACC,EAAW,UAACC,EAAS,QAACC,EAAO,WAACC,GAAeC,OAAOC,QAAQC,MAErHC,GAAOC,EAAAA,EAAAA,MAAqBC,WAAWC,OAAOC,iBAAiBJ,KACnE,MAAMK,EAAcR,OAAOQ,YACrBC,GAAoBC,EAAAA,EAAAA,IAAI,MACxBC,GAAwBD,EAAAA,EAAAA,KAAI,GAClC,IAKIE,EALAC,EAAgB,CAChBC,KAAO,KACPC,SAAW,KACXC,QAAU,MAGd,MAAMC,GAAiBP,EAAAA,EAAAA,IAAI,mBACrBQ,GAAkBC,EAAAA,EAAAA,IAAW,CAAC,SAC9BC,GAAkBV,EAAAA,EAAAA,IAAInB,GACtB8B,EAAc,KAChBC,GAAc,EAEZC,EAAmB,KACrB,OAAQ7B,GACJ,IAAK,OACD8B,IACA,MACJ,IAAK,WACDC,IACA,MACJ,IAAK,UACDC,IACA,MACJ,QACI,MAAM,EAGZC,GAAkBC,EAAAA,EAAAA,IAAS,CAC7BC,SAAU,EACVC,WAAa,GACbC,QAAU,GACVC,SAAU,IAERC,EAAmB,KAErB,GADAN,EAAgBE,SAAU,EACY,IAAnCF,EAAgBI,QAAQG,OACvB,OAAQxC,GACJ,IAAK,OACDyC,IACA,MACJ,IAAK,WACDC,IACA,MACJ,IAAK,UACDC,IACA,MACJ,QACI,MAEZ,EAEEF,EAAc,KAChB,GAAsC,IAAnCR,EAAgBI,QAAQG,OAAa,CACpCP,EAAgBK,SAAU,EAC1B,IAAIM,EAAS,CACT/C,UAAWgD,EAAAA,EAAAA,IAAMnB,KAErBhD,EAAAA,EAAAA,IAAqBkE,GAAQE,MAAKC,IAC9B,GAAgB,QAAbA,EAAIC,KAAe,CAClB,SAASC,EAAqBC,GAC1BA,EAAIC,SAAQC,IACRA,EAAKC,MAAQD,EAAKtD,OACfsD,GAAME,UAAUd,OACfS,EAAqBG,EAAKE,iBAEnBF,EAAKE,QAChB,GAER,CACAL,EAAqBF,EAAIhE,MACzBkD,EAAgBI,QAAUU,EAAIhE,IAClC,MACIwE,EAAAA,EAAQC,MAAMT,EAAIU,SAAW,SACjC,IACDC,OAAMC,IACLJ,EAAAA,EAAQC,MAAMG,EAAIF,SAAW,SAAS,IACvCG,SAAQ,KACP3B,EAAgBK,SAAU,CAAK,GAEvC,GAGEI,EAAqB,KACvB,GAAsC,IAAnCT,EAAgBI,QAAQG,OAAa,CACpCP,EAAgBK,SAAU,EAC1B,IAAIM,EAAS,CACT9C,SACAD,UAAWgD,EAAAA,EAAAA,IAAMnB,KAErBpC,EAAAA,EAAAA,IAAYsD,GAAQE,MAAKC,IACrB,GAAgB,QAAbA,EAAIC,KAAe,CAClB,SAASC,EAAqBC,GAC1BA,EAAIC,SAAQC,IACRA,EAAKC,MAAQD,EAAKrD,MAClBqD,EAAKS,MAAQT,EAAKrD,MACfqD,GAAME,UAAUd,OACfS,EAAqBG,EAAKE,iBAEnBF,EAAKE,QAChB,GAER,CACAL,EAAqBF,EAAIhE,MACzBkD,EAAgBI,QAAUU,EAAIhE,IAClC,MACIwE,EAAAA,EAAQC,MAAMT,EAAIU,SAAW,SACjC,IACDC,OAAMC,IACLJ,EAAAA,EAAQC,MAAMG,EAAIF,SAAW,SAAS,IACvCG,SAAQ,KACP3B,EAAgBK,SAAU,CAAK,GAEvC,GAEEK,EAAqB,KACvB,GAAsC,IAAnCV,EAAgBI,QAAQG,OAAa,CACpCP,EAAgBK,SAAU,EAC1B,IAAIM,EAAS,CACT9C,SACAD,UAAWgD,EAAAA,EAAAA,IAAMnB,KAErBnC,EAAAA,EAAAA,IAAWqD,GAAQE,MAAKC,IACpB,GAAgB,QAAbA,EAAIC,KAAe,CAClB,SAASC,EAAqBC,GAC1BA,EAAIC,SAAQC,IACRA,EAAKS,MAAQT,EAAKrD,MAClBqD,EAAKC,MAAQD,EAAKrD,MACfqD,GAAME,UAAUd,OACfS,EAAqBG,EAAKE,WAE1BF,EAAKS,MAAQT,EAAKlD,YAClBkD,EAAKC,MAAQD,EAAKlD,mBACXkD,EAAKE,SAChB,GAER,CACAL,EAAqBF,EAAIhE,MACzBkD,EAAgBI,QAAUU,EAAIhE,IAClC,MACIwE,EAAAA,EAAQC,MAAMT,EAAIU,SAAW,SACjC,IACDC,OAAMC,IACLJ,EAAAA,EAAQC,MAAMG,EAAIF,SAAW,SAAS,IACvCG,SAAQ,KACP3B,EAAgBK,SAAU,CAAK,GAEvC,GAEJ,IAAIwB,EAAa,GACbC,EAAsB,CACtB,UAAa,UACb,SAAW,UACX,UAAY,UACZ,SAAW,UACX,OAAS,UACT,UAAY,WAGhB,MAAMnC,EAAe,KACjB,IAAIoC,EAAczC,EAAe8B,MAAMY,MAAM,KACzCC,EAAe1C,EAAgB6B,MAC/Bc,EAAezC,EAAgB2B,MAC/Be,EAAc,IAAIJ,KAAeE,EAAaC,GAC9CE,EAAS,GACTC,EAAa,GACjBR,EAAWX,SAAQC,IACf,GAAGgB,EAAYG,SAASnB,EAAKoB,MAAM,CAC/B,IAAIC,EAAa,EACA,QAAdrB,EAAKsB,OACJD,EAAa,GAEA,SAAdrB,EAAKsB,OACJD,EAAa,GAEA,SAAdrB,EAAKsB,MAAiC,YAAdtB,EAAKoB,OAC5BC,EAAa,GAEjBH,EAAWK,KAAK,IACTvB,EACHwB,SAAU,GACVH,aACAI,UAAW,CACPC,MAAQf,EAAoBX,EAAKoB,SAGzCH,EAAOM,KAAKvB,EAAKoB,KACrB,KAELO,GAAaV,OAAS,CACjBtF,KAAMsF,EACNW,OAAS,EACTC,QAAU,KAEdF,GAAaG,OAASZ,EACnBpD,GACCA,EAAQiE,UAAUJ,IAAa,EACnC,EAGEjD,EAAgBsD,IAClB,IAAIxC,EAAS,CACT9C,OAASsF,GAAMtF,GAAU,GACzBuF,OAAO,eACPxF,UAAUgD,EAAAA,EAAAA,IAAMnB,IAEpBT,EAAsBoC,OAAQ,GAC9BpE,EAAAA,EAAAA,IAAe2D,GAAQE,MAAKC,IACxB,GAAgB,QAAbA,EAAIC,KAAe,CAClB,IAAI,MAAEsC,EAAK,OAACJ,GAAWnC,EAAIhE,KAC3BgG,GAAaO,MAAM,GAAGvG,KAAOuG,EAC7BxB,EAAaoB,EACbtD,GACJ,MACI2B,EAAAA,EAAQC,MAAMT,EAAIU,SAAW,SACjC,IACDC,OAAMC,IACLJ,EAAAA,EAAQC,MAAMG,EAAIF,SAAW,SAAS,IACvCG,SAAQ,KACP3C,EAAsBoC,OAAQ,CAAK,GACrC,EAGAtB,EAAmByC,IACrB,IAAI5B,EAAS,CACTyC,OAAO,gBACPxF,UAAUgD,EAAAA,EAAAA,IAAMnB,GAChB5B,OAAQA,GAAU,GAClBC,MAAQyE,GAAQzE,EAChBM,WAAaA,GAAc,IAE/BY,EAAsBoC,OAAQ,GAC9BnE,EAAAA,EAAAA,IAAmB0D,GAAQE,MAAKC,IAC5B,GAAgB,QAAbA,EAAIC,KAAe,CAClB,IAAI,MAAEsC,EAAK,OAACJ,GAAWnC,EAAIhE,KAC3BgG,GAAaO,MAAM,GAAGvG,KAAOuG,EAC7BxB,EAAaoB,EACbtD,GACJ,MACI2B,EAAAA,EAAQC,MAAMT,EAAIU,SAAW,SACjC,IACDC,OAAMC,IACLJ,EAAAA,EAAQC,MAAMG,EAAIF,SAAW,SAAS,IACvCG,SAAQ,KACP3C,EAAsBoC,OAAQ,CAAK,GACrC,EAGArB,EAAkBuD,IACpB,IAAI3C,EAAS,CACT/C,UAAUgD,EAAAA,EAAAA,IAAMnB,GAChB5B,OAASA,GAAU,GACnBuF,OAAO,gBACPlF,UAAWoF,GAAKpF,WAAaA,EAC7BC,QAAUmF,GAAKnF,SAAWA,GAE9Ba,EAAsBoC,OAAQ,GAC9BlE,EAAAA,EAAAA,IAA2ByD,GAAQE,MAAKC,IACpC,GAAgB,QAAbA,EAAIC,KAAe,CAClB,IAAI,MAAEsC,EAAK,OAACJ,GAAWnC,EAAIhE,KAC3BgG,GAAaO,MAAM,GAAGvG,KAAOuG,EAC7BxB,EAAaoB,EACbtD,GACJ,MACI2B,EAAAA,EAAQC,MAAMT,EAAIU,SAAW,SACjC,IACDC,OAAMC,IACLJ,EAAAA,EAAQC,MAAMG,EAAIF,SAAW,SAAS,IACvCG,SAAQ,KACP3C,EAAsBoC,OAAQ,CAAK,GACrC,EAGN,SAASmC,EAAetC,EAAIuC,GACxB,IAAIC,EAAoB,CAAC,EACzB,SAASC,EAAWzC,GAChBA,EAAIC,SAAQC,IACRwC,OAAOC,KAAKJ,GAAWtC,SAAQ2C,IACxB1C,EAAK0C,KAASL,EAAUK,KACvBJ,EAAoBtC,EACxB,IAEDA,GAAME,UAAUd,QACfmD,EAAWvC,EAAKE,SACpB,GAER,CAEA,OADAqC,EAAWzC,GACJwC,CACX,CACA,MAAMK,GAA0B,KAE5B,GADA9D,EAAgBE,SAAU,EACvBF,EAAgBG,WAAW,CAC1B,IAAIgB,EACJ,OAAQpD,GACJ,IAAK,OACJoD,EAAOoC,EAAcvD,EAAgBI,QAAQ,CAAEvC,OAASmC,EAAgBG,aACzE3B,EAAKuF,KAAK,kBAAmB,CACzB,CAAEtB,KAAM,OAAQI,MAAO,OAAQmB,IAAK,UACpC,CACIvB,KAAM,SACNI,MAAO,UACPmB,IAAK7C,EAAKxD,SACVsG,QAAS,KAGbpE,EAAasB,EAAKtD,QAClB,MACJ,IAAK,WACAsD,EAAOoC,EAAcvD,EAAgBI,QAAQ,CAAEtC,MAAQkC,EAAgBG,aACxE3B,EAAKuF,KAAK,kBAAmB,CACzB,CAAEtB,KAAM,OAAQI,MAAO,OAAQmB,IAAK,UACpC,CAAEvB,KAAM,OAAQI,MAAO,OAAQmB,IAAKrG,GACpC,CACI8E,KAAM,SACNI,MAAO,UACPmB,IAAK7C,EAAKrD,MACVmG,QAAS,KAGjBnE,EAAgBqB,EAAKrD,OACrB,MACJ,IAAK,UACAqD,EAAOoC,EAAcvD,EAAgBI,QAAQ,CAAEnC,YAAc+B,EAAgBG,aAC9E3B,EAAKuF,KAAK,kBAAmB,CACzB,CAAEtB,KAAM,OAAQI,MAAO,OAAQmB,IAAK,UACpC,CAAEvB,KAAM,OAAQI,MAAO,OAAQmB,IAAKrG,GACpC,CAAE8E,KAAM,OAAQI,MAAO,OAAQmB,IAAO,GAAE7C,EAAK+C,qBAAqBlG,KAClE,CACIyE,KAAM,SACNI,MAAO,UACPmB,IAAK7C,EAAKlD,YACVgG,QAAS,KAGjB,IAAI,SAAEE,EAAQ,QAAEhG,GAAYgD,EAC5BpB,EAAe,CACX7B,UAAWiG,EACXhG,YAEJ,MACJ,QACI,MAEZ,GAGE2E,GAAe,CACbsB,QAAS,CACLC,QAAS,OACTC,YAAa,CACT7B,KAAM,QACN8B,WAAY,CACR1B,MAAO,UAgBnB2B,KAAM,CACFC,KAAO,OAEXpB,MAAO,CACH,CACIZ,KAAM,WACNiC,SAAU,CACNC,gBAAgB,EAChBC,QAAQ,GAEZC,UAAU,CACNC,OAAS,IAEbhI,KAAM,KAGdiI,MAAO,CACH,CACIxC,KAAO,KACPE,KAAM,QACNuC,SAAU,OACVC,YAAY,EACZC,SAAU,CACNC,MAAM,EACNC,UAAW,CACPvC,MAAO,YAGfgC,UAAW,CACPhC,MAAO,OACPwC,UAAW,WAEfC,UAAU,CAACH,MAAM,IAErB,CACI5C,KAAO,KACPE,KAAM,QACNuC,SAAU,QACVC,YAAY,EACZC,SAAU,CACNC,MAAM,EACNC,UAAW,CACPvC,MAAO,YAGfgC,UAAW,CACPhC,MAAO,OACPwC,UAAW,WAEfC,UAAU,CAACH,MAAM,IAErB,CACI5C,KAAO,KACPE,KAAM,QACNuC,SAAU,QACVO,OAAQ,GACRC,YAAa,CAAC,IAAK,GACnBN,SAAU,CACNC,MAAM,EACNC,UAAW,CACPvC,MAAO,YAGfgC,UAAW,CACPhC,MAAO,OACPwC,UAAW,YAEfC,UAAU,CAACH,MAAM,KAIzBlC,OAAQ,I,OAEhBwC,EAAAA,EAAAA,KAAU,KACNxG,EAAUyG,EAAAA,IAAa9E,EAAAA,EAAAA,IAAM9B,IAC7BgE,IAAgB7D,EAAQiE,UAAUJ,GAAa,KAGnD6C,EAAAA,EAAAA,KAAc,KACV,IAAIC,EACJ,OAAQ7H,GACJ,IAAK,OACD6H,EAAY,CACR,CACInD,KAAM,SACNI,MAAO,UACPmB,IAAK,SACLC,QAAS,GAEb,CAAExB,KAAM,OAAQI,MAAO,OAAQmB,IAAKrG,IAExCqC,EAAgBG,WAAatC,EAC7BgC,IACA,MACJ,IAAK,WACD+F,EAAY,CACR,CAAEnD,KAAM,OAAQI,MAAO,OAAQmB,IAAK,UACpC,CACIvB,KAAM,SACNI,MAAO,UACPmB,IAAKrG,EACLsG,QAAS,GAEb,CAAExB,KAAM,OAAQI,MAAO,OAAQmB,IAAKlG,IAExCkC,EAAgBG,WAAa/B,EAC7B0B,IACA,MACJ,IAAK,UACD8F,EAAY,CACR,CAAEnD,KAAM,OAAQI,MAAO,OAAQmB,IAAK,UACpC,CAAEvB,KAAM,OAAQI,MAAO,OAAQmB,IAAKrG,GACpC,CACI8E,KAAM,SACNI,MAAO,UACPmB,IAAM,GAAElG,KAASE,IACjBiG,QAAS,GAEb,CAAExB,KAAM,OAAQI,MAAO,OAAQmB,IAAK/F,IAExC+B,EAAgBG,WAAajC,EAC7B6B,IACA,MACJ,QACI,MAERvB,EAAKuF,KAAK,kBAAmB6B,EAAU,I,y6GCtjB3C,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://oms-frontend/./src/api/lookChart.js","webpack://oms-frontend/./src/views/ringAnalyze/ringContrastChart.vue","webpack://oms-frontend/./src/views/ringAnalyze/ringContrastChart.vue?273a"],"sourcesContent":["import request from '@/utils/request'\n\nexport function queryYoyAnalysisDept(parameter) {\n    return request({\n        url: '/yoyAnalysis/queryYoyAnalysisDept',\n        method: 'post',\n        data: parameter\n    })\n}\n\nexport function queryYoyAnalysisChart(parameter) {\n    return request({\n        url: '/yoyAnalysis/queryYoyAnalysisChart',\n        method: 'post',\n        data: parameter\n    })\n}\n\n//部门维度环比分析看图\nexport function getDeptEcharts(parameter) {\n    return request({\n        url: '/LinkAnalysis/getDeptEcharts',\n        method: 'post',\n        data: parameter\n    })\n}\n\n//客户维度环比分析看图\nexport function getCustomerEcharts(parameter) {\n    return request({\n        url: '/LinkAnalysis/getCustomerEcharts',\n        method: 'post',\n        data: parameter\n    })\n}\n\n//项目维度环比分析看图\nexport function getProjectEchartsUsingPOST(parameter) {\n    return request({\n        url: '/LinkAnalysis/getProjectEcharts',\n        method: 'post',\n        data: parameter\n    })\n}\n// 同比分析客户维度看图\nexport function queryCustomerYoyAnalysisChart(parameter) {\n    return request({\n        url: '/yoyAnalysis/queryCustomerYoyAnalysisChart',\n        method: 'post',\n        data: parameter\n    })\n}\n// 同比分析项目维度看图\nexport function getProjectEcharts(parameter) {\n    return request({\n        url: '/yoyAnalysis/getProjectEcharts',\n        method: 'post',\n        data: parameter\n    })\n}\n\n//查询客户\nexport function getCustomer(parameter) {\n    return request({\n        url: '/LinkAnalysis/getCustomer',\n        method: 'post',\n        data: parameter\n    })\n}\n\n//查询项目\nexport function getProject(parameter) {\n    return request({\n        url: '/LinkAnalysis/getProject',\n        method: 'post',\n        data: parameter\n    })\n}\n","<template>\n    <div :class=\"['defaultPadding',innerHeight>1000 && 'yCenter']\" :style=\"{'height':innerHeight>1000?innerHeight+'px':'auto'}\">\n        <header class=\"flex-center\">\n            <div class=\"flex\">\n                <div class=\"m-r-40\">\n                    <span>\n                        <img :src=\"barChart\" width=\"20\" class=\"img\">\n                    </span>\n                    <a-radio-group type=\"button\" size=\"medium\" v-model:model-value=\"barChartSelect\" @change=\"selectChange\">\n                        <a-radio value=\"营业收入(总) 直接成本(总)\">收入&成本(总)</a-radio>\n                        <a-radio value=\"人均营业收入 人均直接成本\">收入&成本(人均)</a-radio>\n                    </a-radio-group>\n                </div>\n                <div class=\"m-r-40\">\n                    <img :src=\"lineChart\" width=\"20\" class=\"img\">\n                    <a-checkbox-group v-model:model-value=\"lineChartSelect\" @change=\"selectChange\" class=\"checkbox-group\">\n                        <a-checkbox value=\"发薪人数\">\n                            <template #checkbox=\"{ checked }\">\n                                <a-tag :checked=\"checked\" :class=\"['checkbox-tag', 'checkbox-tag1',checked && 'checkbox-tag-active']\" checkable :style=\"{color : checked?'#3A64FF':'#666666'}\">发薪人数</a-tag>\n                            </template>\n                        </a-checkbox>\n                        <a-checkbox value=\"项目销售毛利率\">\n                            <template #checkbox=\"{ checked }\">\n                                <a-tag :checked=\"checked\" :class=\"['checkbox-tag', 'checkbox-tag2',checked && 'checkbox-tag-active']\" :style=\"{color : checked?'#3A64FF':'#666666'}\">项目销售毛利率</a-tag>\n                            </template>\n                        </a-checkbox>\n                    </a-checkbox-group>\n                </div>\n                <div class=\"m-r-170\">\n                    <img :src=\"timeChart\" width=\"20\" class=\"img\">\n                    <a-radio-group type=\"button\" size=\"medium\" v-model:model-value=\"timeChartSelect\" @change=\"timeSelectChange\">\n                        <a-radio value=\"3\">近3个月</a-radio>\n                        <a-radio value=\"6\">近6个月</a-radio>\n                        <a-radio value=\"12\">近12个月</a-radio>\n                    </a-radio-group>\n                </div>\n                <div>\n                    <a-button type=\"primary\" @click=\"handleSwitchDept\">切换{{ sourceTypeMap[sourceType] }}</a-button>\n                </div>\n            </div>\n        </header>\n        <main>\n            <a-spin :loading=\"chartContainerLoading\" tip=\"数据加载中...\" style=\"width: 100%;\">\n                <div ref=\"chartContainerRef\" class=\"chartContainer\">\n            </div>\n            </a-spin>\n        </main>\n    </div>\n    <a-modal v-model:visible=\"switchDeptModal.visible\" width=\"800px\" :body-style=\"{height:'200px'}\" title-align=\"start\">\n        <template #title>\n            <span class=\"modal-title\">切换{{ sourceTypeMap[sourceType] }}</span>\n        </template>\n        <a-spin :loading=\"switchDeptModal.loading\" style=\"width:100%\" tip=\"数据加载中...\">\n            <a-cascader-panel :options=\"switchDeptModal.options\" v-model=\"switchDeptModal.selectItem\" check-strictly expand-child/>\n        </a-spin>\n        <template #footer>\n            <div style=\"text-align: center;\">\n                <a-button type=\"outline\" class=\"m-r-10\" @click=\"switchDeptModal.visible=false\">取消</a-button>\n                <a-button type=\"primary\" @click=\"handleSwitchDeptModalOK\">确定</a-button>\n            </div>\n        </template>\n    </a-modal>\n</template>\n\n<script setup>\nimport { onBeforeMount, onMounted, reactive, ref, shallowRef, unref } from 'vue';\nimport * as echarts from 'echarts';\nimport { queryYoyAnalysisDept,getDeptEcharts,getCustomerEcharts,getProjectEchartsUsingPOST,getCustomer,getProject } from '@/api/lookChart'\nimport { Message } from \"@arco-design/web-vue\";\nconst barChart = require('@/assets/images/barChart.svg')\nconst lineChart = require('@/assets/images/lineChart.svg')\nconst timeChart = require('@/assets/images/timeChart.svg')\nlet { deptName,interval,deptId,title,sourceType,customerName,projectName,projectId,taxRate,customerId } = window.history.state\nimport { getCurrentInstance } from \"@vue/runtime-core\";\nlet $bus = getCurrentInstance().appContext.config.globalProperties.$bus;\nconst innerHeight = window.innerHeight\nconst chartContainerRef = ref(null)\nconst chartContainerLoading = ref(false)\nlet sourceTypeMap = {\n    dept : '部门',\n    customer : '客户',\n    project : '项目'\n}\nlet myChart\nconst barChartSelect = ref('营业收入(总) 直接成本(总)')\nconst lineChartSelect = shallowRef(['发薪人数'])\nconst timeChartSelect = ref(interval)\nconst selectChange =()=>{\n    setChartData()\n}\nconst timeSelectChange = ()=>{\n    switch (sourceType) {\n        case 'dept':\n            getChartData()\n            break;\n        case 'customer':\n            getCustomerData()\n            break;\n        case 'project':\n            getProjectData()\n            break;\n        default:\n            break;\n    }\n}\nconst switchDeptModal = reactive({\n    visible : false,\n    selectItem : '',\n    options : [],\n    loading : false\n})\nconst handleSwitchDept = ()=>{\n    switchDeptModal.visible = true\n    if(switchDeptModal.options.length === 0){\n        switch (sourceType) {\n            case 'dept':\n                getDeptData()\n                break;\n            case 'customer':\n                getAllCustomerData()\n                break;\n            case 'project':\n                getAllProjecttData()\n                break;\n            default:\n                break;\n        }\n    }\n}\nconst getDeptData = ()=>{\n    if(switchDeptModal.options.length === 0){\n        switchDeptModal.loading = true\n        let params = {\n            interval : unref(timeChartSelect)\n        }\n        queryYoyAnalysisDept(params).then(res=>{\n            if(res.code === '200'){\n                function recursionDelChildren(arr){\n                    arr.forEach(item=>{\n                        item.value = item.deptId\n                        if(item?.children?.length){\n                            recursionDelChildren(item.children)\n                        }else {\n                            delete item.children\n                        }\n                    })\n                }\n                recursionDelChildren(res.data)\n                switchDeptModal.options = res.data\n            }else {\n                Message.error(res.message || '数据请求失败')\n            }\n        }).catch(err=>{\n            Message.error(err.message || '数据请求失败')\n        }).finally(()=>{\n            switchDeptModal.loading = false\n        })\n    }\n}\n\nconst getAllCustomerData = ()=>{\n    if(switchDeptModal.options.length === 0){\n        switchDeptModal.loading = true\n        let params = {\n            deptId,\n            interval : unref(timeChartSelect)\n        }\n        getCustomer(params).then(res=>{\n            if(res.code === '200'){\n                function recursionDelChildren(arr){\n                    arr.forEach(item=>{\n                        item.value = item.title\n                        item.label = item.title\n                        if(item?.children?.length){\n                            recursionDelChildren(item.children)\n                        }else {\n                            delete item.children\n                        }\n                    })\n                }\n                recursionDelChildren(res.data)\n                switchDeptModal.options = res.data\n            }else {\n                Message.error(res.message || '数据请求失败')\n            }\n        }).catch(err=>{\n            Message.error(err.message || '数据请求失败')\n        }).finally(()=>{\n            switchDeptModal.loading = false\n        })\n    }\n}\nconst getAllProjecttData = ()=>{\n    if(switchDeptModal.options.length === 0){\n        switchDeptModal.loading = true\n        let params = {\n            deptId,\n            interval : unref(timeChartSelect)\n        }\n        getProject(params).then(res=>{\n            if(res.code === '200'){\n                function recursionDelChildren(arr){\n                    arr.forEach(item=>{\n                        item.label = item.title\n                        item.value = item.title\n                        if(item?.children?.length){\n                            recursionDelChildren(item.children)\n                        }else {\n                            item.label = item.projectName\n                            item.value = item.projectName\n                            delete item.children\n                        }\n                    })\n                }\n                recursionDelChildren(res.data)\n                switchDeptModal.options = res.data\n            }else {\n                Message.error(res.message || '数据请求失败')\n            }\n        }).catch(err=>{\n            Message.error(err.message || '数据请求失败')\n        }).finally(()=>{\n            switchDeptModal.loading = false\n        })\n    }\n}\nlet sourceData = []\nlet chartOptionColosMap = {\n    '营业收入(总)'  : '#6BD4B3',\n    '人均营业收入' : '#6BD4B3',\n    '直接成本(总)' : '#3491FA',\n    '人均直接成本' : '#3491FA',\n    '发薪人数' : '#FB6D6C',\n    '项目销售毛利率' : '#008026'\n\n}\nconst setChartData = ()=>{\n    let barChartVal = barChartSelect.value.split(' ')\n    let lineChartVal = lineChartSelect.value\n    let timeChartVal = timeChartSelect.value\n    let includeName = [...barChartVal,...lineChartVal,timeChartVal]\n    let legend = []\n    let fliterData = []\n    sourceData.forEach(item=>{\n        if(includeName.includes(item.name)){\n            let yAxisIndex = 0\n            if(item.type === 'bar'){\n                yAxisIndex = 0\n            }\n            if(item.type === 'line'){\n                yAxisIndex = 1\n            }\n            if(item.type === 'line' && item.name === '项目销售毛利率'){\n                yAxisIndex = 2\n            }\n            fliterData.push({\n                ...item,\n                barWidth: 20,\n                yAxisIndex,\n                itemStyle: {\n                    color : chartOptionColosMap[item.name]\n                },\n            })\n            legend.push(item.name)\n        }\n    })\n   chartOptions.legend = {\n        data: legend,\n        bottom : 0,\n        itemGap : 100\n    }\n    chartOptions.series = fliterData\n    if(myChart){\n        myChart.setOption(chartOptions,true);\n    }\n}\n// 请求部门维度看图数据\nconst getChartData = (id)=>{\n    let params = {\n        deptId : id || deptId || \"\",\n        tagKey:\"linkAnalysis\",\n        interval :unref(timeChartSelect),\n    }\n    chartContainerLoading.value = true\n    getDeptEcharts(params).then(res=>{\n        if(res.code === '200'){\n            let { xAxis,series } = res.data\n            chartOptions.xAxis[0].data = xAxis\n            sourceData = series\n            setChartData()\n        }else {\n            Message.error(res.message || '数据请求失败')\n        }\n    }).catch(err=>{\n        Message.error(err.message || '数据请求失败')\n    }).finally(()=>{\n        chartContainerLoading.value = false\n    })\n}\n// 请求客户维度看图数\nconst getCustomerData = (name)=>{\n    let params = {\n        tagKey:\"linkAnalysis2\",\n        interval :unref(timeChartSelect),\n        deptId: deptId || \"\",\n        title : name || title,\n        customerId : customerId || ''\n    }\n    chartContainerLoading.value = true\n    getCustomerEcharts(params).then(res=>{\n        if(res.code === '200'){\n            let { xAxis,series } = res.data\n            chartOptions.xAxis[0].data = xAxis\n            sourceData = series\n            setChartData()\n        }else {\n            Message.error(res.message || '数据请求失败')\n        }\n    }).catch(err=>{\n        Message.error(err.message || '数据请求失败')\n    }).finally(()=>{\n        chartContainerLoading.value = false\n    })\n}\n// 请求项目维度看图数据\nconst getProjectData = (obj)=>{\n    let params = {\n        interval :unref(timeChartSelect),\n        deptId : deptId || \"\",\n        tagKey:\"linkAnalysis3\",\n        projectId: obj?.projectId || projectId,\n        taxRate : obj?.taxRate || taxRate,\n    }\n    chartContainerLoading.value = true\n    getProjectEchartsUsingPOST(params).then(res=>{\n        if(res.code === '200'){\n            let { xAxis,series } = res.data\n            chartOptions.xAxis[0].data = xAxis\n            sourceData = series\n            setChartData()\n        }else {\n            Message.error(res.message || '数据请求失败')\n        }\n    }).catch(err=>{\n        Message.error(err.message || '数据请求失败')\n    }).finally(()=>{\n        chartContainerLoading.value = false\n    })\n}\n//遍历树结构按条件找对应的数据\nfunction getOptionItem (arr,searchObj){\n    let currentSelectItem = {}\n    function searchItem(arr){\n        arr.forEach(item=>{\n            Object.keys(searchObj).forEach(key=>{\n                if(item[key] === searchObj[key]){\n                    currentSelectItem = item\n                }\n            })\n            if(item?.children?.length){\n                searchItem(item.children)\n            }\n        })\n    }\n    searchItem(arr)\n    return currentSelectItem\n}\nconst handleSwitchDeptModalOK = ()=>{\n    switchDeptModal.visible = false\n    if(switchDeptModal.selectItem){\n        let item\n        switch (sourceType) {\n            case 'dept':\n             item = getOptionItem(switchDeptModal.options,{ deptId : switchDeptModal.selectItem })\n            $bus.emit(\"updateStructure\", [\n                { type: \"text\", color: \"#333\", msg: '环比分析列表' },\n                {\n                    type: \"button\",\n                    color: \"#5370FD\",\n                    msg: item.deptName,\n                    isBack : true\n                },\n            ]);\n                getChartData(item.deptId)\n                break;\n            case 'customer':\n                 item = getOptionItem(switchDeptModal.options,{ title : switchDeptModal.selectItem })\n                $bus.emit(\"updateStructure\", [\n                    { type: \"text\", color: \"#333\", msg: '环比分析列表' },\n                    { type: \"text\", color: \"#333\", msg: deptName },\n                    {\n                        type: \"button\",\n                        color: \"#5370FD\",\n                        msg: item.title,\n                        isBack : true\n                    },\n                ]);\n                getCustomerData(item.title)\n                break;\n            case 'project':\n                 item = getOptionItem(switchDeptModal.options,{ projectName : switchDeptModal.selectItem })\n                $bus.emit(\"updateStructure\", [\n                    { type: \"text\", color: \"#333\", msg: '环比分析列表' },\n                    { type: \"text\", color: \"#333\", msg: deptName },\n                    { type: \"text\", color: \"#333\", msg:  `${item.groupCustomerName}-${customerName}`},\n                    {\n                        type: \"button\",\n                        color: \"#5370FD\",\n                        msg: item.projectName,\n                        isBack : true\n                    },\n                ]);\n                let { finPcode ,taxRate } = item\n                getProjectData({\n                    projectId :finPcode,\n                    taxRate\n                })\n                break;\n            default:\n                break;\n        }\n    }\n}\n\nconst chartOptions = {\n        tooltip: {\n            trigger: 'axis',\n            axisPointer: {\n                type: 'cross',\n                crossStyle: {\n                    color: '#999'\n                }\n            },\n            // formatter : (params)=>{\n            //     let div = params.map(item=>{\n            //         return `\n            //             <div>\n            //                 ${item.marker}  ${item.seriesName.endsWith('率')?item.seriesName+' '+item.value+'%': item.seriesName+' '+item.value}\n            //             </div>\n            //         `\n            //     })\n            //     return `<span>\n            //             ${div}\n            //         </span>`\n            // }\n        },\n        grid: {\n            left : '10%',\n        },\n        xAxis: [\n            {\n                type: 'category',\n                axisTick: {\n                    alignWithLabel: true,\n                    inside: true,\n                },\n                axisLabel:{ \n                    rotate : 45\n                },\n                data: [],\n            },\n        ],\n        yAxis: [\n            {\n                name : '柱状',\n                type: 'value',\n                position: 'left',\n                alignTicks: true,\n                axisLine: {\n                    show: true,\n                    lineStyle: {\n                        color: '#797979'\n                    }\n                },\n                axisLabel: {\n                    color: '#666',\n                    formatter: '{value}'\n                },\n                splitLine:{show: false}\n            },\n            {\n                name : '折线',\n                type: 'value',\n                position: 'right',\n                alignTicks: true,\n                axisLine: {\n                    show: true,\n                    lineStyle: {\n                        color: '#797979'\n                    }\n                },\n                axisLabel: {\n                    color: '#666',\n                    formatter: '{value}'\n                },\n                splitLine:{show: false}\n            },\n            {\n                name : '折线',\n                type: 'value',\n                position: 'right',\n                offset: 60,\n                boundaryGap: [0.01,1],\n                axisLine: {\n                    show: true,\n                    lineStyle: {\n                        color: '#797979'\n                    }\n                },\n                axisLabel: {\n                    color: '#666',\n                    formatter: '{value}%'\n                },\n                splitLine:{show: false}\n            }\n            \n        ],\n        series: []\n    }\nonMounted(()=>{\n    myChart = echarts.init(unref(chartContainerRef));\n    chartOptions && myChart.setOption(chartOptions);\n})\n\nonBeforeMount(()=>{\n    let breadList \n    switch (sourceType) {\n        case 'dept':\n            breadList = [\n                {\n                    type: \"button\",\n                    color: \"#5370FD\",\n                    msg: '环比分析列表',\n                    isBack : true\n                },\n                { type: \"text\", color: \"#333\", msg: deptName },\n            ]\n            switchDeptModal.selectItem = deptId\n            getChartData()\n            break;\n        case 'customer':\n            breadList = [\n                { type: \"text\", color: \"#333\", msg: '环比分析列表' },\n                {\n                    type: \"button\",\n                    color: \"#5370FD\",\n                    msg: deptName,\n                    isBack : true\n                },\n                { type: \"text\", color: \"#333\", msg: title },\n            ]\n            switchDeptModal.selectItem = customerId\n            getCustomerData()\n            break;\n        case 'project':\n            breadList = [\n                { type: \"text\", color: \"#333\", msg: '环比分析列表' },\n                { type: \"text\", color: \"#333\", msg: deptName },\n                {\n                    type: \"button\",\n                    color: \"#5370FD\",\n                    msg: `${title}-${customerName}`,\n                    isBack : true\n                },\n                { type: \"text\", color: \"#333\", msg: projectName },\n            ]\n            switchDeptModal.selectItem = projectId\n            getProjectData()\n            break;\n        default:\n            break;\n    }\n    $bus.emit(\"updateStructure\", breadList);\n})\n\n</script>\n\n<style lang=\"scss\" scoped>\n.img {\n    vertical-align: middle;\n    margin: 0 12px;\n}\n.m-r-40{\n    margin-right: 40px;\n}\n.m-r-170{\n    margin-right: 170px;\n}\n.chartContainer{\n    height: 600px;\n}\n.modal-title {\n  color: #5a5a5a;\n  font-size: 14px;\n  font-weight: bold;\n}\n:deep(.checkbox-group){\n    background: #F2F3F5;\n    padding:4px\n}\n:deep(.arco-checkbox-group .arco-checkbox){\n    margin-right : 0\n}\n:deep(.checkbox-group .checkbox-tag){\n    font-size:13px\n}\n:deep(.checkbox-group .checkbox-tag1){\n    margin-left:-4px\n}\n:deep(.checkbox-group .checkbox-tag2){\n    margin-left:-2px\n}\n:deep(.checkbox-group .checkbox-tag-active){\n    background : white\n}\n:deep(.checkbox-group .checkbox-tag:hover){\n    background : white\n}\n.yCenter{\n    display : flex;\n    flex-direction : column;\n    justify-content:center\n}\n</style>","import script from \"./ringContrastChart.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ringContrastChart.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ringContrastChart.vue?vue&type=style&index=0&id=59da4dac&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/lijiaxin/Documents/workspace/hydsoft-oms-frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-59da4dac\"]])\n\nexport default __exports__"],"names":["queryYoyAnalysisDept","parameter","request","url","method","data","queryYoyAnalysisChart","getDeptEcharts","getCustomerEcharts","getProjectEchartsUsingPOST","queryCustomerYoyAnalysisChart","getProjectEcharts","getCustomer","getProject","barChart","require","lineChart","timeChart","deptName","interval","deptId","title","sourceType","customerName","projectName","projectId","taxRate","customerId","window","history","state","$bus","getCurrentInstance","appContext","config","globalProperties","innerHeight","chartContainerRef","ref","chartContainerLoading","myChart","sourceTypeMap","dept","customer","project","barChartSelect","lineChartSelect","shallowRef","timeChartSelect","selectChange","setChartData","timeSelectChange","getChartData","getCustomerData","getProjectData","switchDeptModal","reactive","visible","selectItem","options","loading","handleSwitchDept","length","getDeptData","getAllCustomerData","getAllProjecttData","params","unref","then","res","code","recursionDelChildren","arr","forEach","item","value","children","Message","error","message","catch","err","finally","label","sourceData","chartOptionColosMap","barChartVal","split","lineChartVal","timeChartVal","includeName","legend","fliterData","includes","name","yAxisIndex","type","push","barWidth","itemStyle","color","chartOptions","bottom","itemGap","series","setOption","id","tagKey","xAxis","obj","getOptionItem","searchObj","currentSelectItem","searchItem","Object","keys","key","handleSwitchDeptModalOK","emit","msg","isBack","groupCustomerName","finPcode","tooltip","trigger","axisPointer","crossStyle","grid","left","axisTick","alignWithLabel","inside","axisLabel","rotate","yAxis","position","alignTicks","axisLine","show","lineStyle","formatter","splitLine","offset","boundaryGap","onMounted","echarts","onBeforeMount","breadList","__exports__"],"sourceRoot":""}