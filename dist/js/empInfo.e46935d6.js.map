{"version":3,"file":"js/empInfo.e46935d6.js","mappings":"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","sources":["webpack://oms-frontend/./src/views/system/constColumns.js","webpack://oms-frontend/./src/components/tableContainer.vue","webpack://oms-frontend/./src/components/tableContainer.vue?de49","webpack://oms-frontend/./src/api/empInfo.js","webpack://oms-frontend/./src/views/dataManagement/empInfo.vue","webpack://oms-frontend/./src/views/dataManagement/empInfo.vue?b58d"],"sourcesContent":["// 用户管理表头\nexport const userListColumns = [\n  {\n    title: '工号',\n    dataIndex: 'workNo',\n  }, \n  {\n    title: '姓名',\n    dataIndex: 'name',\n    slotName : 'name',\n  },\n  {\n    title: '所属部门',\n    dataIndex: 'deptName',\n  },\n  {\n    title: '邮箱',\n    dataIndex: 'email',\n  }, \n  {\n    title: '账户状态',\n    dataIndex: 'flag',\n    slotName:'flag_view',\n        \n  },\n  {\n    title: '操作',\n    dataIndex: 'action',\n    slotName : 'action',\n  }\n];\n// 菜单管理表头\nexport const menuListColumns= [\n    {\n      title: '菜单名称',\n      dataIndex: 'name',\n      key: 'name',\n      width: '20%'\n    },\n    {\n      title: '图标',\n      dataIndex: 'icon',\n      key: 'icon',\n    },\n    {\n      title: '类型',\n      dataIndex: 'type',\n      key: 'type',\n      slotName : 'type_view'\n    },\n    {\n      title: '排序号',\n      dataIndex: 'sort',\n      key: 'sort',\n    },\n    {\n      title: 'URL',\n      dataIndex: 'url',\n      key: 'url',\n    },\n    {\n      title: '授权标识',\n      dataIndex: 'perms',\n      key: 'perms',\n    },\n    {\n      title: '操作',\n      dataIndex: 'action',\n      key: 'action',\n\n      slotName : 'action'\n    }\n  ]\n// 角色管理表头\nexport const roleListColumns = [\n    {\n        title: '角色名称',\n        dataIndex: 'name',\n      },\n      {\n        title: '备注',\n        dataIndex: 'remarks',\n        \n      },\n      {\n        title: '角色编码',\n        dataIndex: 'code',\n        \n      },\n      {\n        title: '创建时间',\n        dataIndex: 'createTime',\n        width : 200\n      },\n      {\n        title: '操作',\n        dataIndex: 'action',\n        slotName : 'action'\n      }\n]","<template>\n  <div>\n    <div>\n      <div class=\"m-b-20\">\n        <div class=\"flex-between\" style=\"height: 40px;\">\n          <a-radio-group type=\"button\" size=\"large\" :model-value=\"props.chekedValue\" @change=\"radioChange\">\n            <a-radio v-for=\"item of props.tabs\" :value=\"item.key\">{{ item.name }}</a-radio>\n          </a-radio-group>\n          <slot></slot>\n        </div>\n        <div>\n          <div class=\"tool-grid\">\n            <!-- 只看我的 -->\n            <div v-if=\"props.menuName === 'USER'\">\n              <a-switch :value=\"switchStatus\" @change=\"handleSwitch\">\n                <template #checked>ON</template>\n                <template #unchecked>OFF</template>\n              </a-switch>\n              <span>只看我的</span>\n            </div>\n            <!-- 导出excel -->\n            <a-button type=\"primary\" v-if=\"props.menuName === 'USER'\">\n              <template #icon>\n                <icon-download />\n              </template>\n              <template #default>导出excel</template>\n            </a-button>\n            <!-- 配置列 -->\n            <a-button class=\"config\" type=\"primary\" @click=\"handleSetColumns\" v-if=\"props.menuName === 'USER'\">\n              <template #icon>\n                <icon-home />\n              </template>\n              <template #default>配置列</template>\n            </a-button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- 表格内容 -->\n    <div>\n      <a-table\n        :columns=\"(props.tableColumns.length && props.tableColumns) || tableInfo.tableColumns\"\n        :data=\"(props.tableData.length && props.tableData) || tableInfo.tableData\"\n        column-resizable\n        :bordered=\"false\"\n        :scroll=\"{ x: '100%', y: props.scrollY }\"\n        :scrollbar=\"false\"\n        :loading=\"props.loading\"\n        :pagination=\"{\n          total: paginationTotal,\n          current: paginationCurrent,\n          pageSize: paginationPageSize,\n          showTotal: true,\n          showPageSize: true,\n          showJumper: true,\n          onChange: paginationChange,\n          onPageSizeChange: paginationPageSizeChange,\n        }\"\n      >\n        <template #type_view=\"{ record }\">\n          <div>{{ record.type === 0 ? \"目录\" : record.type === 1 ? \"菜单\" : \"按钮\" }}</div>\n        </template>\n        <template #role_view=\"{ record }\">\n          <div v-for=\"(item, i) in record.roles\" :key=\"i\">{{ item.name }}</div>\n        </template>\n        <template #flag_view=\"{ record }\">\n          <span class=\"red\" v-if=\"record.flag === 0\">禁用</span>\n          <span class=\"green\" v-if=\"record.flag === 1\">启用</span>\n        </template>\n        <template #action=\"{ record }\">\n          <a-popconfirm content=\"你确定要启用这个用户吗?\" type=\"error\" @ok=\"handleUpdateFlag(record)\">\n            <a-button type=\"text\" v-if=\"props.menuName == 'user' && record.flag === 0\">启用</a-button>\n          </a-popconfirm>\n          <a-divider v-if=\"props.menuName == 'user' && record.flag === 0\" direction=\"vertical\" />\n          <a-button type=\"text\" v-if=\"props.menuName == 'user' && record.flag === 0\" style=\"color: #999999\">禁用</a-button>\n          <a-button type=\"text\" v-if=\"props.menuName == 'user' && record.flag === 1\" style=\"color: #999999\">启用</a-button>\n          <a-divider v-if=\"props.menuName == 'user' && record.flag === 1\" direction=\"vertical\" />\n          <a-popconfirm content=\"你确定要禁用这个用户吗?\" type=\"error\" @ok=\"handleUpdateFlag(record)\">\n            <a-button type=\"text\" v-if=\"props.menuName == 'user' && record.flag === 1\">禁用</a-button>\n          </a-popconfirm>\n          <!-- 查看 -->\n          <a-button type=\"text\" v-if=\"props.menuName == 'USER'\" @click=\"handleDetail(record, 'view')\">查看</a-button>\n          <a-divider v-if=\"props.menuName == 'user'\" direction=\"vertical\" />\n          <!-- 编辑 -->\n          <a-button\n            v-if=\"permissions.includes('menu:edit') && record.code !== 'admin'\"\n            type=\"text\"\n            @click=\"handleEdit(record, 'edit')\"\n          >\n            编辑\n          </a-button>\n          <a-divider\n            v-if=\"props.menuName == 'menu' || (props.menuName == 'role' && record.code !== 'admin')\"\n            direction=\"vertical\"\n          />\n          <!-- 删除 -->\n          <a-popconfirm content=\"确定要删除吗?\" type=\"error\" @ok=\"handleDeleteMenu(record)\">\n            <a-button\n              type=\"text\"\n              v-if=\"\n                permissions.includes('menu:delete') &&\n                (props.menuName == 'menu' || (props.menuName == 'role' && record.code !== 'admin'))\n              \"\n            >\n              删除\n            </a-button>\n          </a-popconfirm>\n        </template>\n      </a-table>\n    </div>\n    <!-- 表单数据 -->\n    <a-modal v-model:visible=\"modalVisible\" title=\"选择表格项\">\n      <a-checkbox-group @change=\"columnSelected\" v-model=\"defaultCheckList\">\n        <a-checkbox v-for=\"item of setColumns\" :key=\"item.dataIndex\" :value=\"item.dataIndex\">\n          {{ item.title }}\n        </a-checkbox>\n      </a-checkbox-group>\n      <template #footer>\n        <a-button type=\"primary\" @click=\"columnOK\">确定</a-button>\n      </template>\n    </a-modal>\n  </div>\n</template>\n\n<script setup>\nimport { reactive, ref } from \"vue\";\nimport { userListColumns } from \"../views/system/constColumns\";\nimport { Message } from \"@arco-design/web-vue\";\nimport { useMenuStore } from \"../store/index\";\nconst permissions = useMenuStore().getPermission;\nconst props = defineProps({\n  tabs: {\n    type: Array,\n    default: () => [],\n  },\n  chekedValue: {\n    type: String,\n    default: \"\",\n  },\n  // 表头\n  tableColumns: {\n    type: Array,\n    default: () => [],\n  },\n  // 表单数据\n  tableData: {\n    type: Array,\n    default: () => [],\n  },\n  // 菜单名称(根据菜单名称判断显示指定按钮)\n  menuName: {\n    type: String,\n    default: \"\",\n  },\n  loading : {\n    type : Boolean,\n    default : false\n  },\n  scrollY : {\n    type : String,\n    default : '600px'\n  },\n  setColumns: {\n    type: Array,\n    default: () => [],\n  },\n  switchStatus: {\n    type: Boolean,\n    default: false,\n  },\n  exportExcel: {\n    type: String,\n    default: \"\",\n  },\n  paginationTotal: {\n    type: Number,\n    default: 10,\n  },\n  paginationCurrent: {\n    type: Number,\n    default: 1,\n  },\n  paginationPageSize: {\n    type: Number,\n    default: 10,\n  },\n});\n// 表头信息\nconst tableInfo = reactive({\n  tableColumns: [\n    {\n      title: \"自定义列1\",\n      dataIndex: \"customColumn1\",\n      width: 200,\n    },\n    {\n      title: \"自定义列2\",\n      dataIndex: \"customColumn2\",\n      width: 200,\n    },\n    {\n      title: \"自定义列3\",\n      dataIndex: \"customColumn3\",\n      width: 200,\n    },\n    {\n      title: \"自定义列4\",\n      dataIndex: \"customColumn4\",\n      width: 200,\n    },\n    {\n      title: \"自定义列5\",\n      dataIndex: \"customColumn5\",\n      width: 200,\n    },\n    {\n      title: \"自定义列6\",\n      dataIndex: \"customColumn6\",\n      width: 200,\n    },\n  ],\n  tableData: [],\n});\nconst emit = defineEmits([\n  \"switchClick\",\n  \"paginationCurrentChange\",\n  \"paginationPageSizeChange\",\n  \"handleEdit\",\n  \"handleDeleteMenu\",\n  \"handleUpdateFlag\",\n  \"columnOK\",\n  \"radioChange\",\n]);\nconst modalVisible = ref(false);\nconst defaultCheckList = ref([]);\nconst checkedValues = ref([]);\nconst userTableColumns = ref(userListColumns);\nlet actionColumn = userListColumns.filter(item => item.dataIndex !== \"action\") || [];\n// 打开配置列\nconst handleSetColumns = () => {\n  modalVisible.value = true;\n};\n// 配置列多选框更改\nconst columnSelected = values => {\n  checkedValues.value = values;\n};\n// 打开配置列勾选表格中已有的表头\nconst setTableColumns = () => {\n  let cachColumns = JSON.parse(localStorage.getItem(\"userListColumns\"));\n  if (cachColumns) {\n    userTableColumns.value = cachColumns;\n    defaultCheckList.value = cachColumns.map(item => item.dataIndex);\n  } else {\n    var selectedColumsArr = [];\n    actionColumn.forEach(item => {\n      selectedColumsArr.push(item.dataIndex);\n      defaultCheckList.value = selectedColumsArr;\n    });\n  }\n};\nsetTableColumns();\n// 配置列确认\nconst columnOK = () => {\n  if (defaultCheckList.value.length === 1 && defaultCheckList.value[0] === \"action\") {\n    return Message.error(\"至少选择一项\");\n  } else {\n    emit(\"columnOK\", defaultCheckList.value);\n    modalVisible.value = false;\n  }\n};\n// 只看我的\nconst handleSwitch = bool => {\n  emit(\"switchClick\", !bool);\n};\n// 更改当前页\nconst paginationChange = current => {\n  emit(\"paginationCurrentChange\", current);\n};\n// 更改页容量\nconst paginationPageSizeChange = pageSize => {\n  emit(\"paginationPageSizeChange\", pageSize);\n};\n// 编辑\nconst handleEdit = (record, type) => {\n  emit(\"handleEdit\", record, type);\n};\n// 删除\nconst handleDeleteMenu = record => {\n  emit(\"handleDeleteMenu\", record);\n};\n// 查看\nconst handleDetail = record => {\n  emit(\"handleDetail\", record);\n};\n// 更改状态\nconst handleUpdateFlag = record => {\n  emit(\"handleUpdateFlag\", record);\n};\n//tab切换\nconst radioChange = val => {\n  emit(\"radioChange\", val);\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.header-grid {\n  display: grid;\n  grid-template-columns: 10fr 6fr;\n  gap: 20px;\n}\n.tool-grid {\n  display: grid;\n  grid-template-columns: repeat(3, auto);\n  column-gap: 15px;\n  row-gap: 20px;\n  grid-auto-flow: row;\n}\n.m-b-20 {\n  margin-bottom: 20px;\n}\n.config {\n  position: absolute;\n  width: 100px;\n  top: 210px;\n  height: 36px;\n  right: 70px;\n}\n</style>\n","import script from \"./tableContainer.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./tableContainer.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./tableContainer.vue?vue&type=style&index=0&id=53477c82&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/lijiaxin/Documents/workspace/hydsoft-oms-frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-53477c82\"]])\n\nexport default __exports__","import request from '@/utils/request'\n\nexport function empInfo (parameter) {\n    return request({\n        url: '/empInfo',\n        method: 'get',\n        params: parameter\n    })\n}\n\nexport function exportExcel (parameter) {\n    return request({\n        url: '/empInfo/exportExcel',\n        method: 'get',\n        params: parameter,\n        responseType : 'blob'\n    })\n}","<template>\n    <div class=\"defaultPadding\">\n        <a-row :gutter=\"[14,20]\" align=\"center\">\n            <a-col flex=\"120px\">\n                <a-month-picker v-bind:model-value=\"monthVal\" @change=\"handleMothPicker\"/>\n            </a-col>\n            <a-col flex=\"85px\">\n            </a-col>\n            <a-col flex=\"85px\">\n            </a-col>\n            <a-col flex=\"auto\"></a-col>\n            <a-col flex=\"100px\">\n                <a-button type=\"primary\" :loading=\"exportLoading\" @click=\"handleExport\">\n                <template #icon>\n                  <icon-export />\n                </template>\n                <template #default>导出本页</template>\n              </a-button>\n            </a-col>\n        </a-row>\n        <a-row>\n            <a-col :span=\"24\">\n                <TableContainer\n                    column-resizable\n                    scrollY=\"600px\"\n                    :scrollbar=\"false\"\n                    :loading=\"dataContent.loading\"\n                    :paginationTotal=\"dataContent.pagination.total\"\n                    :paginationPageSize=\"dataContent.pagination.pageSize\"\n                    :paginationCurrent=\"dataContent.pagination.pageNum\"\n                    :tableColumns=\"dataContent.columns\"\n                    :table-data=\"dataContent.dataSource\"\n                    @paginationCurrentChange=\"paginationCurrentChange\"\n                    @paginationPageSizeChange=\"paginationPageSizeChange\"\n                    >\n                </TableContainer>\n            </a-col>\n        </a-row>\n    </div>\n</template>\n\n<script setup>\nimport TableContainer from \"@/components/tableContainer.vue\";\nimport { empInfo, exportExcel } from '../../api/empInfo.js'\nimport { onBeforeMount, reactive, ref } from \"vue\";\nimport { Message } from \"@arco-design/web-vue\";\nimport moment from 'moment'\n\nconst monthVal = ref(new Date())\n\nconst handleMothPicker = (value,date)=>{\n    monthVal.value = date\n    getData()\n}\n\nconst dataContent = reactive({\n    loading : false,\n    columns : [\n        {\n            title: '员工编号',\n            dataIndex: 'empCode',\n            key: 'empCode',\n            width : 110    \n        },\n        {\n            title: '员工姓名',\n            dataIndex: 'empName',\n            key: 'empName',\n            width : 110    \n        },\n        {\n            title: '成本中心',\n            dataIndex: 'costCenterName',\n            key: 'costCenterName',\n            width : 110\n        },\n        {\n            title: '所属实体',\n            dataIndex: 'entityName',\n            key: 'entityName',\n            width : 250   \n        },\n        {\n            title: '在职状态',\n            dataIndex: 'status',\n            key: 'status',\n            width : 110    \n        },\n        {\n            title: '所属部门',\n            dataIndex: 'deptName',\n            key: 'deptName',\n            width : 200    \n        },\n        {\n            title: '部门经理',\n            dataIndex: 'deptManager',\n            key: 'deptManager',\n            width : 110    \n        },\n        {\n            title: '客户名称',\n            dataIndex: 'customerName',\n            key: 'customerName',\n            width : 250\n        },\n        {\n            title: '项目名称',\n            dataIndex: 'projectName',\n            key: 'projectName',\n            width : 220   \n        },\n        {\n            title: '入职时间',\n            dataIndex: 'hireDate',\n            key: 'hireDate',\n            width : 110   \n        },   \n        {\n            title: '离职时间',\n            dataIndex: 'dismissDate',\n            key: 'dismissDate',\n            width : 150    \n        },\n        {\n            title: '职位',\n            dataIndex: 'position',\n            key: 'position',\n            width : 150   \n        },   \n        {\n            title: '工作地',\n            dataIndex: 'workPlace',\n            key: 'workPlace',\n            width : 110   \n        },   \n        {\n            title: '员工属性',\n            dataIndex: 'empAttr',\n            key: 'empAttr',\n            width : 110   \n        },\n    ],\n    dataSource : [],\n    pagination : {\n        pageSize : 20,\n        pageNum : 1,\n        total : 10\n    }\n\n})\n\nconst exportLoading = ref(false)\nconst handleExport = ()=>{\n    exportLoading.value = true\n    let params = {\n        month : moment(monthVal.value).format('yyyy-MM')\n    }\n    exportExcel(params)\n    .then(res => {\n      const blob = new Blob([res]);\n      const fileName = `C1人员信息_${moment(monthVal.value).format('yyyyMM')}.xlsx`;\n      const link = document.createElement(\"a\");\n      link.download = fileName;\n      link.style.display = \"none\";\n      link.href = URL.createObjectURL(blob);\n      document.body.appendChild(link);\n      link.click();\n      URL.revokeObjectURL(link.href);\n      document.body.removeChild(link);\n    })\n    .catch(() => {\n      Message.error(\"导出失败\");\n    })\n    .finally(() => {\n        exportLoading.value = false;\n    });\n}\n\nonBeforeMount(()=>{\n    getData()\n})\n\nconst getData = ()=>{\n    let params={\n        month : moment(monthVal.value).format('yyyy-MM'),\n        pageNum : dataContent.pagination.pageNum,\n        pageSize : dataContent.pagination.pageSize\n    }\n    dataContent.loading = true\n    empInfo(params).then(res=>{\n        if(res.code === '000000000000'){\n            let { list,total} = res.data\n            dataContent.pagination.total = !isNaN(+total) && +total\n            Array.isArray(list) && list.forEach((item,i)=>{\n                item.key = item.empCode\n            })\n            dataContent.dataSource = list\n        }\n    }).catch(e=>{\n        Message.error(e.message || '请求失败')\n    }).finally(()=>{\n        dataContent.loading = false\n    })\n} \nconst paginationCurrentChange = (pageNum)=>{\n    dataContent.pagination.pageNum = pageNum\n    getData()\n}\nconst paginationPageSizeChange = (pageSize)=>{\n    dataContent.pagination.pageSize = pageSize\n    getData()\n}\n</script>\n\n<style lang=\"scss\" scoped>\n</style>","import script from \"./empInfo.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./empInfo.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["userListColumns","title","dataIndex","slotName","menuListColumns","key","width","roleListColumns","permissions","useMenuStore","getPermission","tableInfo","reactive","tableColumns","tableData","modalVisible","ref","defaultCheckList","checkedValues","userTableColumns","actionColumn","filter","item","handleSetColumns","value","columnSelected","values","setTableColumns","cachColumns","JSON","parse","localStorage","getItem","map","selectedColumsArr","forEach","push","columnOK","length","Message","error","emit","handleSwitch","bool","paginationChange","current","paginationPageSizeChange","pageSize","handleEdit","record","type","handleDeleteMenu","handleDetail","handleUpdateFlag","radioChange","val","__exports__","empInfo","parameter","request","url","method","params","exportExcel","responseType","monthVal","Date","handleMothPicker","date","getData","dataContent","loading","columns","dataSource","pagination","pageNum","total","exportLoading","handleExport","month","moment","format","then","res","blob","Blob","fileName","link","document","createElement","download","style","display","href","URL","createObjectURL","body","appendChild","click","revokeObjectURL","removeChild","catch","finally","onBeforeMount","code","list","data","isNaN","Array","isArray","i","empCode","e","message","paginationCurrentChange"],"sourceRoot":""}