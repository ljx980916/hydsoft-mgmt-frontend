{"version":3,"file":"js/projectRingSame.f12e4e8c.js","mappings":"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","sources":["webpack://oms-frontend/./src/api/loopAnalyze.js","webpack://oms-frontend/./src/components/echartsContainer.vue","webpack://oms-frontend/./src/components/echartsContainer.vue?abcc","webpack://oms-frontend/./src/views/ringAnalyze/projectRingSame.vue","webpack://oms-frontend/./src/views/ringAnalyze/projectRingSame.vue?ba18"],"sourcesContent":["import request from '@/utils/request'\n// 环比分析部门级别查询接口\nexport function getDepartmentRingList (parameter) {\n    return request({\n        url: '/LinkAnalysis/queryLinkAnalysisList',\n        method: 'post',\n        data: parameter,\n        timeout : 1000 * 60 * 3\n    })\n}\n// 环比分析客户级别查询接口\nexport function getCustomerRingList (parameter) {\n  return request({\n      url: '/LinkAnalysis/getCustomerLink',\n      method: 'post',\n      data: parameter,\n      timeout : 1000 * 60 * 3\n  })\n}\n// 环比分析项目级别查询接口\nexport function getProjectRingList (parameter) {\n  return request({\n      url: '/LinkAnalysis/getProjectLink',\n      method: 'post',\n      data: parameter,\n      timeout : 1000 * 60 * 3\n  })\n}\n\nexport function queryYoyAnalysis (parameter) {\n  return request({\n      url: '/yoyAnalysis/queryYoyAnalysis',\n      method: 'post',\n      data: parameter,\n      timeout : 1000 * 60 * 3\n  })\n}\n//客户环同同比分析项集团客户维度查询接口\nexport function getCustomerYoyAnalysis (parameter) {\n  return request({\n      url: '/yoyAnalysis/getCustomerYoyAnalysis',\n      method: 'post',\n      data: parameter,\n      timeout : 1000 * 60 * 3\n  })\n}\n//客户环同同比分析项目维度查询接口\nexport function getProjectYoyAnalysis (parameter) {\n  return request({\n      url: '/yoyAnalysis/getProjectYoyAnalysis',\n      method: 'post',\n      data: parameter,\n      timeout : 1000 * 60 * 3\n  })\n}","<template>\n  <div ref=\"echartContainer\" :style=\"{ width: width + 'px', height: height + 'px', margin : '4px 0 -6px 0' }\"></div>\n</template>\n\n<script setup>\nimport * as echarts from \"echarts\";\nimport { onMounted, ref } from \"vue\";\nconst props = defineProps({\n  // 折线路径数据\n  route: {\n    type: Array,\n    default: () => [],\n  },\n  height: {\n    type: Number,\n    default: 20,\n  },\n  width: {\n    type: Number,\n    default: 50,\n  },\n});\nconst echartContainer = ref(null);\nonMounted(() => {\n  var chartDom = echartContainer.value;\n  var myChart = echarts.init(chartDom);\n  var option;\n  option = {\n    xAxis: {\n      type: \"category\",\n      show: false,\n    },\n    yAxis: {\n      type: \"value\",\n      show: false,\n    },\n    tooltip: {\n      trigger: 'item',\n      position : 'top',\n      formatter: params=>{\n        return params.data?.name?.replaceAll('-','<br/>')\n      },\n      appendToBody: true\n    },\n    series: [\n      {\n        type: \"line\",\n        symbol: \"emptyCircle\",\n        symbolSize: 3,\n        itemStyle: {\n          color: \"#0770FF\",\n        },\n        areaStyle: {\n          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\n            {\n              offset: 0,\n              color: \"rgba(58,77,233,0.8)\",\n            },\n            {\n              offset: 1,\n              color: \"rgba(58,77,233,0.3)\",\n            },\n          ]),\n        },\n        data: props.route,\n      },\n    ],\n  };\n\n  option && myChart.setOption(option);\n});\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>","import script from \"./echartsContainer.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./echartsContainer.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n  <div class=\"defaultPadding\">\n    <a-tabs v-model:active-key=\"tabsActive\" class=\"tabs\" @change=\"handleTab\">\n      <a-tab-pane key=\"1\" title=\"环比分析\" class=\"p-t-10\">\n        <!-- 标签及月份-->\n        <div class=\"flex-between\">\n          <a-space :size=\"['small', 0]\" wrap>\n            <a-tag\n              v-for=\"(item, index) of tabChangeColumInfo.columnTabs\"\n              :key=\"index\"\n              :color=\"item.isShow === 1 ? 'arcoblue' : ''\"\n              size=\"large\"\n              class=\"pointer\"\n              @click=\"handleTabChange(item)\"\n            >\n              {{ item.title }}\n            </a-tag>\n          </a-space>\n          <div style=\"position: relative; top: -1px\">\n            <a-select v-model:model-value=\"selectMonth\" @change=\"handleMonthChange\">\n              <a-option value=\"3\">近3个月</a-option>\n              <a-option value=\"6\">近6个月</a-option>\n              <a-option value=\"12\">近12个月</a-option>\n              <template #arrow-icon>\n                <icon-calendar :size=\"16\" />\n              </template>\n            </a-select>\n          </div>\n        </div>\n        <!-- 表格 -->\n        <div class=\"m-t-20\">\n          <a-table\n            :columns=\"tableInfo.columns\"\n            :data=\"tableInfo.data\"\n            :default-expand-all-rows=\"true\"\n            :bordered=\"{ cell: true }\"\n            column-resizable\n            :expanded-keys=\"tableInfo.defaultExpandedKeys\"\n            :scroll=\"{ maxHeight: tableInfo.maxHeight }\"\n            :scrollbar=\"{ x: true, y: 1500 }\"\n            :pagination=\"false\"\n            :loading=\"tableInfo.loading\"\n            ref=\"tableRef\"\n            @expanded-change=\"expandedChange\"\n          >\n            <template #projectName=\"{ record }\">\n              <a-popover\n                :content-style=\"{ background: 'rgba(0,0,0,.8)', color: '#fff' }\"\n                :arrow-style=\"{ background: 'rgba(0,0,0,.8)' }\"\n              >\n                <span class=\"pointer\">{{ record.projectName }}</span>\n                <template #content>\n                  {{ record.projectName }}\n                </template>\n              </a-popover>\n            </template>\n          </a-table>\n        </div>\n      </a-tab-pane>\n      <a-tab-pane key=\"2\" title=\"同比分析\" class=\"p-t-10\">\n        <div class=\"flex-between\">\n            <a-space :size=\"['small', 0]\" wrap>\n              <a-tag\n                v-for=\"(item, index) of allTableList\"\n                :key=\"index\"\n                :color=\"item.isShow === 1 ? 'arcoblue' : ''\"\n                size=\"large\"\n                class=\"pointer\"\n                @click=\"handleSameContrastTabChange(item)\"\n              >\n                {{ item.title }}\n              </a-tag>\n            </a-space>\n            <div style=\"position: relative; top: -1px\">\n              <a-radio-group v-model:model-value=\"raidoGroupType\" type=\"button\" @change=\"constructSameTabChange\">\n                <a-radio value=\"total\">汇总</a-radio>\n                <a-radio value=\"detail\">明细</a-radio>\n              </a-radio-group>\n            </div>\n          </div>\n          <div v-show=\"raidoGroupType === 'total'\">\n            <a-table\n              :columns=\"sameTotalProjectTableInfo.columns\"\n              :data=\"sameTotalProjectTableInfo.data\"\n              :default-expand-all-rows=\"true\"\n              :bordered=\"{ cell: true }\"\n              column-resizable\n              :expanded-keys=\"sameTotalProjectTableInfo.defaultExpandedKeys\"\n              :scroll=\"{ maxHeight: sameTotalProjectTableInfo.maxHeight }\"\n              :scrollbar=\"{ x: true, y: 1500 }\"\n              :pagination=\"false\"\n              :loading=\"sameTotalProjectTableInfo.loading\"\n              ref=\"sameTotalProjectTableRef\"\n              class=\"m-t-20\"\n              @expanded-change=\"projectTableExpandedChange\"\n            >\n              <template #lastDeptName=\"{ record }\">\n                <a-popover\n                  :content-style=\"{ background: 'rgba(0,0,0,.8)', color: '#fff' }\"\n                  :arrow-style=\"{ background: 'rgba(0,0,0,.8)' }\"\n                >\n                <a href=\"javaScript:void(0)\" v-if=\"record.leafNode === '1'\" style=\"color: #165dff\">\n                  {{ record.lastDeptName }}\n                </a>\n                <span class=\"pointer\" v-else>{{ record.lastDeptName }}</span>\n                  <template #content>\n                    {{ record.deptName }}\n                  </template>\n                </a-popover>\n              </template>\n              <template #canvasLine1=\"{record,column}\">\n                <echart-container :route=\"createEchartsRoute(record,column)\" :height=74 :width=100 />\n              </template>\n              <template #canvasLine2=\"{record,column}\">\n                <echart-container :route=\"createEchartsRoute(record,column)\" :height=74 :width=100 />\n              </template>\n              <template #canvasLine3=\"{record,column}\">\n                <echart-container :route=\"createEchartsRoute(record,column)\" :height=74 :width=100 />\n              </template>\n            </a-table>\n          </div>\n          <div v-show=\"raidoGroupType === 'detail'\">\n            <a-table\n              :columns=\"sameDetailProjectTableInfo.columns\"\n              :data=\"sameDetailProjectTableInfo.data\"\n              :default-expand-all-rows=\"true\"\n              :bordered=\"{ cell: true }\"\n              column-resizable\n              :expanded-keys=\"sameDetailProjectTableInfo.defaultExpandedKeys\"\n              :scroll=\"{ maxHeight: sameDetailProjectTableInfo.maxHeight }\"\n              :scrollbar=\"{ x: true, y: 1500 }\"\n              :pagination=\"false\"\n              :loading=\"sameDetailProjectTableInfo.loading\"\n              ref=\"sameDetailProjectTableRef\"\n              class=\" m-t-20\"\n              @expanded-change=\"sameDetailProjectTableExpandedChange\"\n            >\n              <template #title=\"{ record }\">\n                <a-popover\n                  :content-style=\"{ background: 'rgba(0,0,0,.8)', color: '#fff' }\"\n                  :arrow-style=\"{ background: 'rgba(0,0,0,.8)' }\"\n                >\n                <a href=\"javaScript:void(0)\" v-if=\"record.leafNode === '1'\" style=\"color: #165dff\">\n                  {{ record.title }}\n                </a>\n                <span class=\"pointer\" v-else>{{ record.title }}</span>\n                  <template #content>\n                    {{ record.title }}\n                  </template>\n                </a-popover>\n              </template>\n              <template #canvasLine1=\"{record,column}\">\n                <echart-container :route=\"createEchartsRoute(record,column)\" :height=74 :width=100 />\n              </template>\n              <template #canvasLine2=\"{record,column}\">\n                <echart-container :route=\"createEchartsRoute(record,column)\" :height=74 :width=100 />\n              </template>\n              <template #canvasLine3=\"{record,column}\">\n                <echart-container :route=\"createEchartsRoute(record,column)\" :height=74 :width=100 />\n              </template>\n            </a-table>\n          </div>\n      </a-tab-pane>\n    </a-tabs>\n  </div>\n</template>\n\n<script setup>\nimport { Message } from \"@arco-design/web-vue\";\nimport { onBeforeMount, reactive, ref, nextTick, onMounted, toRaw,shallowRef } from \"vue\";\nimport { useTagColumnListStore } from \"../../store/index\";\nimport { getProjectRingList,getProjectYoyAnalysis } from \"@/api/loopAnalyze.js\";\nimport { getNMonthsAgo, dataAddKey, getRedNum,getCurrentTime } from \"../../utils/util\";\nimport echartContainer from \"@/components/echartsContainer.vue\";\nimport { useRoute,useRouter } from \"vue-router\";\nimport { getCurrentInstance } from \"@vue/runtime-core\";\nlet $bus = getCurrentInstance().appContext.config.globalProperties.$bus;\nconst route = useRoute();\nconst router = useRouter()\nlet {customerId,deptId,deptName,groupCustomerName,title,tab ,radiotype} = route.query;\nlet tagColumnList = useTagColumnListStore();\nconst tabsActive = ref(tab||'1');\nlet { year, month } = getCurrentTime();\nlet lastYear = year-1\nlet lastMonth = month-1\nlet columConfig = {};\nconst tableInfo = reactive({\n  columns: [],\n  data: [],\n  defaultExpandedKeys: [],\n  maxHeight: \"200px\",\n  loading: false,\n});\nconst selectMonth = ref(\"3\");\nconst tableRef = ref(null);\nconst tabChangeColumInfo = reactive({\n  columnTabs: [],\n  up: [],\n  down: [],\n});\nconst chartColumMap = {\n  发薪人数: [],\n  营业收入: [],\n  销售毛利率: [],\n};\nconst chartColumnNameMap = {\n  canvasLine1: \"发薪人数\",\n  canvasLine2: \"营业收入\",\n  canvasLine3: \"销售毛利率\",\n};\nlet filterShowChildrenColumn = [];\n// 切换环比分析和同比分析\nconst handleTab = val => {\n  tabsActive.value = val;\n};\nonMounted(() => {\n  if (tableRef.value) {\n    let head = tableRef.value.$el;\n    nextTick(() => {\n      let innerHeight = window.innerHeight;\n      let elHeight = head.getBoundingClientRect().top;\n      tableInfo.maxHeight = innerHeight - elHeight - 30 + \"px\";\n    });\n  }\n});\n// 初始化\nconst seltColumns = () => {\n  let tagColumns = toRaw(tagColumnList.getTagColumnList) || [];\n  let currentPageColumn = tagColumns.filter(item => item.report === \"环比分析\") || [];\n  if (currentPageColumn.length) {\n    currentPageColumn[0].tier.forEach((item, index) => {\n      let tabs = [];\n      let columnTabs = [];\n      let columnHasSonTabs = [];\n      let noHiddenColumn = [];\n      let defaultColumHasSonTabs = [];\n      let defaultColumnTabs = [];\n      item.tags.forEach(jtem => {\n        tabs.push(jtem.tag);\n        jtem.columns.forEach(ktem => {\n          let { col, conf, title } = ktem;\n          conf = conf || {};\n          let columnItemConfig = {\n            title,\n            dataIndex: col,\n            align: conf.align,\n            cellStyle: { \"text-align\": conf.cellAlign },\n            width: conf.width,\n            ellipsis: true,\n            headerCellClass: \"noEllipsis\",\n            slotName: col,\n            bodyCellClass: \"bodyCell\",\n            fixed : conf.fixed\n          };\n          columnItemConfig.isShow = conf.isShow;\n          columnItemConfig.render = ({ record, column }) => {\n            let cellVal = record[column.dataIndex];\n            if (!Array.isArray(cellVal)) {\n              if (cellVal !== null && cellVal !== undefined) {\n                return <span innerHTML={getRedNum(cellVal)}></span>;\n              }\n            } else {\n              if (chartColumMap[chartColumnNameMap[column.dataIndex]] !== undefined) {\n                let route = chartColumMap[chartColumnNameMap[column.dataIndex]].map((item, i) => ({\n                  tip: item.month + record[item.col],\n                  value: cellVal[i],\n                }));\n                return <echartContainer route={route} height={74} width={100} />;\n              }\n            }\n          };\n          if (conf.canHide === 1) {\n            if (conf.parentCol === 0) {\n              columnTabs.push(columnItemConfig);\n            } else {\n              columnHasSonTabs.push(columnItemConfig);\n            }\n          } else {\n            noHiddenColumn.push(columnItemConfig);\n          }\n          if (conf.parentCol === 1) {\n            defaultColumHasSonTabs.push(columnItemConfig);\n          } else {\n            defaultColumnTabs.push(columnItemConfig);\n          }\n        });\n      });\n      columConfig[\"level\" + (index + 1)] = {\n        tabs,\n        params: item.params || [],\n        columnTabs,\n        columnHasSonTabs,\n        noHiddenColumn,\n        defaultColumnTabs,\n        defaultColumHasSonTabs,\n      };\n    });\n  }\n  tabChangeColumInfo.columnTabs = columConfig.level3.columnHasSonTabs;\n};\n// 更换表头\nconst analysiisColumn = () => {\n  let { columnTabs, noHiddenColumn, defaultColumHasSonTabs } = columConfig.level3;\n  let num = 5;\n  switch (selectMonth.value) {\n    case \"3\":\n      let months1 = getNMonthsAgo(3, true);\n      let children1 = [];\n      let filterHasSonShowColumn1 = defaultColumHasSonTabs.filter(item => item.isShow === 1);\n      months1.forEach((item, i) => {\n        let columnHasSonConfig = {};\n        columnHasSonConfig.title = `${item[0]}年${item[1]}月`;\n        columnHasSonConfig.children = filterHasSonShowColumn1.map((jtem, j) => {\n          num++;\n          return {\n            ...jtem,\n            dataIndex: `colNo${num}`,\n            slotName: `colNo${num}`,\n          };\n        });\n        children1.push(columnHasSonConfig);\n      });\n      num = 5;\n      filterShowChildrenColumn = children1;\n      break;\n    case \"6\":\n      let months2 = getNMonthsAgo(6, true);\n      let children2 = [];\n      let filterHasSonShowColumn2 = defaultColumHasSonTabs.filter(item => item.isShow === 1);\n      months2.forEach((item, i) => {\n        let columnHasSonConfig = {};\n        columnHasSonConfig.title = `${item[0]}年${item[1]}月`;\n        columnHasSonConfig.children = filterHasSonShowColumn2.map((jtem, j) => {\n          num++;\n          return {\n            ...jtem,\n            dataIndex: `colNo${num}`,\n            slotName: `colNo${num}`,\n          };\n        });\n        children2.push(columnHasSonConfig);\n      });\n      num = 5;\n      filterShowChildrenColumn = children2;\n      break;\n    case \"12\":\n      let months3 = getNMonthsAgo(12, true);\n      months3 = months3.filter(item=>item[0]!==2022)\n      let children3 = [];\n      let filterHasSonShowColumn3 = defaultColumHasSonTabs.filter(item => item.isShow === 1);\n      months3.forEach((item, i) => {\n        let columnHasSonConfig = {};\n        columnHasSonConfig.title = `${item[0]}年${item[1]}月`;\n        columnHasSonConfig.children = filterHasSonShowColumn3.map((jtem, j) => {\n          num++;\n          return {\n            ...jtem,\n            dataIndex: `colNo${num}`,\n            slotName: `colNo${num}`,\n          };\n        });\n        children3.push(columnHasSonConfig);\n      });\n      num = 5;\n      filterShowChildrenColumn = children3;\n      break;\n    default:\n      break;\n  }\n  Object.keys(chartColumMap).forEach(key => {\n    chartColumMap[key] = [];\n  });\n  filterShowChildrenColumn.forEach(item => {\n    if (item.children?.length) {\n      let filterShowColumns = [];\n      item.children.forEach(jtem => {\n        if (jtem.isShow === 1) {\n          filterShowColumns.push(jtem);\n        }\n        if (chartColumMap.hasOwnProperty(jtem.title)) {\n          chartColumMap[jtem.title].push({\n            month: item.title,\n            col: jtem.dataIndex,\n          });\n        }\n      });\n      item.children = filterShowColumns;\n    }\n  });\n  Object.keys(chartColumMap).forEach(key => chartColumMap[key].reverse());\n  let actionColumn = {\n    title : '操作',\n    dataIndex : 'action',\n    width : 80,\n    fixed : 'right',\n    cellStyle : {textAlign : 'center'},\n    render({record}){\n      return <a href=\"javaScript:void(0)\" onClick={()=>{goRingContrastChart(record,'project')}}>看图</a>\n    }\n  }\n  let filterAllShowColumn = [...columnTabs.filter(item => item.isShow === 1), ...noHiddenColumn, ...filterShowChildrenColumn,actionColumn];\n  tableInfo.columns = filterAllShowColumn;\n};\n//部门折叠\nconst expandedChange = rowKeys => {\n  tableInfo.defaultExpandedKeys = rowKeys;\n};\n// 切换时间区间\nconst handleMonthChange = month => {\n  selectMonth.value = month;\n  analysiisColumn();\n  getList();\n};\nonBeforeMount(() => {\n  seltColumns();\n  analysiisColumn();\n  getList();\n  initTotalColumns();\n  $bus.emit(\"updateStructure\", [\n    { type: \"text\", color: \"#333\", msg: '环比分析列表' },\n    {\n        type: \"button\",\n        color: \"#5370FD\",\n        msg: deptName,\n        isBack : true\n    },\n    { type: \"text\", color: \"#333\", msg: `${groupCustomerName}-${title}` },\n  ]);\n});\n// 点击标签\nconst handleTabChange = tab => {\n  switch (tab.isShow) {\n    case 0:\n      tab.isShow = 1;\n      changeShowStatus({\n        type: \"self\",\n        title: tab.title,\n        val: 1,\n        tab,\n      });\n      break;\n    case 1:\n      tab.isShow = 0;\n      changeShowStatus({\n        type: \"self\",\n        title: tab.title,\n        val: 0,\n        tab,\n      });\n      break;\n    default:\n      break;\n  }\n};\n// 更改高亮状态并更换表头\nconst changeShowStatus = obj => {\n  let { columnTabs, defaultColumHasSonTabs } = columConfig.level3;\n  let filterHasSonShowColumn = defaultColumHasSonTabs.filter(item => item.isShow === 1);\n  if (filterHasSonShowColumn.length === 0) {\n    Message.error(\"至少选择一项\");\n    obj.tab.isShow = obj.tab.isShow === 0 ? 1 : 0;\n    return;\n  }\n  if (obj.type === \"parent\") {\n    columnTabs.forEach(item => {\n      if (obj.title === item.title) {\n        item.isShow = obj.val;\n      }\n    });\n  }\n  if (obj.type === \"self\") {\n    defaultColumHasSonTabs.forEach(item => {\n      if (obj.title === item.title) {\n        item.isShow = obj.val;\n      }\n    });\n  }\n  analysiisColumn();\n  handleAbortRequest();\n  getList();\n};\n// 处理趋势数据\nconst construcLine = arr => {\n  arr.forEach(item => {\n    item.colNo3 = JSON.parse(item.colNo3);\n    item.colNo4 = JSON.parse(item.colNo4);\n    item.colNo5 = JSON.parse(item.colNo5);\n    if (item.children) {\n      construcLine(item.children);\n    }\n  });\n};\n// 获取列表数据\nconst getList = () => {\n  tableInfo.data = [];\n  tableInfo.loading = true;\n  let arr = [];\n  var newColumns = JSON.parse(JSON.stringify(tableInfo.columns));\n  const mappings = {\n    发薪人数: \"colNo1\",\n    营业收入: \"colNo2\",\n    销售毛利: \"colNo3\",\n    销售毛利率: \"colNo4\",\n    直接成本: \"colNo5\",\n    人均营业收入: \"colNo6\",\n    人均直接成本: \"colNo7\",\n    未完工项目成本: \"colNo8\",\n    招聘费用: \"colNo9\",\n    销售费用: \"colNo10\",\n    管理费用: \"colNo11\",\n  };\n  newColumns.forEach(item => {\n    if (mappings[item.title]) {\n      arr.push(mappings[item.title]);\n    }\n    if (item.children) {\n      item.children.forEach(jtem => {\n        if (mappings[jtem.title]) {\n          arr.push(mappings[jtem.title]);\n        }\n      });\n    }\n  });\n  const params = {\n    interval: Number(selectMonth.value),\n    dynamicHeaderParam: Array.from(new Set(arr)),\n    xAxis: 50,\n    yAxis: 20,\n    tagKey: \"linkAnalysis3\",\n    customerId: customerId,\n  };\n  getProjectRingList(params)\n    .then(res => {\n      if (res.code == \"200\") {\n        construcLine(res.data);\n        let data = dataAddKey(res.data, \"key\", \"title\");\n        let keys = [];\n        res.data.forEach(item => keys.push(item.title));\n        tableInfo.defaultExpandedKeys = keys;\n        tableInfo.data = data;\n      } else {\n        Message.error(res.message);\n      }\n      tableInfo.loading = false;\n    })\n    .catch(err => {\n      if (err?.code === \"ERR_CANCELED\") {\n        tableInfo.loading = true;\n      } else {\n        Message.error(err?.message || \"数据请求错误\");\n        tableInfo.loading = false;\n      }\n    });\n};\n\n//跳转环比分析看图页\nconst goRingContrastChart = (record,type)=>{\n  router.push({\n    name : 'ringContrastChart',\n    state : {\n      deptName,\n      interval:selectMonth.value,\n      deptId,\n      title,\n      customerName : record.customerName,\n      projectName : record.projectName,\n      sourceType : type,\n      projectId : record.finPcode,\n      taxRate : record.taxRate,\n    }\n  })\n}\n\n// 同比分析点击标签\nconst handleSameContrastTabChange = value => {\n  value.isShow = value.isShow === 0 ? 1 : 0;\n  let filterHasSonShowColumn = allHeadTagList.value.filter(item => item.isShow === 1);\n  if (filterHasSonShowColumn.length === 0) {\n    Message.error(\"至少选择一项\");\n    value.isShow = value.isShow === 0 ? 1 : 0;\n    return;\n  }\n  handleAbortRequest()\n  if (raidoGroupType.value === \"total\") {\n    constructSameTotalColumns(allHeadTagList.value);\n  } else {\n    constructSameDetailColumns(allHeadTagList.value);\n  }\n};\n// 更改汇总/明细\nconst constructSameTabChange = value => {\n  raidoGroupType.value = value;\n  initTotalColumns();\n};\n\n\n//同比分析\nconst allTableList = ref([]); // 表头数据\nconst raidoGroupType = ref(radiotype || 'total')\nconst allHeadTagList = ref([]); // 所有的标签\nconst notShowList = shallowRef([]); // 初始没显示的表头数据\n//同比分析项目维度汇总表格数据\nconst sameTotalProjectTableInfo = reactive({\n  columns: [],\n  data: [],\n  defaultExpandedKeys: [],\n  maxHeight: \"600px\",\n  loading: false,\n})\nconst sameTotalProjectTableRef = ref(null) //同比汇总项目维度表格dom\n//同比分析项目维度汇总展开/折叠\nconst projectTableExpandedChange = rowKeys => {\n  sameTotalProjectTableInfo.defaultExpandedKeys = rowKeys;\n};\n// 初始化表头和标签数据\nconst initTotalColumns = () => {\n  allHeadTagList.value = [];\n  allTableList.value = [];\n  notShowList.value = [];\n  let tagColumns = toRaw(tagColumnList.getTagColumnList) || [];\n  let currentPageColumn = tagColumns.filter(item => item.report === \"同比分析\") || [];\n  if (currentPageColumn.length) {\n    const currentColumnList = currentPageColumn[0].tier[2].tags[0].columns;\n    currentColumnList.forEach(item => {\n      const { col, conf, title } = item;\n      let columnItemConfig = {\n        title,\n        dataIndex: col,\n        align: conf.align,\n        cellStyle: { \"text-align\": conf.cellAlign },\n        width: conf.width,\n        ellipsis: true,\n        headerCellClass: \"noEllipsis\",\n        slotName: col,\n        bodyCellClass: \"bodyCell\",\n        isShow: conf.isShow,\n      };\n      if (conf.canHide == 1) {\n        allHeadTagList.value.push(columnItemConfig);\n      } else {\n        notShowList.value.push(columnItemConfig);\n      }\n      if(conf.fixed !== undefined){\n        columnItemConfig.fixed = conf.fixed\n      }\n      if (conf.parentCol == 1) {\n        allTableList.value.push(columnItemConfig);\n      }\n    });\n    if (raidoGroupType.value == \"total\") {\n      constructSameTotalColumns(allHeadTagList.value);\n    } else {\n      constructSameDetailColumns(allHeadTagList.value);\n    }\n  }\n};\n// 构造同比汇总的表头\nconst constructSameTotalColumns = list => {\n  let tableList = list.filter(item => item.isShow === 1);\n  let createColumns = []\n  let childrenColumns = [\n        {\n          title: lastYear + \"/1-12\",\n        },\n        {\n          title: lastYear + `/1-${lastMonth}`,\n        },\n        {\n          title: year + `/1-${lastMonth}`,\n        },\n        {\n          title: \"同比\",\n        },\n  ]\n  let colNo = 6\n  tableList.forEach(item => {\n    let columnConfig = {\n      title : item.title,\n      children : childrenColumns.map((jtem,i)=>{\n        let childrenColumnItemConfig = {\n          title : jtem.title,\n          dataIndex: `colNo${colNo}`,\n          slotName: `colNo${colNo}`,\n          width: 110,\n          cellStyle: {textAlign : 'right'},\n        }\n        if(i === (childrenColumns.length -1)){\n          childrenColumnItemConfig.title = item.title.endsWith('率')?'偏离':jtem.title\n        }\n        colNo++\n        return childrenColumnItemConfig\n      })\n    }\n    createColumns.push(columnConfig)\n  });\n  let actionColumn = {\n    title : '操作',\n    dataIndex : 'action',\n    width : 80,\n    fixed : 'right',\n    cellStyle : {textAlign : 'center'},\n    render({record}){\n      return <a href=\"javaScript:void(0)\" onClick={()=>{goLookChat(record,'project')}}>看图</a>\n    }\n  }\n  sameTotalProjectTableInfo.columns = [...notShowList.value,...createColumns,actionColumn]\n  getProjectYoyAnalysisList('1')\n};\n\n// 同比明细项目维度表格数据\nconst sameDetailProjectTableInfo = reactive({\n  columns: [],\n  data: [],\n  defaultExpandedKeys: [],\n  maxHeight: \"600px\",\n  loading: false,\n})\nconst sameDetailProjectTableRef = ref(null) //同比明细项目维度表格dom\n\n//同比明细项目维度展开/折叠\nconst sameDetailProjectTableExpandedChange = rowKeys => {\n  sameDetailProjectTableInfo.defaultExpandedKeys = rowKeys;\n};\n// 构造同比明细的表头结构\nconst constructSameDetailColumns = list => {\n  const timeData = [];\n  let activeTableList = list.filter(item => item.isShow === 1);\n  if (month == 1) {\n    for (var i = 1; i <= 12; i++) {\n      timeData.push({\n        title: i + \"月\",\n        children: [],\n      });\n    }\n  } else {\n    for (var i = 1; i <= lastMonth; i++) {\n      timeData.push({\n        title: i + \"月\",\n        children: [],\n      });\n    }\n  }\n  const years = [lastYear, year];\n  let colNo = 6\n  timeData.forEach(item=>{\n    let childrenColumns = []\n    activeTableList.forEach(jtem=>{\n      years.forEach(ktem=>{\n        let contrastColumnConfig = {\n          title: `${jtem.title}${ktem}`,\n          dataIndex: `colNo${colNo}`,\n          slotName: `colNo${colNo}`,\n          width: jtem.width,\n          cellStyle: toRaw(jtem.cellStyle),\n        }\n        childrenColumns.push(contrastColumnConfig)\n        colNo++\n      })\n    })\n    item.children = childrenColumns\n  })\n  let actionColumn = {\n    title : '操作',\n    dataIndex : 'action',\n    width : 80,\n    fixed : 'right',\n    cellStyle : {textAlign : 'center'},\n    render({record}){\n      return <a href=\"javaScript:void(0)\" onClick={()=>{goLookChat(record,'project')}}>看图</a>\n    }\n  }\n  sameDetailProjectTableInfo.columns = [...notShowList.value,...timeData,actionColumn]\n  getProjectYoyAnalysisList('2')\n};\n\n//同比分析项目维度接口\nconst getProjectYoyAnalysisList = (type)=>{\n  let params = {\n    interval:lastMonth == 0? 12 : lastMonth,\n    dynamicHeaderParam:allTableList.value.filter(item=>item.isShow ===1).map(item=>item.dataIndex),\n    xAxis:74,\n    yAxis:100,\n    tagKey:\"yoyAnalysis3\",\n    customerId,\n    type \n  }\n  raidoGroupType.value === 'total'?sameTotalProjectTableInfo.loading = true:sameDetailProjectTableInfo.loading = true;\n  getProjectYoyAnalysis(params).then(res=>{\n    if(res.code === '200'){\n      dataAddKey(res.data,'key','deptId')\n      let expandKeys = []\n      res.data.forEach(item=>expandKeys.push(item.key))\n      if(raidoGroupType.value === 'total'){\n        sameTotalProjectTableInfo.defaultExpandedKeys = expandKeys\n        sameTotalProjectTableInfo.data = res.data\n        //计算表格不出滚动条的最大高度\n        if(sameTotalProjectTableInfo.maxHeight === '600px'){\n          nextTick(() => {\n                if (sameTotalProjectTableRef.value) {\n                let head = sameTotalProjectTableRef.value.$el;\n                let innerHeight = window.innerHeight;\n                let elHeight = head.getBoundingClientRect().top;\n                sameTotalProjectTableInfo.maxHeight = Math.round(innerHeight - elHeight - 32) + \"px\";\n              }\n            });\n        }\n      }\n      if(raidoGroupType.value === 'detail'){\n        sameDetailProjectTableInfo.defaultExpandedKeys = expandKeys\n        sameDetailProjectTableInfo.data = res.data\n        //计算表格不出滚动条的最大高度\n        if(sameDetailProjectTableInfo.maxHeight === '600px'){\n          nextTick(() => {\n                if (sameDetailProjectTableRef.value) {\n                let head = sameDetailProjectTableRef.value.$el;\n                let innerHeight = window.innerHeight;\n                let elHeight = head.getBoundingClientRect().top;\n                sameDetailProjectTableInfo.maxHeight = Math.round(innerHeight - elHeight - 32) + \"px\";\n              }\n            });\n        }\n      }\n    }else {\n      Message.error(res.message || '请求数据失败')\n    }\n    if(raidoGroupType.value === 'total'){\n      sameTotalProjectTableInfo.loading = false;\n    }\n    if(raidoGroupType.value === 'detail'){\n      sameDetailProjectTableInfo.loading = false;\n    }\n  }).catch(err=>{\n    if(raidoGroupType.value === 'total'){\n      if (err?.code === \"ERR_CANCELED\") {\n        sameTotalProjectTableInfo.loading = true;\n        } else {\n          Message.error(err?.message || \"数据请求错误\");\n          sameTotalProjectTableInfo.loading = false;\n        }\n      }\n    if(raidoGroupType.value === 'detail'){\n      if (err?.code === \"ERR_CANCELED\") {\n        sameDetailProjectTableInfo.loading = true;\n      } else {\n        Message.error(err?.message || \"数据请求错误\");\n        sameDetailProjectTableInfo.loading = false;\n      }\n    }\n  })\n}\n//跳转同比分析看图页\nconst goLookChat = (record,type)=>{\n  router.push({\n    name : 'lookChart',\n    state : {\n      barChartOptions : JSON.stringify(allHeadTagList.value),\n      deptId,\n      title : groupCustomerName,\n      sourceType:type,\n      taxRate : record.taxRate,\n      projectId : record.finPcode,\n      customerName : record.customerName,\n      projectName : record.projectName,\n      deptName\n    }\n  })\n}\n\n//echarts缩略图的路径信息\nconst createEchartsRoute = (record,column)=>{\n  return record[column.dataIndex].map((item,i)=>({value:record[column.dataIndex][i]}))\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.p-t-10 {\n  padding-top: 10px;\n}\n:deep(.tabs .arco-tabs-nav-type-line .arco-tabs-tab-title) {\n  font-size: 15px;\n}\n</style>\n","import script from \"./projectRingSame.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./projectRingSame.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./projectRingSame.vue?vue&type=style&index=0&id=e686cd34&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/lijiaxin/Documents/workspace/hydsoft-oms-frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-e686cd34\"]])\n\nexport default __exports__"],"names":["getDepartmentRingList","parameter","request","url","method","data","timeout","getCustomerRingList","getProjectRingList","queryYoyAnalysis","getCustomerYoyAnalysis","getProjectYoyAnalysis","echartContainer","ref","onMounted","option","chartDom","value","myChart","echarts","xAxis","type","show","yAxis","tooltip","trigger","position","formatter","params","name","replaceAll","appendToBody","series","symbol","symbolSize","itemStyle","color","areaStyle","offset","props","route","setOption","__exports__","$bus","getCurrentInstance","appContext","config","globalProperties","useRoute","router","useRouter","customerId","deptId","deptName","groupCustomerName","title","tab","radiotype","query","tagColumnList","useTagColumnListStore","tabsActive","year","month","getCurrentTime","lastYear","lastMonth","columConfig","tableInfo","reactive","columns","defaultExpandedKeys","maxHeight","loading","selectMonth","tableRef","tabChangeColumInfo","columnTabs","up","down","chartColumMap","发薪人数","营业收入","销售毛利率","chartColumnNameMap","canvasLine1","canvasLine2","canvasLine3","filterShowChildrenColumn","handleTab","val","head","$el","nextTick","innerHeight","window","elHeight","getBoundingClientRect","top","seltColumns","tagColumns","toRaw","getTagColumnList","currentPageColumn","filter","item","report","length","tier","forEach","index","tabs","columnHasSonTabs","noHiddenColumn","defaultColumHasSonTabs","defaultColumnTabs","tags","jtem","push","tag","ktem","col","conf","columnItemConfig","dataIndex","align","cellStyle","cellAlign","width","ellipsis","headerCellClass","slotName","bodyCellClass","fixed","isShow","render","record","column","cellVal","Array","isArray","undefined","map","i","tip","getRedNum","canHide","parentCol","level3","analysiisColumn","num","months1","getNMonthsAgo","children1","filterHasSonShowColumn1","columnHasSonConfig","children","j","months2","children2","filterHasSonShowColumn2","months3","children3","filterHasSonShowColumn3","Object","keys","key","filterShowColumns","hasOwnProperty","reverse","actionColumn","textAlign","goRingContrastChart","filterAllShowColumn","expandedChange","rowKeys","handleMonthChange","getList","onBeforeMount","initTotalColumns","emit","msg","isBack","handleTabChange","changeShowStatus","obj","filterHasSonShowColumn","Message","error","handleAbortRequest","construcLine","arr","colNo3","JSON","parse","colNo4","colNo5","newColumns","stringify","mappings","销售毛利","直接成本","人均营业收入","人均直接成本","未完工项目成本","招聘费用","销售费用","管理费用","interval","Number","dynamicHeaderParam","from","Set","tagKey","then","res","code","dataAddKey","message","catch","err","state","customerName","projectName","sourceType","projectId","finPcode","taxRate","handleSameContrastTabChange","allHeadTagList","raidoGroupType","constructSameTotalColumns","constructSameDetailColumns","constructSameTabChange","allTableList","notShowList","shallowRef","sameTotalProjectTableInfo","sameTotalProjectTableRef","projectTableExpandedChange","currentColumnList","list","tableList","createColumns","childrenColumns","colNo","columnConfig","childrenColumnItemConfig","endsWith","goLookChat","getProjectYoyAnalysisList","sameDetailProjectTableInfo","sameDetailProjectTableRef","sameDetailProjectTableExpandedChange","timeData","activeTableList","years","contrastColumnConfig","expandKeys","Math","round","barChartOptions","createEchartsRoute"],"sourceRoot":""}