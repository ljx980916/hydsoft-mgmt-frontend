{"version":3,"file":"js/userManage.838adbbd.js","mappings":"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","sources":["webpack://oms-frontend/./src/api/calendarEvents.js","webpack://oms-frontend/./src/views/system/constColumns.js","webpack://oms-frontend/./src/components/tableContainer.vue","webpack://oms-frontend/./src/components/tableContainer.vue?de49","webpack://oms-frontend/./src/api/userRole.js","webpack://oms-frontend/./src/views/system/userView.vue","webpack://oms-frontend/./src/views/system/userView.vue?983c"],"sourcesContent":["import request from '@/utils/request'\n// 获取列表数据\nexport function postCalendarEventList () {\n    return request({\n      url: '/calendarEvent/fetchList',\n      method: 'get',\n    })\n}\n// 获取可见角色\nexport function postSelectRoleList () {\n  return request({\n    url: '/system/role/selectRole',\n    method: 'post',\n  })\n}\n// 获取关联部门\nexport function getSelectDeptList () {\n  return request({\n    url: '/calendarEvent/getDeptTree',\n    method: 'get',\n  })\n}\n// 新建日历事件\nexport function postAddInsertEvent (parameter) {\n  return request({\n    url: '/calendarEvent/insertEvent',\n    method: 'post',\n    data:parameter\n  })\n}\n// 编辑日历事件\nexport function postUpdateInsertEvent (parameter) {\n  return request({\n    url: '/calendarEvent/editEvent',\n    method: 'post',\n    data:parameter\n  })\n}\n// 删除日历事件\nexport function deleteInsertEvent (parameter) {\n  return request({\n    url: '/calendarEvent/deleteEvent',\n    method: 'delete',\n    params: parameter\n  })\n}","// 用户管理表头\nexport const userListColumns = [\n  {\n    title: '工号',\n    dataIndex: 'workNo',\n  }, \n  {\n    title: '姓名',\n    dataIndex: 'name',\n    slotName : 'name',\n  },\n  {\n    title: '所属部门',\n    dataIndex: 'deptName',\n  },\n  {\n    title: '邮箱',\n    dataIndex: 'email',\n  }, \n  {\n    title: '账户状态',\n    dataIndex: 'flag',\n    slotName:'flag_view',\n        \n  },\n  {\n    title: '操作',\n    dataIndex: 'action',\n    slotName : 'action',\n  }\n];\n// 菜单管理表头\nexport const menuListColumns= [\n    {\n      title: '菜单名称',\n      dataIndex: 'name',\n      key: 'name',\n      width: '20%'\n    },\n    {\n      title: '图标',\n      dataIndex: 'icon',\n      key: 'icon',\n    },\n    {\n      title: '类型',\n      dataIndex: 'type',\n      key: 'type',\n      slotName : 'type_view'\n    },\n    {\n      title: '排序号',\n      dataIndex: 'sort',\n      key: 'sort',\n    },\n    {\n      title: 'URL',\n      dataIndex: 'url',\n      key: 'url',\n    },\n    {\n      title: '授权标识',\n      dataIndex: 'perms',\n      key: 'perms',\n    },\n    {\n      title: '操作',\n      dataIndex: 'action',\n      key: 'action',\n\n      slotName : 'action'\n    }\n  ]\n// 角色管理表头\nexport const roleListColumns = [\n    {\n        title: '角色名称',\n        dataIndex: 'name',\n      },\n      {\n        title: '备注',\n        dataIndex: 'remarks',\n        \n      },\n      {\n        title: '角色编码',\n        dataIndex: 'code',\n        \n      },\n      {\n        title: '创建时间',\n        dataIndex: 'createTime',\n        width : 200\n      },\n      {\n        title: '操作',\n        dataIndex: 'action',\n        slotName : 'action'\n      }\n]","<template>\n  <div>\n    <div>\n      <div class=\"m-b-20\">\n        <div class=\"flex-between\" style=\"height: 40px;\">\n          <a-radio-group type=\"button\" size=\"large\" :model-value=\"props.chekedValue\" @change=\"radioChange\">\n            <a-radio v-for=\"item of props.tabs\" :value=\"item.key\">{{ item.name }}</a-radio>\n          </a-radio-group>\n          <slot></slot>\n        </div>\n        <div>\n          <div class=\"tool-grid\">\n            <!-- 只看我的 -->\n            <div v-if=\"props.menuName === 'USER'\">\n              <a-switch :value=\"switchStatus\" @change=\"handleSwitch\">\n                <template #checked>ON</template>\n                <template #unchecked>OFF</template>\n              </a-switch>\n              <span>只看我的</span>\n            </div>\n            <!-- 导出excel -->\n            <a-button type=\"primary\" v-if=\"props.menuName === 'USER'\">\n              <template #icon>\n                <icon-download />\n              </template>\n              <template #default>导出excel</template>\n            </a-button>\n            <!-- 配置列 -->\n            <a-button class=\"config\" type=\"primary\" @click=\"handleSetColumns\" v-if=\"props.menuName === 'USER'\">\n              <template #icon>\n                <icon-home />\n              </template>\n              <template #default>配置列</template>\n            </a-button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- 表格内容 -->\n    <div>\n      <a-table\n        :columns=\"(props.tableColumns.length && props.tableColumns) || tableInfo.tableColumns\"\n        :data=\"(props.tableData.length && props.tableData) || tableInfo.tableData\"\n        column-resizable\n        :bordered=\"false\"\n        :scroll=\"{ x: '100%', y: props.scrollY }\"\n        :scrollbar=\"false\"\n        :loading=\"props.loading\"\n        :pagination=\"{\n          total: paginationTotal,\n          current: paginationCurrent,\n          pageSize: paginationPageSize,\n          showTotal: true,\n          showPageSize: true,\n          showJumper: true,\n          onChange: paginationChange,\n          onPageSizeChange: paginationPageSizeChange,\n        }\"\n      >\n        <template #type_view=\"{ record }\">\n          <div>{{ record.type === 0 ? \"目录\" : record.type === 1 ? \"菜单\" : \"按钮\" }}</div>\n        </template>\n        <template #role_view=\"{ record }\">\n          <div v-for=\"(item, i) in record.roles\" :key=\"i\">{{ item.name }}</div>\n        </template>\n        <template #flag_view=\"{ record }\">\n          <span class=\"red\" v-if=\"record.flag === 0\">禁用</span>\n          <span class=\"green\" v-if=\"record.flag === 1\">启用</span>\n        </template>\n        <template #action=\"{ record }\">\n          <a-popconfirm content=\"你确定要启用这个用户吗?\" type=\"error\" @ok=\"handleUpdateFlag(record)\">\n            <a-button type=\"text\" v-if=\"props.menuName == 'user' && record.flag === 0\">启用</a-button>\n          </a-popconfirm>\n          <a-divider v-if=\"props.menuName == 'user' && record.flag === 0\" direction=\"vertical\" />\n          <a-button type=\"text\" v-if=\"props.menuName == 'user' && record.flag === 0\" style=\"color: #999999\">禁用</a-button>\n          <a-button type=\"text\" v-if=\"props.menuName == 'user' && record.flag === 1\" style=\"color: #999999\">启用</a-button>\n          <a-divider v-if=\"props.menuName == 'user' && record.flag === 1\" direction=\"vertical\" />\n          <a-popconfirm content=\"你确定要禁用这个用户吗?\" type=\"error\" @ok=\"handleUpdateFlag(record)\">\n            <a-button type=\"text\" v-if=\"props.menuName == 'user' && record.flag === 1\">禁用</a-button>\n          </a-popconfirm>\n          <!-- 查看 -->\n          <a-button type=\"text\" v-if=\"props.menuName == 'USER'\" @click=\"handleDetail(record, 'view')\">查看</a-button>\n          <a-divider v-if=\"props.menuName == 'user'\" direction=\"vertical\" />\n          <!-- 编辑 -->\n          <a-button\n            v-if=\"permissions.includes('menu:edit') && record.code !== 'admin'\"\n            type=\"text\"\n            @click=\"handleEdit(record, 'edit')\"\n          >\n            编辑\n          </a-button>\n          <a-divider\n            v-if=\"props.menuName == 'menu' || (props.menuName == 'role' && record.code !== 'admin')\"\n            direction=\"vertical\"\n          />\n          <!-- 删除 -->\n          <a-popconfirm content=\"确定要删除吗?\" type=\"error\" @ok=\"handleDeleteMenu(record)\">\n            <a-button\n              type=\"text\"\n              v-if=\"\n                permissions.includes('menu:delete') &&\n                (props.menuName == 'menu' || (props.menuName == 'role' && record.code !== 'admin'))\n              \"\n            >\n              删除\n            </a-button>\n          </a-popconfirm>\n        </template>\n      </a-table>\n    </div>\n    <!-- 表单数据 -->\n    <a-modal v-model:visible=\"modalVisible\" title=\"选择表格项\">\n      <a-checkbox-group @change=\"columnSelected\" v-model=\"defaultCheckList\">\n        <a-checkbox v-for=\"item of setColumns\" :key=\"item.dataIndex\" :value=\"item.dataIndex\">\n          {{ item.title }}\n        </a-checkbox>\n      </a-checkbox-group>\n      <template #footer>\n        <a-button type=\"primary\" @click=\"columnOK\">确定</a-button>\n      </template>\n    </a-modal>\n  </div>\n</template>\n\n<script setup>\nimport { reactive, ref } from \"vue\";\nimport { userListColumns } from \"../views/system/constColumns\";\nimport { Message } from \"@arco-design/web-vue\";\nimport { useMenuStore } from \"../store/index\";\nconst permissions = useMenuStore().getPermission;\nconst props = defineProps({\n  tabs: {\n    type: Array,\n    default: () => [],\n  },\n  chekedValue: {\n    type: String,\n    default: \"\",\n  },\n  // 表头\n  tableColumns: {\n    type: Array,\n    default: () => [],\n  },\n  // 表单数据\n  tableData: {\n    type: Array,\n    default: () => [],\n  },\n  // 菜单名称(根据菜单名称判断显示指定按钮)\n  menuName: {\n    type: String,\n    default: \"\",\n  },\n  loading : {\n    type : Boolean,\n    default : false\n  },\n  scrollY : {\n    type : String,\n    default : '600px'\n  },\n  setColumns: {\n    type: Array,\n    default: () => [],\n  },\n  switchStatus: {\n    type: Boolean,\n    default: false,\n  },\n  exportExcel: {\n    type: String,\n    default: \"\",\n  },\n  paginationTotal: {\n    type: Number,\n    default: 10,\n  },\n  paginationCurrent: {\n    type: Number,\n    default: 1,\n  },\n  paginationPageSize: {\n    type: Number,\n    default: 10,\n  },\n});\n// 表头信息\nconst tableInfo = reactive({\n  tableColumns: [\n    {\n      title: \"自定义列1\",\n      dataIndex: \"customColumn1\",\n      width: 200,\n    },\n    {\n      title: \"自定义列2\",\n      dataIndex: \"customColumn2\",\n      width: 200,\n    },\n    {\n      title: \"自定义列3\",\n      dataIndex: \"customColumn3\",\n      width: 200,\n    },\n    {\n      title: \"自定义列4\",\n      dataIndex: \"customColumn4\",\n      width: 200,\n    },\n    {\n      title: \"自定义列5\",\n      dataIndex: \"customColumn5\",\n      width: 200,\n    },\n    {\n      title: \"自定义列6\",\n      dataIndex: \"customColumn6\",\n      width: 200,\n    },\n  ],\n  tableData: [],\n});\nconst emit = defineEmits([\n  \"switchClick\",\n  \"paginationCurrentChange\",\n  \"paginationPageSizeChange\",\n  \"handleEdit\",\n  \"handleDeleteMenu\",\n  \"handleUpdateFlag\",\n  \"columnOK\",\n  \"radioChange\",\n]);\nconst modalVisible = ref(false);\nconst defaultCheckList = ref([]);\nconst checkedValues = ref([]);\nconst userTableColumns = ref(userListColumns);\nlet actionColumn = userListColumns.filter(item => item.dataIndex !== \"action\") || [];\n// 打开配置列\nconst handleSetColumns = () => {\n  modalVisible.value = true;\n};\n// 配置列多选框更改\nconst columnSelected = values => {\n  checkedValues.value = values;\n};\n// 打开配置列勾选表格中已有的表头\nconst setTableColumns = () => {\n  let cachColumns = JSON.parse(localStorage.getItem(\"userListColumns\"));\n  if (cachColumns) {\n    userTableColumns.value = cachColumns;\n    defaultCheckList.value = cachColumns.map(item => item.dataIndex);\n  } else {\n    var selectedColumsArr = [];\n    actionColumn.forEach(item => {\n      selectedColumsArr.push(item.dataIndex);\n      defaultCheckList.value = selectedColumsArr;\n    });\n  }\n};\nsetTableColumns();\n// 配置列确认\nconst columnOK = () => {\n  if (defaultCheckList.value.length === 1 && defaultCheckList.value[0] === \"action\") {\n    return Message.error(\"至少选择一项\");\n  } else {\n    emit(\"columnOK\", defaultCheckList.value);\n    modalVisible.value = false;\n  }\n};\n// 只看我的\nconst handleSwitch = bool => {\n  emit(\"switchClick\", !bool);\n};\n// 更改当前页\nconst paginationChange = current => {\n  emit(\"paginationCurrentChange\", current);\n};\n// 更改页容量\nconst paginationPageSizeChange = pageSize => {\n  emit(\"paginationPageSizeChange\", pageSize);\n};\n// 编辑\nconst handleEdit = (record, type) => {\n  emit(\"handleEdit\", record, type);\n};\n// 删除\nconst handleDeleteMenu = record => {\n  emit(\"handleDeleteMenu\", record);\n};\n// 查看\nconst handleDetail = record => {\n  emit(\"handleDetail\", record);\n};\n// 更改状态\nconst handleUpdateFlag = record => {\n  emit(\"handleUpdateFlag\", record);\n};\n//tab切换\nconst radioChange = val => {\n  emit(\"radioChange\", val);\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.header-grid {\n  display: grid;\n  grid-template-columns: 10fr 6fr;\n  gap: 20px;\n}\n.tool-grid {\n  display: grid;\n  grid-template-columns: repeat(3, auto);\n  column-gap: 15px;\n  row-gap: 20px;\n  grid-auto-flow: row;\n}\n.m-b-20 {\n  margin-bottom: 20px;\n}\n.config {\n  position: absolute;\n  width: 100px;\n  top: 210px;\n  height: 36px;\n  right: 70px;\n}\n</style>\n","import script from \"./tableContainer.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./tableContainer.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./tableContainer.vue?vue&type=style&index=0&id=53477c82&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/lijiaxin/Documents/workspace/hydsoft-oms-frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-53477c82\"]])\n\nexport default __exports__","import request from '@/utils/request'\n\nexport function userList (parameter) {\n    return request({\n        url: '/system/user',\n        method: 'get',\n        params: parameter\n    })\n}\n\nexport function userDetail (parameter) {\n    return request({\n        url: '/system/user/' + parameter.id,\n        method: 'get'\n    })\n}\n\nexport function saveUser (parameter) {\n    return request({\n        url: '/system/user/save',\n        method: 'post',\n        data: parameter\n    })\n}\n\nexport function userModalList (parameter) {\n    return request({\n        url: '/system/role',\n        method: 'get',\n        params: parameter\n    })\n}\n\nexport function deleteUser(parameter) {\n    return request({\n        url: '/system/user/delete',\n        method: 'delete',\n        params: parameter\n    })\n}\n\nexport function getUserList(parameter) {\n  return request({\n      url: '/system/user/userListPage',\n      method: 'get',\n      params: parameter\n  })\n}\n\nexport function updateFlag(parameter) {\n  return request({\n      url: '/system/user/updateFlag',\n      method: 'get',\n      params: parameter\n  })\n}\n\nexport function searchEmployee(parameter) {\n  return request({\n      url: '/mdm/searchEmployee',\n      method: 'post',\n      data: parameter\n  })\n}\n\nexport function listShowTabRole (parameter) {\n    return request({\n        url: '/system/role/listShowTabRole',\n        method: 'post',\n        data: parameter\n    })\n}\n\n//获取员工姓名和工号\nexport function getNameCodeList (parameter) {\n    return request({\n        url: '/system/user/getEmpByNameOrCode',\n        method: 'get',\n        params: parameter\n    })\n}","<template>\n  <div class=\"defaultPadding\">\n    <!-- 表格内容 -->\n    <tableContainer\n      class=\"m-t-20\"\n      column-resizable\n      :scroll=\"scroll\"\n      :scrollbar=\"false\"\n      :paginationTotal=\"dataContent.pagination.total\"\n      :paginationPageSize=\"dataContent.pagination.pageSize\"\n      :paginationCurrent=\"dataContent.pagination.pageNum\"\n      :loading=\"dataContent.loading\"\n      :tableColumns=\"userTableColumns\"\n      :table-data=\"dataContent.dataSource\"\n      :menu-name=\"dataContent.menuName\"\n      :tabs=\"tabList\"\n      :chekedValue=\"chekedValue\"\n      @handleEdit=\"handleEditUser\"\n      @radioChange=\"radioChange\"\n      @handleUpdateFlag=\"handleUpdateFlag\"\n      @paginationCurrentChange=\"paginationCurrentChange\"\n      @paginationPageSizeChange=\"paginationPageSizeChange\"\n    >\n        <a-button type=\"primary\" @click=\"handleDetail()\" v-if=\"permissions.includes('user:add')\">\n                <template #icon>\n                  <icon-plus />\n                </template>\n                <template #default>新建账号</template>\n        </a-button>\n    </tableContainer>\n    <a-modal v-model:visible=\"accountVisible\" :title=\"title\" title-align=\"start\" width=\"680px\">\n      <a-form ref=\"formRef\" :mask=\"true\" :model=\"form\" auto-label-width :style=\"{ width: '580px', marginLeft: '20px' }\">\n        <a-form-item field=\"empName\" label=\"员工姓名\" :rules=\"[{ required: true, message: '请输入员工姓名' }]\">\n          <a-select\n            v-model=\"form.empName\"\n            placeholder=\"请输入\"\n            :filter-option=\"false\"\n            allow-search\n            :disabled=\"accountModalStatus === 'update'\"\n            @search=\"handleNameSearch\"\n            @change=\"changeDeptname\"\n          >\n            <a-option v-for=\"(item, index) of empList\" :value=\"item.empCode\" :label=\"item.empName\" :key=\"index\">\n              {{ item.empName }} &nbsp;({{ item.empCode }}，{{ item.deptName }})\n            </a-option>\n          </a-select>\n        </a-form-item>\n        <a-form-item field=\"empCode\" label=\"员工工号\" :rules=\"[{ required: true, message: '请输入员工工号' }]\">\n          <a-input\n            v-model=\"form.empCode\"\n            placeholder=\"请输入\"\n            disabled\n          >\n          </a-input>\n        </a-form-item>\n        <a-form-item field=\"deptName\" label=\"部门名称\" disabled :rules=\"[{ required: true, message: '请输入部门名称' }]\">\n          <a-input v-model=\"form.deptName\" placeholder=\"请输入\" :disabled=\"accountModalStatus === 'update'\"/>\n        </a-form-item>\n        <a-form-item v-if=\"hasAdmin\" field=\"roleConfig1\" label=\"角色\" :rules=\"[{ required: true, message: '请输入角色设置' }]\">\n          <a-select v-model=\"form.roleConfig1\" placeholder=\"请输入\" multiple allow-search>\n            <a-option v-for=\"item of roleList\" :value=\"item.id\" :key=\"item.id\">{{ item.name }}</a-option>\n          </a-select>\n        </a-form-item>\n        <a-form-item v-else field=\"roleConfig\" label=\"角色\" :rules=\"[{ required: true, message: '请选择角色设置' }]\">\n          <span class=\"m-t-8\">{{ form.roleConfig }}</span>\n        </a-form-item>\n        <!-- <a-form-item field=\"password\" label=\"密码\" :rules=\"[{ required: true, message: '请输入密码' }]\">\n          <a-input-password v-model=\"form.password\" placeholder=\"请输入\" allow-clear />\n        </a-form-item> -->\n      </a-form>\n      <template #footer>\n        <a-button @click=\"handleCancel\">取消</a-button>\n        <a-button type=\"primary\" @click=\"handleModalOk\">确定</a-button>\n      </template>\n    </a-modal>\n  </div>\n</template>\n\n<script setup>\nimport { userListColumns } from \"./constColumns\";\nimport { getUserList, updateFlag, getNameCodeList,listShowTabRole } from \"@/api/userRole\";\nimport { onBeforeMount, reactive, ref, shallowRef } from \"vue\";\nimport tableContainer from \"@/components/tableContainer.vue\";\nimport { getCurrentInstance } from \"@vue/runtime-core\";\nimport { Message } from \"@arco-design/web-vue\";\nimport { saveUser, userDetail } from \"@/api/userRole.js\";\nimport { postSelectRoleList } from \"@/api/calendarEvents.js\";\nlet $bus = getCurrentInstance().appContext.config.globalProperties.$bus;\nimport { useUserInfoStore, useMenuStore } from \"../../store/index\";\nconst permissions = useMenuStore().getPermission;\nconst userInfo = useUserInfoStore().getUserInfo;\nonBeforeMount(() => {\n  $bus.emit(\"updateStructure\", [{ type: \"text\", color: \"#333\", msg: \"账号列表\" }]);\n  getRole();\n});\nconst hasAdmin = ref(false);\nconst tabList = ref([]);\nconst chekedValue = ref(\"OMD\");\nconst userTableColumns = ref(userListColumns);\nconst accountVisible = ref(false);\nconst form = reactive({\n  roleConfig: \"OMD\",\n  roleConfig1: [],\n  empCode:'',\n  empName:\"\",\n  deptName:'',\n  userName:''\n});\nconst roles = ref([]);\nconst formRef = ref(null);\nconst scroll = {\n  x: \"100%\",\n  y: 600,\n};\nconst empList = shallowRef([]);\nconst actionType = ref(\"\");\nconst title = ref(\"\");\nconst id = ref(\"\");\nconst roleList = ref([]);\nconst accountModalStatus = ref('add')\n// 表格配置\nconst dataContent = reactive({\n  loading: false,\n  dataSource: [],\n  pagination: {\n    pageNum: 1,\n    pageSize: 10,\n    total: 0,\n  },\n  menuName: \"user\",\n});\nconst getRole = () => {\n  postSelectRoleList().then(res => {\n    if (res.code == \"200\") {\n      roleList.value = res.data;\n    }\n  });\n};\n// 获取列表数据\nconst getList = () => {\n  dataContent.loading = true;\n  const params = {\n    pageNum: dataContent.pagination.pageNum,\n    pageSize: dataContent.pagination.pageSize,\n    roleCode: chekedValue.value,\n  };\n  getUserList(params).then(res => {\n    if (res.code === \"000000000000\") {\n      res.data.list.forEach((item, i) => {\n        item.key = i;\n      });\n      dataContent.pagination.total = parseInt(res.data.total);\n      dataContent.dataSource = res.data.list;\n    }\n    dataContent.loading = false;\n  });\n};\ngetList();\n// 新建账号\nconst handleDetail = () => {\n  accountVisible.value = true;\n  actionType.value = \"\";\n  title.value = \"新建账号\";\n  formRef.value.resetFields();\n  form.roleConfig1 = []\n  id.value = \"\";\n  accountModalStatus.value = 'add'\n  chekedValue.value === \"OMD\" ? (form.roleConfig = \"OMD\") : (form.roleConfig = \"admin\");\n  if (userInfo.roles.indexOf(\"admin\") != -1) {\n    hasAdmin.value = true;\n  } else {\n    hasAdmin.value = false;\n  }\n};\n// 更改账号状态\nconst handleUpdateFlag = record => {\n  const params = {\n    userId: record.id,\n    flag: record.flag == 1 ? 0 : 1,\n  };\n  updateFlag(params).then(res => {\n    if (res.code === \"000000000000\") {\n      Message.success(\"操作成功\");\n      getList();\n    } else {\n      Message.error(res.message);\n    }\n  });\n};\n// 更改当前页码\nconst paginationCurrentChange = current => {\n  dataContent.pagination.pageNum = current;\n  getList();\n};\n// 更改页容量\nconst paginationPageSizeChange = pageSize => {\n  dataContent.pagination.pageSize = pageSize;\n  getList();\n};\n// 切换tab\nconst radioChange = val => {\n  chekedValue.value = val;\n  form.roleConfig = val;\n  getList();\n};\n// 编辑\nconst handleEditUser = (record, type) => {\n  roles.value = [];\n  form.roleConfig1 = [];\n  accountVisible.value = true;\n  accountModalStatus.value = 'update'\n  if (userInfo.roles.indexOf(\"admin\") != -1) {\n    hasAdmin.value = true;\n  } else {\n    hasAdmin.value = false;\n  }\n  userDetail({ id: record.id }).then(res => {\n    const { data, code } = res;\n    if (code === \"000000000000\") {\n      form.empName = `${data.name}`;\n      form.empCode = data.workNo;\n      form.deptName = data.deptName;\n      // form.password = data.pwd;\n      form.userName = data.userName;\n      data.roles.forEach(item => {\n        if (form.roleConfig1.indexOf(item.id) === -1) {\n          form.roleConfig1.push(item.id);\n        }\n      });\n    }\n  });\n  actionType.value = type;\n  title.value = \"编辑账号\";\n  id.value = record.id;\n};\nconst getNameCode = (params) =>{\n  getNameCodeList(params).then(res => {\n    if (res.code == \"000000000000\") {\n      empList.value = res.data;\n    }\n  });\n}\n// 搜索\nconst handleNameSearch = val => {\n  formRef.value.resetFields();\n  //请求接口\n  const params = {\n    empName:val,\n    empCode:form.empCode\n  }\n  getNameCode(params)\n};\n// 更改员工姓名\nconst changeDeptname = val => {\n  form.empName = val;\n  empList.value.forEach(item => {\n    if (val.indexOf(item.empCode) !== -1) {\n      form.empCode = item.empCode;\n      form.deptName = item.deptName;\n      form.userName = item.empEmail.slice(0, item.empEmail.indexOf(\"@\"));\n    }\n  });\n};\nconst filterEmpList = (empCode)=>{\n  return empList.value.filter(item=>item.empCode===empCode)[0] || {}\n}\n// 取消\nconst handleCancel = () => {\n  accountVisible.value = false;\n};\nconst transformedArr = arr => {\n  return arr.map(item => {\n    return { id: item };\n  });\n};\nconst transformedObj = (name, code) => {\n  if (form.roleConfig == name) {\n    roleList.value.forEach(item => {\n      if (item.code == code) {\n        roles.value.push({ id: item.id });\n      }\n    });\n  }\n};\n// 确定\nconst handleModalOk = () => {\n  formRef.value.validate(err => {\n    if (!err) {\n      accountVisible.value = false;\n      if (!hasAdmin.value) {\n        transformedObj(\"OMD\", \"OMD\");\n        transformedObj(\"admin\", \"admin\");\n      }\n      let accountName = title.value === \"新建账号\"?filterEmpList(form.empCode).empName : form.empName\n      const params = {\n        id: id.value,\n        name: accountName,\n        workNo: form.empCode,\n        deptName: form.deptName,\n        // pwd: form.password,\n        roles: hasAdmin.value ? transformedArr(form.roleConfig1) : roles.value,\n        roleCode: chekedValue.value,\n        userName: form.userName || form.empName\n      };\n      saveUser(params)\n        .then(res => {\n          if (res.code === \"000000000000\") {\n            Message.success(\"操作成功\");\n            getList();\n          } else {\n            Message.error(res.message);\n          }\n        })\n        .catch(err => {\n          Message.error(err.message || '数据请求失败');\n        });\n    }\n  });\n};\nconst getTabShow = ()=>{\n  listShowTabRole().then(res=>{\n    if(res.code === '000000000000'){\n      tabList.value = res.data.map(item=>{\n        return {\n            key: item.code,\n            name: item.name,\n          }\n      })\n    }else {\n      Message.error(res.message);\n    }\n  }).catch(err=>{\n    Message.error(err.message || '数据请求失败');\n  })\n} \ngetTabShow()\n</script>\n\n<style lang=\"scss\">\n.flex-between {\n  display: flex;\n  justify-content: space-between;\n}\n\n.m-t-20 {\n  margin-top: 20px;\n}\n\n.tableResize {\n  .arco-table-container .arco-table-content {\n    .arco-table-header {\n      .arco-table-element {\n        thead tr:first-child .arco-table-th:last-child {\n          transform: translateX(16.5px);\n        }\n      }\n    }\n  }\n}\n</style>\n","import script from \"./userView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./userView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./userView.vue?vue&type=style&index=0&id=881f1fb6&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["postCalendarEventList","request","url","method","postSelectRoleList","getSelectDeptList","postAddInsertEvent","parameter","data","postUpdateInsertEvent","deleteInsertEvent","params","userListColumns","title","dataIndex","slotName","menuListColumns","key","width","roleListColumns","permissions","useMenuStore","getPermission","tableInfo","reactive","tableColumns","tableData","modalVisible","ref","defaultCheckList","checkedValues","userTableColumns","actionColumn","filter","item","handleSetColumns","value","columnSelected","values","setTableColumns","cachColumns","JSON","parse","localStorage","getItem","map","selectedColumsArr","forEach","push","columnOK","length","Message","error","emit","handleSwitch","bool","paginationChange","current","paginationPageSizeChange","pageSize","handleEdit","record","type","handleDeleteMenu","handleDetail","handleUpdateFlag","radioChange","val","__exports__","userDetail","id","saveUser","getUserList","updateFlag","listShowTabRole","getNameCodeList","$bus","getCurrentInstance","appContext","config","globalProperties","userInfo","useUserInfoStore","getUserInfo","onBeforeMount","color","msg","getRole","hasAdmin","tabList","chekedValue","accountVisible","form","roleConfig","roleConfig1","empCode","empName","deptName","userName","roles","formRef","scroll","x","y","empList","shallowRef","actionType","roleList","accountModalStatus","dataContent","loading","dataSource","pagination","pageNum","total","menuName","then","res","code","getList","roleCode","list","i","parseInt","resetFields","indexOf","userId","flag","success","message","paginationCurrentChange","handleEditUser","name","workNo","getNameCode","handleNameSearch","changeDeptname","empEmail","slice","filterEmpList","handleCancel","transformedArr","arr","transformedObj","handleModalOk","validate","err","accountName","catch","getTabShow"],"sourceRoot":""}