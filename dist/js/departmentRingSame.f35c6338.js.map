{"version":3,"file":"js/departmentRingSame.f35c6338.js","mappings":"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","sources":["webpack://oms-frontend/./src/api/loopAnalyze.js","webpack://oms-frontend/./src/components/echartsContainer.vue","webpack://oms-frontend/./src/components/echartsContainer.vue?abcc","webpack://oms-frontend/./src/views/ringAnalyze/departmentRingSame.vue","webpack://oms-frontend/./src/views/ringAnalyze/departmentRingSame.vue?fbd2"],"sourcesContent":["import request from '@/utils/request'\n// 环比分析部门级别查询接口\nexport function getDepartmentRingList (parameter) {\n    return request({\n        url: '/LinkAnalysis/queryLinkAnalysisList',\n        method: 'post',\n        data: parameter,\n        timeout : 1000 * 60 * 3\n    })\n}\n// 环比分析客户级别查询接口\nexport function getCustomerRingList (parameter) {\n  return request({\n      url: '/LinkAnalysis/getCustomerLink',\n      method: 'post',\n      data: parameter,\n      timeout : 1000 * 60 * 3\n  })\n}\n// 环比分析项目级别查询接口\nexport function getProjectRingList (parameter) {\n  return request({\n      url: '/LinkAnalysis/getProjectLink',\n      method: 'post',\n      data: parameter,\n      timeout : 1000 * 60 * 3\n  })\n}\n\nexport function queryYoyAnalysis (parameter) {\n  return request({\n      url: '/yoyAnalysis/queryYoyAnalysis',\n      method: 'post',\n      data: parameter,\n      timeout : 1000 * 60 * 3\n  })\n}\n//客户环同同比分析项集团客户维度查询接口\nexport function getCustomerYoyAnalysis (parameter) {\n  return request({\n      url: '/yoyAnalysis/getCustomerYoyAnalysis',\n      method: 'post',\n      data: parameter,\n      timeout : 1000 * 60 * 3\n  })\n}\n//客户环同同比分析项目维度查询接口\nexport function getProjectYoyAnalysis (parameter) {\n  return request({\n      url: '/yoyAnalysis/getProjectYoyAnalysis',\n      method: 'post',\n      data: parameter,\n      timeout : 1000 * 60 * 3\n  })\n}","<template>\n  <div ref=\"echartContainer\" :style=\"{ width: width + 'px', height: height + 'px', margin : '4px 0 -6px 0' }\"></div>\n</template>\n\n<script setup>\nimport * as echarts from \"echarts\";\nimport { onMounted, ref } from \"vue\";\nconst props = defineProps({\n  // 折线路径数据\n  route: {\n    type: Array,\n    default: () => [],\n  },\n  height: {\n    type: Number,\n    default: 20,\n  },\n  width: {\n    type: Number,\n    default: 50,\n  },\n});\nconst echartContainer = ref(null);\nonMounted(() => {\n  var chartDom = echartContainer.value;\n  var myChart = echarts.init(chartDom);\n  var option;\n  option = {\n    xAxis: {\n      type: \"category\",\n      show: false,\n    },\n    yAxis: {\n      type: \"value\",\n      show: false,\n    },\n    tooltip: {\n      trigger: 'item',\n      position : 'top',\n      formatter: params=>{\n        return params.data?.name?.replaceAll('-','<br/>')\n      },\n      appendToBody: true\n    },\n    series: [\n      {\n        type: \"line\",\n        symbol: \"emptyCircle\",\n        symbolSize: 3,\n        itemStyle: {\n          color: \"#0770FF\",\n        },\n        areaStyle: {\n          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\n            {\n              offset: 0,\n              color: \"rgba(58,77,233,0.8)\",\n            },\n            {\n              offset: 1,\n              color: \"rgba(58,77,233,0.3)\",\n            },\n          ]),\n        },\n        data: props.route,\n      },\n    ],\n  };\n\n  option && myChart.setOption(option);\n});\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>","import script from \"./echartsContainer.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./echartsContainer.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n  <div class=\"defaultPadding\">\n    <a-tabs v-model:active-key=\"tabKey\" @change=\"changeTabs\">\n      <a-tab-pane key=\"1\" title=\"环比分析\" class=\"p-t-10\">\n        <!-- 配置表头 -->\n        <div class=\"flex-between\">\n          <a-space :size=\"['small', 0]\" wrap>\n            <a-tag\n              v-for=\"(item, index) of tabChangeColumInfo.columnTabs\"\n              :key=\"index\"\n              :color=\"item.isShow === 1 ? 'arcoblue' : ''\"\n              size=\"large\"\n              class=\"pointer\"\n              @click=\"handleTabChange(item)\"\n            >\n              {{ item.title }}\n            </a-tag>\n          </a-space>\n          <div style=\"position: relative; top: -1px\">\n            <a-select v-model:model-value=\"selectMonth\" @change=\"handleMonthChange\">\n              <a-option value=\"3\">近3个月</a-option>\n              <a-option value=\"6\">近6个月</a-option>\n              <a-option value=\"12\">近12个月</a-option>\n              <template #arrow-icon>\n                <icon-calendar :size=\"16\" />\n              </template>\n            </a-select>\n          </div>\n        </div>\n        <!-- 表格 -->\n        <div class=\"m-t-20\">\n          <a-table\n            :columns=\"tableInfo.columns\"\n            :data=\"tableInfo.data\"\n            :default-expand-all-rows=\"true\"\n            :bordered=\"{ cell: true }\"\n            column-resizable\n            :expanded-keys=\"tableInfo.defaultExpandedKeys\"\n            :scroll=\"{ maxHeight: tableInfo.maxHeight }\"\n            :scrollbar=\"{ x: true, y: 1500 }\"\n            :pagination=\"false\"\n            :loading=\"tableInfo.loading\"\n            ref=\"tableRef\"\n            @expanded-change=\"expandedChange\"\n          >\n            <template #lastDeptName=\"{ record }\">\n              <a-popover\n                :content-style=\"{ background: 'rgba(0,0,0,.8)', color: '#fff' }\"\n                :arrow-style=\"{ background: 'rgba(0,0,0,.8)' }\"\n              >\n                <span class=\"pointer\">{{ record.lastDeptName }}</span>\n                <template #content>\n                  {{ record.deptName }}\n                </template>\n              </a-popover>\n            </template>\n          </a-table>\n        </div>\n      </a-tab-pane>\n      <a-tab-pane key=\"2\" title=\"同比分析\" class=\"p-t-10\">\n        <div v-show=\"raidoGroupType === 'total'\">\n          <div class=\"flex-between\">\n            <a-space :size=\"['small', 0]\" wrap>\n              <a-tag\n                v-for=\"(item, index) of allTableList\"\n                :key=\"index\"\n                :color=\"item.isShow === 1 ? 'arcoblue' : ''\"\n                size=\"large\"\n                class=\"pointer\"\n                @click=\"handleSameContrastTabChange(item)\"\n              >\n                {{ item.title }}\n              </a-tag>\n            </a-space>\n            <div style=\"position: relative; top: -1px\">\n              <a-radio-group v-model:model-value=\"raidoGroupType\" type=\"button\" @change=\"constructSameTabChange\">\n                <a-radio value=\"total\">汇总</a-radio>\n                <a-radio value=\"detail\">明细</a-radio>\n              </a-radio-group>\n            </div>\n          </div>\n          <a-table\n            :columns=\"sameTotalTableInfo.columns\"\n            :data=\"sameTotalTableInfo.data\"\n            :default-expand-all-rows=\"true\"\n            :bordered=\"{ cell: true }\"\n            column-resizable\n            :expanded-keys=\"sameTotalTableInfo.defaultExpandedKeys\"\n            :scroll=\"{ maxHeight: sameTotalTableInfo.maxHeight }\"\n            :scrollbar=\"{ x: true, y: 1500 }\"\n            :pagination=\"false\"\n            :loading=\"sameTotalTableInfo.loading\"\n            ref=\"sameTotalTableRef\"\n            class=\"m-t-20\"\n            @expanded-change=\"sameTotalTableExpandedChange\"\n          >\n            <template #lastDeptName=\"{ record }\">\n              <a-popover\n                :content-style=\"{ background: 'rgba(0,0,0,.8)', color: '#fff' }\"\n                :arrow-style=\"{ background: 'rgba(0,0,0,.8)' }\"\n              >\n              <a href=\"javaScript:void(0)\" v-if=\"!record.children\" style=\"color: #165dff\" @click=\"jump(record,2)\">\n                {{ record.lastDeptName }}\n              </a>\n              <span class=\"pointer\" v-else>{{ record.lastDeptName }}</span>\n                <template #content>\n                  {{ record.deptName }}\n                </template>\n              </a-popover>\n            </template>\n            <template #canvasLine1=\"{record,column}\">\n              <echart-container :route=\"createEchartsRoute(record,column)\" :height=74 :width=100 />\n            </template>\n            <template #canvasLine2=\"{record,column}\">\n              <echart-container :route=\"createEchartsRoute(record,column)\" :height=74 :width=100 />\n            </template>\n            <template #canvasLine3=\"{record,column}\">\n              <echart-container :route=\"createEchartsRoute(record,column)\" :height=74 :width=100 />\n            </template>\n          </a-table>\n        </div>\n        <div v-show=\"raidoGroupType === 'detail'\">\n          <div class=\"flex-between\">\n            <a-space :size=\"['small', 0]\" wrap>\n              <a-tag\n                v-for=\"(item, index) of allTableList\"\n                :key=\"index\"\n                :color=\"item.isShow === 1 ? 'arcoblue' : ''\"\n                size=\"large\"\n                class=\"pointer\"\n                @click=\"handleSameContrastTabChange(item)\"\n              >\n                {{ item.title }}\n              </a-tag>\n            </a-space>\n            <div style=\"position: relative; top: -1px\">\n              <a-radio-group v-model:model-value=\"raidoGroupType\" type=\"button\" @change=\"constructSameTabChange\">\n                <a-radio value=\"total\">汇总</a-radio>\n                <a-radio value=\"detail\">明细</a-radio>\n              </a-radio-group>\n            </div>\n          </div>\n          <a-table\n            :columns=\"sameDetailTableInfo.columns\"\n            :data=\"sameDetailTableInfo.data\"\n            :default-expand-all-rows=\"true\"\n            :bordered=\"{ cell: true }\"\n            column-resizable\n            :expanded-keys=\"sameDetailTableInfo.defaultExpandedKeys\"\n            :scroll=\"{ maxHeight: sameDetailTableInfo.maxHeight }\"\n            :scrollbar=\"{ x: true, y: 1500 }\"\n            :pagination=\"false\"\n            :loading=\"sameDetailTableInfo.loading\"\n            ref=\"sameDetailTableRef\"\n            class=\" m-t-20\"\n            @expanded-change=\"detailTableExpandedChange\"\n          >\n            <template #lastDeptName=\"{ record }\">\n              <a-popover\n                :content-style=\"{ background: 'rgba(0,0,0,.8)', color: '#fff' }\"\n                :arrow-style=\"{ background: 'rgba(0,0,0,.8)' }\"\n              >\n              <a href=\"javaScript:void(0)\" v-if=\"!record.children\" style=\"color: #165dff\" @click=\"jump(record,2)\">\n                {{ record.lastDeptName }}\n              </a>\n              <span class=\"pointer\" v-else>{{ record.lastDeptName }}</span>\n                <template #content>\n                  {{ record.deptName }}\n                </template>\n              </a-popover>\n            </template>\n            <template #canvasLine1=\"{record,column}\">\n              <echart-container :route=\"createEchartsRoute(record,column)\" :height=74 :width=100 />\n            </template>\n            <template #canvasLine2=\"{record,column}\">\n              <echart-container :route=\"createEchartsRoute(record,column)\" :height=74 :width=100 />\n            </template>\n            <template #canvasLine3=\"{record,column}\">\n              <echart-container :route=\"createEchartsRoute(record,column)\" :height=74 :width=100 />\n            </template>\n          </a-table>\n        </div>\n      </a-tab-pane>\n    </a-tabs>\n  </div>\n</template>\n\n<script setup>\nimport { Message } from \"@arco-design/web-vue\";\nimport { onBeforeMount, reactive, ref, nextTick, onMounted, toRaw, markRaw, shallowRef } from \"vue\";\nimport { useTagColumnListStore } from \"../../store/index\";\nimport { getDepartmentRingList,queryYoyAnalysis } from \"@/api/loopAnalyze.js\";\nimport {\n  dataAddKey,\n  getRedNum,\n  getLastMonth,\n  getLastYearDay,\n  getCurrentTime,\n  mapDataIndex,\n} from \"../../utils/util\";\nimport echartContainer from \"@/components/echartsContainer.vue\";\nimport { useRouter } from \"vue-router\";\nconst router = useRouter();\nlet { lYear } = getLastMonth();\nlet { lastYear, lastMonth } = getLastYearDay();\nlet { year, month } = getCurrentTime();\nlet tagColumnList = useTagColumnListStore();\nlet columConfig = {};\nconst tableInfo = reactive({\n  columns: [],\n  data: [],\n  defaultExpandedKeys: [],\n  maxHeight: \"200px\",\n  loading: false,\n});\n//同比汇总表格数据\nconst sameTotalTableInfo = reactive({\n  columns: [],\n  data: [],\n  defaultExpandedKeys: [],\n  maxHeight: \"600px\",\n  loading: false,\n});\n//同比明细表格数据\nconst sameDetailTableInfo = reactive({\n  columns: [],\n  data: [],\n  defaultExpandedKeys: [],\n  maxHeight: \"600px\",\n  loading: false,\n});\nconst selectMonth = ref(\"3\");\nconst tableRef = ref(null);\nconst tabChangeColumInfo = reactive({\n  columnTabs: [],\n});\nlet filterShowChildrenColumn = [];\nconst chartColumMap = {\n  发薪人数: [],\n  营业收入: [],\n  销售毛利率: [],\n};\nconst chartColumnNameMap = {\n  canvasLine1: \"发薪人数\",\n  canvasLine2: \"营业收入\",\n  canvasLine3: \"销售毛利率\",\n};\nconst tabKey = ref(\"1\");\nconst raidoGroupType = ref(\"total\");\nonBeforeMount(() => {\n  seltColumns();\n  getList();\n  initTotalColumns();\n});\nonMounted(() => {\n  if (tableRef.value) {\n    let head = tableRef.value.$el;\n    nextTick(() => {\n      let innerHeight = window.innerHeight;\n      let elHeight = head.getBoundingClientRect().top;\n      tableInfo.maxHeight = innerHeight - elHeight - 30 + \"px\";\n    });\n  }\n});\n// 更改环比分析/同比分析\nconst changeTabs = key => {\n  tabKey.value = key;\n};\n// 初始化\nconst seltColumns = () => {\n  let tagColumns = toRaw(tagColumnList.getTagColumnList) || [];\n  let currentPageColumn = tagColumns.filter(item => item.report === \"环比分析\") || [];\n  if (currentPageColumn.length) {\n    currentPageColumn[0].tier.forEach((item, index) => {\n      let tabs = [];\n      let columnTabs = [];\n      let columnHasSonTabs = [];\n      let noHiddenColumn = [];\n      let defaultColumHasSonTabs = [];\n      let defaultColumnTabs = [];\n      item.tags.forEach(jtem => {\n        tabs.push(jtem.tag);\n        jtem.columns.forEach(ktem => {\n          let { col, conf, title } = ktem;\n          conf = conf || {};\n          let columnItemConfig = {\n            title,\n            dataIndex: col,\n            align: conf.align,\n            cellStyle: { \"text-align\": conf.cellAlign },\n            width: conf.width,\n            ellipsis: true,\n            headerCellClass: \"noEllipsis\",\n            slotName: col,\n            bodyCellClass: \"bodyCell\",\n            fixed : conf.fixed\n          };\n          columnItemConfig.isShow = conf.isShow;\n          columnItemConfig.render = ({ record, column }) => {\n            let cellVal = record[column.dataIndex];\n            if (!Array.isArray(cellVal)) {\n              if (column.slotName === \"lastDeptName\") {\n                return (\n                  <a-popover\n                    content-style={{ background: \"rgba(0,0,0,.8)\", color: \"#fff\" }}\n                    arrow-style={{ background: \"rgba(0,0,0,.8)\" }}\n                  >\n                    {{\n                      default: () =>\n                        record.leafNode == \"1\" ? (\n                          <span class=\"pointer\" style={{ color: \"#165dff\" }} onclick={() => jump(record,1)}>\n                            {record.lastDeptName}\n                          </span>\n                        ) : (\n                          <span class=\"pointer\">{record.lastDeptName}</span>\n                        ),\n                      content: () => record.deptName,\n                    }}\n                  </a-popover>\n                );\n              }\n              return <span innerHTML={getRedNum(cellVal)}></span>;\n            } else {\n              let route = chartColumMap[chartColumnNameMap[column.dataIndex]].map((item,i)=>({name:item.month+'-'+record[item.col],value:cellVal[i]}))\n              return <echartContainer route={route} height={74} width={100} />;\n            }\n          };\n          if (conf.canHide === 1) {\n            if (conf.parentCol === 0) {\n              columnTabs.push(columnItemConfig);\n            } else {\n              columnHasSonTabs.push(columnItemConfig);\n            }\n          } else {\n            noHiddenColumn.push(columnItemConfig);\n          }\n          if (conf.parentCol === 1) {\n            defaultColumHasSonTabs.push(columnItemConfig);\n          } else {\n            defaultColumnTabs.push(columnItemConfig);\n          }\n        });\n      });\n      columConfig[\"level\" + (index + 1)] = {\n        tabs,\n        params: item.params || [],\n        columnTabs,\n        columnHasSonTabs,\n        noHiddenColumn,\n        defaultColumnTabs,\n        defaultColumHasSonTabs,\n      };\n    });\n  }\n  tabChangeColumInfo.columnTabs = columConfig.level1.columnHasSonTabs;\n};\n// 更换表头\nconst analysiisColumn = months => {\n  let { columnTabs, noHiddenColumn, defaultColumHasSonTabs } = columConfig.level1;\n  let num = 4;\n  switch (selectMonth.value) {\n    case \"3\":\n      let children1 = [];\n      let filterHasSonShowColumn1 = defaultColumHasSonTabs.filter(item => item.isShow === 1);\n      months.forEach((item, i) => {\n        let columnHasSonConfig = {};\n        columnHasSonConfig.title = item;\n        columnHasSonConfig.children = filterHasSonShowColumn1.map((jtem, j) => {\n          num++;\n          return {\n            ...jtem,\n            dataIndex: `colNo${num}`,\n            slotName: `colNo${num}`,\n          };\n        });\n        children1.push(columnHasSonConfig);\n      });\n      num = 4;\n      filterShowChildrenColumn = children1;\n      break;\n    case \"6\":\n      let children2 = [];\n      let filterHasSonShowColumn2 = defaultColumHasSonTabs.filter(item => item.isShow === 1);\n      months.forEach((item, i) => {\n        let columnHasSonConfig = {};\n        columnHasSonConfig.title = item;\n        columnHasSonConfig.children = filterHasSonShowColumn2.map((jtem, j) => {\n          num++;\n          return {\n            ...jtem,\n            dataIndex: `colNo${num}`,\n            slotName: `colNo${num}`,\n          };\n        });\n        children2.push(columnHasSonConfig);\n      });\n      num = 4;\n      filterShowChildrenColumn = children2;\n      break;\n    case \"12\":\n      let children3 = [];\n      let filterHasSonShowColumn3 = defaultColumHasSonTabs.filter(item => item.isShow === 1);\n      months.forEach((item, i) => {\n        let columnHasSonConfig = {};\n        columnHasSonConfig.title = item;\n        columnHasSonConfig.children = filterHasSonShowColumn3.map((jtem, j) => {\n          num++;\n          return {\n            ...jtem,\n            dataIndex: `colNo${num}`,\n            slotName: `colNo${num}`,\n          };\n        });\n        children3.push(columnHasSonConfig);\n      });\n      num = 4;\n      filterShowChildrenColumn = children3;\n      break;\n    default:\n      break;\n  }\n  Object.keys(chartColumMap).forEach(key => {\n    chartColumMap[key] = [];\n  });\n  filterShowChildrenColumn.forEach(item => {\n    if (item.children?.length) {\n      let filterShowColumns = [];\n      item.children.forEach(jtem => {\n        if (jtem.isShow === 1) {\n          filterShowColumns.push(jtem);\n        }\n        if (chartColumMap.hasOwnProperty(jtem.title)) {\n          chartColumMap[jtem.title].push({\n            month: item.title,\n            col: jtem.dataIndex,\n          });\n        }\n      });\n      item.children = filterShowColumns;\n    }\n  });\n  Object.keys(chartColumMap).forEach(key => chartColumMap[key].reverse());\n\n  let actionColumn = {\n    title : '操作',\n    dataIndex : 'action',\n    width : 80,\n    fixed : 'right',\n    cellStyle : {textAlign : 'center'},\n    render({record}){\n      return <a href=\"javaScript:void(0)\" onClick={()=>{goRingContrastChart(record,'dept')}}>看图</a>\n    }\n  }\n  let filterAllShowColumn = [...columnTabs.filter(item => item.isShow === 1), ...noHiddenColumn, ...filterShowChildrenColumn,actionColumn];\n  tableInfo.columns = filterAllShowColumn;\n};\n//展开环比分析\nconst expandedChange = rowKeys => {\n  tableInfo.defaultExpandedKeys = rowKeys;\n};\n// 切换时间区间\nconst handleMonthChange = month => {\n  selectMonth.value = month;\n  getList();\n};\n// 点击标签\nconst handleTabChange = tab => {\n  switch (tab.isShow) {\n    case 0:\n      tab.isShow = 1;\n      changeShowStatus({\n        type: \"self\",\n        title: tab.title,\n        val: 1,\n        tab,\n      });\n      break;\n    case 1:\n      tab.isShow = 0;\n      changeShowStatus({\n        type: \"self\",\n        title: tab.title,\n        val: 0,\n        tab,\n      });\n      break;\n    default:\n      break;\n  }\n};\n// 更改高亮状态并更换表头\nconst changeShowStatus = obj => {\n  let { columnTabs, defaultColumHasSonTabs } = columConfig.level1;\n  let filterHasSonShowColumn = defaultColumHasSonTabs.filter(item => item.isShow === 1);\n  if (filterHasSonShowColumn.length === 0) {\n    Message.error(\"至少选择一项\");\n    obj.tab.isShow = obj.tab.isShow === 0 ? 1 : 0;\n    return;\n  }\n  if (obj.type === \"parent\") {\n    columnTabs.forEach(item => {\n      if (obj.title === item.title) {\n        item.isShow = obj.val;\n      }\n    });\n  }\n  if (obj.type === \"self\") {\n    defaultColumHasSonTabs.forEach(item => {\n      if (obj.title === item.title) {\n        item.isShow = obj.val;\n      }\n    });\n  }\n  getList();\n};\n// 处理趋势数据\nconst construcLine = arr => {\n  arr.forEach(item => {\n    item.colNo2 = JSON.parse(item.colNo2);\n    item.colNo3 = JSON.parse(item.colNo3);\n    item.colNo4 = JSON.parse(item.colNo4);\n    if (item.children) {\n      construcLine(item.children);\n    }\n  });\n};\n// 获取列表数据\nconst getList = () => {\n  tableInfo.data = [];\n  tableInfo.loading = true;\n  let arr = [];\n  const mappings = {\n    发薪人数: \"colNo1\",\n    营业收入: \"colNo2\",\n    销售毛利: \"colNo3\",\n    销售毛利率: \"colNo4\",\n    直接成本: \"colNo5\",\n    人均营业收入: \"colNo6\",\n    人均直接成本: \"colNo7\",\n    未完工项目成本: \"colNo8\",\n    招聘费用: \"colNo9\",\n    销售费用: \"colNo10\",\n    管理费用: \"colNo11\",\n  };\n  tabChangeColumInfo.columnTabs\n    .filter(item => item.isShow === 1)\n    .forEach(item => {\n      if (mappings[item.title]) {\n        arr.push(mappings[item.title]);\n      }\n      if (item.children) {\n        item.children.forEach(jtem => {\n          if (mappings[jtem.title]) {\n            arr.push(mappings[jtem.title]);\n          }\n        });\n      }\n    });\n  const params = {\n    interval: Number(selectMonth.value),\n    dynamicHeaderParam: Array.from(new Set(arr)),\n    xAxis: 74,\n    yAxis: 100,\n    tagKey: \"linkAnalysis\",\n  };\n  getDepartmentRingList(params)\n    .then(res => {\n      if (res.code == \"200\") {\n        analysiisColumn(res.data.month);\n        construcLine(res.data.data);\n        let data = dataAddKey(res.data.data, \"key\", \"deptId\");\n        let keys = [];\n        res.data.data.forEach(item => keys.push(item.deptId));\n        tableInfo.defaultExpandedKeys = keys;\n        tableInfo.data = markRaw(data);\n      } else {\n        Message.error(res.message);\n      }\n      tableInfo.loading = false;\n    })\n    .catch(err => {\n      if (err?.code === \"ERR_CANCELED\") {\n        tableInfo.loading = true;\n      } else {\n        Message.error(err?.message || \"数据请求错误\");\n        tableInfo.loading = false;\n      }\n    });\n};\nconst allHeadTagList = ref([]); // 所有的标签\nconst allTableList = ref([]); // 表头数据\nconst notShowList = shallowRef([]); // 初始没显示的表头数据\nconst sameDetailTableRef = ref(null) //同比明细表格dom\nconst sameTotalTableRef = ref(null)//同比汇总表格dom\n// 初始化表头和标签数据\nconst initTotalColumns = () => {\n  allHeadTagList.value = [];\n  allTableList.value = [];\n  notShowList.value = [];\n  let tagColumns = toRaw(tagColumnList.getTagColumnList) || [];\n  let currentPageColumn = tagColumns.filter(item => item.report === \"同比分析\") || [];\n  if (currentPageColumn.length) {\n    const currentColumnList = currentPageColumn[0].tier[0].tags[0].columns;\n    currentColumnList.forEach(item => {\n      const { col, conf, title } = item;\n      let columnItemConfig = {\n        title,\n        dataIndex: col,\n        align: conf.align,\n        cellStyle: { \"text-align\": conf.cellAlign },\n        width: conf.width,\n        ellipsis: true,\n        headerCellClass: \"noEllipsis\",\n        slotName: col,\n        bodyCellClass: \"bodyCell\",\n        isShow: conf.isShow,\n        fixed : conf.fixed\n      };\n      // 需要把部门名称的canHide改成0 level1\n      // 如果canHide=1,则push到allHeadTagList,如果isShow=1push到tableList,再配标签配点击事件，对表头进行格式处理。\n      if (conf.canHide == 1) {\n        allHeadTagList.value.push(columnItemConfig);\n      } else {\n        notShowList.value.push(columnItemConfig);\n      }\n      if(conf.fixed !== undefined){\n        columnItemConfig.fixed = conf.fixed\n      }\n      if (conf.parentCol == 1) {\n        allTableList.value.push(columnItemConfig);\n      }\n    });\n    if (raidoGroupType.value == \"total\") {\n      constructSameTotalColumns(allHeadTagList.value);\n    } else {\n      constructSameDetailColumns(allHeadTagList.value);\n    }\n  }\n};\n// 点击标签\nconst handleSameContrastTabChange = value => {\n  value.isShow = value.isShow === 0 ? 1 : 0;\n  let filterHasSonShowColumn = allHeadTagList.value.filter(item => item.isShow === 1);\n  if (filterHasSonShowColumn.length === 0) {\n    Message.error(\"至少选择一项\");\n    value.isShow = value.isShow === 0 ? 1 : 0;\n    return;\n  }\n  handleAbortRequest()\n  if (raidoGroupType.value === \"total\") {\n    constructSameTotalColumns(allHeadTagList.value);\n  } else {\n    constructSameDetailColumns(allHeadTagList.value);\n  }\n};\n// 构造同比汇总的表头\nconst constructSameTotalColumns = list => {\n  let tableList = list.filter(item => item.isShow === 1);\n  let createColumns = []\n  let childrenColumns = [\n        {\n          title: lastYear + \"/1-12\",\n        },\n        {\n          title: lastYear + `/1-${lastMonth}`,\n        },\n        {\n          title: year + `/1-${lastMonth}`,\n        },\n        {\n          title: \"同比\",\n        },\n  ]\n  let colNo = 5\n  tableList.forEach(item => {\n    let columnConfig = {\n      title : item.title,\n      children : childrenColumns.map((jtem,i)=>{\n        let childrenColumnItemConfig = {\n          title : jtem.title,\n          dataIndex: `colNo${colNo}`,\n          slotName: `colNo${colNo}`,\n          width: 110,\n          cellStyle: {textAlign : 'right'},\n        }\n        if(i === (childrenColumns.length -1)){\n          childrenColumnItemConfig.title = item.title.endsWith('率')?'偏离':jtem.title\n        }\n        colNo++\n        return childrenColumnItemConfig\n      })\n    }\n    createColumns.push(columnConfig)\n  });\n  let actionColumn = {\n    title : '操作',\n    dataIndex : 'action',\n    width : 80,\n    fixed : 'right',\n    cellStyle : {textAlign : 'center'},\n    render({record}){\n      return <a href=\"javaScript:void(0)\" onClick={()=>{goLookChat(record,'dept')}}>看图</a>\n    }\n  }\n  sameTotalTableInfo.columns = [...notShowList.value,...createColumns,actionColumn]\n  getConstructSameTotalList()\n};\n\nconst sameTotalTableExpandedChange = keys=>{\n  sameTotalTableInfo.defaultExpandedKeys = keys\n}\n\n//跳转看图页\nconst goLookChat = (record,type)=>{\n  router.push({\n    name : 'lookChart',\n    state : {\n      barChartOptions : JSON.stringify(allHeadTagList.value),\n      deptId : record.deptId,\n      sourceType : type,\n      deptName : record.deptName\n    }\n  })\n}\n\nconst goRingContrastChart = (record,type)=>{\n  router.push({\n    name : 'ringContrastChart',\n    state : {\n      deptName : record.deptName,\n      interval:selectMonth.value,\n      deptId : record.deptId,\n      sourceType : type\n    }\n  })\n}\n\n// 同比分析-----明细-------------------------------------------------------------\n// 更改汇总/明细\nconst constructSameTabChange = value => {\n  raidoGroupType.value = value;\n  initTotalColumns();\n};\n// 构造同比明细的表头结构\nconst constructSameDetailColumns = list => {\n  const timeData = [];\n  let activeTableList = list.filter(item => item.isShow === 1);\n  if (month == 1) {\n    for (var i = 1; i <= 12; i++) {\n      timeData.push({\n        title: i + \"月\",\n        children: [],\n      });\n    }\n  } else {\n    for (var i = 1; i <= lastMonth; i++) {\n      timeData.push({\n        title: i + \"月\",\n        children: [],\n      });\n    }\n  }\n  const years = [lastYear, year];\n  let colNo = 5\n  timeData.forEach(item=>{\n    let childrenColumns = []\n    activeTableList.forEach(jtem=>{\n      years.forEach(ktem=>{\n        let contrastColumnConfig = {\n          title: `${jtem.title}${ktem}`,\n          dataIndex: `colNo${colNo}`,\n          slotName: `colNo${colNo}`,\n          width: jtem.width,\n          cellStyle: toRaw(jtem.cellStyle),\n        }\n        childrenColumns.push(contrastColumnConfig)\n        colNo++\n      })\n    })\n    item.children = childrenColumns\n  })\n  let actionColumn = {\n    title : '操作',\n    dataIndex : 'action',\n    width : 80,\n    fixed : 'right',\n    cellStyle : {textAlign : 'center'},\n    render({record}){\n      return <a href=\"javaScript:void(0)\" onClick={()=>{goLookChat(record,'dept')}}>看图</a>\n    }\n  }\n  sameDetailTableInfo.columns = [...notShowList.value,...timeData,actionColumn]\n  getConstructSameDetailList()\n};\n\n//同比分析明细表格展开/折叠\nconst detailTableExpandedChange = rowKeys => {\n  sameDetailTableInfo.defaultExpandedKeys = rowKeys;\n};\n\n//同比分析明细接口\nconst getConstructSameDetailList = ()=>{\n  let params = {\n    interval:lastMonth == 0 ? 12 : lastMonth,\n    dynamicHeaderParam:allTableList.value.filter(item=>item.isShow ===1).map(item=>item.dataIndex),\n    xAxis:74,\n    yAxis:100,\n    tagKey:\"yoyAnalysis\",\n    type : '2'\n  }\n  sameDetailTableInfo.loading = true\n  queryYoyAnalysis(params).then(res=>{\n    if(res.code === '200'){\n      dataAddKey(res.data.data,'key','deptId')\n      let expandKeys = []\n      res.data.data.forEach(item=>expandKeys.push(item.key))\n      sameDetailTableInfo.defaultExpandedKeys = expandKeys\n      sameDetailTableInfo.data = res.data.data\n      //计算表格不出滚动条的最大高度\n      if(sameDetailTableInfo.maxHeight === '600px'){\n        nextTick(() => {\n              if (sameDetailTableRef.value) {\n              let head = sameDetailTableRef.value.$el;\n              let innerHeight = window.innerHeight;\n              let elHeight = head.getBoundingClientRect().top;\n              sameDetailTableInfo.maxHeight = Math.round(innerHeight - elHeight - 32) + \"px\";\n            }\n          });\n        }\n    }else {\n      Message.error(res.desc || '请求数据失败')\n    }\n    sameDetailTableInfo.loading = false;\n  }).catch(err=>{\n    if (err?.code === \"ERR_CANCELED\") {\n      sameDetailTableInfo.loading = true;\n      } else {\n        Message.error(err?.message || \"数据请求错误\");\n        sameDetailTableInfo.loading = false;\n      }\n  })\n}\n\n//同比分析汇总接口\nconst getConstructSameTotalList = ()=>{\n  let params = {\n    interval:lastMonth == 0? 12 : lastMonth,\n    dynamicHeaderParam:allTableList.value.filter(item=>item.isShow ===1).map(item=>item.dataIndex),\n    xAxis:74,\n    yAxis:100,\n    tagKey:\"yoyAnalysis\",\n    type : '1'\n  }\n  sameTotalTableInfo.loading = true\n  queryYoyAnalysis(params).then(res=>{\n    if(res.code === '200'){\n      dataAddKey(res.data.data,'key','deptId')\n      let expandKeys = []\n      res.data.data.forEach(item=>expandKeys.push(item.key))\n      sameTotalTableInfo.defaultExpandedKeys = expandKeys\n      sameTotalTableInfo.data = res.data.data\n      //计算表格不出滚动条的最大高度\n      if(sameTotalTableInfo.maxHeight === '600px'){\n        nextTick(() => {\n              if (sameTotalTableRef.value) {\n                let head = sameTotalTableRef.value.$el;\n                let innerHeight = window.innerHeight;\n                let elHeight = head.getBoundingClientRect().top;\n                sameTotalTableInfo.maxHeight = Math.round(innerHeight - elHeight - 32) + \"px\";\n            }\n          });\n        }\n    }else {\n      Message.error(res.desc || '请求数据失败')\n    }\n    sameTotalTableInfo.loading = false;\n  }).catch(err=>{\n    if (err?.code === \"ERR_CANCELED\") {\n      sameTotalTableInfo.loading = true;\n      } else {\n        Message.error(err?.message || \"数据请求错误\");\n        sameTotalTableInfo.loading = false;\n      }\n  })\n}\n//echarts缩略图的路径信息\nconst createEchartsRoute = (record,column)=>{\n  return chartColumMap[chartColumnNameMap[column.dataIndex]].map((item,i)=>({value:record[column.dataIndex][i]}))\n}\n// 跳转到客户\nconst jump = (record,tab) => {\n  router.push({\n    path: \"/customerRingSame\",\n    query: {\n      id: record.deptId,\n      deptName : record.deptName,\n      tab\n    },\n  });\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.p-t-10 {\n  padding-top: 10px;\n}\n:deep(.tabs .arco-tabs-nav-type-line .arco-tabs-tab-title) {\n  font-size: 15px;\n}\n</style>\n","import script from \"./departmentRingSame.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./departmentRingSame.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./departmentRingSame.vue?vue&type=style&index=0&id=1ba4357b&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/lijiaxin/Documents/workspace/hydsoft-oms-frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1ba4357b\"]])\n\nexport default __exports__"],"names":["getDepartmentRingList","parameter","request","url","method","data","timeout","getCustomerRingList","getProjectRingList","queryYoyAnalysis","getCustomerYoyAnalysis","getProjectYoyAnalysis","echartContainer","ref","onMounted","option","chartDom","value","myChart","echarts","xAxis","type","show","yAxis","tooltip","trigger","position","formatter","params","name","replaceAll","appendToBody","series","symbol","symbolSize","itemStyle","color","areaStyle","offset","props","route","setOption","__exports__","router","useRouter","lYear","getLastMonth","lastYear","lastMonth","getLastYearDay","year","month","getCurrentTime","tagColumnList","useTagColumnListStore","columConfig","tableInfo","reactive","columns","defaultExpandedKeys","maxHeight","loading","sameTotalTableInfo","sameDetailTableInfo","selectMonth","tableRef","tabChangeColumInfo","columnTabs","filterShowChildrenColumn","chartColumMap","发薪人数","营业收入","销售毛利率","chartColumnNameMap","canvasLine1","canvasLine2","canvasLine3","tabKey","raidoGroupType","onBeforeMount","seltColumns","getList","initTotalColumns","head","$el","nextTick","innerHeight","window","elHeight","getBoundingClientRect","top","changeTabs","key","tagColumns","toRaw","getTagColumnList","currentPageColumn","filter","item","report","length","tier","forEach","index","tabs","columnHasSonTabs","noHiddenColumn","defaultColumHasSonTabs","defaultColumnTabs","tags","jtem","push","tag","ktem","col","conf","title","columnItemConfig","dataIndex","align","cellStyle","cellAlign","width","ellipsis","headerCellClass","slotName","bodyCellClass","fixed","isShow","render","record","column","cellVal","Array","isArray","map","i","background","default","leafNode","jump","lastDeptName","content","deptName","getRedNum","canHide","parentCol","level1","analysiisColumn","months","num","children1","filterHasSonShowColumn1","columnHasSonConfig","children","j","children2","filterHasSonShowColumn2","children3","filterHasSonShowColumn3","Object","keys","filterShowColumns","hasOwnProperty","reverse","actionColumn","textAlign","goRingContrastChart","filterAllShowColumn","expandedChange","rowKeys","handleMonthChange","handleTabChange","tab","changeShowStatus","val","obj","filterHasSonShowColumn","Message","error","construcLine","arr","colNo2","JSON","parse","colNo3","colNo4","mappings","销售毛利","直接成本","人均营业收入","人均直接成本","未完工项目成本","招聘费用","销售费用","管理费用","interval","Number","dynamicHeaderParam","from","Set","tagKey","then","res","code","dataAddKey","deptId","markRaw","message","catch","err","allHeadTagList","allTableList","notShowList","shallowRef","sameDetailTableRef","sameTotalTableRef","currentColumnList","undefined","constructSameTotalColumns","constructSameDetailColumns","handleSameContrastTabChange","handleAbortRequest","list","tableList","createColumns","childrenColumns","colNo","columnConfig","childrenColumnItemConfig","endsWith","goLookChat","getConstructSameTotalList","sameTotalTableExpandedChange","state","barChartOptions","stringify","sourceType","constructSameTabChange","timeData","activeTableList","years","contrastColumnConfig","getConstructSameDetailList","detailTableExpandedChange","expandKeys","Math","round","desc","createEchartsRoute","path","query","id"],"sourceRoot":""}