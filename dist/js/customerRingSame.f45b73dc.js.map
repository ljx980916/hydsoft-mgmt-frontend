{"version":3,"file":"js/customerRingSame.f45b73dc.js","mappings":"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","sources":["webpack://oms-frontend/./src/api/loopAnalyze.js","webpack://oms-frontend/./src/components/echartsContainer.vue","webpack://oms-frontend/./src/components/echartsContainer.vue?abcc","webpack://oms-frontend/./src/views/ringAnalyze/customerRingSame.vue","webpack://oms-frontend/./src/views/ringAnalyze/customerRingSame.vue?fc10"],"sourcesContent":["import request from '@/utils/request'\n// 环比分析部门级别查询接口\nexport function getDepartmentRingList (parameter) {\n    return request({\n        url: '/LinkAnalysis/queryLinkAnalysisList',\n        method: 'post',\n        data: parameter,\n        timeout : 1000 * 60 * 3\n    })\n}\n// 环比分析客户级别查询接口\nexport function getCustomerRingList (parameter) {\n  return request({\n      url: '/LinkAnalysis/getCustomerLink',\n      method: 'post',\n      data: parameter,\n      timeout : 1000 * 60 * 3\n  })\n}\n// 环比分析项目级别查询接口\nexport function getProjectRingList (parameter) {\n  return request({\n      url: '/LinkAnalysis/getProjectLink',\n      method: 'post',\n      data: parameter,\n      timeout : 1000 * 60 * 3\n  })\n}\n\nexport function queryYoyAnalysis (parameter) {\n  return request({\n      url: '/yoyAnalysis/queryYoyAnalysis',\n      method: 'post',\n      data: parameter,\n      timeout : 1000 * 60 * 3\n  })\n}\n//客户环同同比分析项集团客户维度查询接口\nexport function getCustomerYoyAnalysis (parameter) {\n  return request({\n      url: '/yoyAnalysis/getCustomerYoyAnalysis',\n      method: 'post',\n      data: parameter,\n      timeout : 1000 * 60 * 3\n  })\n}\n//客户环同同比分析项目维度查询接口\nexport function getProjectYoyAnalysis (parameter) {\n  return request({\n      url: '/yoyAnalysis/getProjectYoyAnalysis',\n      method: 'post',\n      data: parameter,\n      timeout : 1000 * 60 * 3\n  })\n}","<template>\n  <div ref=\"echartContainer\" :style=\"{ width: width + 'px', height: height + 'px', margin : '4px 0 -6px 0' }\"></div>\n</template>\n\n<script setup>\nimport * as echarts from \"echarts\";\nimport { onMounted, ref } from \"vue\";\nconst props = defineProps({\n  // 折线路径数据\n  route: {\n    type: Array,\n    default: () => [],\n  },\n  height: {\n    type: Number,\n    default: 20,\n  },\n  width: {\n    type: Number,\n    default: 50,\n  },\n});\nconst echartContainer = ref(null);\nonMounted(() => {\n  var chartDom = echartContainer.value;\n  var myChart = echarts.init(chartDom);\n  var option;\n  option = {\n    xAxis: {\n      type: \"category\",\n      show: false,\n    },\n    yAxis: {\n      type: \"value\",\n      show: false,\n    },\n    tooltip: {\n      trigger: 'item',\n      position : 'top',\n      formatter: params=>{\n        return params.data?.name?.replaceAll('-','<br/>')\n      },\n      appendToBody: true\n    },\n    series: [\n      {\n        type: \"line\",\n        symbol: \"emptyCircle\",\n        symbolSize: 3,\n        itemStyle: {\n          color: \"#0770FF\",\n        },\n        areaStyle: {\n          color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [\n            {\n              offset: 0,\n              color: \"rgba(58,77,233,0.8)\",\n            },\n            {\n              offset: 1,\n              color: \"rgba(58,77,233,0.3)\",\n            },\n          ]),\n        },\n        data: props.route,\n      },\n    ],\n  };\n\n  option && myChart.setOption(option);\n});\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>","import script from \"./echartsContainer.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./echartsContainer.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n  <div class=\"defaultPadding\">\n    <a-tabs v-model:active-key=\"tabsActive\" @change=\"handleTab\" class=\"tabs\">\n      <a-tab-pane key=\"1\" title=\"环比分析\" class=\"p-t-10\">\n        <!-- 配置表头 -->\n        <div class=\"flex-between\">\n          <a-space :size=\"['small', 0]\" wrap>\n            <a-tag\n              v-for=\"(item, index) of tabChangeColumInfo.columnTabs\"\n              :key=\"index\"\n              :color=\"item.isShow === 1 ? 'arcoblue' : ''\"\n              size=\"large\"\n              class=\"pointer\"\n              @click=\"handleTabChange(item)\"\n            >\n              {{ item.title }}\n            </a-tag>\n          </a-space>\n          <div style=\"position: relative; top: -1px\">\n            <a-select v-model:model-value=\"selectMonth\" @change=\"handleMonthChange\">\n              <a-option value=\"3\">近3个月</a-option>\n              <a-option value=\"6\">近6个月</a-option>\n              <a-option value=\"12\">近12个月</a-option>\n              <template #arrow-icon>\n                <icon-calendar :size=\"16\" />\n              </template>\n            </a-select>\n          </div>\n        </div>\n        <!-- 表格 -->\n        <div class=\"m-t-20\">\n          <a-table\n            :columns=\"tableInfo.columns\"\n            :data=\"tableInfo.data\"\n            :default-expand-all-rows=\"true\"\n            :bordered=\"{ cell: true }\"\n            column-resizable\n            :expanded-keys=\"tableInfo.defaultExpandedKeys\"\n            :scroll=\"{ maxHeight: tableInfo.maxHeight }\"\n            :scrollbar=\"{ x: true, y: 1500 }\"\n            :pagination=\"false\"\n            :loading=\"tableInfo.loading\"\n            ref=\"tableRef\"\n            @expanded-change=\"expandedChange\"\n          ></a-table>\n        </div>\n      </a-tab-pane>\n      <a-tab-pane key=\"2\" title=\"同比分析\" class=\"p-t-10\">\n        <div class=\"flex-between\">\n              <a-space :size=\"['small', 0]\" wrap>\n                <a-tag\n                  v-for=\"(item, index) of allTableList\"\n                  :key=\"index\"\n                  :color=\"item.isShow === 1 ? 'arcoblue' : ''\"\n                  size=\"large\"\n                  class=\"pointer\"\n                  @click=\"handleSameContrastTabChange(item)\"\n                >\n                  {{ item.title }}\n                </a-tag>\n              </a-space>\n              <div style=\"position: relative; top: -1px\">\n                <a-radio-group v-model:model-value=\"raidoGroupType\" type=\"button\" @change=\"constructSameTabChange\">\n                  <a-radio value=\"total\">汇总</a-radio>\n                  <a-radio value=\"detail\">明细</a-radio>\n                </a-radio-group>\n              </div>\n        </div>\n        <div v-show=\"raidoGroupType === 'total'\">\n          <a-table\n            :columns=\"sameTotalTableInfo.columns\"\n            :data=\"sameTotalTableInfo.data\"\n            :default-expand-all-rows=\"true\"\n            :bordered=\"{ cell: true }\"\n            column-resizable\n            :expanded-keys=\"sameTotalTableInfo.defaultExpandedKeys\"\n            :scroll=\"{ maxHeight: sameTotalTableInfo.maxHeight }\"\n            :scrollbar=\"{ x: true, y: 1500 }\"\n            :pagination=\"false\"\n            :loading=\"sameTotalTableInfo.loading\"\n            ref=\"sameTotalTableRef\"\n            class=\"m-t-20\"\n            @expanded-change=\"sameTotalTableExpandedChange\"\n          >\n            <template #title=\"{ record }\">\n              <a-popover\n                :content-style=\"{ background: 'rgba(0,0,0,.8)', color: '#fff' }\"\n                :arrow-style=\"{ background: 'rgba(0,0,0,.8)' }\"\n              >\n              <a href=\"javaScript:void(0)\" v-if=\"record.leafNode === '1'\" style=\"color: #165dff\" @click=\"jump(record)\">\n                {{ record.title }}\n              </a>\n              <span class=\"pointer\" v-else>{{ record.title }}</span>\n                <template #content>\n                  {{ record.title }}\n                </template>\n              </a-popover>\n            </template>\n            <template #canvasLine1=\"{record,column}\">\n              <echart-container :route=\"createEchartsRoute(record,column)\" :height=74 :width=100 />\n            </template>\n            <template #canvasLine2=\"{record,column}\">\n              <echart-container :route=\"createEchartsRoute(record,column)\" :height=74 :width=100 />\n            </template>\n            <template #canvasLine3=\"{record,column}\">\n              <echart-container :route=\"createEchartsRoute(record,column)\" :height=74 :width=100 />\n            </template>\n          </a-table>\n          </div>\n        <div v-show=\"raidoGroupType === 'detail'\">\n          <a-table\n              :columns=\"sameDetailTableInfo.columns\"\n              :data=\"sameDetailTableInfo.data\"\n              :default-expand-all-rows=\"true\"\n              :bordered=\"{ cell: true }\"\n              column-resizable\n              :expanded-keys=\"sameDetailTableInfo.defaultExpandedKeys\"\n              :scroll=\"{ maxHeight: sameDetailTableInfo.maxHeight }\"\n              :scrollbar=\"{ x: true, y: 1500 }\"\n              :pagination=\"false\"\n              :loading=\"sameDetailTableInfo.loading\"\n              ref=\"sameDetailTableRef\"\n              class=\" m-t-20\"\n              @expanded-change=\"detailTableExpandedChange\"\n            >\n              <template #title=\"{ record }\">\n                <a-popover\n                  :content-style=\"{ background: 'rgba(0,0,0,.8)', color: '#fff' }\"\n                  :arrow-style=\"{ background: 'rgba(0,0,0,.8)' }\"\n                >\n                <a href=\"javaScript:void(0)\" v-if=\"record.leafNode === '1'\" style=\"color: #165dff\" @click=\"jump(record)\">\n                  {{ record.title }}\n                </a>\n                <span class=\"pointer\" v-else>{{ record.title }}</span>\n                  <template #content>\n                    {{ record.title }}\n                  </template>\n                </a-popover>\n              </template>\n              <template #canvasLine1=\"{record,column}\">\n                <echart-container :route=\"createEchartsRoute(record,column)\" :height=74 :width=100 />\n              </template>\n              <template #canvasLine2=\"{record,column}\">\n                <echart-container :route=\"createEchartsRoute(record,column)\" :height=74 :width=100 />\n              </template>\n              <template #canvasLine3=\"{record,column}\">\n                <echart-container :route=\"createEchartsRoute(record,column)\" :height=74 :width=100 />\n              </template>\n            </a-table>\n        </div>\n      </a-tab-pane>\n    </a-tabs>\n  </div>\n</template>\n\n<script setup>\nimport { Message } from \"@arco-design/web-vue\";\nimport { onBeforeMount, reactive, ref, nextTick, onMounted, toRaw,shallowRef,onBeforeUnmount } from \"vue\";\nimport { useTagColumnListStore } from \"../../store/index\";\nimport { getCustomerRingList, getCustomerYoyAnalysis } from \"@/api/loopAnalyze.js\";\nimport { getNMonthsAgo, dataAddKey, getRedNum,getLastYearDay, getCurrentTime} from \"../../utils/util\";\nimport { useRouter, useRoute } from \"vue-router\";\nimport echartContainer from \"@/components/echartsContainer.vue\";\nimport { getCurrentInstance } from \"@vue/runtime-core\";\nlet $bus = getCurrentInstance().appContext.config.globalProperties.$bus;\nlet { lastYear, lastMonth } = getLastYearDay();\nlet { year, month } = getCurrentTime();\nlet tagColumnList = useTagColumnListStore();\nconst router = useRouter();\nconst route = useRoute();\nconst { id:deptId ,deptName,tab } = route.query\nconst tabsActive = ref(tab||'1');\nlet columConfig = {};\nconst tableInfo = reactive({\n  columns: [],\n  data: [],\n  defaultExpandedKeys: [],\n  maxHeight: \"200px\",\n  loading: false,\n});\nconst selectMonth = ref(\"3\");\nconst tableRef = ref(null);\nconst tabChangeColumInfo = reactive({\n  columnTabs: [],\n  up: [],\n  down: [],\n});\nconst chartColumMap = {\n  发薪人数: [],\n  营业收入: [],\n  销售毛利率: [],\n};\nconst chartColumnNameMap = {\n  canvasLine1: \"发薪人数\",\n  canvasLine2: \"营业收入\",\n  canvasLine3: \"销售毛利率\",\n};\nlet filterShowChildrenColumn = [];\n// 切换环比分析和同比分析\nconst handleTab = val => {\n  tabsActive.value = val;\n  inintTableData()\n};\nonMounted(() => {\n  if (tableRef.value) {\n    let head = tableRef.value.$el;\n    nextTick(() => {\n      let innerHeight = window.innerHeight;\n      let elHeight = head.getBoundingClientRect().top;\n      tableInfo.maxHeight = innerHeight - elHeight - 30 + \"px\";\n    });\n  }\n});\n// 初始化\nconst seltColumns = () => {\n  let tagColumns = toRaw(tagColumnList.getTagColumnList) || [];\n  let currentPageColumn = tagColumns.filter(item => item.report === \"环比分析\") || [];\n  if (currentPageColumn.length) {\n    currentPageColumn[0].tier.forEach((item, index) => {\n      let tabs = [];\n      let columnTabs = [];\n      let columnHasSonTabs = [];\n      let noHiddenColumn = [];\n      let defaultColumHasSonTabs = [];\n      let defaultColumnTabs = [];\n      item.tags.forEach(jtem => {\n        tabs.push(jtem.tag);\n        jtem.columns.forEach(ktem => {\n          let { col, conf, title } = ktem;\n          conf = conf || {};\n          let columnItemConfig = {\n            title,\n            dataIndex: col,\n            align: conf.align,\n            cellStyle: { \"text-align\": conf.cellAlign },\n            width: conf.width,\n            ellipsis: true,\n            headerCellClass: \"noEllipsis\",\n            slotName: col,\n            bodyCellClass: \"bodyCell\",\n            fixed : conf.fixed\n          };\n          columnItemConfig.isShow = conf.isShow;\n          columnItemConfig.render = ({ record, column }) => {\n            let cellVal = record[column.dataIndex];\n            if (!Array.isArray(cellVal)) {\n              if (column.slotName === \"title\") {\n                return (\n                  <a-popover\n                    content-style={{ background: \"rgba(0,0,0,.8)\", color: \"#fff\" }}\n                    arrow-style={{ background: \"rgba(0,0,0,.8)\" }}\n                  >\n                    {{\n                      default: () =>\n                        record.leafNode == \"1\" ? (\n                          <span class=\"pointer\" style={{ color: \"#165dff\" }} onclick={() => jump(record)}>\n                            {record.title}\n                          </span>\n                        ) : (\n                          <span class=\"pointer\">{record.title}</span>\n                        ),\n                      content: () => record.title,\n                    }}\n                  </a-popover>\n                );\n              }\n              return <span innerHTML={getRedNum(cellVal)}></span>;\n            } else {\n              let route = chartColumMap[chartColumnNameMap[column.dataIndex]].map((item, i) => ({\n                tip: item.month + record[item.col],\n                value: cellVal[i],\n              }));\n              return <echartContainer route={route} height={74} width={100} />;\n            }\n          };\n          if (conf.canHide === 1) {\n            if (conf.parentCol === 0) {\n              columnTabs.push(columnItemConfig);\n            } else {\n              columnHasSonTabs.push(columnItemConfig);\n            }\n          } else {\n            noHiddenColumn.push(columnItemConfig);\n          }\n          if (conf.parentCol === 1) {\n            defaultColumHasSonTabs.push(columnItemConfig);\n          } else {\n            defaultColumnTabs.push(columnItemConfig);\n          }\n        });\n      });\n      columConfig[\"level\" + (index + 1)] = {\n        tabs,\n        params: item.params || [],\n        columnTabs,\n        columnHasSonTabs,\n        noHiddenColumn,\n        defaultColumnTabs,\n        defaultColumHasSonTabs,\n      };\n    });\n  }\n  tabChangeColumInfo.columnTabs = columConfig.level2.columnHasSonTabs;\n};\n// 更换表头\nconst analysiisColumn = () => {\n  let { columnTabs, noHiddenColumn, defaultColumHasSonTabs } = columConfig.level2;\n  let num = 4;\n  switch (selectMonth.value) {\n    case \"3\":\n      let months1 = getNMonthsAgo(3, true);\n      let children1 = [];\n      let filterHasSonShowColumn1 = defaultColumHasSonTabs.filter(item => item.isShow === 1);\n      months1.forEach((item, i) => {\n        let columnHasSonConfig = {};\n        columnHasSonConfig.title = `${item[0]}年${item[1]}月`;\n        columnHasSonConfig.children = filterHasSonShowColumn1.map((jtem, j) => {\n          num++;\n          return {\n            ...jtem,\n            dataIndex: `colNo${num}`,\n            slotName: `colNo${num}`,\n          };\n        });\n        children1.push(columnHasSonConfig);\n      });\n      num = 4;\n      filterShowChildrenColumn = children1;\n      break;\n    case \"6\":\n      let months2 = getNMonthsAgo(6, true);\n      let children2 = [];\n      let filterHasSonShowColumn2 = defaultColumHasSonTabs.filter(item => item.isShow === 1);\n      months2.forEach((item, i) => {\n        let columnHasSonConfig = {};\n        columnHasSonConfig.title = `${item[0]}年${item[1]}月`;\n        columnHasSonConfig.children = filterHasSonShowColumn2.map((jtem, j) => {\n          num++;\n          return {\n            ...jtem,\n            dataIndex: `colNo${num}`,\n            slotName: `colNo${num}`,\n          };\n        });\n        children2.push(columnHasSonConfig);\n      });\n      num = 4;\n      filterShowChildrenColumn = children2;\n      break;\n    case \"12\":\n      let months3 = getNMonthsAgo(12, true);\n      months3 = months3.filter(item=>item[0]!==2022)\n      let children3 = [];\n      let filterHasSonShowColumn3 = defaultColumHasSonTabs.filter(item => item.isShow === 1);\n      months3.forEach((item, i) => {\n        let columnHasSonConfig = {};\n        columnHasSonConfig.title = `${item[0]}年${item[1]}月`;\n        columnHasSonConfig.children = filterHasSonShowColumn3.map((jtem, j) => {\n          num++;\n          return {\n            ...jtem,\n            dataIndex: `colNo${num}`,\n            slotName: `colNo${num}`,\n          };\n        });\n        children3.push(columnHasSonConfig);\n      });\n      num = 4;\n      filterShowChildrenColumn = children3;\n      break;\n    default:\n      break;\n  }\n  Object.keys(chartColumMap).forEach(key => {\n    chartColumMap[key] = [];\n  });\n  filterShowChildrenColumn.forEach(item => {\n    if (item.children?.length) {\n      let filterShowColumns = [];\n      item.children.forEach(jtem => {\n        if (jtem.isShow === 1) {\n          filterShowColumns.push(jtem);\n        }\n        if (chartColumMap.hasOwnProperty(jtem.title)) {\n          chartColumMap[jtem.title].push({\n            month: item.title,\n            col: jtem.dataIndex,\n          });\n        }\n      });\n      item.children = filterShowColumns;\n    }\n  });\n  Object.keys(chartColumMap).forEach(key => chartColumMap[key].reverse());\n let actionColumn = {\n    title : '操作',\n    dataIndex : 'action',\n    width : 80,\n    fixed : 'right',\n    cellStyle : {textAlign : 'center'},\n    render({record}){\n      return <a href=\"javaScript:void(0)\" onClick={()=>{goRingContrastChart(record,'customer')}}>看图</a>\n    }\n  }\n  let filterAllShowColumn = [...columnTabs.filter(item => item.isShow === 1), ...noHiddenColumn, ...filterShowChildrenColumn,actionColumn];\n  tableInfo.columns = filterAllShowColumn;\n};\n//部门折叠\nconst expandedChange = rowKeys => {\n  tableInfo.defaultExpandedKeys = rowKeys;\n};\n// 切换时间区间\nconst handleMonthChange = month => {\n  selectMonth.value = month;\n  analysiisColumn();\n  getList();\n};\nonBeforeMount(() => {\n  seltColumns();\n  inintTableData()\n  if(deptId && deptName && tab){\n    deptGoCustomer()\n  }\n});\nconst inintTableData = ()=>{\n  if(tabsActive.value === '1'){\n    if(tableInfo.data.length === 0){\n      analysiisColumn();\n      getList();\n    }\n  }else {\n    if(raidoGroupType.value === 'total' && sameTotalTableInfo.data.length === 0){\n      initTotalColumns();\n    }\n    if(raidoGroupType.value === 'detail' && sameDetailTableInfo.data.length === 0){\n      initTotalColumns();\n    }\n  }\n}\n// 点击标签\nconst handleTabChange = tab => {\n  switch (tab.isShow) {\n    case 0:\n      tab.isShow = 1;\n      changeShowStatus({\n        type: \"self\",\n        title: tab.title,\n        val: 1,\n        tab,\n      });\n      break;\n    case 1:\n      tab.isShow = 0;\n      changeShowStatus({\n        type: \"self\",\n        title: tab.title,\n        val: 0,\n        tab,\n      });\n      break;\n    default:\n      break;\n  }\n};\n// 更改高亮状态并更换表头\nconst changeShowStatus = obj => {\n  let { columnTabs, defaultColumHasSonTabs } = columConfig.level2;\n  let filterHasSonShowColumn = defaultColumHasSonTabs.filter(item => item.isShow === 1);\n  if (filterHasSonShowColumn.length === 0) {\n    Message.error(\"至少选择一项\");\n    obj.tab.isShow = obj.tab.isShow === 0 ? 1 : 0;\n    return;\n  }\n  if (obj.type === \"parent\") {\n    columnTabs.forEach(item => {\n      if (obj.title === item.title) {\n        item.isShow = obj.val;\n      }\n    });\n  }\n  if (obj.type === \"self\") {\n    defaultColumHasSonTabs.forEach(item => {\n      if (obj.title === item.title) {\n        item.isShow = obj.val;\n      }\n    });\n  }\n  analysiisColumn();\n  handleAbortRequest();\n  getList();\n};\n// 处理趋势数据\nconst construcLine = arr => {\n  arr.forEach(item => {\n    item.colNo2 = JSON.parse(item.colNo2);\n    item.colNo3 = JSON.parse(item.colNo3);\n    item.colNo4 = JSON.parse(item.colNo4);\n    if (item.children) {\n      construcLine(item.children);\n    }\n  });\n};\n// 获取列表数据\nconst getList = () => {\n  tableInfo.data = [];\n  tableInfo.loading = true;\n  let arr = [];\n  var newColumns = JSON.parse(JSON.stringify(tableInfo.columns));\n  const mappings = {\n    发薪人数: \"colNo1\",\n    营业收入: \"colNo2\",\n    销售毛利: \"colNo3\",\n    销售毛利率: \"colNo4\",\n    直接成本: \"colNo5\",\n    人均营业收入: \"colNo6\",\n    人均直接成本: \"colNo7\",\n    未完工项目成本: \"colNo8\",\n    招聘费用: \"colNo9\",\n    销售费用: \"colNo10\",\n    管理费用: \"colNo11\",\n  };\n  newColumns.forEach(item => {\n    if (mappings[item.title]) {\n      arr.push(mappings[item.title]);\n    }\n    if (item.children) {\n      item.children.forEach(jtem => {\n        if (mappings[jtem.title]) {\n          arr.push(mappings[jtem.title]);\n        }\n      });\n    }\n  });\n  \n  var params = {\n    interval: Number(selectMonth.value),\n      dynamicHeaderParam: Array.from(new Set(arr)),\n      xAxis: 50,\n      yAxis: 20,\n      tagKey: \"linkAnalysis2\",\n      deptId : deptId || \"\",\n  };\n  getCustomerRingList(params)\n    .then(res => {\n      if (res.code == \"200\") {\n        construcLine(res.data);\n        let data = dataAddKey(res.data, \"key\", \"title\");\n        let keys = [];\n        res.data.forEach(item => keys.push(item.title));\n        tableInfo.defaultExpandedKeys = keys;\n        tableInfo.data = data;\n      } else {\n        Message.error(res.message);\n      }\n      tableInfo.loading = false;\n    })\n    .catch(err => {\n      if (err?.code === \"ERR_CANCELED\") {\n        tableInfo.loading = true;\n      } else {\n        Message.error(err?.message || \"数据请求错误\");\n        tableInfo.loading = false;\n      }\n    });\n};\n// 跳转\nconst jump = record => {\n  router.push({\n    path: \"/projectRingSame\",\n    query: {\n      customerId: record.customerId,\n      deptId,\n      deptName,\n      groupCustomerName : record.groupCustomerName,\n      title : record.title,\n      tab : tabsActive.value,\n      radiotype : raidoGroupType.value\n    },\n  });\n  \n};\n\n//同比分析\nconst raidoGroupType = ref(\"total\");\nconst allHeadTagList = ref([]); // 所有的标签\nconst allTableList = ref([]); // 表头数据\nconst notShowList = shallowRef([]); // 初始没显示的表头数据\nconst sameDetailTableRef = ref(null) //同比明细表格dom\nconst sameTotalTableRef = ref(null)//同比汇总表格dom\n\n// 点击标签\nconst handleSameContrastTabChange = value => {\n  value.isShow = value.isShow === 0 ? 1 : 0;\n  let filterHasSonShowColumn = allHeadTagList.value.filter(item => item.isShow === 1);\n  if (filterHasSonShowColumn.length === 0) {\n    Message.error(\"至少选择一项\");\n    value.isShow = value.isShow === 0 ? 1 : 0;\n    return;\n  }\n  handleAbortRequest()\n  if (raidoGroupType.value === \"total\") {\n    constructSameTotalColumns(allHeadTagList.value);\n  } else {\n    constructSameDetailColumns(allHeadTagList.value);\n  }\n};\n// 更改汇总/明细\nconst constructSameTabChange = value => {\n  raidoGroupType.value = value;\n  initTotalColumns();\n};\n\n// 初始化表头和标签数据\nconst initTotalColumns = () => {\n  allHeadTagList.value = [];\n  allTableList.value = [];\n  notShowList.value = [];\n  let tagColumns = toRaw(tagColumnList.getTagColumnList) || [];\n  let currentPageColumn = tagColumns.filter(item => item.report === \"同比分析\") || [];\n  if (currentPageColumn.length) {\n    const currentColumnList = currentPageColumn[0].tier[1].tags[0].columns;\n    currentColumnList.forEach(item => {\n      const { col, conf, title } = item;\n      let columnItemConfig = {\n        title,\n        dataIndex: col,\n        align: conf.align,\n        cellStyle: { \"text-align\": conf.cellAlign },\n        width: conf.width,\n        ellipsis: true,\n        headerCellClass: \"noEllipsis\",\n        slotName: col,\n        bodyCellClass: \"bodyCell\",\n        isShow: conf.isShow,\n      };\n      if (conf.canHide == 1) {\n        allHeadTagList.value.push(columnItemConfig);\n      } else {\n        notShowList.value.push(columnItemConfig);\n      }\n      if(conf.fixed !== undefined){\n        columnItemConfig.fixed = conf.fixed\n      }\n      if (conf.parentCol == 1) {\n        allTableList.value.push(columnItemConfig);\n      }\n    });\n    if (raidoGroupType.value == \"total\") {\n      constructSameTotalColumns(allHeadTagList.value);\n    } else {\n      constructSameDetailColumns(allHeadTagList.value);\n    }\n  }\n};\n\n//同比汇总表格数据\nconst sameTotalTableInfo = reactive({\n  columns: [],\n  data: [],\n  defaultExpandedKeys: [],\n  maxHeight: \"600px\",\n  loading: false,\n});\n\nconst sameTotalTableExpandedChange = keys=>{\n  sameTotalTableInfo.defaultExpandedKeys = keys\n}\n// 构造同比汇总的表头\nconst constructSameTotalColumns = list => {\n  let tableList = list.filter(item => item.isShow === 1);\n  let createColumns = []\n  let childrenColumns = [\n        {\n          title: lastYear + \"/1-12\",\n        },\n        {\n          title: lastYear + `/1-${lastMonth}`,\n        },\n        {\n          title: year + `/1-${lastMonth}`,\n        },\n        {\n          title: \"同比\",\n        },\n  ]\n  let colNo = 5\n  tableList.forEach(item => {\n    let columnConfig = {\n      title : item.title,\n      children : childrenColumns.map((jtem,i)=>{\n        let childrenColumnItemConfig = {\n          title : jtem.title,\n          dataIndex: `colNo${colNo}`,\n          slotName: `colNo${colNo}`,\n          width: 110,\n          cellStyle: {textAlign : 'right'},\n        }\n        if(i === (childrenColumns.length -1)){\n          childrenColumnItemConfig.title = item.title.endsWith('率')?'偏离':jtem.title\n        }\n        colNo++\n        return childrenColumnItemConfig\n      })\n    }\n    createColumns.push(columnConfig)\n  });\n  let actionColumn = {\n    title : '操作',\n    dataIndex : 'action',\n    width : 80,\n    fixed : 'right',\n    cellStyle : {textAlign : 'center'},\n    render({record}){\n      return <a href=\"javaScript:void(0)\" onClick={()=>{goLookChat(record,'customer')}}>看图</a>\n    }\n  }\n  sameTotalTableInfo.columns = [...notShowList.value,...createColumns,actionColumn]\n  getConstructSameTotalList()\n};\n\n//同比分析汇总接口\nconst getConstructSameTotalList = ()=>{\n  let params = {\n    interval:lastMonth == 0? 12 : lastMonth,\n    dynamicHeaderParam:allTableList.value.filter(item=>item.isShow ===1).map(item=>item.dataIndex),\n    xAxis:74,\n    yAxis:100,\n    tagKey:\"yoyAnalysis2\",\n    deptId : deptId || \"\",\n    type : '1'\n  }\n  if(!deptId){\n    Reflect.deleteProperty(params,'deptId')\n  }\n  sameTotalTableInfo.loading = true\n  getCustomerYoyAnalysis(params).then(res=>{\n    if(res.code === '200'){\n      dataAddKey(res.data,'key','deptId')\n      let expandKeys = []\n      res.data.forEach(item=>expandKeys.push(item.key))\n      sameTotalTableInfo.defaultExpandedKeys = expandKeys\n      sameTotalTableInfo.data = res.data\n      //计算表格不出滚动条的最大高度\n      if(sameTotalTableInfo.maxHeight === '600px'){\n        nextTick(() => {\n              if (sameTotalTableRef.value) {\n                let head = sameTotalTableRef.value.$el;\n                let innerHeight = window.innerHeight;\n                let elHeight = head.getBoundingClientRect().top;\n                sameTotalTableInfo.maxHeight = Math.round(innerHeight - elHeight - 32) + \"px\";\n            }\n          });\n        }\n    }else {\n      Message.error(res.message || '请求数据失败')\n    }\n    sameTotalTableInfo.loading = false;\n  }).catch(err=>{\n    if (err?.code === \"ERR_CANCELED\") {\n      sameTotalTableInfo.loading = true;\n      } else {\n        Message.error(err?.message || \"数据请求错误\");\n        sameTotalTableInfo.loading = false;\n      }\n  })\n}\n\n//同比明细表格数据\nconst sameDetailTableInfo = reactive({\n  columns: [],\n  data: [],\n  defaultExpandedKeys: [],\n  maxHeight: \"600px\",\n  loading: false,\n});\n//同比分析明细表格展开/折叠\nconst detailTableExpandedChange = rowKeys => {\n  sameDetailTableInfo.defaultExpandedKeys = rowKeys;\n};\n// 构造同比明细的表头结构\nconst constructSameDetailColumns = list => {\n  const timeData = [];\n  let activeTableList = list.filter(item => item.isShow === 1);\n  if (month == 1) {\n    for (var i = 1; i <= 12; i++) {\n      timeData.push({\n        title: i + \"月\",\n        children: [],\n      });\n    }\n  } else {\n    for (var i = 1; i <= lastMonth; i++) {\n      timeData.push({\n        title: i + \"月\",\n        children: [],\n      });\n    }\n  }\n  const years = [lastYear, year];\n  let colNo = 5\n  timeData.forEach(item=>{\n    let childrenColumns = []\n    activeTableList.forEach(jtem=>{\n      years.forEach(ktem=>{\n        let contrastColumnConfig = {\n          title: `${jtem.title}${ktem}`,\n          dataIndex: `colNo${colNo}`,\n          slotName: `colNo${colNo}`,\n          width: jtem.width,\n          cellStyle: toRaw(jtem.cellStyle),\n        }\n        childrenColumns.push(contrastColumnConfig)\n        colNo++\n      })\n    })\n    item.children = childrenColumns\n  })\n  let actionColumn = {\n    title : '操作',\n    dataIndex : 'action',\n    width : 80,\n    fixed : 'right',\n    cellStyle : {textAlign : 'center'},\n    render({record}){\n      return <a href=\"javaScript:void(0)\" onClick={()=>{goLookChat(record,'customer')}}>看图</a>\n    }\n  }\n  sameDetailTableInfo.columns = [...notShowList.value,...timeData,actionColumn]\n  getConstructSameDetailList()\n};\n\n//同比分析集团客户维度明细接口\nconst getConstructSameDetailList = ()=>{\n  let params = {\n    interval:lastMonth == 0? 12 : lastMonth,\n    dynamicHeaderParam:allTableList.value.filter(item=>item.isShow ===1).map(item=>item.dataIndex),\n    xAxis:74,\n    yAxis:100,\n    tagKey:\"yoyAnalysis2\",\n    deptId : deptId || \"\",\n    type : '2'\n  }\n  sameDetailTableInfo.loading = true\n  getCustomerYoyAnalysis(params).then(res=>{\n    if(res.code === '200'){\n      dataAddKey(res.data,'key','deptId')\n      let expandKeys = []\n      res.data.forEach(item=>expandKeys.push(item.key))\n      sameDetailTableInfo.defaultExpandedKeys = expandKeys\n      sameDetailTableInfo.data = res.data\n      //计算表格不出滚动条的最大高度\n      if(sameDetailTableInfo.maxHeight === '600px'){\n        nextTick(() => {\n              if (sameDetailTableRef.value) {\n              let head = sameDetailTableRef.value.$el;\n              let innerHeight = window.innerHeight;\n              let elHeight = head.getBoundingClientRect().top;\n              sameDetailTableInfo.maxHeight = Math.round(innerHeight - elHeight - 32) + \"px\";\n            }\n          });\n        }\n    }else {\n      Message.error(res.message || '请求数据失败')\n    }\n    sameDetailTableInfo.loading = false;\n  }).catch(err=>{\n    if (err?.code === \"ERR_CANCELED\") {\n      sameDetailTableInfo.loading = true;\n      } else {\n        Message.error(err?.message || \"数据请求错误\");\n        sameDetailTableInfo.loading = false;\n      }\n  })\n}\n\n//跳转同比分析看图页\nconst goLookChat = (record,type)=>{\n  router.push({\n    name : 'lookChart',\n    state : {\n      barChartOptions : JSON.stringify(allHeadTagList.value),\n      deptId : record.deptId,\n      title : record.title,\n      sourceType:type,\n      taxRate : record.taxRate,\n      projectId : record.finPcode,\n      groupCustomerName : record.groupCustomerName,\n      customerName : record.customerName,\n      projectName : record.projectName,\n      deptName\n    }\n  })\n}\n\n//跳转环比分析看图页\nconst goRingContrastChart = (record,type)=>{\n  router.push({\n    name : 'ringContrastChart',\n    state : {\n      interval:selectMonth.value,\n      deptId : deptId?record.deptId:\"\",\n      sourceType : type,\n      title : record.title,\n      deptName,\n      customerId: record.customerId,\n    }\n  })\n}\n//echarts缩略图的路径信息\nconst createEchartsRoute = (record,column)=>{\n  return record[column.dataIndex].map((item,i)=>({value:record[column.dataIndex][i]}))\n}\n\nconst deptGoCustomer = ()=>{\n  let breadList\n    switch (tab) {\n        case '1':\n            breadList = [\n                {\n                    type: \"button\",\n                    color: \"#5370FD\",\n                    msg: '环比分析列表',\n                    isBack : true\n                },\n                { type: \"text\", color: \"#333\", msg: deptName },\n            ]\n          break;\n          case '2':\n            breadList = [\n                { type: \"text\", color: \"#333\", msg: '同比分析列表' },\n                {\n                    type: \"button\",\n                    color: \"#5370FD\",\n                    msg: deptName,\n                    isBack : true\n                },\n            ]\n          break;\n          default:\n            break;\n    }\n    $bus.emit(\"updateStructure\", breadList);\n}\n\n</script>\n\n<style lang=\"scss\" scoped>\n.p-t-10 {\n  padding-top: 10px;\n}\n:deep(.tabs .arco-tabs-nav-type-line .arco-tabs-tab-title) {\n  font-size: 15px;\n}\n</style>\n","import script from \"./customerRingSame.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./customerRingSame.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./customerRingSame.vue?vue&type=style&index=0&id=1de2199e&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/lijiaxin/Documents/workspace/hydsoft-oms-frontend/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1de2199e\"]])\n\nexport default __exports__"],"names":["getDepartmentRingList","parameter","request","url","method","data","timeout","getCustomerRingList","getProjectRingList","queryYoyAnalysis","getCustomerYoyAnalysis","getProjectYoyAnalysis","echartContainer","ref","onMounted","option","chartDom","value","myChart","echarts","xAxis","type","show","yAxis","tooltip","trigger","position","formatter","params","name","replaceAll","appendToBody","series","symbol","symbolSize","itemStyle","color","areaStyle","offset","props","route","setOption","__exports__","$bus","getCurrentInstance","appContext","config","globalProperties","lastYear","lastMonth","getLastYearDay","year","month","getCurrentTime","tagColumnList","useTagColumnListStore","router","useRouter","useRoute","id","deptId","deptName","tab","query","tabsActive","columConfig","tableInfo","reactive","columns","defaultExpandedKeys","maxHeight","loading","selectMonth","tableRef","tabChangeColumInfo","columnTabs","up","down","chartColumMap","发薪人数","营业收入","销售毛利率","chartColumnNameMap","canvasLine1","canvasLine2","canvasLine3","filterShowChildrenColumn","handleTab","val","inintTableData","head","$el","nextTick","innerHeight","window","elHeight","getBoundingClientRect","top","seltColumns","tagColumns","toRaw","getTagColumnList","currentPageColumn","filter","item","report","length","tier","forEach","index","tabs","columnHasSonTabs","noHiddenColumn","defaultColumHasSonTabs","defaultColumnTabs","tags","jtem","push","tag","ktem","col","conf","title","columnItemConfig","dataIndex","align","cellStyle","cellAlign","width","ellipsis","headerCellClass","slotName","bodyCellClass","fixed","isShow","render","record","column","cellVal","Array","isArray","map","i","tip","background","default","leafNode","jump","content","getRedNum","canHide","parentCol","level2","analysiisColumn","num","months1","getNMonthsAgo","children1","filterHasSonShowColumn1","columnHasSonConfig","children","j","months2","children2","filterHasSonShowColumn2","months3","children3","filterHasSonShowColumn3","Object","keys","key","filterShowColumns","hasOwnProperty","reverse","actionColumn","textAlign","goRingContrastChart","filterAllShowColumn","expandedChange","rowKeys","handleMonthChange","getList","onBeforeMount","deptGoCustomer","raidoGroupType","sameTotalTableInfo","initTotalColumns","sameDetailTableInfo","handleTabChange","changeShowStatus","obj","filterHasSonShowColumn","Message","error","handleAbortRequest","construcLine","arr","colNo2","JSON","parse","colNo3","colNo4","newColumns","stringify","mappings","销售毛利","直接成本","人均营业收入","人均直接成本","未完工项目成本","招聘费用","销售费用","管理费用","interval","Number","dynamicHeaderParam","from","Set","tagKey","then","res","code","dataAddKey","message","catch","err","path","customerId","groupCustomerName","radiotype","allHeadTagList","allTableList","notShowList","shallowRef","sameDetailTableRef","sameTotalTableRef","handleSameContrastTabChange","constructSameTotalColumns","constructSameDetailColumns","constructSameTabChange","currentColumnList","undefined","sameTotalTableExpandedChange","list","tableList","createColumns","childrenColumns","colNo","columnConfig","childrenColumnItemConfig","endsWith","goLookChat","getConstructSameTotalList","Reflect","deleteProperty","expandKeys","Math","round","detailTableExpandedChange","timeData","activeTableList","years","contrastColumnConfig","getConstructSameDetailList","state","barChartOptions","sourceType","taxRate","projectId","finPcode","customerName","projectName","createEchartsRoute","breadList","msg","isBack","emit"],"sourceRoot":""}