{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport { each, isArray, isObject } from '@antv/util';\nimport { SVG_ATTR_MAP } from '../constant';\nimport ShapeBase from './base';\nvar Path = /** @class */function (_super) {\n  __extends(Path, _super);\n  function Path() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'path';\n    _this.canFill = true;\n    _this.canStroke = true;\n    return _this;\n  }\n  Path.prototype.getDefaultAttrs = function () {\n    var attrs = _super.prototype.getDefaultAttrs.call(this);\n    return __assign(__assign({}, attrs), {\n      startArrow: false,\n      endArrow: false\n    });\n  };\n  Path.prototype.createPath = function (context, targetAttrs) {\n    var _this = this;\n    var attrs = this.attr();\n    var el = this.get('el');\n    each(targetAttrs || attrs, function (value, attr) {\n      if (attr === 'path' && isArray(value)) {\n        el.setAttribute('d', _this._formatPath(value));\n      } else if (attr === 'startArrow' || attr === 'endArrow') {\n        if (value) {\n          var id = isObject(value) ? context.addArrow(attrs, SVG_ATTR_MAP[attr]) : context.getDefaultArrow(attrs, SVG_ATTR_MAP[attr]);\n          el.setAttribute(SVG_ATTR_MAP[attr], \"url(#\" + id + \")\");\n        } else {\n          el.removeAttribute(SVG_ATTR_MAP[attr]);\n        }\n      } else if (SVG_ATTR_MAP[attr]) {\n        el.setAttribute(SVG_ATTR_MAP[attr], value);\n      }\n    });\n  };\n  Path.prototype._formatPath = function (value) {\n    var newValue = value.map(function (path) {\n      return path.join(' ');\n    }).join('');\n    if (~newValue.indexOf('NaN')) {\n      return '';\n    }\n    return newValue;\n  };\n  /**\n   * Get total length of path\n   * 尽管通过浏览器的 SVGPathElement.getTotalLength() 接口获取的 path 长度，\n   * 与 Canvas 版本通过数学计算的方式得到的长度有一些细微差异，但最大误差在个位数像素，精度上可以能接受\n   * @return {number} length\n   */\n  Path.prototype.getTotalLength = function () {\n    var el = this.get('el');\n    return el ? el.getTotalLength() : null;\n  };\n  /**\n   * Get point according to ratio\n   * @param {number} ratio\n   * @return {Point} point\n   */\n  Path.prototype.getPoint = function (ratio) {\n    var el = this.get('el');\n    var totalLength = this.getTotalLength();\n    // @see https://github.com/antvis/g/issues/634\n    if (totalLength === 0) {\n      return null;\n    }\n    var point = el ? el.getPointAtLength(ratio * totalLength) : null;\n    return point ? {\n      x: point.x,\n      y: point.y\n    } : null;\n  };\n  return Path;\n}(ShapeBase);\nexport default Path;","map":{"version":3,"mappings":"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","names":["each","isArray","isObject","SVG_ATTR_MAP","ShapeBase","__extends","_this","Path","attrs","_super","getDefaultAttrs","startArrow","endArrow","context","targetAttrs","attr","el","get","value","setAttribute","_formatPath","id","addArrow","getDefaultArrow","removeAttribute","newValue","map","path","join","indexOf","getTotalLength","ratio","totalLength","point","getPointAtLength","x","y"],"sourceRoot":"","sources":["../../src/shape/path.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module","externalDependencies":[]}