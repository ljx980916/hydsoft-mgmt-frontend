{"ast":null,"code":"import { ref } from \"vue\";\nimport { on, off } from \"../../_utils/dom.js\";\nconst useDraggable = ({\n  modalRef,\n  wrapperRef,\n  draggable\n}) => {\n  const isDragging = ref(false);\n  const startMouse = ref([0, 0]);\n  const diffMouse = ref([0, 0]);\n  const initialPosition = ref([0, 0]);\n  const position = ref();\n  const maxPosition = ref([0, 0]);\n  const getInitialPosition = () => {\n    var _a, _b;\n    if (wrapperRef.value && modalRef.value) {\n      const {\n        top: wrapperTop,\n        left: wrapperLeft\n      } = wrapperRef.value.getBoundingClientRect();\n      const {\n        clientWidth: wrapperWidth,\n        clientHeight: wrapperHeight\n      } = wrapperRef.value;\n      const {\n        top,\n        left,\n        width,\n        height\n      } = modalRef.value.getBoundingClientRect();\n      const initialX = left - wrapperLeft;\n      const initialY = top - wrapperTop;\n      if (initialX !== ((_a = initialPosition.value) == null ? void 0 : _a[0]) || initialY !== ((_b = initialPosition.value) == null ? void 0 : _b[1])) {\n        initialPosition.value = [initialX, initialY];\n      }\n      const maxX = wrapperWidth > width ? wrapperWidth - width : 0;\n      const maxY = wrapperHeight > height ? wrapperHeight - height : 0;\n      if (maxX !== maxPosition.value[0] || maxY !== maxPosition.value[1]) {\n        maxPosition.value = [maxX, maxY];\n      }\n    }\n  };\n  const handleMoveDown = ev => {\n    if (draggable.value) {\n      ev.preventDefault();\n      isDragging.value = true;\n      getInitialPosition();\n      startMouse.value = [ev.x, ev.y];\n      diffMouse.value = [0, 0];\n      on(window, \"mousemove\", handleMouseMove);\n      on(window, \"mouseup\", handleMouseUp);\n      on(window, \"contextmenu\", handleMouseUp);\n    }\n  };\n  const handleMouseMove = ev => {\n    if (isDragging.value) {\n      const diffX = ev.x - startMouse.value[0];\n      const diffY = ev.y - startMouse.value[1];\n      let x = initialPosition.value[0] + diffX;\n      let y = initialPosition.value[1] + diffY;\n      if (x < 0) x = 0;\n      if (x > maxPosition.value[0]) x = maxPosition.value[0];\n      if (y < 0) y = 0;\n      if (y > maxPosition.value[1]) y = maxPosition.value[1];\n      position.value = [x, y];\n    }\n  };\n  const handleMouseUp = () => {\n    isDragging.value = false;\n    off(window, \"mousemove\", handleMouseMove);\n    off(window, \"mouseup\", handleMouseUp);\n  };\n  return {\n    position,\n    handleMoveDown\n  };\n};\nexport { useDraggable };","map":{"version":3,"names":["ref","on","off","useDraggable","modalRef","wrapperRef","draggable","isDragging","startMouse","diffMouse","initialPosition","position","maxPosition","getInitialPosition","_a","_b","value","top","wrapperTop","left","wrapperLeft","getBoundingClientRect","clientWidth","wrapperWidth","clientHeight","wrapperHeight","width","height","initialX","initialY","maxX","maxY","handleMoveDown","ev","preventDefault","x","y","window","handleMouseMove","handleMouseUp","diffX","diffY"],"sources":["/Users/lijiaxin/Documents/workspace/hydsoft-oms-frontend/node_modules/@arco-design/web-vue/es/modal/hooks/use-draggable.js"],"sourcesContent":["import { ref } from \"vue\";\nimport { on, off } from \"../../_utils/dom.js\";\nconst useDraggable = ({\n  modalRef,\n  wrapperRef,\n  draggable\n}) => {\n  const isDragging = ref(false);\n  const startMouse = ref([0, 0]);\n  const diffMouse = ref([0, 0]);\n  const initialPosition = ref([0, 0]);\n  const position = ref();\n  const maxPosition = ref([0, 0]);\n  const getInitialPosition = () => {\n    var _a, _b;\n    if (wrapperRef.value && modalRef.value) {\n      const { top: wrapperTop, left: wrapperLeft } = wrapperRef.value.getBoundingClientRect();\n      const { clientWidth: wrapperWidth, clientHeight: wrapperHeight } = wrapperRef.value;\n      const { top, left, width, height } = modalRef.value.getBoundingClientRect();\n      const initialX = left - wrapperLeft;\n      const initialY = top - wrapperTop;\n      if (initialX !== ((_a = initialPosition.value) == null ? void 0 : _a[0]) || initialY !== ((_b = initialPosition.value) == null ? void 0 : _b[1])) {\n        initialPosition.value = [initialX, initialY];\n      }\n      const maxX = wrapperWidth > width ? wrapperWidth - width : 0;\n      const maxY = wrapperHeight > height ? wrapperHeight - height : 0;\n      if (maxX !== maxPosition.value[0] || maxY !== maxPosition.value[1]) {\n        maxPosition.value = [maxX, maxY];\n      }\n    }\n  };\n  const handleMoveDown = (ev) => {\n    if (draggable.value) {\n      ev.preventDefault();\n      isDragging.value = true;\n      getInitialPosition();\n      startMouse.value = [ev.x, ev.y];\n      diffMouse.value = [0, 0];\n      on(window, \"mousemove\", handleMouseMove);\n      on(window, \"mouseup\", handleMouseUp);\n      on(window, \"contextmenu\", handleMouseUp);\n    }\n  };\n  const handleMouseMove = (ev) => {\n    if (isDragging.value) {\n      const diffX = ev.x - startMouse.value[0];\n      const diffY = ev.y - startMouse.value[1];\n      let x = initialPosition.value[0] + diffX;\n      let y = initialPosition.value[1] + diffY;\n      if (x < 0)\n        x = 0;\n      if (x > maxPosition.value[0])\n        x = maxPosition.value[0];\n      if (y < 0)\n        y = 0;\n      if (y > maxPosition.value[1])\n        y = maxPosition.value[1];\n      position.value = [x, y];\n    }\n  };\n  const handleMouseUp = () => {\n    isDragging.value = false;\n    off(window, \"mousemove\", handleMouseMove);\n    off(window, \"mouseup\", handleMouseUp);\n  };\n  return {\n    position,\n    handleMoveDown\n  };\n};\nexport { useDraggable };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}