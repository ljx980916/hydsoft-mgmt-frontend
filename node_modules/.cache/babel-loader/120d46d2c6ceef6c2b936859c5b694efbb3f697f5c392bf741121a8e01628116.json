{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport { gl } from '@antv/g-webgpu-core';\nimport { dataTypeMap, usageMap } from './constants';\n\n/**\n * adaptor for regl.Buffer\n * @see https://github.com/regl-project/regl/blob/gh-pages/API.md#buffers\n */\nvar ReglBuffer = /*#__PURE__*/function () {\n  function ReglBuffer(reGl, options) {\n    _classCallCheck(this, ReglBuffer);\n    this.buffer = void 0;\n    var data = options.data,\n      usage = options.usage,\n      type = options.type;\n    // @ts-ignore\n    this.buffer = reGl.buffer({\n      data: data,\n      usage: usageMap[usage || gl.STATIC_DRAW],\n      type: dataTypeMap[type || gl.UNSIGNED_BYTE]\n      // length: 0,\n    });\n  }\n\n  _createClass(ReglBuffer, [{\n    key: \"get\",\n    value: function get() {\n      return this.buffer;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      // this.buffer.destroy();\n    }\n  }, {\n    key: \"subData\",\n    value: function subData(_ref) {\n      var data = _ref.data,\n        offset = _ref.offset;\n      // @ts-ignore\n      this.buffer.subdata(data, offset);\n    }\n  }]);\n  return ReglBuffer;\n}();\nexport { ReglBuffer as default };","map":{"version":3,"mappings":";;AAAA,SAEEA,EAAE,QAGG,qBAAqB;AAE5B,SAASC,WAAW,EAAEC,QAAQ,QAAQ,aAAa;;AAEnD;AACA;AACA;AACA;AAHA,IAIqBC,UAAU;EAG7B,oBAAYC,IAAe,EAAEC,OAAqC,EAAE;IAAAC;IAAA,KAF5DC,MAAM;IAGZ,IAAQC,IAAI,GAAkBH,OAAO,CAA7BG,IAAI;MAAEC,KAAK,GAAWJ,OAAO,CAAvBI,KAAK;MAAEC,IAAI,GAAKL,OAAO,CAAhBK,IAAI;IACzB;IACA,IAAI,CAACH,MAAM,GAAGH,IAAI,CAACG,MAAM,CAAC;MACxBC,IAAI,EAAJA,IAAI;MACJC,KAAK,EAAEP,QAAQ,CAACO,KAAK,IAAIT,EAAE,CAACW,WAAW,CAAC;MACxCD,IAAI,EAAET,WAAW,CAACS,IAAI,IAAIV,EAAE,CAACY,aAAa;MAC1C;IACF,CAAC,CAAC;EACJ;;EAACC;IAAAC;IAAAC,OAED,eAAa;MACX,OAAO,IAAI,CAACR,MAAM;IACpB;EAAC;IAAAO;IAAAC,OAED,mBAAiB;MACf;IAAA;EACD;IAAAD;IAAAC,OAED,uBAAuE;MAAA,IAAtDP,IAAI,QAAJA,IAAI;QAAEQ,MAAM,QAANA,MAAM;MAC3B;MACA,IAAI,CAACT,MAAM,CAACU,OAAO,CAACT,IAAI,EAAEQ,MAAM,CAAC;IACnC;EAAC;EAAA;AAAA;AAAA,SAzBkBb,UAAU","names":["gl","dataTypeMap","usageMap","ReglBuffer","reGl","options","_classCallCheck","buffer","data","usage","type","STATIC_DRAW","UNSIGNED_BYTE","_createClass","key","value","offset","subdata"],"sources":["../../src/webgl/ReglBuffer.ts"],"sourcesContent":["import {\n  BufferData,\n  gl,\n  IBuffer,\n  IBufferInitializationOptions,\n} from '@antv/g-webgpu-core';\nimport regl from 'regl';\nimport { dataTypeMap, usageMap } from './constants';\n\n/**\n * adaptor for regl.Buffer\n * @see https://github.com/regl-project/regl/blob/gh-pages/API.md#buffers\n */\nexport default class ReglBuffer implements IBuffer {\n  private buffer: regl.Buffer;\n\n  constructor(reGl: regl.Regl, options: IBufferInitializationOptions) {\n    const { data, usage, type } = options;\n    // @ts-ignore\n    this.buffer = reGl.buffer({\n      data,\n      usage: usageMap[usage || gl.STATIC_DRAW],\n      type: dataTypeMap[type || gl.UNSIGNED_BYTE],\n      // length: 0,\n    });\n  }\n\n  public get() {\n    return this.buffer;\n  }\n\n  public destroy() {\n    // this.buffer.destroy();\n  }\n\n  public subData({ data, offset }: { data: BufferData; offset: number }) {\n    // @ts-ignore\n    this.buffer.subdata(data, offset);\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}