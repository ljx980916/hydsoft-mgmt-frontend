{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { reactive, ref, onMounted, onUnmounted, onBeforeMount, shallowRef, nextTick, toRaw } from \"vue\";\nimport { Message } from \"@arco-design/web-vue\";\nimport calenderTable from \"@/components/calenderTable.vue\";\nimport { useMenuStore, useBreadListStore, useUserInfoStore } from \"../store/index\";\nimport { storeToRefs } from \"pinia\";\nimport { menuSideBar, getDetailList } from \"../api/menu\";\nimport { __canvasWM } from \"../utils/watermark\";\nimport { useRouter, useRoute } from \"vue-router\";\nimport { getCurrentInstance } from \"@vue/runtime-core\";\nimport { getCurrentTime, clearAllCookies } from \"@/utils/util.js\";\nimport { goLogin } from \"@/utils/getToken\";\nimport { password } from \"@/api/login\";\nimport { LOGIN_PATH, isTest } from '@/store/mutation-types.js';\nexport default {\n  __name: 'HomeView',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    let isDev = !LOGIN_PATH.split('//')[1].startsWith('test');\n    const router = useRouter();\n    // const route = useRoute();\n    const currentRoute = router.currentRoute;\n    let {\n      year,\n      month,\n      day\n    } = getCurrentTime();\n    let currentDate = `${year}/${month}/${day}`;\n    const dateNow = ref(currentDate);\n    const selectedKeys = ref([]);\n    const innerWidth = window.innerWidth;\n\n    /*-------------- 面包屑导航-start------------------- */\n    let breadListStore = useBreadListStore();\n    const {\n      breadList\n    } = storeToRefs(breadListStore);\n    console.log(breadListStore.breadList, router, 'breadListStore.breadList');\n    /*-----------侧边栏菜单-start-------------------- */\n    let menuStore = useMenuStore();\n    const collapsed = ref(false);\n    //页面刷新后,根据当前页面path从菜单中找出对应的菜单key高亮显示，并更改导航路径\n    const menuShowActive = ref(true);\n    const newPwdReg = ref('/^[0-9a-zA-Z!@#$%^&*()\\-_=+\\[\\]{};:\\'\",<.>\\/?~]{8,}$/');\n    const minLength = ref('');\n    const complexityStatus = ref();\n    const regList = ref([]);\n    const ruleArry = ref([]);\n    const regTip = ref('');\n    // function updateMenuActive(){\n    //   const currentPagePath = route.path;\n    //   menuShowActive.value = false\n    //   function getCurrentMenu(arr, url) {\n    //     let obj = {};\n    //     arr.forEach(item => {\n    //       if (item.children.length) {\n    //         item.children.forEach(jtem => {\n    //           if (jtem.url === url) {\n    //             obj = {\n    //               defaultOpenMenu: item,\n    //               defaultSelectedMenu: jtem,\n    //             };\n    //           }\n    //         });\n    //       }\n    //     });\n    //       return obj;\n    //   }\n    //   let { defaultOpenMenu, defaultSelectedMenu } = getCurrentMenu(toRaw(menuStore.menuList), currentPagePath);\n    //   if (defaultOpenMenu && defaultSelectedMenu) {\n    //     // defaultOpenkeys.value = [defaultOpenMenu.id];\n    //     // defaultSelectedKeys.value = [defaultSelectedMenu.id];\n    //     breadListStore.breadList = [{ name: defaultOpenMenu.name }, { name: defaultSelectedMenu.name }];\n    //     nextTick(()=>{\n    //       menuShowActive.value = true\n    //     })\n    //   }else{\n    //     menuShowActive.value = true\n    //   }\n    // }\n    // updateMenuActive()\n    //点击浏览器前进后退时更新菜单激活状态\n    // window.addEventListener(\"popstate\", function (e){\n    //   updateMenuActive()\n    // } )\n    // 点击一级菜单\n    const handleSubMenu = item => {\n      let menuArr = [];\n      menuArr.push({\n        name: item.name\n      });\n      breadListStore.breadList = menuArr;\n      router.push(item.url);\n    };\n    const handleMenuItem = (item, jtem) => {\n      let menuArr = [];\n      menuArr.push({\n        name: item.name\n      });\n      menuArr.push({\n        name: jtem.name\n      });\n      breadListStore.breadList = menuArr;\n      router.push(jtem.url);\n    };\n    const onCollapse = (val, type) => {\n      collapsed.value = val;\n    };\n\n    /*---------------菜单切换事件总线通信-start---------------- */\n    let $bus = getCurrentInstance().appContext.config.globalProperties.$bus;\n    $bus.on(\"updateMenu\", () => {\n      menuSideBar().then(res => {\n        if (res.code === \"000000000000\") {\n          menuStore.$patch(state => {\n            state.menuList = res.data.menuList;\n            state.permissions = res.data.permissions;\n          });\n        }\n      }).catch(err => {\n        Message.error(err.message || \"菜单更新失败\");\n      });\n    });\n    onUnmounted(() => {\n      $bus.off(\"updateMenu\");\n    });\n\n    /************* 返回禁用状态-start********************* */\n    const goBackDisabled = ref(false);\n    $bus.on(\"goBackDisabled\", bool => {\n      goBackDisabled.value = bool;\n    });\n    /*--------------获取登录用户信息-start-------------------- */\n    const userStore = useUserInfoStore();\n    const userInfoContent = reactive({\n      info: {}\n    });\n    const calenderVisible = ref(false);\n    const getInfo = async () => {\n      let userInfo = userStore.getUserInfo;\n      userInfoContent.info = userInfo;\n      __canvasWM({\n        content: `${userInfo.name || userInfo.userName || userInfo.nickName} ${userInfo.workNo}`\n      });\n    };\n    onBeforeMount(() => {\n      getInfo();\n    });\n    /**----------- 修改密码modal-start ------------- */\n    const formRef = ref(null);\n    const confirmLoading = ref(false);\n    const restPwdModalVisible = ref(false);\n    const restModalForm = reactive({\n      sourcePassword: \"\",\n      newPassword: \"\",\n      confirmPassword: \"\"\n    });\n    const restPwdModal = () => {\n      restPwdModalVisible.value = true;\n      getUserDetail();\n    };\n    // 获取详情\n    const getUserDetail = () => {\n      getDetailList().then(res => {\n        if (res.code === \"000000000000\") {\n          minLength.value = String(res.data.complexityMinLength);\n          complexityStatus.value = res.data.complexityStatus;\n          regList.value = [{\n            id: 0,\n            reg: `^(?=.*[A-Z]){${minLength.value},}.+$`,\n            regTip: `请输入包含大写字母的密码`\n          }, {\n            id: 1,\n            reg: `^(?=.*[a-z]){${minLength.value},}.+$`,\n            regTip: `请输入包含小写字母的密码`\n          }, {\n            id: 2,\n            reg: `^(?=.*[0-9]){${minLength.value},}.+$`,\n            regTip: `请输入包含数字的密码`\n          }, {\n            id: 3,\n            reg: `^(?=.*[A-Z])(?=.*[a-z]){${minLength.value},}.+$`,\n            regTip: `请输入包含字母的密码`\n          }, {\n            id: 4,\n            reg: `^(?=.*[A-Z])(?=.*[0-9]){${minLength.value},}.+$`,\n            regTip: `请输入包含大写字母和数字的密码`\n          }, {\n            id: 5,\n            reg: `^(?=.*[a-z])(?=.*[0-9]){${minLength.value},}.+$`,\n            regTip: `请输入包含小写字母和数字的密码`\n          }, {\n            id: 6,\n            reg: `^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9]){${minLength.value},}.+$`,\n            regTip: `请输入包含字母和数字的密码`\n          }];\n          ruleArry.value = res.data.complexityRule.split(',').map(Number);\n          if (complexityStatus.value) {\n            if (!ruleArry.value.includes(4)) {\n              if (ruleArry.value.includes(1) && ruleArry.value.includes(2) && !ruleArry.value.includes(3)) {\n                newPwdReg.value = regList.value[3].reg;\n                regTip.value = regList.value[3].regTip;\n              } else if (ruleArry.value.includes(1) && ruleArry.value.includes(3) && !ruleArry.value.includes(2)) {\n                newPwdReg.value = regList.value[4].reg;\n                regTip.value = regList.value[4].regTip;\n              } else if (ruleArry.value.includes(2) && ruleArry.value.includes(3) && !ruleArry.value.includes(1)) {\n                newPwdReg.value = regList.value[5].reg;\n                regTip.value = regList.value[5].regTip;\n              } else if (ruleArry.value.includes(1) && ruleArry.value.includes(2) && ruleArry.value.includes(3)) {\n                newPwdReg.value = regList.value[6].reg;\n                regTip.value = regList.value[6].regTip;\n              } else if (ruleArry.value.includes(1) && !ruleArry.value.includes(2) && !ruleArry.value.includes(3)) {\n                newPwdReg.value = regList.value[0].reg;\n                regTip.value = regList.value[0].regTip;\n              } else if (ruleArry.value.includes(2) && !ruleArry.value.includes(1) && !ruleArry.value.includes(3)) {\n                newPwdReg.value = regList.value[1].reg;\n                regTip.value = regList.value[1].regTip;\n              } else if (ruleArry.value.includes(3) && !ruleArry.value.includes(1) && !ruleArry.value.includes(2)) {\n                newPwdReg.value = regList.value[2].reg;\n                regTip.value = regList.value[2].regTip;\n              }\n            }\n          }\n        }\n      }).catch(err => {\n        Message.error(err || \"获取密码策略失败\");\n      });\n    };\n    // 校验密码\n    const validateToNextPassword = (value, callback) => {\n      if (complexityStatus.value) {\n        if (restModalForm.newPassword.length < Number(minLength.value)) {\n          callback(`请输入长度大于或等于${minLength.value}位的密码`);\n        }\n        if (ruleArry.value.includes(4) && ruleArry.value.includes(1) && ruleArry.value.includes(2) && ruleArry.value.includes(3)) {\n          // let reg = new RegExp(/^[A-Za-z0-9!@#$%^&*()\\-_=+\\[\\]{};:\\'\",<.>\\/?~]+$/)\n          let reg = new RegExp(/^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*[!@#$%^&*()\\-_=+\\[\\]{}\\\\|;:'\",<.>/\\?~]).+$/);\n          if (reg.test(value)) {\n            callback();\n            return;\n          }\n          // callback(`请输入由字母、数字或特殊字符组成的密码`);\n          callback(`请输入包含字母、数字和特殊字符的密码`);\n        }\n        if (ruleArry.value.includes(4) && ruleArry.value.includes(1) && !ruleArry.value.includes(3) && !ruleArry.value.includes(2)) {\n          // let reg = new RegExp(/^[A-Z!@#$%^&*()\\-_=+\\[\\]{};:\\'\",<.>\\/?~]+$/)\n          let reg = new RegExp(/^(?=.*[A-Z])(?=.*[!@#$%^&*()\\-_=+\\[\\]{}\\\\|;:'\",<.>/\\?~]).+$/);\n          if (reg.test(value)) {\n            callback();\n            return;\n          }\n          // callback(`请输入由大写字母或特殊字符组成的密码`);\n          callback(`请输入包含大写字母和特殊字符的密码`);\n        }\n        if (ruleArry.value.includes(4) && ruleArry.value.includes(2) && !ruleArry.value.includes(3) && !ruleArry.value.includes(1)) {\n          // let reg = new RegExp(/^[a-z!@#$%^&*()\\-_=+\\[\\]{};:\\'\",<.>\\/?~]+$/)\n          let reg = new RegExp(/^(?=.*[a-z])(?=.*[!@#$%^&*()\\-_=+\\[\\]{}\\\\|;:'\",<.>/\\?~]).+$/);\n          if (reg.test(value)) {\n            callback();\n            return;\n          }\n          // callback(`请输入由小写字母或特殊字符组成的密码`);\n          callback(`请输入包含小写字母和特殊字符的密码`);\n        }\n        if (ruleArry.value.includes(4) && ruleArry.value.includes(3) && !ruleArry.value.includes(1) && !ruleArry.value.includes(2)) {\n          // let reg = new RegExp(/^[0-9!@#$%^&*()\\-_=+\\[\\]{};:\\'\",<.>\\/?~]+$/)\n          let reg = new RegExp(/^(?=.*[0-9])(?=.*[!@#$%^&*()\\-_=+\\[\\]{}\\\\|;:'\",<.>/\\?~]).+$/);\n          if (reg.test(value)) {\n            callback();\n            return;\n          }\n          // callback(`请输入由数字或特殊字符组成的密码`);\n          callback(`请输入包含数字和特殊字符的密码`);\n        }\n        if (ruleArry.value.includes(4) && ruleArry.value.includes(1) && ruleArry.value.includes(2) && !ruleArry.value.includes(3)) {\n          // let reg = new RegExp(/^[A-Za-z!@#$%^&*()\\-_=+\\[\\]{};:\\'\",<.>\\/?~]+$/)\n          let reg = new RegExp(/^(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&*()\\-_=+\\[\\]{}\\\\|;:'\",<.>/\\?~]).+$/);\n          if (reg.test(value)) {\n            callback();\n            return;\n          }\n          // callback(`请输入由字母或特殊字符组成的密码`);\n          callback(`请输入包含字母和特殊字符的密码`);\n        }\n        if (ruleArry.value.includes(4) && ruleArry.value.includes(1) && ruleArry.value.includes(3) && !ruleArry.value.includes(2)) {\n          // let reg = new RegExp(/^[A-Z0-9!@#$%^&*()\\-_=+\\[\\]{};:\\'\",<.>\\/?~]+$/)\n          let reg = new RegExp(/^(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*()\\-_=+\\[\\]{}\\\\|;:'\",<.>/\\?~]).+$/);\n          if (reg.test(value)) {\n            callback();\n            return;\n          }\n          // callback(`请输入由大写字母、数字或特殊字符组成的密码`);\n          callback(`请输入包含大写字母、数字和特殊字符的密码`);\n        }\n        if (ruleArry.value.includes(4) && ruleArry.value.includes(2) && ruleArry.value.includes(3) && !ruleArry.value.includes(1)) {\n          // let reg = new RegExp(/^[a-z0-9!@#$%^&*()\\-_=+\\[\\]{};:\\'\",<.>\\/?~]+$/)\n          let reg = new RegExp(/^(?=.*[a-z])(?=.*[0-9])(?=.*[!@#$%^&*()\\-_=+\\[\\]{}\\\\|;:'\",<.>/\\?~]).+$/);\n          if (reg.test(value)) {\n            callback();\n            return;\n          }\n          // callback(`请输入由小写字母、数字或特殊字符组成的密码`);\n          callback(`请输入包含小写字母、数字和特殊字符的密码`);\n        }\n        if (ruleArry.value.includes(4) && !ruleArry.value.includes(3) && !ruleArry.value.includes(2) && !ruleArry.value.includes(1)) {\n          // let reg = new RegExp(/^[!@#$%^&*()\\-_=+\\[\\]{};:\\'\",<.>\\/?~]+$/)\n          let reg = new RegExp(/^(?=.*[!@#$%^&*()\\-_=+\\[\\]{}\\\\|;:'\",<.>/\\?~]).+$/);\n          if (reg.test(value)) {\n            callback();\n            return;\n          }\n          // callback(`请输入由特殊字符组成的密码`);\n          callback(`请输入包含特殊字符的密码`);\n        }\n        let reg = new RegExp(newPwdReg.value);\n        if (reg.test(value)) {\n          callback();\n          return;\n        }\n        callback(regTip.value);\n      } else {\n        callback();\n        return;\n      }\n    };\n    const compareToFirstPassword = (value, callback) => {\n      if (value && value !== restModalForm.newPassword) {\n        callback(\"两次输入的密码不一致 (｡•́︿•̀｡)\");\n        return;\n      }\n      callback();\n    };\n    const handleRestPwdModalCancel = () => {\n      restPwdModalVisible.value = false;\n      confirmLoading.value = false;\n      formRef.value.resetFields();\n    };\n    const handleRestPwdModalOK = () => {\n      confirmLoading.value = true;\n      formRef.value.validate(err => {\n        if (!err) {\n          const formData = new FormData();\n          formData.append(\"oldPwd\", restModalForm.sourcePassword);\n          formData.append(\"newPwd\", restModalForm.newPassword);\n          password(formData).then(res => {\n            if (res.code === \"000000000000\") {\n              Message.success(res.message);\n              restPwdModalVisible.value = false;\n              userStore.Logout().then(res => {\n                Message.success(res.message);\n                clearAllCookies();\n                setTimeout(() => {\n                  goLogin();\n                }, 600);\n              }).catch(err => {\n                Message.error(err || \"退出失败\");\n              });\n            } else {\n              Message.error(res.message);\n            }\n          }).finally(() => {\n            confirmLoading.value = false;\n          });\n        }\n      });\n    };\n    /*------- 退出登录modal-start -----------*/\n    const logoutModalVisible = ref(false);\n    const handleLogoutOk = () => {\n      userStore.Logout().then(res => {\n        Message.success(res.message);\n        clearAllCookies();\n        setTimeout(() => {\n          goLogin();\n        }, 600);\n      }).catch(err => {\n        Message.error(err || \"退出失败\");\n      });\n    };\n    // 点击日历\n    const handleCalender = () => {\n      calenderVisible.value = true;\n    };\n    // 关闭日历\n    const handleCloseCalender = () => {\n      calenderVisible.value = false;\n    };\n    /*---------- 左上角显示结构---------------*/\n    const showStructureArr = ref([]);\n    $bus.on(\"updateStructure\", val => {\n      showStructureArr.value = Array.isArray(val) && val || [];\n    });\n    onUnmounted(() => {\n      $bus.off(\"updateStructure\");\n    });\n    const goPage = (params, isBack = false) => {\n      if (isBack) {\n        router.go(-1);\n        return;\n      }\n      $bus.emit(\"goBack\", params);\n    };\n\n    /**滚动条滚动事件 */\n    onMounted(() => {\n      selectedKeys.value = [breadListStore.breadList.length > 0 && breadListStore.breadList[1].name ? breadListStore.breadList[1].name : '下钻分析'];\n      let layoutMainDom = document.querySelector('#a-layout-main');\n      let prevScrollPos = layoutMainDom.pageYOffset || layoutMainDom.scrollTop;\n      layoutMainDom.addEventListener('scroll', e => {\n        let currentScrollPos = layoutMainDom.pageYOffset || layoutMainDom.scrollTop;\n        if (currentScrollPos > prevScrollPos) {\n          $bus.emit('handleScroll', {\n            scrollTop: e.target.scrollTop,\n            direction: 'down'\n          });\n        } else {\n          $bus.emit('handleScroll', {\n            scrollTop: e.target.scrollTop,\n            direction: 'up'\n          });\n        }\n        prevScrollPos = currentScrollPos;\n      });\n    });\n    const __returned__ = {\n      get isDev() {\n        return isDev;\n      },\n      set isDev(v) {\n        isDev = v;\n      },\n      router,\n      currentRoute,\n      get year() {\n        return year;\n      },\n      set year(v) {\n        year = v;\n      },\n      get month() {\n        return month;\n      },\n      set month(v) {\n        month = v;\n      },\n      get day() {\n        return day;\n      },\n      set day(v) {\n        day = v;\n      },\n      get currentDate() {\n        return currentDate;\n      },\n      set currentDate(v) {\n        currentDate = v;\n      },\n      dateNow,\n      selectedKeys,\n      innerWidth,\n      get breadListStore() {\n        return breadListStore;\n      },\n      set breadListStore(v) {\n        breadListStore = v;\n      },\n      breadList,\n      get menuStore() {\n        return menuStore;\n      },\n      set menuStore(v) {\n        menuStore = v;\n      },\n      collapsed,\n      menuShowActive,\n      newPwdReg,\n      minLength,\n      complexityStatus,\n      regList,\n      ruleArry,\n      regTip,\n      handleSubMenu,\n      handleMenuItem,\n      onCollapse,\n      get $bus() {\n        return $bus;\n      },\n      set $bus(v) {\n        $bus = v;\n      },\n      goBackDisabled,\n      userStore,\n      userInfoContent,\n      calenderVisible,\n      getInfo,\n      formRef,\n      confirmLoading,\n      restPwdModalVisible,\n      restModalForm,\n      restPwdModal,\n      getUserDetail,\n      validateToNextPassword,\n      compareToFirstPassword,\n      handleRestPwdModalCancel,\n      handleRestPwdModalOK,\n      logoutModalVisible,\n      handleLogoutOk,\n      handleCalender,\n      handleCloseCalender,\n      showStructureArr,\n      goPage,\n      reactive,\n      ref,\n      onMounted,\n      onUnmounted,\n      onBeforeMount,\n      shallowRef,\n      nextTick,\n      toRaw,\n      get Message() {\n        return Message;\n      },\n      calenderTable,\n      get useMenuStore() {\n        return useMenuStore;\n      },\n      get useBreadListStore() {\n        return useBreadListStore;\n      },\n      get useUserInfoStore() {\n        return useUserInfoStore;\n      },\n      get storeToRefs() {\n        return storeToRefs;\n      },\n      get menuSideBar() {\n        return menuSideBar;\n      },\n      get getDetailList() {\n        return getDetailList;\n      },\n      get __canvasWM() {\n        return __canvasWM;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get useRoute() {\n        return useRoute;\n      },\n      get getCurrentInstance() {\n        return getCurrentInstance;\n      },\n      get getCurrentTime() {\n        return getCurrentTime;\n      },\n      get clearAllCookies() {\n        return clearAllCookies;\n      },\n      get goLogin() {\n        return goLogin;\n      },\n      get password() {\n        return password;\n      },\n      get LOGIN_PATH() {\n        return LOGIN_PATH;\n      },\n      get isTest() {\n        return isTest;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"mappings":"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","names":["reactive","ref","onMounted","onUnmounted","onBeforeMount","shallowRef","nextTick","toRaw","Message","calenderTable","useMenuStore","useBreadListStore","useUserInfoStore","storeToRefs","menuSideBar","getDetailList","__canvasWM","useRouter","useRoute","getCurrentInstance","getCurrentTime","clearAllCookies","goLogin","password","LOGIN_PATH","isTest","isDev","split","startsWith","router","currentRoute","year","month","day","currentDate","dateNow","selectedKeys","innerWidth","window","breadListStore","breadList","console","log","menuStore","collapsed","menuShowActive","newPwdReg","minLength","complexityStatus","regList","ruleArry","regTip","handleSubMenu","item","menuArr","push","name","url","handleMenuItem","jtem","onCollapse","val","type","value","$bus","appContext","config","globalProperties","on","then","res","code","$patch","state","menuList","data","permissions","catch","err","error","message","off","goBackDisabled","bool","userStore","userInfoContent","info","calenderVisible","getInfo","userInfo","getUserInfo","content","userName","nickName","workNo","formRef","confirmLoading","restPwdModalVisible","restModalForm","sourcePassword","newPassword","confirmPassword","restPwdModal","getUserDetail","String","complexityMinLength","id","reg","complexityRule","map","Number","includes","validateToNextPassword","callback","length","RegExp","test","compareToFirstPassword","handleRestPwdModalCancel","resetFields","handleRestPwdModalOK","validate","formData","FormData","append","success","Logout","setTimeout","finally","logoutModalVisible","handleLogoutOk","handleCalender","handleCloseCalender","showStructureArr","Array","isArray","goPage","params","isBack","go","emit","layoutMainDom","document","querySelector","prevScrollPos","pageYOffset","scrollTop","addEventListener","e","currentScrollPos","target","direction"],"sources":["/Users/lijiaxin/Documents/workspace/hydsoft-oms-frontend/src/views/HomeView.vue"],"sourcesContent":["<template>\n  <a-layout class=\"layout-demo\">\n    <a-layout-sider breakpoint=\"lg\" :width=\"innerWidth>1800?240:180\" :collapsed=\"collapsed\" class=\"menu-container\" @collapse=\"onCollapse\">\n      <!-- logo部分 -->\n      <div class=\"logo\">\n        <span v-if=\"!collapsed\">经营管理系统</span>\n        <span v-else>\n          <img src=\"../../public/huibo.png\" width=\"24\" />\n        </span>\n      </div>\n      <!-- 菜单  -->\n      <a-menu\n        :default-open-keys=\"[(breadListStore.breadList.length > 0 && breadListStore.breadList[0].name)?breadListStore.breadList[0].name:'业务体验']\"\n        v-model:selected-keys=\"selectedKeys\"\n        show-collapse-button\n        :class=\"['aside-menu-content', { 'aside-menu': !collapsed }]\"\n        auto-open\n        @collapse=\"onCollapse\"\n      >\n        <!-- <a-sub-menu v-for=\"item of menuStore.getMenuList\" :key=\"item.name\">\n          <template #title>\n            <span>\n              <component :is=\"item.icon\"></component>\n              {{ item.name }}\n            </span>\n          </template>\n          <a-menu-item v-for=\"jtem of item.children\" :key=\"jtem.name\" @click=\"handleMenuItem(item, jtem)\">\n            {{ jtem.name }}\n          </a-menu-item>\n        </a-sub-menu> -->\n        <template v-for=\"item in menuStore.menuList\" :key=\"item.name\">\n          <a-menu-item v-if=\"!item.children && item.icon\" @click.stop=\"handleSubMenu(item)\">\n            <template #icon>\n              <component v-if=\"item.icon\" :is=\"item.icon\"></component>\n            </template>\n            {{ item.name }}\n          </a-menu-item>\n          <template v-if=\"item.children\">\n            <a-sub-menu :key=\"item.name\">\n              <template #title>\n                <component v-if=\"item.icon\" :is=\"item.icon\"></component>\n                {{ item.name }}\n              </template>\n              <a-menu-item v-for=\"jtem of item.children\" :key=\"jtem.name\" @click.stop=\"handleMenuItem(item, jtem)\">\n                {{ jtem.name }}\n              </a-menu-item>\n            </a-sub-menu>\n          </template>\n        </template>\n      </a-menu>\n    </a-layout-sider>\n    <a-layout class=\"content\">\n      <a-layout-header class=\"menu-horizontal flex-between-noCenter\" style=\"padding: 0 24px\">\n        <div>\n          <div\n            v-if=\"\n              [\n                'drill',\n                'empStatistics',\n                'ringContrastChart',\n                'lookChart',\n                'customerRingSame',\n                'projectRingSame',\n                'staticPicture',\n                'staticDetail',\n              ].includes(currentRoute.name)\n            \"\n            style=\"padding-left: 20px; font-size: 14px; min-height: 30px; color: #333; font-weight: 500\"\n          >\n            <template v-for=\"(item, index) of showStructureArr\" :key=\"index\">\n              <span v-if=\"item.type === 'text'\" :style=\"{ color: item.color, lineHeight: '32px' }\">\n                {{ item.msg }}\n              </span>\n              <a-button\n                type=\"text\"\n                v-else-if=\"item.type === 'button'\"\n                @click=\"goPage(item.params, item.isBack)\"\n                :disabled=\"goBackDisabled\"\n              >\n                {{ item.msg }}\n              </a-button>\n              <span v-if=\"index < showStructureArr.length - 1\" class=\"m-l-4 m-r-4\">/</span>\n            </template>\n          </div>\n          <!-- 面包屑  -->\n          <div v-else>\n            <a-breadcrumb :style=\"{ margin: '16px 0' }\">\n              <a-breadcrumb-item v-for=\"item of breadList\" :key=\"item.name\">{{ item.name }}</a-breadcrumb-item>\n            </a-breadcrumb>\n          </div>\n        </div>\n        <div>\n          <!-- 日历 -->\n          <a-space class=\"m-r-24\">\n            <a-button shape=\"round\" @click=\"handleCalender\">\n              <template #icon>\n                <span class=\"blue\"><icon-calendar size=\"medium\" /></span>\n              </template>\n              {{ dateNow }}\n            </a-button>\n          </a-space>\n          <!-- 退出登录部门 -->\n          <a-space class=\"userContent\">\n            <img src=\"huibo.png\" width=\"20\" />\n            <a-dropdown trigger=\"hover\">\n              <span class=\"pointer\">\n                {{ userInfoContent.info.name || userInfoContent.info.userName || userInfoContent.info.nickName }}\n              </span>\n              <template #content>\n                <a-doption v-if=\"isTest\" @click=\"restPwdModal\">修改密码</a-doption>\n                <a-doption @click=\"logoutModalVisible = true\">退出登录</a-doption>\n              </template>\n            </a-dropdown>\n          </a-space>\n        </div>\n      </a-layout-header>\n      <a-layout id='a-layout-main' class=\"main\" style=\"padding: 10px 10px 0 10px;margin:10px;\">\n        <a-layout-content>\n          <router-view />\n        </a-layout-content>\n        <!-- 内容区底部  -->\n        <!-- <a-layout-footer>Footer</a-layout-footer> -->\n      </a-layout>\n    </a-layout>\n  </a-layout>\n  <div class=\"dropDownContainer\"></div>\n  <a-modal\n    v-model:visible=\"logoutModalVisible\"\n    width=\"400px\"\n    @ok=\"handleLogoutOk\"\n    @cancel=\"logoutModalVisible = false\"\n    okText=\"确定\"\n    cancelText=\"取消\"\n    unmountOnClose\n  >\n    <template #title>退出登录</template>\n    <div>确定退出登录吗？</div>\n  </a-modal>\n  <a-modal :ok-loading=\"confirmLoading\" v-model:visible=\"restPwdModalVisible\" title=\"修改密码\">\n    <a-form\n      :model=\"restModalForm\"\n      :labelCol=\"{ xs: { span: 24 }, sm: { span: 5 } }\"\n      :wrapperCol=\"{ xs: { span: 24 }, sm: { span: 16 } }\"\n      ref=\"formRef\"\n    >\n      <a-form-item label=\"旧密码\" field=\"sourcePassword\" :rules=\"[{ required: true, message: '请填写旧密码' }]\" :feedback=\"true\">\n        <a-input-password placeholder=\"请输入旧密码\" v-model=\"restModalForm.sourcePassword\" />\n      </a-form-item>\n      <a-form-item\n        label=\"新密码\"\n        field=\"newPassword\"\n        :rules=\"[{ required: true, message: '请填写新密码' }, { validator: validateToNextPassword }]\"\n        :feedback=\"true\"\n        :validate-trigger=\"['change', 'input', 'blur']\"\n      >\n        <a-input-password placeholder=\"请输入新密码\" v-model=\"restModalForm.newPassword\" />\n      </a-form-item>\n      <a-form-item\n        label=\"确认新密码\"\n        field=\"confirmPassword\"\n        :rules=\"[{ required: true, message: '请再次输入新密码' }, { validator: compareToFirstPassword }]\"\n        :feedback=\"true\"\n        :validate-trigger=\"['change', 'input', 'blur']\"\n      >\n        <a-input-password placeholder=\"请再次输入新密码\" v-model=\"restModalForm.confirmPassword\" />\n      </a-form-item>\n    </a-form>\n    <template #footer>\n      <a-button @click=\"handleRestPwdModalCancel\">取消</a-button>\n      <a-button type=\"primary\" @click=\"handleRestPwdModalOK\">确定</a-button>\n    </template>\n  </a-modal>\n  <a-modal\n    v-model:visible=\"calenderVisible\"\n    width=\"1044px\"\n    :footer=\"false\"\n    :simple=\"true\"\n    :modalStyle=\"{ padding: '0 24px 10px' }\"\n  >\n    <template #title>\n      <span class=\"close\" @click=\"handleCloseCalender\">\n        <icon-close />\n      </span>\n    </template>\n    <calenderTable />\n  </a-modal>\n</template>\n<script setup>\nimport { reactive, ref, onMounted, onUnmounted, onBeforeMount, shallowRef, nextTick, toRaw } from \"vue\";\nimport { Message } from \"@arco-design/web-vue\";\nimport calenderTable from \"@/components/calenderTable.vue\";\nimport { useMenuStore, useBreadListStore, useUserInfoStore } from \"../store/index\";\nimport { storeToRefs } from \"pinia\";\nimport { menuSideBar,getDetailList } from \"../api/menu\";\nimport { __canvasWM } from \"../utils/watermark\";\nimport { useRouter, useRoute } from \"vue-router\";\nimport { getCurrentInstance } from \"@vue/runtime-core\";\nimport { getCurrentTime,clearAllCookies } from \"@/utils/util.js\";\nimport { goLogin } from \"@/utils/getToken\";\nimport { password } from \"@/api/login\";\nimport { LOGIN_PATH,isTest } from '@/store/mutation-types.js'\nlet isDev = !LOGIN_PATH.split('//')[1].startsWith('test')\nconst router = useRouter();\n// const route = useRoute();\nconst currentRoute = router.currentRoute;\nlet { year, month, day } = getCurrentTime();\nlet currentDate = `${year}/${month}/${day}`;\nconst dateNow = ref(currentDate);\nconst selectedKeys = ref([]);\nconst innerWidth = window.innerWidth\n\n/*-------------- 面包屑导航-start------------------- */\nlet breadListStore = useBreadListStore();\nconst { breadList } = storeToRefs(breadListStore);\nconsole.log(breadListStore.breadList,router,'breadListStore.breadList');\n/*-----------侧边栏菜单-start-------------------- */\nlet menuStore = useMenuStore();\nconst collapsed = ref(false);\n//页面刷新后,根据当前页面path从菜单中找出对应的菜单key高亮显示，并更改导航路径\nconst menuShowActive = ref(true)\nconst newPwdReg = ref('/^[0-9a-zA-Z!@#$%^&*()\\-_=+\\[\\]{};:\\'\",<.>\\/?~]{8,}$/')\nconst minLength = ref('')\nconst complexityStatus = ref()\nconst regList =ref([])\nconst ruleArry=ref([])\nconst regTip = ref('')\n// function updateMenuActive(){\n//   const currentPagePath = route.path;\n//   menuShowActive.value = false\n//   function getCurrentMenu(arr, url) {\n//     let obj = {};\n//     arr.forEach(item => {\n//       if (item.children.length) {\n//         item.children.forEach(jtem => {\n//           if (jtem.url === url) {\n//             obj = {\n//               defaultOpenMenu: item,\n//               defaultSelectedMenu: jtem,\n//             };\n//           }\n//         });\n//       }\n//     });\n//       return obj;\n//   }\n//   let { defaultOpenMenu, defaultSelectedMenu } = getCurrentMenu(toRaw(menuStore.menuList), currentPagePath);\n//   if (defaultOpenMenu && defaultSelectedMenu) {\n//     // defaultOpenkeys.value = [defaultOpenMenu.id];\n//     // defaultSelectedKeys.value = [defaultSelectedMenu.id];\n//     breadListStore.breadList = [{ name: defaultOpenMenu.name }, { name: defaultSelectedMenu.name }];\n//     nextTick(()=>{\n//       menuShowActive.value = true\n//     })\n//   }else{\n//     menuShowActive.value = true\n//   }\n// }\n// updateMenuActive()\n//点击浏览器前进后退时更新菜单激活状态\n// window.addEventListener(\"popstate\", function (e){\n//   updateMenuActive()\n// } )\n// 点击一级菜单\nconst handleSubMenu = item => {\n  let menuArr = [];\n  menuArr.push({ name: item.name });\n  breadListStore.breadList = menuArr;\n  router.push(item.url);\n};\nconst handleMenuItem = (item, jtem) => {\n  let menuArr = [];\n  menuArr.push({ name: item.name });\n  menuArr.push({ name: jtem.name });\n  breadListStore.breadList = menuArr;\n  router.push(jtem.url);\n};\nconst onCollapse = (val, type) => {\n  collapsed.value = val;\n};\n\n/*---------------菜单切换事件总线通信-start---------------- */\nlet $bus = getCurrentInstance().appContext.config.globalProperties.$bus;\n$bus.on(\"updateMenu\", () => {\n  menuSideBar()\n    .then(res => {\n      if (res.code === \"000000000000\") {\n        menuStore.$patch(state => {\n          state.menuList = res.data.menuList;\n          state.permissions = res.data.permissions;\n        });\n      }\n    })\n    .catch(err => {\n      Message.error(err.message || \"菜单更新失败\");\n    });\n});\nonUnmounted(() => {\n  $bus.off(\"updateMenu\");\n});\n\n/************* 返回禁用状态-start********************* */\nconst goBackDisabled = ref(false);\n$bus.on(\"goBackDisabled\", bool => {\n  goBackDisabled.value = bool;\n});\n/*--------------获取登录用户信息-start-------------------- */\nconst userStore = useUserInfoStore();\nconst userInfoContent = reactive({\n  info: {},\n});\nconst calenderVisible = ref(false);\nconst getInfo = async () => {\n  let userInfo = userStore.getUserInfo;\n  userInfoContent.info = userInfo;\n  __canvasWM({\n    content: `${userInfo.name || userInfo.userName || userInfo.nickName} ${userInfo.workNo}`,\n  });\n};\nonBeforeMount(() => {\n  getInfo();\n});\n/**----------- 修改密码modal-start ------------- */\nconst formRef = ref(null);\nconst confirmLoading = ref(false);\nconst restPwdModalVisible = ref(false);\nconst restModalForm = reactive({\n  sourcePassword: \"\",\n  newPassword: \"\",\n  confirmPassword: \"\",\n});\nconst restPwdModal = ()=>{\n  restPwdModalVisible.value= true\n  getUserDetail()\n}\n// 获取详情\nconst getUserDetail = () => {\n  getDetailList()\n    .then(res => {\n      if (res.code === \"000000000000\") {\n        minLength.value = String(res.data.complexityMinLength);\n        complexityStatus.value = res.data.complexityStatus;\n        regList.value = [\n          {\n            id:0,\n            reg:`^(?=.*[A-Z]){${minLength.value},}.+$`,\n            regTip:`请输入包含大写字母的密码`\n          }, \n          {\n            id:1,\n            reg:`^(?=.*[a-z]){${minLength.value},}.+$`,\n            regTip:`请输入包含小写字母的密码`\n          },\n          {\n            id:2,\n            reg:`^(?=.*[0-9]){${minLength.value},}.+$`,\n            regTip:`请输入包含数字的密码`\n          },\n          {\n            id:3,\n            reg:`^(?=.*[A-Z])(?=.*[a-z]){${minLength.value},}.+$`,\n            regTip:`请输入包含字母的密码`\n          },\n           {\n            id:4,\n            reg:`^(?=.*[A-Z])(?=.*[0-9]){${minLength.value},}.+$`,\n            regTip:`请输入包含大写字母和数字的密码`\n          },\n          {\n            id:5,\n            reg:`^(?=.*[a-z])(?=.*[0-9]){${minLength.value},}.+$`,\n            regTip:`请输入包含小写字母和数字的密码`\n          },\n          {\n            id:6,\n            reg:`^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9]){${minLength.value},}.+$`,\n            regTip:`请输入包含字母和数字的密码`\n          },\n        ]\n        ruleArry.value = res.data.complexityRule.split(',').map(Number);\n        if(complexityStatus.value){\n          if(!ruleArry.value.includes(4)){\n              if(ruleArry.value.includes(1) && ruleArry.value.includes(2) && !ruleArry.value.includes(3)){\n                newPwdReg.value = regList.value[3].reg;\n                regTip.value = regList.value[3].regTip\n              }else\n              if(ruleArry.value.includes(1) && ruleArry.value.includes(3)&& !ruleArry.value.includes(2)){\n                newPwdReg.value = regList.value[4].reg;\n                regTip.value = regList.value[4].regTip\n              }else\n              if(ruleArry.value.includes(2) && ruleArry.value.includes(3) && !ruleArry.value.includes(1)){\n                newPwdReg.value = regList.value[5].reg;\n                regTip.value = regList.value[5].regTip\n              }else\n              if(ruleArry.value.includes(1) && ruleArry.value.includes(2)&& ruleArry.value.includes(3)){\n                newPwdReg.value = regList.value[6].reg;\n                regTip.value = regList.value[6].regTip\n              }else\n              if(ruleArry.value.includes(1)&& !ruleArry.value.includes(2)&& !ruleArry.value.includes(3)){\n                newPwdReg.value =regList.value[0].reg;\n                regTip.value = regList.value[0].regTip\n              }else\n              if(ruleArry.value.includes(2) && !ruleArry.value.includes(1) && !ruleArry.value.includes(3)){\n                newPwdReg.value = regList.value[1].reg;\n                  regTip.value = regList.value[1].regTip\n              }else\n              if(ruleArry.value.includes(3) && !ruleArry.value.includes(1) && !ruleArry.value.includes(2)){\n                newPwdReg.value = regList.value[2].reg;\n                regTip.value = regList.value[2].regTip\n              }\n          }\n        }\n      }\n    })\n    .catch(err => {\n      Message.error(err || \"获取密码策略失败\");\n    });\n};\n// 校验密码\nconst validateToNextPassword = (value, callback) => {\n  if(complexityStatus.value){\n      if(restModalForm.newPassword.length < Number(minLength.value)){\n        callback(`请输入长度大于或等于${minLength.value}位的密码`);\n      }\n      if(ruleArry.value.includes(4) && ruleArry.value.includes(1)&& ruleArry.value.includes(2) && ruleArry.value.includes(3)){\n          // let reg = new RegExp(/^[A-Za-z0-9!@#$%^&*()\\-_=+\\[\\]{};:\\'\",<.>\\/?~]+$/)\n          let reg = new RegExp(/^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*[!@#$%^&*()\\-_=+\\[\\]{}\\\\|;:'\",<.>/\\?~]).+$/)\n          if (reg.test(value)) {\n              callback();\n              return;\n          }\n          // callback(`请输入由字母、数字或特殊字符组成的密码`);\n          callback(`请输入包含字母、数字和特殊字符的密码`);\n      }\n      if(ruleArry.value.includes(4) && ruleArry.value.includes(1) && !ruleArry.value.includes(3) && !ruleArry.value.includes(2)){\n          // let reg = new RegExp(/^[A-Z!@#$%^&*()\\-_=+\\[\\]{};:\\'\",<.>\\/?~]+$/)\n          let reg = new RegExp(/^(?=.*[A-Z])(?=.*[!@#$%^&*()\\-_=+\\[\\]{}\\\\|;:'\",<.>/\\?~]).+$/)\n          if (reg.test(value)) {\n              callback();\n              return;\n          }\n          // callback(`请输入由大写字母或特殊字符组成的密码`);\n          callback(`请输入包含大写字母和特殊字符的密码`);\n      }\n      if(ruleArry.value.includes(4) && ruleArry.value.includes(2) && !ruleArry.value.includes(3) && !ruleArry.value.includes(1)){\n          // let reg = new RegExp(/^[a-z!@#$%^&*()\\-_=+\\[\\]{};:\\'\",<.>\\/?~]+$/)\n          let reg = new RegExp(/^(?=.*[a-z])(?=.*[!@#$%^&*()\\-_=+\\[\\]{}\\\\|;:'\",<.>/\\?~]).+$/)\n          if (reg.test(value)) {\n              callback();\n              return;\n          }\n          // callback(`请输入由小写字母或特殊字符组成的密码`);\n          callback(`请输入包含小写字母和特殊字符的密码`);\n      }\n      if(ruleArry.value.includes(4) && ruleArry.value.includes(3) && !ruleArry.value.includes(1) && !ruleArry.value.includes(2)){\n          // let reg = new RegExp(/^[0-9!@#$%^&*()\\-_=+\\[\\]{};:\\'\",<.>\\/?~]+$/)\n          let reg = new RegExp(/^(?=.*[0-9])(?=.*[!@#$%^&*()\\-_=+\\[\\]{}\\\\|;:'\",<.>/\\?~]).+$/)\n          if (reg.test(value)) {\n              callback();\n              return;\n          }\n          // callback(`请输入由数字或特殊字符组成的密码`);\n          callback(`请输入包含数字和特殊字符的密码`);\n      }\n      if(ruleArry.value.includes(4) && ruleArry.value.includes(1)&& ruleArry.value.includes(2) && !ruleArry.value.includes(3)){\n          // let reg = new RegExp(/^[A-Za-z!@#$%^&*()\\-_=+\\[\\]{};:\\'\",<.>\\/?~]+$/)\n          let reg = new RegExp(/^(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&*()\\-_=+\\[\\]{}\\\\|;:'\",<.>/\\?~]).+$/)\n          if (reg.test(value)) {\n              callback();\n              return;\n          }\n          // callback(`请输入由字母或特殊字符组成的密码`);\n          callback(`请输入包含字母和特殊字符的密码`);\n      }\n      if(ruleArry.value.includes(4) && ruleArry.value.includes(1)&&  ruleArry.value.includes(3) && !ruleArry.value.includes(2)){\n          // let reg = new RegExp(/^[A-Z0-9!@#$%^&*()\\-_=+\\[\\]{};:\\'\",<.>\\/?~]+$/)\n          let reg = new RegExp(/^(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*()\\-_=+\\[\\]{}\\\\|;:'\",<.>/\\?~]).+$/)\n          if (reg.test(value)) {\n              callback();\n              return;\n          }\n          // callback(`请输入由大写字母、数字或特殊字符组成的密码`);\n          callback(`请输入包含大写字母、数字和特殊字符的密码`);\n      }\n      if(ruleArry.value.includes(4) && ruleArry.value.includes(2)&&  ruleArry.value.includes(3) && !ruleArry.value.includes(1)){\n          // let reg = new RegExp(/^[a-z0-9!@#$%^&*()\\-_=+\\[\\]{};:\\'\",<.>\\/?~]+$/)\n          let reg = new RegExp(/^(?=.*[a-z])(?=.*[0-9])(?=.*[!@#$%^&*()\\-_=+\\[\\]{}\\\\|;:'\",<.>/\\?~]).+$/)\n          if (reg.test(value)) {\n              callback();\n              return;\n          }\n          // callback(`请输入由小写字母、数字或特殊字符组成的密码`);\n          callback(`请输入包含小写字母、数字和特殊字符的密码`);\n      }   \n      if(ruleArry.value.includes(4) && !ruleArry.value.includes(3) && !ruleArry.value.includes(2) && !ruleArry.value.includes(1)){\n          // let reg = new RegExp(/^[!@#$%^&*()\\-_=+\\[\\]{};:\\'\",<.>\\/?~]+$/)\n          let reg = new RegExp(/^(?=.*[!@#$%^&*()\\-_=+\\[\\]{}\\\\|;:'\",<.>/\\?~]).+$/)\n          if (reg.test(value)) {\n              callback();\n              return;\n          }\n          // callback(`请输入由特殊字符组成的密码`);\n          callback(`请输入包含特殊字符的密码`);\n      }   \n      let reg = new RegExp(newPwdReg.value)\n          if (reg.test(value)) {\n              callback();\n              return;\n          }\n          callback(regTip.value);\n  }else{\n    callback();\n    return;\n  }\n};\nconst compareToFirstPassword = (value, callback) => {\n  if (value && value !== restModalForm.newPassword) {\n    callback(\"两次输入的密码不一致 (｡•́︿•̀｡)\");\n    return;\n  }\n  callback();\n};\nconst handleRestPwdModalCancel = () => {\n  restPwdModalVisible.value = false;\n  confirmLoading.value = false;\n  formRef.value.resetFields();\n};\nconst handleRestPwdModalOK = () => {\n  confirmLoading.value = true;\n  formRef.value.validate(err => {\n    if (!err) {\n      const formData = new FormData();\n      formData.append(\"oldPwd\", restModalForm.sourcePassword);\n      formData.append(\"newPwd\", restModalForm.newPassword);\n      password(formData)\n        .then(res => {\n          if (res.code === \"000000000000\") {\n            Message.success(res.message);\n            restPwdModalVisible.value = false;\n            userStore\n              .Logout()\n              .then(res => {\n                Message.success(res.message);\n                clearAllCookies()\n                setTimeout(() => {\n                  goLogin();\n                }, 600);\n              })\n              .catch(err => {\n                Message.error(err || \"退出失败\");\n              });\n          } else {\n            Message.error(res.message);\n          }\n        })\n        .finally(() => {\n          confirmLoading.value = false;\n        });\n    }\n  });\n};\n/*------- 退出登录modal-start -----------*/\nconst logoutModalVisible = ref(false);\nconst handleLogoutOk = () => {\n  userStore\n    .Logout()\n    .then(res => {\n      Message.success(res.message);\n      clearAllCookies()\n      setTimeout(() => {\n        goLogin();\n      }, 600);\n    })\n    .catch(err => {\n      Message.error(err || \"退出失败\");\n    });\n};\n// 点击日历\nconst handleCalender = () => {\n  calenderVisible.value = true;\n};\n// 关闭日历\nconst handleCloseCalender = () => {\n  calenderVisible.value = false;\n};\n/*---------- 左上角显示结构---------------*/\nconst showStructureArr = ref([]);\n$bus.on(\"updateStructure\", val => {\n  showStructureArr.value = (Array.isArray(val) && val) || [];\n});\nonUnmounted(() => {\n  $bus.off(\"updateStructure\");\n});\nconst goPage = (params, isBack = false) => {\n  if (isBack) {\n    router.go(-1);\n    return;\n  }\n  $bus.emit(\"goBack\", params);\n};\n\n/**滚动条滚动事件 */\nonMounted(()=>{\n  selectedKeys.value = [(breadListStore.breadList.length > 0 && breadListStore.breadList[1].name)?breadListStore.breadList[1].name:'下钻分析'];\n  let layoutMainDom = document.querySelector('#a-layout-main')\n  let prevScrollPos = layoutMainDom.pageYOffset || layoutMainDom.scrollTop\n  layoutMainDom.addEventListener('scroll',e=>{\n    let currentScrollPos = layoutMainDom.pageYOffset || layoutMainDom.scrollTop\n    if (currentScrollPos > prevScrollPos){\n      $bus.emit('handleScroll', {\n        scrollTop : e.target.scrollTop,\n        direction : 'down'\n      })\n    } else {\n      $bus.emit('handleScroll', {\n        scrollTop : e.target.scrollTop,\n        direction : 'up'\n      })\n    }\n    prevScrollPos = currentScrollPos;\n    \n  })\n})\n</script>\n<style lang=\"scss\" scoped>\n.close {\n  font-size: 26px;\n  position: absolute;\n  left: 95%;\n  top: 2%;\n  z-index: 9999999;\n}\n.menu-container :deep(.arco-layout-sider-children) {\n  overflow-y: auto;\n\n  &::-webkit-scrollbar {\n    width: 6px; /*高宽分别对应横竖滚动条的尺寸*/\n    height: 6px;\n  }\n  &::-webkit-scrollbar-thumb {\n    border-radius: 6px;\n    background: rgba(144, 147, 153, 0.5);\n  }\n  &::-webkit-scrollbar-track {\n    border-radius: 5px;\n    background: transparent;\n  }\n}\n.layout-demo {\n  height: 100vh;\n  background: var(--color-fill-2);\n  border: 1px solid var(--color-border);\n}\n.layout-demo .content {\n  overflow: visible;\n  width: calc(100vw - 240px);\n}\n.layout-demo :deep(.arco-layout-sider) {\n  &::-webkit-scrollbar {\n    width: 6px; /*高宽分别对应横竖滚动条的尺寸*/\n    height: 6px;\n  }\n  &::-webkit-scrollbar-thumb {\n    border-radius: 6px;\n    background: rgba(144, 147, 153, 0.5);\n  }\n  &::-webkit-scrollbar-track {\n    border-radius: 5px;\n    background: transparent;\n  }\n}\n.layout-demo :deep(.arco-layout-sider) .logo {\n  height: 64px;\n  text-align: center;\n  line-height: 64px;\n  font-weight: bold;\n  font-size: 20px;\n  box-sizing: border-box;\n  border-bottom: 1px solid #f2f2f2;\n}\n// .layout-demo :deep(.arco-layout-sider-light) .logo{\n//   background: var(--color-fill-2);\n// }\n.layout-demo .menu-horizontal :deep(.arco-menu-light) {\n  background-color: transparent;\n}\n.layout-demo :deep(.arco-layout-header) {\n  height: 64px;\n  line-height: 64px;\n  background: var(--color-bg-3);\n  //background-color: var(--color-fill-2);\n}\n.layout-demo :deep(.arco-layout-footer) {\n  height: 48px;\n  color: var(--color-text-2);\n  font-weight: 400;\n  font-size: 14px;\n  line-height: 48px;\n}\n.layout-demo :deep(.arco-layout-content) {\n  color: var(--color-text-2);\n  font-weight: 400;\n  font-size: 14px;\n  background: var(--color-bg-3);\n  // padding: 30px;\n}\n.layout-demo .main {\n  //background: var(--color-bg-3);\n  background-color: var(--color-fill-2);\n  overflow-y: auto;\n}\n.layout-demo :deep(.arco-menu) {\n  min-height: calc(100vh - 78px);\n}\n.layout-demo .aside-menu :deep(.arco-menu-collapse-button) {\n  position: fixed;\n  left: 140px;\n  bottom: 14px;\n}\n.layout-demo .aside-menu-content {\n  margin-top: 13px;\n}\n.layout-demo .aside-menu-content :deep(.arco-menu-inner) {\n  padding-right: 0;\n}\n.layout-demo .aside-menu-content :deep(.arco-menu-item.arco-menu-selected) {\n  border-right: 4px solid #5370ff;\n}\n.userContent {\n  float: right;\n  color: var(--color-text-2);\n  margin-right: 20px;\n}\n.dropDownContainer {\n  position: absolute;\n}\n.dropDownContainer :deep(.arco-dropdown .arco-scrollbar) {\n  height: 390px;\n}\n.dropDownContainer :deep(.arco-dropdown .arco-scrollbar .arco-scrollbar-track) {\n  display: none;\n}\n.dropDownContainer :deep(.arco-dropdown-list-wrapper) {\n  max-height: none !important;\n  overflow-y: visible !important;\n}\n.grey {\n  color: #5a5a5a;\n}\n.bold {\n  font-weight: bold;\n}\n.gray {\n  color: #bfb4a9;\n}\n.font-14 {\n  font-size: 12px;\n}\n.mr-10 {\n  margin-right: 10px;\n}\n.close {\n  color: #dddddd;\n}\n.m-t-15 {\n  margin-top: 15px;\n}\n\n.pointer {\n  cursor: pointer;\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}