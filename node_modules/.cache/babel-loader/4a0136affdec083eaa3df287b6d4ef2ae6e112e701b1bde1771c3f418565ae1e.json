{"ast":null,"code":"/**\n * @fileoverview pattern\n * @author dengfuping_develop@163.com\n */\nimport { uniqueId } from '@antv/util';\nimport { createSVGElement } from '../util/dom';\nvar regexPR = /^p\\s*\\(\\s*([axyn])\\s*\\)\\s*(.*)/i;\nvar Pattern = /** @class */function () {\n  function Pattern(cfg) {\n    this.cfg = {};\n    var el = createSVGElement('pattern');\n    el.setAttribute('patternUnits', 'userSpaceOnUse');\n    var child = createSVGElement('image');\n    el.appendChild(child);\n    var id = uniqueId('pattern_');\n    el.id = id;\n    this.el = el;\n    this.id = id;\n    this.cfg = cfg;\n    var arr = regexPR.exec(cfg);\n    var source = arr[2];\n    child.setAttribute('href', source);\n    var img = new Image();\n    if (!source.match(/^data:/i)) {\n      img.crossOrigin = 'Anonymous';\n    }\n    img.src = source;\n    function onload() {\n      el.setAttribute('width', \"\" + img.width);\n      el.setAttribute('height', \"\" + img.height);\n    }\n    if (img.complete) {\n      onload();\n    } else {\n      img.onload = onload;\n      // Fix onload() bug in IE9\n      img.src = img.src;\n    }\n    return this;\n  }\n  Pattern.prototype.match = function (type, attr) {\n    return this.cfg === attr;\n  };\n  return Pattern;\n}();\nexport default Pattern;","map":{"version":3,"mappings":"AAAA;;;;AAKA,SAASA,QAAQ,QAAQ,YAAY;AACrC,SAASC,gBAAgB,QAAQ,aAAa;AAE9C,IAAMC,OAAO,GAAG,iCAAiC;AAEjD;EAOE,iBAAYC,GAAG;IAJf,QAAG,GAEC,EAAE;IAGJ,IAAMC,EAAE,GAAGH,gBAAgB,CAAC,SAAS,CAAsB;IAC3DG,EAAE,CAACC,YAAY,CAAC,cAAc,EAAE,gBAAgB,CAAC;IACjD,IAAMC,KAAK,GAAGL,gBAAgB,CAAC,OAAO,CAAC;IACvCG,EAAE,CAACG,WAAW,CAACD,KAAK,CAAC;IACrB,IAAME,EAAE,GAAGR,QAAQ,CAAC,UAAU,CAAC;IAC/BI,EAAE,CAACI,EAAE,GAAGA,EAAE;IACV,IAAI,CAACJ,EAAE,GAAGA,EAAE;IACZ,IAAI,CAACI,EAAE,GAAGA,EAAE;IACZ,IAAI,CAACL,GAAG,GAAGA,GAAG;IACd,IAAMM,GAAG,GAAGP,OAAO,CAACQ,IAAI,CAACP,GAAG,CAAC;IAC7B,IAAMQ,MAAM,GAAGF,GAAG,CAAC,CAAC,CAAC;IACrBH,KAAK,CAACD,YAAY,CAAC,MAAM,EAAEM,MAAM,CAAC;IAClC,IAAMC,GAAG,GAAG,IAAIC,KAAK,EAAE;IACvB,IAAI,CAACF,MAAM,CAACG,KAAK,CAAC,SAAS,CAAC,EAAE;MAC5BF,GAAG,CAACG,WAAW,GAAG,WAAW;;IAE/BH,GAAG,CAACI,GAAG,GAAGL,MAAM;IAChB,SAASM,MAAM;MACbb,EAAE,CAACC,YAAY,CAAC,OAAO,EAAE,KAAGO,GAAG,CAACM,KAAO,CAAC;MACxCd,EAAE,CAACC,YAAY,CAAC,QAAQ,EAAE,KAAGO,GAAG,CAACO,MAAQ,CAAC;IAC5C;IACA,IAAIP,GAAG,CAACQ,QAAQ,EAAE;MAChBH,MAAM,EAAE;KACT,MAAM;MACLL,GAAG,CAACK,MAAM,GAAGA,MAAM;MACnB;MACAL,GAAG,CAACI,GAAG,GAAGJ,GAAG,CAACI,GAAG;;IAGnB,OAAO,IAAI;EACb;EAEAK,uBAAK,GAAL,UAAMC,IAAI,EAAEC,IAAI;IACd,OAAO,IAAI,CAACpB,GAAG,KAAKoB,IAAI;EAC1B,CAAC;EACH,cAAC;AAAD,CAAC,EA3CD;AA6CA,eAAeF,OAAO","names":["uniqueId","createSVGElement","regexPR","cfg","el","setAttribute","child","appendChild","id","arr","exec","source","img","Image","match","crossOrigin","src","onload","width","height","complete","Pattern","type","attr"],"sourceRoot":"","sources":["../../src/defs/pattern.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module","externalDependencies":[]}