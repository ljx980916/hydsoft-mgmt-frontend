{"ast":null,"code":"import { reactive, ref } from \"vue\";\nimport canvasVue from \"../../components/canvasContainer.vue\";\nimport { getLineChart } from \"@/api/tableCanvas.js\";\nexport default {\n  __name: 'tableCanvas',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const height = ref(20);\n    const width = ref(50);\n    // 表格数据\n    const tableInfo = reactive({\n      columns: [{\n        title: \"key\",\n        dataIndex: \"key\"\n      }, {\n        title: \"canvasLine1\",\n        dataIndex: \"canvasLine1\",\n        render: ({\n          record\n        }) => {\n          return '<canvasVue route={record.canvasLine1} height={height.value} width={width.value} />';\n        }\n      }, {\n        title: \"canvasLine2\",\n        dataIndex: \"canvasLine2\",\n        render: ({\n          record\n        }) => {\n          return '<canvasVue route={record.canvasLine2} height={height.value} width={width.value} />';\n        }\n      }, {\n        title: \"canvasLine3\",\n        dataIndex: \"canvasLine3\",\n        render: ({\n          record\n        }) => {\n          return '<canvasVue route={record.canvasLine3} height={height.value} width={width.value} />';\n        }\n      }],\n      data: [],\n      loading: false\n    });\n    // 获取数据\n    const getList = params => {\n      tableInfo.loading = true;\n      const formData = new FormData();\n      formData.append(\"xAxis\", params.x);\n      formData.append(\"yAxis\", params.y);\n      getLineChart(formData).then(res => {\n        if (res.code === \"200\") {\n          res.data.forEach((item, index) => {\n            item.key = index;\n          });\n          tableInfo.data = res.data;\n        }\n      }).finally(() => {\n        tableInfo.loading = false;\n      });\n    };\n    getList({\n      x: width.value,\n      y: height.value\n    });\n    // 开始绘制\n    const handleDraw = () => {\n      getList({\n        x: width.value,\n        y: height.value\n      });\n    };\n    const __returned__ = {\n      height,\n      width,\n      tableInfo,\n      getList,\n      handleDraw,\n      reactive,\n      ref,\n      canvasVue,\n      get getLineChart() {\n        return getLineChart;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["reactive","ref","canvasVue","getLineChart","height","width","tableInfo","columns","title","dataIndex","render","record","data","loading","getList","params","formData","FormData","append","x","y","then","res","code","forEach","item","index","key","finally","value","handleDraw"],"sources":["/Users/lijiaxin/Documents/workspace/hydsoft-oms-frontend/src/views/demo/tableCanvas.vue"],"sourcesContent":["<template>\n  <div class=\"defaultPadding\">\n    <a-space>\n      <span>x轴(长/px)：</span>\n      <a-input-number v-model=\"width\" placeholder=\"请输入画布长\" :min=\"1\" class=\"w-200\" />\n      <span>Y轴(高/px)：</span>\n      <a-input-number v-model=\"height\" placeholder=\"请输入画布高\" :min=\"1\" class=\"w-200\" />\n      <a-button class=\"m-l-16\" type=\"primary\" @click=\"handleDraw\">\n        <template #icon>\n          <icon-edit />\n        </template>\n        <template #default>开始绘制</template>\n      </a-button>\n    </a-space>\n\n    <a-table\n      class=\"m-t-20\"\n      :columns=\"tableInfo.columns\"\n      :data=\"tableInfo.data\"\n      :loading=\"tableInfo.loading\"\n      :pagination=\"false\"\n    >\n    </a-table>\n  </div>\n</template>\n\n<script setup>\nimport { reactive, ref } from \"vue\";\nimport canvasVue from \"../../components/canvasContainer.vue\";\nimport { getLineChart } from \"@/api/tableCanvas.js\";\nconst height = ref(20);\nconst width = ref(50);\n// 表格数据\nconst tableInfo = reactive({\n  columns: [\n    {\n      title: \"key\",\n      dataIndex: \"key\",\n    },\n    {\n      title: \"canvasLine1\",\n      dataIndex: \"canvasLine1\",\n      render: ({ record }) => {\n        return '<canvasVue route={record.canvasLine1} height={height.value} width={width.value} />';\n      },\n    },\n    {\n      title: \"canvasLine2\",\n      dataIndex: \"canvasLine2\",\n      render: ({ record }) => {\n        return '<canvasVue route={record.canvasLine2} height={height.value} width={width.value} />';\n      },\n    },\n    {\n      title: \"canvasLine3\",\n      dataIndex: \"canvasLine3\",\n      render: ({ record }) => {\n        return '<canvasVue route={record.canvasLine3} height={height.value} width={width.value} />';\n      },\n    },\n  ],\n  data: [],\n  loading: false,\n});\n// 获取数据\nconst getList = params => {\n  tableInfo.loading = true;\n  const formData = new FormData();\n  formData.append(\"xAxis\", params.x);\n  formData.append(\"yAxis\", params.y);\n  getLineChart(formData)\n    .then(res => {\n      if (res.code === \"200\") {\n        res.data.forEach((item, index) => {\n          item.key = index;\n        });\n        tableInfo.data = res.data;\n      }\n    })\n    .finally(() => {\n      tableInfo.loading = false;\n    });\n};\ngetList({ x: width.value, y: height.value });\n// 开始绘制\nconst handleDraw = () => {\n  getList({ x: width.value, y: height.value });\n};\n</script>\n<style scoped>\ncanvas {\n  position: relative;\n  top: 0px;\n  right: 0px;\n}\n</style>\n"],"mappings":"AA2BA,SAASA,QAAQ,EAAEC,GAAG,QAAQ,KAAK;AACnC,OAAOC,SAAS,MAAM,sCAAsC;AAC5D,SAASC,YAAY,QAAQ,sBAAsB;;;;;;;IACnD,MAAMC,MAAM,GAAGH,GAAG,CAAC,EAAE,CAAC;IACtB,MAAMI,KAAK,GAAGJ,GAAG,CAAC,EAAE,CAAC;IACrB;IACA,MAAMK,SAAS,GAAGN,QAAQ,CAAC;MACzBO,OAAO,EAAE,CACP;QACEC,KAAK,EAAE,KAAK;QACZC,SAAS,EAAE;MACb,CAAC,EACD;QACED,KAAK,EAAE,aAAa;QACpBC,SAAS,EAAE,aAAa;QACxBC,MAAM,EAAEA,CAAC;UAAEC;QAAO,CAAC,KAAK;UACtB,OAAO,oFAAoF;QAC7F;MACF,CAAC,EACD;QACEH,KAAK,EAAE,aAAa;QACpBC,SAAS,EAAE,aAAa;QACxBC,MAAM,EAAEA,CAAC;UAAEC;QAAO,CAAC,KAAK;UACtB,OAAO,oFAAoF;QAC7F;MACF,CAAC,EACD;QACEH,KAAK,EAAE,aAAa;QACpBC,SAAS,EAAE,aAAa;QACxBC,MAAM,EAAEA,CAAC;UAAEC;QAAO,CAAC,KAAK;UACtB,OAAO,oFAAoF;QAC7F;MACF,CAAC,CACF;MACDC,IAAI,EAAE,EAAE;MACRC,OAAO,EAAE;IACX,CAAC,CAAC;IACF;IACA,MAAMC,OAAO,GAAGC,MAAM,IAAI;MACxBT,SAAS,CAACO,OAAO,GAAG,IAAI;MACxB,MAAMG,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC/BD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEH,MAAM,CAACI,CAAC,CAAC;MAClCH,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEH,MAAM,CAACK,CAAC,CAAC;MAClCjB,YAAY,CAACa,QAAQ,CAAC,CACnBK,IAAI,CAACC,GAAG,IAAI;QACX,IAAIA,GAAG,CAACC,IAAI,KAAK,KAAK,EAAE;UACtBD,GAAG,CAACV,IAAI,CAACY,OAAO,CAAC,CAACC,IAAI,EAAEC,KAAK,KAAK;YAChCD,IAAI,CAACE,GAAG,GAAGD,KAAK;UAClB,CAAC,CAAC;UACFpB,SAAS,CAACM,IAAI,GAAGU,GAAG,CAACV,IAAI;QAC3B;MACF,CAAC,CAAC,CACDgB,OAAO,CAAC,MAAM;QACbtB,SAAS,CAACO,OAAO,GAAG,KAAK;MAC3B,CAAC,CAAC;IACN,CAAC;IACDC,OAAO,CAAC;MAAEK,CAAC,EAAEd,KAAK,CAACwB,KAAK;MAAET,CAAC,EAAEhB,MAAM,CAACyB;IAAM,CAAC,CAAC;IAC5C;IACA,MAAMC,UAAU,GAAGA,CAAA,KAAM;MACvBhB,OAAO,CAAC;QAAEK,CAAC,EAAEd,KAAK,CAACwB,KAAK;QAAET,CAAC,EAAEhB,MAAM,CAACyB;MAAM,CAAC,CAAC;IAC9C,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}