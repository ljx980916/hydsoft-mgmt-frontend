{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { distanceSquareRoot } from './distance-square-root';\n/**\n * Returns a {x,y} point at a given length, the total length and\n * the minimum and maximum {x,y} coordinates of a C (cubic-bezier) segment.\n */\nfunction getPointAtCubicSegmentLength(x1, y1, c1x, c1y, c2x, c2y, x2, y2, t) {\n  var t1 = 1 - t;\n  return {\n    x: Math.pow(t1, 3) * x1 + 3 * Math.pow(t1, 2) * t * c1x + 3 * t1 * Math.pow(t, 2) * c2x + Math.pow(t, 3) * x2,\n    y: Math.pow(t1, 3) * y1 + 3 * Math.pow(t1, 2) * t * c1y + 3 * t1 * Math.pow(t, 2) * c2y + Math.pow(t, 3) * y2\n  };\n}\n/**\n * Returns the length of a C (cubic-bezier) segment\n * or an {x,y} point at a given length.\n */\nexport function segmentCubicFactory(x1, y1, c1x, c1y, c2x, c2y, x2, y2, distance, options) {\n  var _a;\n  var _b = options.bbox,\n    bbox = _b === void 0 ? true : _b,\n    _c = options.length,\n    length = _c === void 0 ? true : _c,\n    _d = options.sampleSize,\n    sampleSize = _d === void 0 ? 10 : _d;\n  var distanceIsNumber = typeof distance === 'number';\n  var x = x1;\n  var y = y1;\n  var LENGTH = 0;\n  var prev = [x, y, LENGTH];\n  var cur = [x, y];\n  var t = 0;\n  var POINT = {\n    x: 0,\n    y: 0\n  };\n  var POINTS = [{\n    x: x,\n    y: y\n  }];\n  if (distanceIsNumber && distance <= 0) {\n    POINT = {\n      x: x,\n      y: y\n    };\n  }\n  // bad perf when size = 300\n  for (var j = 0; j <= sampleSize; j += 1) {\n    t = j / sampleSize;\n    _a = getPointAtCubicSegmentLength(x1, y1, c1x, c1y, c2x, c2y, x2, y2, t), x = _a.x, y = _a.y;\n    if (bbox) {\n      POINTS.push({\n        x: x,\n        y: y\n      });\n    }\n    if (length) {\n      LENGTH += distanceSquareRoot(cur, [x, y]);\n    }\n    cur = [x, y];\n    if (distanceIsNumber && LENGTH >= distance && distance > prev[2]) {\n      var dv = (LENGTH - distance) / (LENGTH - prev[2]);\n      POINT = {\n        x: cur[0] * (1 - dv) + prev[0] * dv,\n        y: cur[1] * (1 - dv) + prev[1] * dv\n      };\n    }\n    prev = [x, y, LENGTH];\n  }\n  if (distanceIsNumber && distance >= LENGTH) {\n    POINT = {\n      x: x2,\n      y: y2\n    };\n  }\n  return {\n    length: LENGTH,\n    point: POINT,\n    min: {\n      x: Math.min.apply(null, POINTS.map(function (n) {\n        return n.x;\n      })),\n      y: Math.min.apply(null, POINTS.map(function (n) {\n        return n.y;\n      }))\n    },\n    max: {\n      x: Math.max.apply(null, POINTS.map(function (n) {\n        return n.x;\n      })),\n      y: Math.max.apply(null, POINTS.map(function (n) {\n        return n.y;\n      }))\n    }\n  };\n}","map":{"version":3,"mappings":"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","names":["distanceSquareRoot","getPointAtCubicSegmentLength","x1","y1","c1x","c1y","c2x","c2y","x2","y2","t","t1","x","Math","y","segmentCubicFactory","distance","options","bbox","_c","length","_d","sampleSize","distanceIsNumber","LENGTH","prev","cur","POINT","POINTS","j","_a","push","dv","point","min","apply","map","n","max"],"sourceRoot":"src/","sources":["path/util/segment-cubic-factory.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module","externalDependencies":[]}