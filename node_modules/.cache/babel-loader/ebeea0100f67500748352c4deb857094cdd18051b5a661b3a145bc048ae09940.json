{"ast":null,"code":"import { reactive, ref, watchEffect, onBeforeMount } from 'vue';\nimport { getCurrentInstance } from \"@vue/runtime-core\";\nimport { Modal, Message } from '@arco-design/web-vue';\nimport { importStaffCompositeCost, queryImportRecord } from '@/api/staffCompositeCost';\nimport moment from 'moment';\nexport default {\n  __name: 'comprehensivePersonnelCost',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    let formData = new FormData();\n    const formRef = ref(null);\n    let $bus = getCurrentInstance().appContext.config.globalProperties.$bus;\n\n    /************** 页面路径********************* */\n    const activeTab = ref('1');\n    watchEffect(() => {\n      $bus.emit('updateStructure', [{\n        type: 'text',\n        color: '#333',\n        msg: '人员综合成本 / 文件上传'\n      }]);\n    });\n    /************** 页面路径********************* */\n\n    /****************** 文件上传数据**************************** */\n    const form = reactive({\n      month: moment(new Date()).format('YYYY-MM'),\n      upload: []\n    });\n    /****************** 文件上传数据**************************** */\n\n    const dataContent = reactive({\n      columns: [{\n        title: '录入月份',\n        dataIndex: 'periodNumber',\n        width: 100\n      }, {\n        title: '上传文件名',\n        dataIndex: 'fileName',\n        width: 580\n      }, {\n        title: '上传结果',\n        dataIndex: 'uploadResults',\n        width: 120\n      }, {\n        title: '录入人员',\n        dataIndex: 'createOperator',\n        width: 116\n      }, {\n        title: '录入时间',\n        dataIndex: 'createTime',\n        width: 226\n      }],\n      dataSource: [],\n      loading: false\n    });\n\n    /******************* 文件上传结果Modal***************************** */\n    const reslultModalVisible = ref(false);\n    const uplaodLoading = ref(false);\n    const resultPageInfo = reactive({\n      fileName: '',\n      uploadTime: '',\n      failCount: '',\n      resultTableInfo: {\n        columns: [{\n          title: '所在行',\n          dataIndex: 'row',\n          width: 80\n        }, {\n          title: '错误信息',\n          dataIndex: 'msg',\n          width: 470\n        }],\n        data: []\n      }\n    });\n    const handleSubmit = () => {\n      if (formData.get('yearMonth')) formData.delete('yearMonth');\n      formData.append('yearMonth', form.month.replaceAll('-', ''));\n      formRef.value && formRef.value.validate().then(err => {\n        if (err === undefined) {\n          Modal.warning({\n            title: '上传提醒',\n            content: '上传后，将整体覆盖该月人员薪资数据，你还要继续吗？',\n            hideCancel: false,\n            modalClass: 'warningModal',\n            onOk() {\n              uplaodLoading.value = true;\n              importStaffCompositeCost(formData).then(res => {\n                if (res.code === '200') {\n                  Message.success(res.desc || '上传成功');\n                  form.upload = [];\n                  if (formData.get('file')) formData.delete('file');\n                }\n                if (res.code === '300') {\n                  if (res?.data?.errorMsgList && res.data.errorMsgList.length) {\n                    reslultModalVisible.value = true;\n                    let {\n                      fileName,\n                      failCount,\n                      uploadTime,\n                      errorMsgList\n                    } = res.data;\n                    resultPageInfo.fileName = fileName;\n                    resultPageInfo.uploadTime = uploadTime;\n                    resultPageInfo.failCount = failCount;\n                    resultPageInfo.resultTableInfo.data = errorMsgList;\n                  } else {\n                    Message.error(res.desc || '模板导入失败');\n                  }\n                  form.upload = [];\n                  if (formData.get('file')) formData.delete('file');\n                }\n              }).finally(() => {\n                uplaodLoading.value = false;\n              });\n            }\n          });\n        }\n      });\n    };\n    const resultModalClick = () => {\n      form.upload = [];\n      reslultModalVisible.value = false;\n      formData = new FormData();\n    };\n    /******************* 文件上传结果Modal***************************** */\n\n    /******************** 请求上传记录数据************************** */\n    onBeforeMount(() => {\n      uploadRecord();\n    });\n    const uploadRecord = () => {\n      queryImportRecord().then(res => {\n        dataContent.dataSource = res.data;\n      });\n    };\n    /******************** 请求上传记录数据************************** */\n\n    /******************* 文件上传相关方法****************************** */\n    const onBeforeUpload = file => {\n      if (form.upload.length > 0) {\n        Message.error('只能上传一个文件');\n        return Promise.reject();\n      }\n      return true;\n    };\n    const onBeforeRemove = () => {\n      formData = new FormData();\n      form.upload = [];\n      return true;\n    };\n    const uploadSuccess = fileItem => {\n      form.upload = [fileItem];\n      formRef.value && formRef.value.validateField('upload');\n    };\n    const customRequest = option => {\n      const {\n        onProgress,\n        onError,\n        onSuccess,\n        fileItem,\n        name\n      } = option;\n      formData.append(name || 'file', fileItem.file);\n      onSuccess('success');\n    };\n    /******************* 文件上传相关方法****************************** */\n\n    const __returned__ = {\n      get formData() {\n        return formData;\n      },\n      set formData(v) {\n        formData = v;\n      },\n      formRef,\n      get $bus() {\n        return $bus;\n      },\n      set $bus(v) {\n        $bus = v;\n      },\n      activeTab,\n      form,\n      dataContent,\n      reslultModalVisible,\n      uplaodLoading,\n      resultPageInfo,\n      handleSubmit,\n      resultModalClick,\n      uploadRecord,\n      onBeforeUpload,\n      onBeforeRemove,\n      uploadSuccess,\n      customRequest,\n      reactive,\n      ref,\n      watchEffect,\n      onBeforeMount,\n      get getCurrentInstance() {\n        return getCurrentInstance;\n      },\n      get Modal() {\n        return Modal;\n      },\n      get Message() {\n        return Message;\n      },\n      get importStaffCompositeCost() {\n        return importStaffCompositeCost;\n      },\n      get queryImportRecord() {\n        return queryImportRecord;\n      },\n      get moment() {\n        return moment;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"mappings":"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","names":["reactive","ref","watchEffect","onBeforeMount","getCurrentInstance","Modal","Message","importStaffCompositeCost","queryImportRecord","moment","formData","FormData","formRef","$bus","appContext","config","globalProperties","activeTab","emit","type","color","msg","form","month","Date","format","upload","dataContent","columns","title","dataIndex","width","dataSource","loading","reslultModalVisible","uplaodLoading","resultPageInfo","fileName","uploadTime","failCount","resultTableInfo","data","handleSubmit","get","delete","append","replaceAll","value","validate","then","err","undefined","warning","content","hideCancel","modalClass","onOk","res","code","success","desc","errorMsgList","length","error","finally","resultModalClick","uploadRecord","onBeforeUpload","file","Promise","reject","onBeforeRemove","uploadSuccess","fileItem","validateField","customRequest","option","onProgress","onError","onSuccess","name"],"sources":["/Users/lijiaxin/Documents/workspace/hydsoft-mgmt-frontend/src/views/dataManagement/comprehensivePersonnelCost.vue"],"sourcesContent":["<template>\n    <div class=\"defaultPadding\">\n        <a-tabs v-model:active-key=\"activeTab\">\n            <a-tab-pane key=\"1\" title=\"文件上传\">\n                <a-form :model=\"form\" :style=\"{ width: '700px',margin :'20px auto' }\" ref=\"formRef\">\n                    <a-form-item \n                        field=\"month\" \n                        label=\"选择月份\"\n                        :rules=\"[{required:true,message:'请选择月份'}]\"\n                        :validate-trigger=\"['change']\"\n                    >\n                        <a-month-picker v-model:model-value=\"form.month\" style=\"width: 120px;\" :allow-clear=\"false\" />\n                    </a-form-item>\n                    <a-form-item \n                        field=\"upload\" \n                        label=\"上传文件\"\n                        :rules=\"[{required:true, type:'array' ,message:'请选择上传文件'}]\"\n                    >\n                        <div class=\"form-upload-content\">\n                            <a-upload \n                                draggable \n                                :file-list=\"form.upload\"\n                                tip=\"提示: 最多上传一个文件\"\n                                class=\"form-upload\"\n                                :custom-request=\"customRequest\"\n                                accept=\".xlsx,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\n                                @before-upload=\"onBeforeUpload\"\n                                @before-remove=\"onBeforeRemove\"\n                                @success=\"uploadSuccess\"\n                            >\n                                <template #file-name=\"{fileItem :{name}}\">\n                                    <span style=\"color: #333;\">\n                                        {{ name }}\n                                    </span>\n                                </template>\n                            </a-upload>\n                            <div class=\"form-upload-template flex-between\">\n                                <span style=\"color: #F76560;\">\n                                    注意：美国实体公司的人员成本数据，需将美元转算成人民币\n                                </span>\n                                <a-button type=\"text\">下载人员数据上传模板</a-button>\n                            </div>\n                        </div>\n                    </a-form-item>\n                    <a-form-item>\n                        <a-button type=\"primary\" style=\"width:100px\" :loading=\"uplaodLoading\" @click=\"handleSubmit\">提交</a-button>\n                    </a-form-item>\n                </a-form>\n            </a-tab-pane>\n            <a-tab-pane key=\"2\" title=\"上传记录\">\n                <a-table\n                    class=\"m-t-20\"\n                    :columns=\"dataContent.columns\"\n                    :data=\"dataContent.dataSource\"\n                    :bordered=\"false\"\n                    column-resizable \n                    :scroll=\"{y:600}\"\n                    :scrollbar=\"false\" \n                    :pagination=\"false\"\n                    :loading = \"dataContent.loading\"\n                >\n                </a-table>\n            </a-tab-pane>\n        </a-tabs>\n        <a-modal v-model:visible=\"reslultModalVisible\" title=\"上传结果\" title-align=\"start\" width=\"755px\">\n            <div style=\"padding: 0 10px 0 10px;\">\n                <div class=\"m-b-10\">\n                    <a-result status=\"error\" title=\"上传失败\" style=\"padding: 0;\">\n                    </a-result>\n                </div>\n                <div class=\"m-b-26\">\n                    <div class=\"txt m-b-10\">文件名称：{{ resultPageInfo.fileName }}</div>\n                    <div class=\"txt m-b-10\">上传时间：{{ resultPageInfo.uploadTime }}</div>\n                    <!-- <div class=\"txt\">导入失败员工：{{ resultPageInfo.failCount }}个</div> -->\n                </div>\n                <a-table \n                    :columns=\"resultPageInfo.resultTableInfo.columns\" \n                    :data=\"resultPageInfo.resultTableInfo.data\"\n                    column-resizable \n                    :bordered=\"{wrapper: true, cell: true}\"\n                    :pagination=\"false\"\n                    :scroll=\"{x:'100%',y:'120px'}\" \n                >\n\n                </a-table>\n            </div>\n            <template #footer>\n                <div style=\"text-align: center;\">\n                    <a-button type=\"primary\" @click=\"resultModalClick\">知道了</a-button>\n                </div>\n            </template>\n        </a-modal>\n    </div>\n</template>\n\n<script setup>\nimport { reactive,ref,watchEffect,onBeforeMount } from 'vue'\nimport { getCurrentInstance } from \"@vue/runtime-core\";\nimport { Modal,Message } from '@arco-design/web-vue';\nimport { importStaffCompositeCost,queryImportRecord } from '@/api/staffCompositeCost';\nimport moment from 'moment'\nlet formData = new FormData();\nconst formRef = ref(null)\nlet $bus = getCurrentInstance().appContext.config.globalProperties.$bus\n\n/************** 页面路径********************* */\nconst activeTab = ref('1')\nwatchEffect(()=>{\n    $bus.emit('updateStructure',[{type : 'text',color : '#333',msg : '人员综合成本 / 文件上传'}])\n})\n/************** 页面路径********************* */\n\n/****************** 文件上传数据**************************** */\nconst form = reactive({\n    month : moment(new Date()).format('YYYY-MM'),\n    upload : []\n})\n/****************** 文件上传数据**************************** */\n\nconst dataContent = reactive({\n    columns : [\n        {\n            title : '录入月份',\n            dataIndex : 'periodNumber',\n            width : 100\n        },\n        {\n            title : '上传文件名',\n            dataIndex : 'fileName',\n            width : 580\n        },\n        {\n            title : '上传结果',\n            dataIndex : 'uploadResults',\n            width : 120\n        },\n        {\n            title : '录入人员',\n            dataIndex : 'createOperator',\n            width : 116\n        },\n        {\n            title : '录入时间',\n            dataIndex : 'createTime',\n            width : 226\n        },\n    ],\n    dataSource : [],\n    loading : false\n})\n\n/******************* 文件上传结果Modal***************************** */\nconst reslultModalVisible = ref(false)\nconst uplaodLoading = ref(false)\nconst resultPageInfo = reactive({\n    fileName : '',\n    uploadTime : '',\n    failCount : '',\n    resultTableInfo : {\n        columns : [\n            {\n                title : '所在行',\n                dataIndex : 'row',\n                width : 80\n            },\n            {\n                title : '错误信息',\n                dataIndex : 'msg',\n                width : 470\n            },\n        ],\n        data : []\n    }\n})\nconst handleSubmit = () => {\n    if(formData.get('yearMonth'))formData.delete('yearMonth')\n    formData.append('yearMonth',form.month.replaceAll('-',''))\n    formRef.value && formRef.value.validate().then(err=>{\n        if(err === undefined){\n            Modal.warning({\n                title: '上传提醒',\n                content: '上传后，将整体覆盖该月人员薪资数据，你还要继续吗？',\n                hideCancel :false,\n                modalClass : 'warningModal',\n                onOk(){\n                    uplaodLoading.value = true\n                    importStaffCompositeCost(formData).then(res=>{\n                        if(res.code === '200'){\n                            Message.success(res.desc || '上传成功')\n                            form.upload = []\n                            if(formData.get('file'))formData.delete('file')\n                        }\n                        if(res.code === '300'){\n                            if(res?.data?.errorMsgList && res.data.errorMsgList.length){\n                                reslultModalVisible.value = true\n                                let { fileName ,failCount,uploadTime,errorMsgList } = res.data\n                                resultPageInfo.fileName = fileName\n                                resultPageInfo.uploadTime = uploadTime\n                                resultPageInfo.failCount = failCount\n                                resultPageInfo.resultTableInfo.data = errorMsgList\n                            }else {\n                                Message.error(res.desc || '模板导入失败')\n                            }\n                            form.upload = []\n                            if(formData.get('file'))formData.delete('file')\n                        }\n                    }).finally(()=>{\n                        uplaodLoading.value = false\n                    })\n                }\n            });\n            \n        }\n    })\n    \n    \n    };\nconst resultModalClick = ()=>{\n    form.upload = []\n    reslultModalVisible.value = false\n    formData = new FormData()\n}\n/******************* 文件上传结果Modal***************************** */\n\n/******************** 请求上传记录数据************************** */\nonBeforeMount(()=>{\n    uploadRecord()\n})\nconst uploadRecord = ()=>{\n    queryImportRecord().then(res=>{\n        dataContent.dataSource = res.data\n    })\n}\n/******************** 请求上传记录数据************************** */\n\n/******************* 文件上传相关方法****************************** */\nconst onBeforeUpload = file =>{\n    if(form.upload.length > 0){\n        Message.error('只能上传一个文件')\n        return Promise.reject()\n    }\n    return true\n}\nconst onBeforeRemove = ()=>{\n    formData = new FormData()\n    form.upload = []\n    return true\n}\n\nconst uploadSuccess = fileItem =>{\n    form.upload = [fileItem]\n    formRef.value && formRef.value.validateField('upload')\n}\nconst customRequest = (option)=>{\n    const {onProgress, onError, onSuccess, fileItem, name} = option\n    formData.append(name || 'file', fileItem.file);\n    onSuccess('success')\n}\n/******************* 文件上传相关方法****************************** */\n\n</script>\n\n<style lang=\"scss\">\n.form-upload-content{\n    position: relative;\n    width: 100%;\n    .form-upload-template{\n        position: absolute;\n        left: 0;\n        top: 180px;\n        font-size: 12px;\n        width: 100%;\n    }\n}\n.form-upload .arco-upload-list.arco-upload-list-type-text, .arco-upload-list.arco-upload-list-type-picture{\n    margin-top: 38px;\n}\n.txt{\n    color: #333;\n    font-size: 14px;\n}\n.warningModal .arco-modal-header .arco-modal-title-icon svg{\n    color: rgb(var(--warning-5));\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}