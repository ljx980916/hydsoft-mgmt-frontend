{"ast":null,"code":"import { ref, reactive } from 'vue';\nimport { revenueColumns } from './constColumns.js';\nimport { revenueList } from '@/api/revenue.js';\nimport { dealData, ConversionUnit } from '@/utils/util.js';\nexport default {\n  __name: 'collapseTable',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const expandedRowKeys = ref([]);\n    // 折叠表格配置信息\n    const dataContent = reactive({\n      columns: revenueColumns,\n      dataSource: [],\n      loading: false\n    });\n    // 表格配置信息\n    const tableContent = reactive({\n      columns: revenueColumns,\n      dataSource: [],\n      loading: false\n    });\n    const dataArr = ref([]);\n    const isUnit = ref(false);\n\n    // 已展开的数据行发生改变时触发\n    const expandedChange = rowkeys => {\n      expandedRowKeys.value = rowkeys;\n    };\n    // 获取列表数据\n    const getList = () => {\n      revenueList().then(res => {\n        if (res.code == '000000000000') {\n          dataContent.dataSource = dealData(res.data.list).arr;\n          dataArr.value = JSON.parse(JSON.stringify(dataContent.dataSource));\n          const arr = dealData(res.data.list).dataArr;\n          tableContent.dataSource = arr.filter((obj, index) => arr.findIndex(item => item.key === obj.key) === index);\n          ;\n          expandedRowKeys.value = dealData(res.data.list).keyArr;\n        }\n      });\n    };\n    getList();\n    // 单位换算\n    const handleUnit = val => {\n      isUnit.value = val;\n      if (isUnit.value) {\n        dataContent.dataSource = JSON.parse(JSON.stringify(dataArr.value));\n        ConversionUnit(dataContent.dataSource);\n      } else {\n        dataContent.dataSource = dataArr.value;\n      }\n    };\n    const __returned__ = {\n      expandedRowKeys,\n      dataContent,\n      tableContent,\n      dataArr,\n      isUnit,\n      expandedChange,\n      getList,\n      handleUnit,\n      ref,\n      reactive,\n      get revenueColumns() {\n        return revenueColumns;\n      },\n      get revenueList() {\n        return revenueList;\n      },\n      get dealData() {\n        return dealData;\n      },\n      get ConversionUnit() {\n        return ConversionUnit;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"mappings":"AA8DE,SAASA,GAAG,EAACC,QAAQ,QAAQ,KAAK;AAClC,SAAQC,cAAc,QAAO,mBAAmB;AAChD,SAAQC,WAAW,QAAO,kBAAkB;AAC5C,SAAQC,QAAQ,EAACC,cAAc,QAAO,iBAAiB;;;;;;;IACvD,MAAMC,eAAe,GAAGN,GAAG,CAAC,EAAE,CAAC;IAC/B;IACA,MAAMO,WAAW,GAAGN,QAAQ,CAAC;MAC3BO,OAAO,EAAEN,cAAc;MACvBO,UAAU,EAAE,EAAE;MACdC,OAAO,EAAE;IACX,CAAC,CAAC;IACF;IACA,MAAMC,YAAY,GAAGV,QAAQ,CAAC;MAC5BO,OAAO,EAAEN,cAAc;MACvBO,UAAU,EAAE,EAAE;MACdC,OAAO,EAAE;IACX,CAAC,CAAC;IACF,MAAME,OAAO,GAAGZ,GAAG,CAAC,EAAE,CAAC;IACvB,MAAMa,MAAM,GAAGb,GAAG,CAAC,KAAK,CAAC;;IAEzB;IACA,MAAMc,cAAc,GAAIC,OAAO,IAAG;MAC9BT,eAAe,CAACU,KAAK,GAAGD,OAAO;IACnC,CAAC;IACD;IACA,MAAME,OAAO,GAAG,MAAI;MAChBd,WAAW,EAAE,CAACe,IAAI,CAACC,GAAG,IAAE;QACpB,IAAGA,GAAG,CAACC,IAAI,IAAG,cAAc,EAAC;UACzBb,WAAW,CAACE,UAAU,GAAIL,QAAQ,CAACe,GAAG,CAACE,IAAI,CAACC,IAAI,CAAC,CAACC,GAAG;UACrDX,OAAO,CAACI,KAAK,GAAGQ,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACnB,WAAW,CAACE,UAAU,CAAC,CAAC;UAClE,MAAMc,GAAG,GAAGnB,QAAQ,CAACe,GAAG,CAACE,IAAI,CAACC,IAAI,CAAC,CAACV,OAAO;UAC3CD,YAAY,CAACF,UAAU,GAAGc,GAAG,CAACI,MAAM,CAAC,CAACC,GAAG,EAAEC,KAAK,KAAIN,GAAG,CAACO,SAAS,CAAEC,IAAI,IAAKA,IAAI,CAACC,GAAG,KAAKJ,GAAG,CAACI,GAAG,CAAC,KAAKH,KAAK,CAAC;UAAC;UAC7GvB,eAAe,CAACU,KAAK,GAAGZ,QAAQ,CAACe,GAAG,CAACE,IAAI,CAACC,IAAI,CAAC,CAACW,MAAM;QAC1D;MACJ,CAAC,CAAC;IACN,CAAC;IACDhB,OAAO,EAAE;IACT;IACA,MAAMiB,UAAU,GAAIC,GAAG,IAAG;MACtBtB,MAAM,CAACG,KAAK,GAAGmB,GAAG;MAClB,IAAGtB,MAAM,CAACG,KAAK,EAAC;QACZT,WAAW,CAACE,UAAU,GAAGe,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACd,OAAO,CAACI,KAAK,CAAC,CAAC;QAClEX,cAAc,CAACE,WAAW,CAACE,UAAU,CAAC;MAC1C,CAAC,MAAI;QACDF,WAAW,CAACE,UAAU,GAAGG,OAAO,CAACI,KAAK;MAC1C;IACJ,CAAC","names":["ref","reactive","revenueColumns","revenueList","dealData","ConversionUnit","expandedRowKeys","dataContent","columns","dataSource","loading","tableContent","dataArr","isUnit","expandedChange","rowkeys","value","getList","then","res","code","data","list","arr","JSON","parse","stringify","filter","obj","index","findIndex","item","key","keyArr","handleUnit","val"],"sources":["/Users/lijiaxin/Documents/workspace/hydsoft-oms-frontend/src/views/demo/collapseTable.vue"],"sourcesContent":["<template>\n    <div class=\"defaultPadding\">\n      <header>\n         <a-space style=\"position: relative;z-index:2147483647\">\n          <div class=\"tag\">部门</div>\n          <span  class=\"dept\">BG1</span>\n          </a-space>\n      </header>\n      <main>\n          <!-- 营业收入-折叠 -->\n          <div>\n              <div class=\"m-t-40 flex-between-noCenter\">\n                  <a-button type=\"text\" style=\"color:#333\">\n                      <template #icon>\n                          <icon-layers />\n                      </template>\n                      <h3>营业收入-折叠</h3>\n                  </a-button>\n                  <div>\n                      <a-switch :value=\"isUnit\" @change=\"handleUnit\">\n                          <template #checked>ON</template>\n                          <template #unchecked>OFF</template>\n                      </a-switch>\n                      <span class=\"m-l-14\">单位换算 /（万）</span>\n                  </div>\n              </div>\n              <a-table \n              class=\"m-t-20 arcoTable_columnsWidthAuto arcoTable_tr_color\" \n              :columns=\"dataContent.columns\"  \n              :data=\"dataContent.dataSource\"  \n              :loading=\"dataContent.loading\"\n              :expanded-keys=\"expandedRowKeys\"\n              :pagination=\"false\" \n              show-empty-tree \n              :bordered=\"{wrapper: true, cell: true}\" \n              @expanded-change=\"expandedChange\"/>\n          </div>\n           <!-- 营业收入-不折叠 -->\n          <div>\n              <div class=\"m-t-40\">\n                  <a-button type=\"text\" style=\"color:#333\">\n                      <template #icon>\n                          <icon-layers />\n                      </template>\n                      <h3>营业收入-不折叠</h3>\n                  </a-button>\n              </div>\n              <a-table \n              class=\"m-t-20 arcoTable_columnsWidthAuto\" \n              :columns=\"tableContent.columns\"  \n              :data=\"tableContent.dataSource\"  \n              :loading=\"tableContent.loading\"\n              :pagination=\"false\" \n              :bordered=\"{wrapper: true, cell: true}\" \n              />\n          </div>\n      </main>\n    </div>\n  </template>\n  \n  \n  <script setup>\n  import { ref,reactive } from 'vue';\n  import {revenueColumns} from './constColumns.js';\n  import {revenueList} from '@/api/revenue.js';\n  import {dealData,ConversionUnit} from '@/utils/util.js';\n  const expandedRowKeys = ref([])\n  // 折叠表格配置信息\n  const dataContent = reactive({\n    columns: revenueColumns,\n    dataSource: [],\n    loading: false\n  });\n  // 表格配置信息\n  const tableContent = reactive({\n    columns: revenueColumns,\n    dataSource: [],\n    loading: false\n  });\n  const dataArr = ref([]);\n  const isUnit = ref(false);\n\n  // 已展开的数据行发生改变时触发\n  const expandedChange = (rowkeys)=>{\n      expandedRowKeys.value = rowkeys\n  };\n  // 获取列表数据\n  const getList = ()=>{\n      revenueList().then(res=>{\n          if(res.code =='000000000000'){\n              dataContent.dataSource =  dealData(res.data.list).arr;\n              dataArr.value = JSON.parse(JSON.stringify(dataContent.dataSource));\n              const arr = dealData(res.data.list).dataArr\n              tableContent.dataSource = arr.filter((obj, index) =>arr.findIndex((item) => item.key === obj.key) === index);;\n              expandedRowKeys.value = dealData(res.data.list).keyArr;\n          }\n      })\n  }\n  getList()\n  // 单位换算\n  const handleUnit = (val)=>{\n      isUnit.value = val;\n      if(isUnit.value){\n          dataContent.dataSource = JSON.parse(JSON.stringify(dataArr.value));\n          ConversionUnit(dataContent.dataSource);\n      }else{\n          dataContent.dataSource = dataArr.value;\n      }\n  }\n  </script>\n  \n  <style lang=\"scss\" scoped>\n  .tag{\n      border-width: 0px;\n      position:relative;\n      left:-40px;\n      top:6px;\n      width: 66px;\n      height: 29px;\n      background: linear-gradient(210deg, rgba(168, 113, 227, 1) 0%, rgba(168, 113, 227, 1) 0%, rgba(141, 78, 218, 1) 100%, rgba(141, 78, 218, 1) 100%);\n      border: none;\n      border-radius: 2px;\n      box-shadow: none;\n      color:#fff;\n      font-weight: 600;\n      text-align: center;\n      line-height: 29px;\n      transform-style:preserve-3d;\n  }\n  .tag::after{\n      content: '';\n      position:absolute;\n      left:-8px;\n      top:20px;\n      width: 0;\n      height: 0;\n      border: 9px solid;\n      border-color: transparent transparent rgb(113, 52, 178);\n      transform:translateZ(-1px) rotate(270deg);\n  }\n  .dept{\n      font-family: 'PingFangSC-Medium', 'PingFang SC Medium', 'PingFang SC';\n      font-weight: bold;\n      font-style: normal;\n      color: #4C5767;\n      margin: 12px 0px 0px 0px;\n  }\n  :deep(.arco-icon-plus){\n      background-image: url(@/assets/images/Triangle-right.png);\n      background-size: 110% 100%;\n      width: 14px!important;\n      height: 14px!important;\n      color: #FFFFFF00;\n      background-position:center;\n      background-repeat: no-repeat;\n  }\n  :deep(.arco-icon-minus){\n      background-image: url(@/assets/images/Triangle-bottom.png);\n      background-size: 110% 100%;\n      background-repeat: no-repeat;\n      width: 14px!important;\n      height: 14px!important;\n      color: #FFFFFF00;\n      background-position:center;\n  }\n  :deep(.arco-table .arco-table-expand-btn){\n      background-color: #fff !important;\n  }\n  </style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}