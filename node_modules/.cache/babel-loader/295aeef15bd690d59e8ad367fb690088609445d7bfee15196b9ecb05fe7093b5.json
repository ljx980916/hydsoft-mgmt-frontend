{"ast":null,"code":"import { ref, reactive } from 'vue';\nimport { revenueColumns } from './constColumns.js';\nimport { getRevenueList, getForeignCurrency } from '@/api/revenue.js';\nimport { dealData } from '@/utils/util.js';\nimport CollapseTable from '@/components/collapseTable.vue';\nimport NoCollapseTable from '@/components/noCollapseTable.vue';\nexport default {\n  __name: 'revenue',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const expandedRowKeys = ref([]);\n    const noexpandedRowKeys = ref([]);\n    // 折叠表格配置信息\n    const dataContent = reactive({\n      columns: revenueColumns,\n      dataSource: [],\n      loading: false\n    });\n    // 表格配置信息\n    const tableContent = reactive({\n      columns: revenueColumns,\n      dataSource: [],\n      loading: false\n    });\n    // 已展开的数据行发生改变时触发\n    const expandedChange = rowkeys => {\n      expandedRowKeys.value = rowkeys;\n    };\n    const noexpandedChange = rowkeys => {\n      noexpandedRowKeys.value = rowkeys;\n    };\n    // 获取收入列表数据\n    const getRevenueTable = () => {\n      getRevenueList().then(res => {\n        if (res.code == '000000000000') {\n          dataContent.dataSource = dealData(res.data.list).arr;\n          expandedRowKeys.value = dealData(res.data.list).keyArr;\n        }\n      });\n    };\n    getRevenueTable();\n    //获取外币列表数据\n    const getForeignCurrencyTable = () => {\n      getForeignCurrency().then(res => {\n        if (res.code == '000000000000') {\n          tableContent.dataSource = dealData(res.data.list).arr;\n        }\n      });\n    };\n    getForeignCurrencyTable();\n    const __returned__ = {\n      expandedRowKeys,\n      noexpandedRowKeys,\n      dataContent,\n      tableContent,\n      expandedChange,\n      noexpandedChange,\n      getRevenueTable,\n      getForeignCurrencyTable,\n      ref,\n      reactive,\n      get revenueColumns() {\n        return revenueColumns;\n      },\n      get getRevenueList() {\n        return getRevenueList;\n      },\n      get getForeignCurrency() {\n        return getForeignCurrency;\n      },\n      get dealData() {\n        return dealData;\n      },\n      CollapseTable,\n      NoCollapseTable\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"mappings":"AAsCA,SAASA,GAAG,EAACC,QAAQ,QAAQ,KAAK;AAClC,SAAQC,cAAc,QAAO,mBAAmB;AAChD,SAAQC,cAAc,EAACC,kBAAkB,QAAO,kBAAkB;AAClE,SAAQC,QAAQ,QAAO,iBAAiB;AACxC,OAAOC,aAAa,MAAM,gCAAgC;AAC1D,OAAOC,eAAe,MAAM,kCAAkC;;;;;;;IAE9D,MAAMC,eAAe,GAAGR,GAAG,CAAC,EAAE,CAAC;IAC/B,MAAMS,iBAAiB,GAAGT,GAAG,CAAC,EAAE,CAAC;IACjC;IACA,MAAMU,WAAW,GAAGT,QAAQ,CAAC;MAC3BU,OAAO,EAAET,cAAc;MACvBU,UAAU,EAAE,EAAE;MACdC,OAAO,EAAE;IACX,CAAC,CAAC;IACF;IACA,MAAMC,YAAY,GAAGb,QAAQ,CAAC;MAC5BU,OAAO,EAAET,cAAc;MACvBU,UAAU,EAAE,EAAE;MACdC,OAAO,EAAE;IACX,CAAC,CAAC;IACF;IACA,MAAME,cAAc,GAAIC,OAAO,IAAG;MAC9BR,eAAe,CAACS,KAAK,GAAGD,OAAO;IACnC,CAAC;IACD,MAAME,gBAAgB,GAAIF,OAAO,IAAG;MAChCP,iBAAiB,CAACQ,KAAK,GAAGD,OAAO;IACrC,CAAC;IACD;IACA,MAAMG,eAAe,GAAG,MAAI;MACxBhB,cAAc,EAAE,CAACiB,IAAI,CAACC,GAAG,IAAE;QACvB,IAAGA,GAAG,CAACC,IAAI,IAAG,cAAc,EAAC;UACzBZ,WAAW,CAACE,UAAU,GAAIP,QAAQ,CAACgB,GAAG,CAACE,IAAI,CAACC,IAAI,CAAC,CAACC,GAAG;UACrDjB,eAAe,CAACS,KAAK,GAAGZ,QAAQ,CAACgB,GAAG,CAACE,IAAI,CAACC,IAAI,CAAC,CAACE,MAAM;QAC1D;MACJ,CAAC,CAAC;IACN,CAAC;IACDP,eAAe,EAAE;IACjB;IACA,MAAMQ,uBAAuB,GAAE,MAAI;MAC/BvB,kBAAkB,EAAE,CAACgB,IAAI,CAACC,GAAG,IAAE;QAC3B,IAAGA,GAAG,CAACC,IAAI,IAAG,cAAc,EAAC;UACzBR,YAAY,CAACF,UAAU,GAAGP,QAAQ,CAACgB,GAAG,CAACE,IAAI,CAACC,IAAI,CAAC,CAACC,GAAG;QACzD;MACJ,CAAC,CAAC;IACN,CAAC;IACDE,uBAAuB,EAAE","names":["ref","reactive","revenueColumns","getRevenueList","getForeignCurrency","dealData","CollapseTable","NoCollapseTable","expandedRowKeys","noexpandedRowKeys","dataContent","columns","dataSource","loading","tableContent","expandedChange","rowkeys","value","noexpandedChange","getRevenueTable","then","res","code","data","list","arr","keyArr","getForeignCurrencyTable"],"sources":["/Users/lijiaxin/Documents/workspace/hydsoft-oms-frontend/src/views/demo/revenue.vue"],"sourcesContent":["<template>\n  <div class=\"defaultPadding\">\n    <header>\n       <a-space>\n        <div class=\"tag\">部门</div>\n        <span  class=\"dept\">BG1</span>\n        </a-space>\n    </header>\n    <main>\n        <div>\n            <!-- 营业收入 -->\n            <CollapseTable \n                :title=\"'营业收入'\"\n                :columns = \"dataContent.columns\" \n                :data = \"dataContent.dataSource\" \n                :loading =\"dataContent.loading\"\n                :expandedRowKeys=\"expandedRowKeys\"\n                @expandedChange=\"expandedChange\"\n            />\n        </div>\n         <!-- 外币 -->\n        <div>\n            <NoCollapseTable\n                :title=\"'外币'\"\n                :columns = \"tableContent.columns\" \n                :data = \"tableContent.dataSource\" \n                :loading =\"tableContent.loading\"\n                :expandedRowKeys=\"noexpandedRowKeys\"\n                :setColumnsData=\"dataContent.dataSource\"\n                @noexpandedChange=\"noexpandedChange\"\n            />\n        </div>\n    </main>\n  </div>\n</template>\n\n\n<script setup>\nimport { ref,reactive } from 'vue';\nimport {revenueColumns} from './constColumns.js';\nimport {getRevenueList,getForeignCurrency} from '@/api/revenue.js';\nimport {dealData} from '@/utils/util.js';\nimport CollapseTable from '@/components/collapseTable.vue';\nimport NoCollapseTable from '@/components/noCollapseTable.vue';\n\nconst expandedRowKeys = ref([]);\nconst noexpandedRowKeys = ref([]);\n// 折叠表格配置信息\nconst dataContent = reactive({\n  columns: revenueColumns,\n  dataSource: [],\n  loading: false\n});\n// 表格配置信息\nconst tableContent = reactive({\n  columns: revenueColumns,\n  dataSource: [],\n  loading: false\n});\n// 已展开的数据行发生改变时触发\nconst expandedChange = (rowkeys)=>{\n    expandedRowKeys.value = rowkeys\n};\nconst noexpandedChange = (rowkeys)=>{\n    noexpandedRowKeys.value = rowkeys\n};\n// 获取收入列表数据\nconst getRevenueTable = ()=>{\n    getRevenueList().then(res=>{\n        if(res.code =='000000000000'){\n            dataContent.dataSource =  dealData(res.data.list).arr;\n            expandedRowKeys.value = dealData(res.data.list).keyArr;\n        }\n    })\n};\ngetRevenueTable()\n//获取外币列表数据\nconst getForeignCurrencyTable =()=>{\n    getForeignCurrency().then(res=>{\n        if(res.code =='000000000000'){\n            tableContent.dataSource = dealData(res.data.list).arr;\n        }\n    })\n};\ngetForeignCurrencyTable()\n</script>\n\n<style lang=\"scss\" scoped>\n.tag{\n    border-width: 0px;\n    position:relative;\n    left:-40px;\n    top:6px;\n    width: 66px;\n    height: 29px;\n    background: linear-gradient(210deg, rgba(168, 113, 227, 1) 0%, rgba(168, 113, 227, 1) 0%, rgba(141, 78, 218, 1) 100%, rgba(141, 78, 218, 1) 100%);\n    border: none;\n    border-radius: 2px;\n    box-shadow: none;\n    color:#fff;\n    font-weight: 600;\n    text-align: center;\n    line-height: 29px;\n    transform-style:preserve-3d;\n}\n.tag::after{\n    content: '';\n    position:absolute;\n    left:-8px;\n    top:20px;\n    width: 0;\n    height: 0;\n    border: 9px solid;\n    border-color: transparent transparent rgb(113, 52, 178);\n    transform:translateZ(-1px) rotate(270deg);\n}\n.dept{\n    font-family: 'PingFangSC-Medium', 'PingFang SC Medium', 'PingFang SC';\n    font-weight: bold;\n    font-style: normal;\n    color: #4C5767;\n    margin: 12px 0px 0px 0px;\n}\n:deep(.arco-icon-plus){\n    background-image: url(@/assets/images/Triangle-right.png);\n    background-size: 110% 100%;\n    width: 14px!important;\n    height: 14px!important;\n    color: #FFFFFF00;\n    background-position:center;\n    background-repeat: no-repeat;\n}\n:deep(.arco-icon-minus){\n\tbackground-image: url(@/assets/images/Triangle-bottom.png);\n    background-size: 110% 100%;\n    background-repeat: no-repeat;\n    width: 14px!important;\n    height: 14px!important;\n    color: #FFFFFF00;\n    background-position:center;\n}\n:deep(.arco-table .arco-table-expand-btn){\n    background-color: #fff !important;\n}\n:deep(.activeRowGreen > .arco-table-td) {\n    background-color: rgb(234, 248, 243) !important;\n}\n:deep(.activeRowPurple > .arco-table-td) {\n    background-color: rgb(240, 237, 248) !important;\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}