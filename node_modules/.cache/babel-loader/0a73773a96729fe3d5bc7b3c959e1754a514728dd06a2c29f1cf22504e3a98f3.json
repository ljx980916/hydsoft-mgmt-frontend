{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withCtx as _withCtx, createBlock as _createBlock, createSlots as _createSlots } from \"vue\";\nconst _hoisted_1 = {\n  class: \"defaultPadding\"\n};\nimport { onMounted, reactive, watch } from 'vue';\nexport default {\n  __name: 'dynamicCloumns',\n  setup(__props) {\n    const options = {\n      Beijing: ['Haidian', 'Chaoyang', 'Changping'],\n      Sichuan: ['Chengdu', 'Mianyang', 'Aba'],\n      Guangdong: ['Guangzhou', 'Shenzhen', 'Shantou']\n    };\n    const toggleColumns = [{\n      title: '动态列一',\n      dataIndex: 'columnsOne',\n      slotName: 'columnsOne'\n    }, {\n      title: '动态列二',\n      dataIndex: 'columnTwo',\n      slotName: 'columnTwo'\n    }, {\n      title: '动态列三',\n      dataIndex: 'columnThree',\n      slotName: 'columnThree'\n    }];\n    const tableInfo = reactive({\n      columns: [{\n        title: 'Name',\n        dataIndex: 'name',\n        slotName: 'name'\n      }, {\n        title: 'Salary',\n        dataIndex: 'salary'\n      }, {\n        title: 'Address',\n        dataIndex: 'address'\n      }, {\n        title: 'Province',\n        dataIndex: 'province',\n        slotName: 'province'\n      }, {\n        title: 'City',\n        dataIndex: 'city',\n        slotName: 'city'\n      }, {\n        title: 'Email',\n        dataIndex: 'email'\n      }],\n      data: [{\n        key: '1',\n        name: 'Jane Doe',\n        salary: 23000,\n        address: '32 Park Road, London',\n        province: 'Beijing',\n        city: 'Haidian',\n        email: 'jane.doe@example.com'\n      }, {\n        key: '2',\n        name: 'Alisa Ross',\n        salary: 25000,\n        address: '35 Park Road, London',\n        email: 'alisa.ross@example.com'\n      }, {\n        key: '3',\n        name: 'Kevin Sandra',\n        salary: 22000,\n        address: '31 Park Road, London',\n        province: 'Sichuan',\n        city: 'Mianyang',\n        email: 'kevin.sandra@example.com'\n      }, {\n        key: '4',\n        name: 'Ed Hellen',\n        salary: 17000,\n        address: '42 Park Road, London',\n        email: 'ed.hellen@example.com'\n      }, {\n        key: '5',\n        name: 'William Smith',\n        salary: 27000,\n        address: '62 Park Road, London',\n        email: 'william.smith@example.com'\n      }]\n    });\n    const cellInputFocus = () => {\n      tableInfo.columns.splice(1, 0, ...toggleColumns);\n    };\n    const cellInputBlur = () => {\n      tableInfo.columns.splice(1, toggleColumns.length);\n    };\n    onMounted(() => {});\n    return (_ctx, _cache) => {\n      const _component_a_input = _resolveComponent(\"a-input\");\n      const _component_a_option = _resolveComponent(\"a-option\");\n      const _component_a_select = _resolveComponent(\"a-select\");\n      const _component_a_table = _resolveComponent(\"a-table\");\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_a_table, {\n        columns: tableInfo.columns,\n        data: tableInfo.data,\n        style: {\n          \"margin-top\": \"20px\"\n        }\n      }, _createSlots({\n        name: _withCtx(({\n          record,\n          rowIndex\n        }) => [_createVNode(_component_a_input, {\n          modelValue: record.name,\n          \"onUpdate:modelValue\": $event => record.name = $event,\n          onFocus: cellInputFocus,\n          onBlur: cellInputBlur\n        }, null, 8, [\"modelValue\", \"onUpdate:modelValue\"])]),\n        province: _withCtx(({\n          record,\n          rowIndex\n        }) => [_createVNode(_component_a_select, {\n          modelValue: record.province,\n          \"onUpdate:modelValue\": $event => record.province = $event,\n          onChange: () => {\n            record.city = '';\n          }\n        }, {\n          default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(Object.keys(options), value => {\n            return _openBlock(), _createBlock(_component_a_option, null, {\n              default: _withCtx(() => [_createTextVNode(_toDisplayString(value), 1)]),\n              _: 2\n            }, 1024);\n          }), 256))]),\n          _: 2\n        }, 1032, [\"modelValue\", \"onUpdate:modelValue\", \"onChange\"])]),\n        city: _withCtx(({\n          record,\n          rowIndex\n        }) => [_createVNode(_component_a_select, {\n          options: options[record.province] || [],\n          modelValue: record.city,\n          \"onUpdate:modelValue\": $event => record.city = $event\n        }, null, 8, [\"options\", \"modelValue\", \"onUpdate:modelValue\"])]),\n        _: 2\n      }, [_renderList(toggleColumns, (item, index) => {\n        return {\n          name: item.slotName,\n          fn: _withCtx(({\n            record,\n            rowIndex\n          }) => [(_openBlock(), _createBlock(_component_a_input, {\n            modelValue: record.dataIndex,\n            \"onUpdate:modelValue\": $event => record.dataIndex = $event,\n            key: index\n          }, null, 8, [\"modelValue\", \"onUpdate:modelValue\"]))])\n        };\n      })]), 1032, [\"columns\", \"data\"])]);\n    };\n  }\n};","map":{"version":3,"mappings":";;;;AAsBA,SAASA,SAAS,EAAEC,QAAQ,EAACC,KAAK,QAAQ,KAAK;;;;IAC/C,MAAMC,OAAO,GAAG;MACVC,OAAO,EAAE,CAAC,SAAS,EAAE,UAAU,EAAE,WAAW,CAAC;MAC7CC,OAAO,EAAE,CAAC,SAAS,EAAE,UAAU,EAAE,KAAK,CAAC;MACvCC,SAAS,EAAE,CAAC,WAAW,EAAE,UAAU,EAAE,SAAS;IAChD,CAAC;IACL,MAAMC,aAAa,GAAG,CACpB;MACEC,KAAK,EAAE,MAAM;MACbC,SAAS,EAAE,YAAY;MACvBC,QAAQ,EAAE;IACZ,CAAC,EACD;MACEF,KAAK,EAAE,MAAM;MACbC,SAAS,EAAE,WAAW;MACtBC,QAAQ,EAAE;IACZ,CAAC,EACD;MACEF,KAAK,EAAE,MAAM;MACbC,SAAS,EAAE,aAAa;MACxBC,QAAQ,EAAE;IACZ,CAAC,CACF;IAEG,MAAMC,SAAS,GAAGV,QAAQ,CAAC;MACzBW,OAAO,EAAG,CAAC;QACTJ,KAAK,EAAE,MAAM;QACbC,SAAS,EAAE,MAAM;QACjBC,QAAQ,EAAE;MACZ,CAAC,EAAE;QACDF,KAAK,EAAE,QAAQ;QACfC,SAAS,EAAE;MACb,CAAC,EAAE;QACDD,KAAK,EAAE,SAAS;QAChBC,SAAS,EAAE;MACb,CAAC,EAAE;QACDD,KAAK,EAAE,UAAU;QACjBC,SAAS,EAAE,UAAU;QACrBC,QAAQ,EAAE;MACZ,CAAC,EAAE;QACDF,KAAK,EAAE,MAAM;QACbC,SAAS,EAAE,MAAM;QACjBC,QAAQ,EAAE;MACZ,CAAC,EAAE;QACDF,KAAK,EAAE,OAAO;QACdC,SAAS,EAAE;MACb,CAAC,CAAC;MACFI,IAAI,EAAG,CAAC;QACNC,GAAG,EAAE,GAAG;QACRC,IAAI,EAAE,UAAU;QAChBC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE,sBAAsB;QAC/BC,QAAQ,EAAE,SAAS;QACnBC,IAAI,EAAE,SAAS;QACfC,KAAK,EAAE;MACT,CAAC,EAAE;QACDN,GAAG,EAAE,GAAG;QACRC,IAAI,EAAE,YAAY;QAClBC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE,sBAAsB;QAC/BG,KAAK,EAAE;MACT,CAAC,EAAE;QACDN,GAAG,EAAE,GAAG;QACRC,IAAI,EAAE,cAAc;QACpBC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE,sBAAsB;QAC/BC,QAAQ,EAAE,SAAS;QACnBC,IAAI,EAAE,UAAU;QAChBC,KAAK,EAAE;MACT,CAAC,EAAE;QACDN,GAAG,EAAE,GAAG;QACRC,IAAI,EAAE,WAAW;QACjBC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE,sBAAsB;QAC/BG,KAAK,EAAE;MACT,CAAC,EAAE;QACDN,GAAG,EAAE,GAAG;QACRC,IAAI,EAAE,eAAe;QACrBC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE,sBAAsB;QAC/BG,KAAK,EAAE;MACT,CAAC;IACH,CAAC,CAAC;IACN,MAAMC,cAAc,GAAG,MAAI;MACzBV,SAAS,CAACC,OAAO,CAACU,MAAM,CAAC,CAAC,EAAC,CAAC,EAAC,GAAGf,aAAa,CAAC;IAChD,CAAC;IACD,MAAMgB,aAAa,GAAG,MAAI;MACxBZ,SAAS,CAACC,OAAO,CAACU,MAAM,CAAC,CAAC,EAACf,aAAa,CAACiB,MAAM,CAAC;IAClD,CAAC;IACDxB,SAAS,CAAC,MAAI,CAEd,CAAC,CAAC","names":["onMounted","reactive","watch","options","Beijing","Sichuan","Guangdong","toggleColumns","title","dataIndex","slotName","tableInfo","columns","data","key","name","salary","address","province","city","email","cellInputFocus","splice","cellInputBlur","length"],"sources":["/Users/lijiaxin/Documents/workspace/hydsoft-oms-frontend/src/views/demo/dynamicCloumns.vue"],"sourcesContent":["<template>\n    <div class=\"defaultPadding\">\n        <a-table :columns=\"tableInfo.columns\" :data=\"tableInfo.data\" style=\"margin-top: 20px\">\n            <template #name=\"{ record, rowIndex }\">\n            <a-input v-model=\"record.name\" @focus=\"cellInputFocus\" @blur=\"cellInputBlur\"/>\n            </template>\n            <template #province=\"{ record,rowIndex }\">\n            <a-select v-model=\"record.province\" @change=\"()=>{record.city=''}\">\n                <a-option v-for=\"value of Object.keys(options)\">{{value}}</a-option>\n            </a-select>\n            </template>\n            <template #[item.slotName]=\"{ record,rowIndex }\" v-for=\"item,index of toggleColumns\">\n              <a-input v-model=\"record.dataIndex\" :key=\"index\"/>\n            </template>\n            <template #city=\"{ record,rowIndex }\">\n            <a-select :options=\"options[record.province] || []\" v-model=\"record.city\" />\n            </template>\n        </a-table>\n    </div>\n</template>\n\n<script setup>\nimport { onMounted, reactive,watch } from 'vue'\nconst options = {\n      Beijing: ['Haidian', 'Chaoyang', 'Changping'],\n      Sichuan: ['Chengdu', 'Mianyang', 'Aba'],\n      Guangdong: ['Guangzhou', 'Shenzhen', 'Shantou']\n    }\nconst toggleColumns = [\n  {\n    title: '动态列一',\n    dataIndex: 'columnsOne',\n    slotName: 'columnsOne'\n  },\n  {\n    title: '动态列二',\n    dataIndex: 'columnTwo',\n    slotName: 'columnTwo'\n  },\n  {\n    title: '动态列三',\n    dataIndex: 'columnThree',\n    slotName: 'columnThree'\n  },\n]\n\n    const tableInfo = reactive({\n      columns : [{\n        title: 'Name',\n        dataIndex: 'name',\n        slotName: 'name'\n      }, {\n        title: 'Salary',\n        dataIndex: 'salary',\n      }, {\n        title: 'Address',\n        dataIndex: 'address',\n      }, {\n        title: 'Province',\n        dataIndex: 'province',\n        slotName: 'province'\n      }, {\n        title: 'City',\n        dataIndex: 'city',\n        slotName: 'city'\n      }, {\n        title: 'Email',\n        dataIndex: 'email',\n      }],\n      data : [{\n        key: '1',\n        name: 'Jane Doe',\n        salary: 23000,\n        address: '32 Park Road, London',\n        province: 'Beijing',\n        city: 'Haidian',\n        email: 'jane.doe@example.com'\n      }, {\n        key: '2',\n        name: 'Alisa Ross',\n        salary: 25000,\n        address: '35 Park Road, London',\n        email: 'alisa.ross@example.com'\n      }, {\n        key: '3',\n        name: 'Kevin Sandra',\n        salary: 22000,\n        address: '31 Park Road, London',\n        province: 'Sichuan',\n        city: 'Mianyang',\n        email: 'kevin.sandra@example.com'\n      }, {\n        key: '4',\n        name: 'Ed Hellen',\n        salary: 17000,\n        address: '42 Park Road, London',\n        email: 'ed.hellen@example.com'\n      }, {\n        key: '5',\n        name: 'William Smith',\n        salary: 27000,\n        address: '62 Park Road, London',\n        email: 'william.smith@example.com'\n      }]\n    })\nconst cellInputFocus = ()=>{\n  tableInfo.columns.splice(1,0,...toggleColumns)\n}\nconst cellInputBlur = ()=>{\n  tableInfo.columns.splice(1,toggleColumns.length)\n}\nonMounted(()=>{\n  \n})\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}