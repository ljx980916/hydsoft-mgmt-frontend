{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.unshift.js\";\nimport { getLogPositiveMin, log } from '../util/math';\n/**\n * 计算 log 的 ticks，考虑 min = 0 的场景\n * @param cfg 度量的配置项\n * @returns 计算后的 ticks\n */\nexport default function calculateLogTicks(cfg) {\n  var base = cfg.base,\n    tickCount = cfg.tickCount,\n    min = cfg.min,\n    max = cfg.max,\n    values = cfg.values;\n  var minTick;\n  var maxTick = log(base, max);\n  if (min > 0) {\n    minTick = Math.floor(log(base, min));\n  } else {\n    var positiveMin = getLogPositiveMin(values, base, max);\n    minTick = Math.floor(log(base, positiveMin));\n  }\n  var count = maxTick - minTick;\n  var avg = Math.ceil(count / tickCount);\n  var ticks = [];\n  for (var i = minTick; i < maxTick + avg; i = i + avg) {\n    ticks.push(Math.pow(base, i));\n  }\n  if (min <= 0) {\n    // 最小值 <= 0 时显示 0\n    ticks.unshift(0);\n  }\n  return ticks;\n}","map":{"version":3,"mappings":";;AAEA,SAASA,iBAAiB,EAAEC,GAAG,QAAQ,cAAc;AAErD;;;;;AAKA,eAAc,SAAUC,iBAAiB,CAACC,GAAgB;EAChD,QAAI,GAAkCA,GAAG,KAArC;IAAEC,SAAS,GAAuBD,GAAG,UAA1B;IAAEE,GAAG,GAAkBF,GAAG,IAArB;IAAEG,GAAG,GAAaH,GAAG,IAAhB;IAAEI,MAAM,GAAKJ,GAAG,OAAR;EACzC,IAAIK,OAAO;EACX,IAAMC,OAAO,GAAGR,GAAG,CAACS,IAAI,EAAEJ,GAAG,CAAC;EAC9B,IAAID,GAAG,GAAG,CAAC,EAAE;IACXG,OAAO,GAAGG,IAAI,CAACC,KAAK,CAACX,GAAG,CAACS,IAAI,EAAEL,GAAG,CAAC,CAAC;GACrC,MAAM;IACL,IAAMQ,WAAW,GAAGb,iBAAiB,CAACO,MAAM,EAAEG,IAAI,EAAEJ,GAAG,CAAC;IACxDE,OAAO,GAAGG,IAAI,CAACC,KAAK,CAACX,GAAG,CAACS,IAAI,EAAEG,WAAW,CAAC,CAAC;;EAE9C,IAAMC,KAAK,GAAGL,OAAO,GAAGD,OAAO;EAC/B,IAAMO,GAAG,GAAGJ,IAAI,CAACK,IAAI,CAACF,KAAK,GAAGV,SAAS,CAAC;EACxC,IAAMa,KAAK,GAAG,EAAE;EAChB,KAAK,IAAIC,CAAC,GAAGV,OAAO,EAAEU,CAAC,GAAGT,OAAO,GAAGM,GAAG,EAAEG,CAAC,GAAGA,CAAC,GAAGH,GAAG,EAAE;IACpDE,KAAK,CAACE,IAAI,CAACR,IAAI,CAACS,GAAG,CAACV,IAAI,EAAEQ,CAAC,CAAC,CAAC;;EAE/B,IAAIb,GAAG,IAAI,CAAC,EAAE;IACZ;IACAY,KAAK,CAACI,OAAO,CAAC,CAAC,CAAC;;EAElB,OAAOJ,KAAK;AACd","names":["getLogPositiveMin","log","calculateLogTicks","cfg","tickCount","min","max","values","minTick","maxTick","base","Math","floor","positiveMin","count","avg","ceil","ticks","i","push","pow","unshift"],"sourceRoot":"","sources":["../../src/tick-method/log.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module","externalDependencies":[]}