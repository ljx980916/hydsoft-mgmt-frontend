{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"defaultPadding\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"span\", null, \"角色编码：\", -1 /* HOISTED */);\nconst _hoisted_3 = {\n  class: \"m-t-20\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_a_input = _resolveComponent(\"a-input\");\n  const _component_icon_search = _resolveComponent(\"icon-search\");\n  const _component_a_button = _resolveComponent(\"a-button\");\n  const _component_icon_refresh = _resolveComponent(\"icon-refresh\");\n  const _component_a_space = _resolveComponent(\"a-space\");\n  const _component_icon_plus = _resolveComponent(\"icon-plus\");\n  const _component_a_form_item = _resolveComponent(\"a-form-item\");\n  const _component_a_radio = _resolveComponent(\"a-radio\");\n  const _component_a_radio_group = _resolveComponent(\"a-radio-group\");\n  const _component_a_tree = _resolveComponent(\"a-tree\");\n  const _component_a_form = _resolveComponent(\"a-form\");\n  const _component_a_modal = _resolveComponent(\"a-modal\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" 搜索栏 \"), _createVNode(_component_a_space, null, {\n    default: _withCtx(() => [_hoisted_2, _createVNode(_component_a_input, {\n      modelValue: $setup.roleCode,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.roleCode = $event),\n      placeholder: \"请输入角色编码\",\n      class: \"w-200\"\n    }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_a_button, {\n      class: \"m-l-16\",\n      type: \"primary\",\n      onClick: $setup.searchBase\n    }, {\n      icon: _withCtx(() => [_createVNode(_component_icon_search)]),\n      default: _withCtx(() => [_createTextVNode(\"搜索\")]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_a_button, {\n      class: \"m-l-8\",\n      onClick: $setup.setBase\n    }, {\n      icon: _withCtx(() => [_createVNode(_component_icon_refresh)]),\n      default: _withCtx(() => [_createTextVNode(\"重置\")]),\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  }), _createCommentVNode(\" 新建角色 \"), _createElementVNode(\"div\", _hoisted_3, [$setup.permissions.includes('role:add') ? (_openBlock(), _createBlock(_component_a_button, {\n    key: 0,\n    type: \"primary\",\n    onClick: _cache[1] || (_cache[1] = $event => $setup.handleDetail({}, 'new'))\n  }, {\n    icon: _withCtx(() => [_createVNode(_component_icon_plus)]),\n    default: _withCtx(() => [_createTextVNode(\"新建角色\")]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" 表格内容 \"), _createVNode($setup[\"TableContainer\"], {\n    class: \"m-t-20\",\n    \"column-resizable\": \"\",\n    scroll: {\n      y: 600\n    },\n    scrollbar: false,\n    loading: $setup.dataContent.loading,\n    paginationTotal: $setup.dataContent.pagination.total,\n    paginationPageSize: $setup.dataContent.pagination.pageSize,\n    paginationCurrent: $setup.dataContent.pagination.pageNum,\n    tableColumns: $setup.dataContent.columns,\n    \"table-data\": $setup.dataContent.dataSource,\n    \"menu-name\": $setup.dataContent.menuName,\n    onHandleEdit: $setup.handleDetail,\n    onHandleDeleteMenu: $setup.delRoleItem,\n    onPaginationCurrentChange: $setup.paginationCurrentChange,\n    onPaginationPageSizeChange: $setup.paginationPageSizeChange\n  }, null, 8 /* PROPS */, [\"loading\", \"paginationTotal\", \"paginationPageSize\", \"paginationCurrent\", \"tableColumns\", \"table-data\", \"menu-name\"]), _createCommentVNode(\" 添加角色表单 \"), _createVNode(_component_a_modal, {\n    mask: true,\n    visible: $setup.addRoleModal,\n    \"onUpdate:visible\": _cache[7] || (_cache[7] = $event => $setup.addRoleModal = $event),\n    title: \"添加角色\"\n  }, {\n    footer: _withCtx(() => [_createVNode(_component_a_button, {\n      onClick: $setup.handleModalCancel\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"取消\")]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_a_button, {\n      type: \"primary\",\n      onClick: $setup.handleModalOk\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"确定\")]),\n      _: 1 /* STABLE */\n    })]),\n\n    default: _withCtx(() => [_createVNode(_component_a_form, {\n      model: $setup.form,\n      ref: \"formRef\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_a_form_item, {\n        field: \"name\",\n        label: \"角色名称\",\n        rules: [{\n          required: true,\n          message: '请输入角色名称'\n        }]\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_input, {\n          type: \"text\",\n          placeholder: \"请输入角色名称\",\n          modelValue: $setup.form.name,\n          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.form.name = $event)\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_a_form_item, {\n        field: \"code\",\n        label: \"角色编码\",\n        rules: [{\n          required: true,\n          message: '请输入角色编码'\n        }]\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_input, {\n          type: \"text\",\n          placeholder: \"请输入角色编码\",\n          modelValue: $setup.form.code,\n          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.form.code = $event)\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_a_form_item, {\n        field: \"remarks\",\n        label: \"备注\",\n        rules: [{\n          required: true,\n          message: '请输入备注'\n        }]\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_input, {\n          type: \"text\",\n          placeholder: \"请输入备注\",\n          modelValue: $setup.form.remarks,\n          \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.form.remarks = $event)\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_a_form_item, {\n        field: \"isShowTab\",\n        label: \"显示页签\",\n        rules: [{\n          required: true,\n          message: '请选择是否显示页签'\n        }]\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_radio_group, {\n          \"model-value\": $setup.form.isShowTab,\n          \"onUpdate:model-value\": _cache[5] || (_cache[5] = $event => $setup.form.isShowTab = $event),\n          style: {\n            \"margin-top\": \"10px\"\n          }\n        }, {\n          default: _withCtx(() => [_createVNode(_component_a_radio, {\n            value: true\n          }, {\n            default: _withCtx(() => [_createTextVNode(\"是\")]),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_a_radio, {\n            value: false\n          }, {\n            default: _withCtx(() => [_createTextVNode(\"否\")]),\n            _: 1 /* STABLE */\n          })]),\n\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"model-value\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_a_form_item, {\n        field: \"defaultCheckedList\",\n        label: \"授权菜单\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_tree, {\n          checkable: true,\n          checkStrictly: false,\n          data: $setup.casList,\n          \"checked-keys\": $setup.defaultCheckedList,\n          \"onUpdate:checked-keys\": _cache[6] || (_cache[6] = $event => $setup.defaultCheckedList = $event),\n          onCheck: $setup.onCheckTree\n        }, null, 8 /* PROPS */, [\"data\", \"checked-keys\"])]),\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\"])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"visible\"])]);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_createCommentVNode","_createVNode","_component_a_space","_hoisted_2","_component_a_input","$setup","placeholder","_component_a_button","type","onClick","icon","_component_icon_search","default","_component_icon_refresh","_hoisted_3","includes","_createBlock","_component_icon_plus","scroll","y","scrollbar","loading","paginationTotal","pagination","total","paginationPageSize","pageSize","paginationCurrent","pageNum","tableColumns","columns","dataSource","menuName","onHandleEdit","onHandleDeleteMenu","onPaginationCurrentChange","onPaginationPageSizeChange","_component_a_modal","mask","visible","title","footer","_component_a_form","model","ref","_component_a_form_item","field","label","rules","required","message","name","code","remarks","_component_a_radio_group","isShowTab","style","_component_a_radio","value","_component_a_tree","checkable","checkStrictly","data","onCheck"],"sourceRoot":"","sources":["/Users/lijiaxin/Documents/workspace/hydsoft-oms-frontend/src/views/system/roleManage.vue"],"sourcesContent":["<template>\n  <div class=\"defaultPadding\">\n    <!-- 搜索栏 -->\n    <a-space>\n      <span>角色编码：</span>\n      <a-input v-model=\"roleCode\" placeholder=\"请输入角色编码\" class=\"w-200\" />\n      <a-button class=\"m-l-16\" type=\"primary\" @click=\"searchBase\">\n        <template #icon>\n          <icon-search />\n        </template>\n        <template #default>搜索</template>\n      </a-button>\n      <a-button class=\"m-l-8\" @click=\"setBase\">\n        <template #icon>\n          <icon-refresh />\n        </template>\n        <template #default>重置</template>\n      </a-button>\n    </a-space>\n    <!-- 新建角色 -->\n    <div class=\"m-t-20\">\n      <a-button type=\"primary\" @click=\"handleDetail({}, 'new')\" v-if=\"permissions.includes('role:add')\">\n        <template #icon>\n          <icon-plus />\n        </template>\n        <template #default>新建角色</template>\n      </a-button>\n    </div>\n    <!-- 表格内容 -->\n    <TableContainer\n      class=\"m-t-20\"\n      column-resizable\n      :scroll=\"{ y: 600 }\"\n      :scrollbar=\"false\"\n      :loading=\"dataContent.loading\"\n      :paginationTotal=\"dataContent.pagination.total\"\n      :paginationPageSize=\"dataContent.pagination.pageSize\"\n      :paginationCurrent=\"dataContent.pagination.pageNum\"\n      :tableColumns=\"dataContent.columns\"\n      :table-data=\"dataContent.dataSource\"\n      :menu-name=\"dataContent.menuName\"\n      @handleEdit=\"handleDetail\"\n      @handleDeleteMenu=\"delRoleItem\"\n      @paginationCurrentChange=\"paginationCurrentChange\"\n      @paginationPageSizeChange=\"paginationPageSizeChange\"\n    ></TableContainer>\n    <!-- 添加角色表单 -->\n    <a-modal :mask=\"true\" v-model:visible=\"addRoleModal\" title=\"添加角色\">\n      <a-form :model=\"form\" ref=\"formRef\">\n        <a-form-item field=\"name\" label=\"角色名称\" :rules=\"[{ required: true, message: '请输入角色名称' }]\">\n          <a-input type=\"text\" placeholder=\"请输入角色名称\" v-model=\"form.name\"></a-input>\n        </a-form-item>\n        <a-form-item field=\"code\" label=\"角色编码\" :rules=\"[{ required: true, message: '请输入角色编码' }]\">\n          <a-input type=\"text\" placeholder=\"请输入角色编码\" v-model=\"form.code\"></a-input>\n        </a-form-item>\n        <a-form-item field=\"remarks\" label=\"备注\" :rules=\"[{ required: true, message: '请输入备注' }]\">\n          <a-input type=\"text\" placeholder=\"请输入备注\" v-model=\"form.remarks\"></a-input>\n        </a-form-item>\n        <a-form-item field=\"isShowTab\" label=\"显示页签\" :rules=\"[{ required: true, message: '请选择是否显示页签' }]\">\n          <a-radio-group v-model:model-value=\"form.isShowTab\" style=\"margin-top: 10px;\">\n            <a-radio :value=\"true\">是</a-radio>\n            <a-radio :value=\"false\">否</a-radio>\n          </a-radio-group>\n        </a-form-item>\n        <a-form-item field=\"defaultCheckedList\" label=\"授权菜单\">\n          <a-tree\n            :checkable=\"true\"\n            :checkStrictly=\"false\"\n            :data=\"casList\"\n            v-model:checked-keys=\"defaultCheckedList\"\n            @check=\"onCheckTree\"\n          />\n        </a-form-item>\n      </a-form>\n      <template #footer>\n        <a-button @click=\"handleModalCancel\">取消</a-button>\n        <a-button type=\"primary\" @click=\"handleModalOk\">确定</a-button>\n      </template>\n    </a-modal>\n  </div>\n</template>\n\n<script setup>\nimport { reactive, ref, toRaw, onBeforeMount } from \"vue\";\nimport { roleListColumns } from \"./constColumns\";\nimport { roleList, addRole, editRole, delRole, roleInfo, } from \"@/api/roleManage\";\nimport { list } from \"@/api/menu\";\nimport { Message } from \"@arco-design/web-vue\";\nimport TableContainer from \"@/components/tableContainer.vue\";\nimport { useMenuStore } from \"../../store/index\";\nimport { getCurrentInstance } from \"@vue/runtime-core\";\nconst permissions = useMenuStore().getPermission;\nlet $bus = getCurrentInstance().appContext.config.globalProperties.$bus;\nonBeforeMount(() => {\n  $bus.emit(\"updateStructure\", [{ type: \"text\", color: \"#333\", msg: \"角色列表\" }]);\n});\n\nconst roleCode = ref(\"\");\nconst dataContent = reactive({\n  columns: roleListColumns,\n  dataSource: [],\n  loading: false,\n  pagination: {\n    pageNum: 1,\n    pageSize: 10,\n    total: 0,\n  },\n  menuName: \"role\",\n});\nconst addRoleModal = ref(false);\nconst form = reactive({\n  name: \"\",\n  code: \"\",\n  remarks: \"\",\n});\nconst defaultCheckedList = ref([]);\nconst casList = ref([]);\n\nconst roleId = ref(\"\");\nconst selectedList = ref([]);\nconst formRef = ref();\n\nconst treeData = arr => {\n  const treeArr = [];\n  arr.forEach(item => {\n    let obj = { title: item.name, key: item.id };\n    if (item.children && item.children.length) {\n      obj.children = treeData(item.children);\n      treeArr.push(obj);\n    } else {\n      treeArr.push(obj);\n    }\n  });\n  return treeArr;\n};\n// 获取角色管理列表\nconst getRoleList = () => {\n  dataContent.loading = true;\n  let obj = {\n    code: roleCode.value,\n    pageNum: dataContent.pagination.pageNum,\n    pageSize: dataContent.pagination.pageSize,\n  };\n  roleList(obj).then(res => {\n    if (res.code === \"000000000000\") {\n      res.data.list.forEach((item, i) => {\n        item.key = i;\n      });\n      dataContent.dataSource = res.data.list;\n      dataContent.pagination.total = Number(res.data.total);\n    }\n    dataContent.loading = false;\n  });\n};\ngetRoleList();\n// 获取菜单列表\nconst getMenuList = () => {\n  list().then(res => {\n    if (res.code === \"000000000000\") {\n      let arr = [];\n      res.data.forEach(item => {\n        item.children = [];\n        item.key = item.id;\n        if (item.parentId === \"000000\") {\n          arr.push(item);\n        }\n        res.data.forEach(val => {\n          if (val.parentId === item.id) {\n            item.children.push(val);\n          }\n        });\n      });\n      casList.value = treeData(arr.slice());\n    }\n  });\n};\ngetMenuList();\n// 查询\nconst searchBase = () => {\n  getRoleList();\n};\n// 重置\nconst setBase = () => {\n  roleCode.value = \"\";\n  getRoleList();\n};\n// 编辑\nconst handleDetail = (obj, type) => {\n  formRef.value.resetFields();\n  addRoleModal.value = true;\n  roleId.value = type === \"new\" ? \"\" : obj.id;\n  if (type === \"edit\") {\n    roleInfo(obj).then(res => {\n      form.name = res.data.name;\n      form.code = res.data.code;\n      form.remarks = res.data.remarks;\n      form.isShowTab = res.data.isShowTab\n      let newArr = [];\n      selectedList.value = res.data.menuIdList;\n      res.data.menuIdList.forEach(item => {\n        checkedSelect(item, casList.value, newArr);\n      });\n      defaultCheckedList.value = newArr;\n    });\n  }\n};\n// 多选\nconst checkedSelect = (id, data, newArr) => {\n  data = toRaw(data);\n  data.forEach(item => {\n    if (item.key === id) {\n      if (!item.children) {\n        newArr.push(item.key);\n      }\n    } else {\n      if (item.children && item.children.length > 0) {\n        checkedSelect(id, item.children, newArr);\n      }\n    }\n  });\n};\n// 删除\nconst delRoleItem = record => {\n  delRole(record).then(res => {\n    if (res.code === \"000000000000\") {\n      Message.success(\"删除成功!\");\n      getRoleList();\n    } else {\n      Message.error(res.message);\n    }\n  });\n};\n// 表单取消\nconst handleModalCancel = () => {\n  addRoleModal.value = false;\n};\n// 表单确定\nconst handleModalOk = () => {\n  if (selectedList.value.length === 0) {\n    Message.error(\"请选择菜单权限\");\n    return;\n  }\n  let values = toRaw(form);\n  values.id = roleId.value;\n  values.menuIdList = selectedList.value;\n  formRef.value.validate(err => {\n    if (!err) {\n      values.isShowTab = values.isShowTab?1:0\n      if (values.id === \"\") {\n        addRole(values).then(res => {\n          if (res.code === \"000000000000\") {\n            Message.success(\"新建成功!\");\n            getRoleList();\n          } else {\n            Message.error(res.message);\n          }\n        });\n      } else {\n        editRole(values).then(res => {\n          if (res.code === \"000000000000\") {\n            Message.success(\"更新成功!\");\n            getRoleList();\n          } else {\n            Message.error(res.message);\n          }\n        });\n      }\n      addRoleModal.value = false;\n    }\n  });\n};\nconst onCheckTree = (checkedKeys, info) => {\n  let list = [];\n  list = list.concat(checkedKeys).concat(info.halfCheckedKeys);\n  selectedList.value = list;\n};\n// 更改当前页码\nconst paginationCurrentChange = current => {\n  dataContent.pagination.pageNum = current;\n  getRoleList();\n};\n// 更改页容量\nconst paginationPageSizeChange = pageSize => {\n  dataContent.pagination.pageSize = pageSize;\n  getRoleList();\n};\n</script>\n\n<style lang=\"scss\">\n.w-200 {\n  width: 200px;\n}\n\n.m-t-20 {\n  margin-top: 20px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}