{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.array.push.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar ml_matrix_1 = require(\"ml-matrix\");\nvar MDS = /** @class */function () {\n  function MDS(params) {\n    this.distances = params.distances;\n    this.dimension = params.dimension || 2;\n    this.linkDistance = params.linkDistance;\n  }\n  MDS.prototype.layout = function () {\n    var self = this;\n    var dimension = self.dimension,\n      distances = self.distances,\n      linkDistance = self.linkDistance;\n    try {\n      // square distances\n      var M = ml_matrix_1.Matrix.mul(ml_matrix_1.Matrix.pow(distances, 2), -0.5);\n      // double centre the rows/columns\n      var rowMeans = M.mean('row');\n      var colMeans = M.mean('column');\n      var totalMean = M.mean();\n      M.add(totalMean).subRowVector(rowMeans).subColumnVector(colMeans);\n      // take the SVD of the double centred matrix, and return the\n      // points from it\n      var ret = new ml_matrix_1.SingularValueDecomposition(M);\n      var eigenValues_1 = ml_matrix_1.Matrix.sqrt(ret.diagonalMatrix).diagonal();\n      return ret.leftSingularVectors.toJSON().map(function (row) {\n        return ml_matrix_1.Matrix.mul([row], [eigenValues_1]).toJSON()[0].splice(0, dimension);\n      });\n    } catch (_a) {\n      var res = [];\n      for (var i = 0; i < distances.length; i++) {\n        var x = Math.random() * linkDistance;\n        var y = Math.random() * linkDistance;\n        res.push([x, y]);\n      }\n      return res;\n    }\n  };\n  return MDS;\n}();\nexports.default = MDS;","map":{"version":3,"mappings":";;;;;;AACA;AAEA;EAUE,aAAYA,MAAyE;IACnF,IAAI,CAACC,SAAS,GAAGD,MAAM,CAACC,SAAS;IACjC,IAAI,CAACC,SAAS,GAAGF,MAAM,CAACE,SAAS,IAAI,CAAC;IACtC,IAAI,CAACC,YAAY,GAAGH,MAAM,CAACG,YAAY;EACzC;EAEOC,oBAAM,GAAb;IACE,IAAMC,IAAI,GAAG,IAAI;IACT,aAAS,GAA8BA,IAAI,UAAlC;MAAEJ,SAAS,GAAmBI,IAAI,UAAvB;MAAEF,YAAY,GAAKE,IAAI,aAAT;IAE1C,IAAI;MACF;MACA,IAAMC,CAAC,GAAGC,kBAAQ,CAACC,GAAG,CAACD,kBAAQ,CAACE,GAAG,CAACR,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC;MAExD;MACA,IAAMS,QAAQ,GAAGJ,CAAC,CAACK,IAAI,CAAC,KAAK,CAAC;MAC9B,IAAMC,QAAQ,GAAGN,CAAC,CAACK,IAAI,CAAC,QAAQ,CAAC;MACjC,IAAME,SAAS,GAAGP,CAAC,CAACK,IAAI,EAAE;MAC1BL,CAAC,CAACQ,GAAG,CAACD,SAAS,CAAC,CAACE,YAAY,CAACL,QAAQ,CAAC,CAACM,eAAe,CAACJ,QAAQ,CAAC;MAEjE;MACA;MACA,IAAMK,GAAG,GAAG,IAAIV,sCAA0B,CAACD,CAAC,CAAC;MAC7C,IAAMY,aAAW,GAAGX,kBAAQ,CAACY,IAAI,CAACF,GAAG,CAACG,cAAc,CAAC,CAACC,QAAQ,EAAE;MAChE,OAAOJ,GAAG,CAACK,mBAAmB,CAACC,MAAM,EAAE,CAACC,GAAG,CAAC,UAACC,GAAa;QACxD,OAAOlB,kBAAQ,CAACC,GAAG,CAAC,CAACiB,GAAG,CAAC,EAAE,CAACP,aAAW,CAAC,CAAC,CAACK,MAAM,EAAE,CAAC,CAAC,CAAC,CAACG,MAAM,CAAC,CAAC,EAAExB,SAAS,CAAe;MAC1F,CAAC,CAAC;KACH,CAAC,WAAM;MACN,IAAMyB,GAAG,GAAiB,EAAE;MAC5B,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG3B,SAAS,CAAC4B,MAAM,EAAED,CAAC,EAAE,EAAE;QACzC,IAAME,CAAC,GAAGC,IAAI,CAACC,MAAM,EAAE,GAAG7B,YAAY;QACtC,IAAM8B,CAAC,GAAGF,IAAI,CAACC,MAAM,EAAE,GAAG7B,YAAY;QACtCwB,GAAG,CAACO,IAAI,CAAC,CAACJ,CAAC,EAAEG,CAAC,CAAC,CAAC;;MAElB,OAAON,GAAG;;EAEd,CAAC;EACH,UAAC;AAAD,CAAC,EA/CD","names":["params","distances","dimension","linkDistance","MDS","self","M","ml_matrix_1","mul","pow","rowMeans","mean","colMeans","totalMean","add","subRowVector","subColumnVector","ret","eigenValues_1","sqrt","diagonalMatrix","diagonal","leftSingularVectors","toJSON","map","row","splice","res","i","length","x","Math","random","y","push"],"sourceRoot":"","sources":["../../../src/layout/radial/mds.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script","externalDependencies":[]}