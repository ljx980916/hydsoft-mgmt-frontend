{"ast":null,"code":"\"use strict\";\n\n/**\n * @fileOverview grid layout\n * @author shiwu.wyy@antfin.com\n * this algorithm refers to <cytoscape.js> - https://github.com/cytoscape/cytoscape.js/\n */\nrequire(\"core-js/modules/es.array.push.js\");\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.GridLayout = void 0;\nvar util_1 = require(\"../util\");\nvar base_1 = require(\"./base\");\n/**\n * 网格布局\n */\nvar GridLayout = /** @class */function (_super) {\n  __extends(GridLayout, _super);\n  function GridLayout(options) {\n    var _this = _super.call(this) || this;\n    /** 布局起始点 */\n    _this.begin = [0, 0];\n    /** prevents node overlap, may overflow boundingBox if not enough space */\n    _this.preventOverlap = true;\n    /** extra spacing around nodes when preventOverlap: true */\n    _this.preventOverlapPadding = 10;\n    /** uses all available space on false, uses minimal space on true */\n    _this.condense = false;\n    /** a sorting function to order the nodes; e.g. function(a, b){ return a.datapublic ('weight') - b.data('weight') } */\n    _this.sortBy = \"degree\";\n    _this.nodes = [];\n    _this.edges = [];\n    _this.width = 300;\n    _this.height = 300;\n    _this.row = 0;\n    _this.col = 0;\n    _this.cellWidth = 0;\n    _this.cellHeight = 0;\n    _this.cellUsed = {};\n    _this.id2manPos = {};\n    /** 迭代结束的回调函数 */\n    _this.onLayoutEnd = function () {};\n    _this.updateCfg(options);\n    return _this;\n  }\n  GridLayout.prototype.getDefaultCfg = function () {\n    return {\n      begin: [0, 0],\n      preventOverlap: true,\n      preventOverlapPadding: 10,\n      condense: false,\n      rows: undefined,\n      cols: undefined,\n      position: undefined,\n      sortBy: \"degree\",\n      nodeSize: 30\n    };\n  };\n  /**\n   * 执行布局\n   */\n  GridLayout.prototype.execute = function () {\n    var self = this;\n    var nodes = self.nodes,\n      edges = self.edges,\n      begin = self.begin;\n    var n = nodes.length;\n    if (n === 0) {\n      if (self.onLayoutEnd) self.onLayoutEnd();\n      return {\n        nodes: nodes,\n        edges: edges\n      };\n    }\n    if (n === 1) {\n      nodes[0].x = begin[0];\n      nodes[0].y = begin[1];\n      if (self.onLayoutEnd) self.onLayoutEnd();\n      return {\n        nodes: nodes,\n        edges: edges\n      };\n    }\n    var sortBy = self.sortBy,\n      width = self.width,\n      height = self.height;\n    var condense = self.condense,\n      preventOverlapPadding = self.preventOverlapPadding,\n      preventOverlap = self.preventOverlap,\n      paramNodeSpacing = self.nodeSpacing,\n      paramNodeSize = self.nodeSize;\n    var layoutNodes = [];\n    nodes.forEach(function (node) {\n      layoutNodes.push(node);\n    });\n    var nodeIdxMap = {};\n    layoutNodes.forEach(function (node, i) {\n      nodeIdxMap[node.id] = i;\n    });\n    if (sortBy === \"degree\" || !(0, util_1.isString)(sortBy) || layoutNodes[0][sortBy] === undefined) {\n      sortBy = \"degree\";\n      if ((0, util_1.isNaN)(nodes[0].degree)) {\n        var values_1 = (0, util_1.getDegree)(layoutNodes.length, nodeIdxMap, edges);\n        layoutNodes.forEach(function (node, i) {\n          node.degree = values_1[i].all;\n        });\n      }\n    }\n    // sort nodes by value\n    layoutNodes.sort(function (n1, n2) {\n      return n2[sortBy] - n1[sortBy];\n    });\n    if (!width && typeof window !== \"undefined\") {\n      width = window.innerWidth;\n    }\n    if (!height && typeof window !== \"undefined\") {\n      height = window.innerHeight;\n    }\n    var oRows = self.rows;\n    var oCols = self.cols != null ? self.cols : self.columns;\n    self.cells = n;\n    // if rows or columns were set in self, use those values\n    if (oRows != null && oCols != null) {\n      self.rows = oRows;\n      self.cols = oCols;\n    } else if (oRows != null && oCols == null) {\n      self.rows = oRows;\n      self.cols = Math.ceil(self.cells / self.rows);\n    } else if (oRows == null && oCols != null) {\n      self.cols = oCols;\n      self.rows = Math.ceil(self.cells / self.cols);\n    } else {\n      // otherwise use the automatic values and adjust accordingly\t      // otherwise use the automatic values and adjust accordingly\n      // width/height * splits^2 = cells where splits is number of times to split width\n      self.splits = Math.sqrt(self.cells * self.height / self.width);\n      self.rows = Math.round(self.splits);\n      self.cols = Math.round(self.width / self.height * self.splits);\n    }\n    self.rows = Math.max(self.rows, 1);\n    self.cols = Math.max(self.cols, 1);\n    if (self.cols * self.rows > self.cells) {\n      // otherwise use the automatic values and adjust accordingly\n      // if rounding was up, see if we can reduce rows or columns\n      var sm = self.small();\n      var lg = self.large();\n      // reducing the small side takes away the most cells, so try it first\n      if ((sm - 1) * lg >= self.cells) {\n        self.small(sm - 1);\n      } else if ((lg - 1) * sm >= self.cells) {\n        self.large(lg - 1);\n      }\n    } else {\n      // if rounding was too low, add rows or columns\n      while (self.cols * self.rows < self.cells) {\n        var sm = self.small();\n        var lg = self.large();\n        // try to add to larger side first (adds less in multiplication)\n        if ((lg + 1) * sm >= self.cells) {\n          self.large(lg + 1);\n        } else {\n          self.small(sm + 1);\n        }\n      }\n    }\n    self.cellWidth = width / self.cols;\n    self.cellHeight = height / self.rows;\n    if (condense) {\n      self.cellWidth = 0;\n      self.cellHeight = 0;\n    }\n    if (preventOverlap || paramNodeSpacing) {\n      var nodeSpacing_1 = (0, util_1.getFuncByUnknownType)(10, paramNodeSpacing);\n      var nodeSize_1 = (0, util_1.getFuncByUnknownType)(30, paramNodeSize, false);\n      layoutNodes.forEach(function (node) {\n        if (!node.x || !node.y) {\n          // for bb\n          node.x = 0;\n          node.y = 0;\n        }\n        var res = nodeSize_1(node) || 30;\n        var nodeW;\n        var nodeH;\n        if ((0, util_1.isArray)(res)) {\n          nodeW = res[0];\n          nodeH = res[1];\n        } else {\n          nodeW = res;\n          nodeH = res;\n        }\n        var p = nodeSpacing_1 !== undefined ? nodeSpacing_1(node) : preventOverlapPadding;\n        var w = nodeW + p;\n        var h = nodeH + p;\n        self.cellWidth = Math.max(self.cellWidth, w);\n        self.cellHeight = Math.max(self.cellHeight, h);\n      });\n    }\n    self.cellUsed = {}; // e.g. 'c-0-2' => true\n    // to keep track of current cell position\n    self.row = 0;\n    self.col = 0;\n    // get a cache of all the manual positions\n    self.id2manPos = {};\n    for (var i = 0; i < layoutNodes.length; i++) {\n      var node = layoutNodes[i];\n      var rcPos = void 0;\n      if (self.position) {\n        rcPos = self.position(node);\n      }\n      if (rcPos && (rcPos.row !== undefined || rcPos.col !== undefined)) {\n        // must have at least row or col def'd\n        var pos = {\n          row: rcPos.row,\n          col: rcPos.col\n        };\n        if (pos.col === undefined) {\n          // find unused col\n          pos.col = 0;\n          while (self.used(pos.row, pos.col)) {\n            pos.col++;\n          }\n        } else if (pos.row === undefined) {\n          // find unused row\n          pos.row = 0;\n          while (self.used(pos.row, pos.col)) {\n            pos.row++;\n          }\n        }\n        self.id2manPos[node.id] = pos;\n        self.use(pos.row, pos.col);\n      }\n      self.getPos(node);\n    }\n    if (self.onLayoutEnd) self.onLayoutEnd();\n    return {\n      edges: edges,\n      nodes: layoutNodes\n    };\n  };\n  GridLayout.prototype.small = function (val) {\n    var self = this;\n    var res;\n    var rows = self.rows || 5;\n    var cols = self.cols || 5;\n    if (val == null) {\n      res = Math.min(rows, cols);\n    } else {\n      var min = Math.min(rows, cols);\n      if (min === self.rows) {\n        self.rows = val;\n      } else {\n        self.cols = val;\n      }\n    }\n    return res;\n  };\n  GridLayout.prototype.large = function (val) {\n    var self = this;\n    var res;\n    var rows = self.rows || 5;\n    var cols = self.cols || 5;\n    if (val == null) {\n      res = Math.max(rows, cols);\n    } else {\n      var max = Math.max(rows, cols);\n      if (max === self.rows) {\n        self.rows = val;\n      } else {\n        self.cols = val;\n      }\n    }\n    return res;\n  };\n  GridLayout.prototype.used = function (row, col) {\n    var self = this;\n    return self.cellUsed[\"c-\".concat(row, \"-\").concat(col)] || false;\n  };\n  GridLayout.prototype.use = function (row, col) {\n    var self = this;\n    self.cellUsed[\"c-\".concat(row, \"-\").concat(col)] = true;\n  };\n  GridLayout.prototype.moveToNextCell = function () {\n    var self = this;\n    var cols = self.cols || 5;\n    self.col++;\n    if (self.col >= cols) {\n      self.col = 0;\n      self.row++;\n    }\n  };\n  GridLayout.prototype.getPos = function (node) {\n    var self = this;\n    var begin = self.begin,\n      cellWidth = self.cellWidth,\n      cellHeight = self.cellHeight;\n    var x;\n    var y;\n    // see if we have a manual position set\n    var rcPos = self.id2manPos[node.id];\n    if (rcPos) {\n      x = rcPos.col * cellWidth + cellWidth / 2 + begin[0];\n      y = rcPos.row * cellHeight + cellHeight / 2 + begin[1];\n    } else {\n      // otherwise set automatically\n      while (self.used(self.row, self.col)) {\n        self.moveToNextCell();\n      }\n      x = self.col * cellWidth + cellWidth / 2 + begin[0];\n      y = self.row * cellHeight + cellHeight / 2 + begin[1];\n      self.use(self.row, self.col);\n      self.moveToNextCell();\n    }\n    node.x = x;\n    node.y = y;\n  };\n  GridLayout.prototype.getType = function () {\n    return \"grid\";\n  };\n  return GridLayout;\n}(base_1.Base);\nexports.GridLayout = GridLayout;","map":{"version":3,"mappings":"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","names":["__extends","options","_super","_this","updateCfg","GridLayout","begin","preventOverlap","preventOverlapPadding","condense","rows","undefined","cols","position","sortBy","nodeSize","self","edges","n","nodes","length","onLayoutEnd","x","y","width","height","paramNodeSpacing","paramNodeSize","layoutNodes","forEach","node","push","nodeIdxMap","i","id","degree","values_1","all","sort","n1","n2","window","innerWidth","innerHeight","oRows","oCols","columns","cells","Math","ceil","splits","sqrt","round","max","sm","small","lg","large","cellWidth","cellHeight","nodeSpacing_1","nodeSize_1","res","nodeW","nodeH","p","w","h","cellUsed","row","col","id2manPos","rcPos","pos","used","use","getPos","val","min","moveToNextCell","base_1","exports"],"sourceRoot":"","sources":["../../src/layout/grid.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script","externalDependencies":[]}