{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, reactive } from 'vue';\nimport Different from '@/components/different.vue';\nexport default {\n  __name: 'noCollapseTable',\n  props: {\n    title: {\n      type: String,\n      default: ''\n    },\n    columns: {\n      type: Array,\n      default: () => []\n    },\n    setColumnsData: {\n      type: Array,\n      default: () => []\n    },\n    // 表头\n    data: {\n      type: Array,\n      default: () => []\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    },\n    expandedRowKeys: {\n      type: Array,\n      default: () => []\n    }\n  },\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const props = __props;\n    const modalVisible = ref(false);\n    const setVisible = ref(false);\n    const setColumnsList = ref([]);\n    const defaultCheckList = ref([]);\n    const data = ref(props.data);\n    //单行高亮处理\n    const activeRowClass = record => {\n      if (record.raw.isGreenLight) {\n        return 'activeRowGreen';\n      } else if (record.raw.isRate) {\n        return 'activeRowPurple';\n      } else {\n        return '';\n      }\n    };\n    // 打开环比差\n    const handleDifference = () => {\n      modalVisible.value = true;\n    };\n    // 关闭\n    const handleClose = () => {\n      modalVisible.value = false;\n    };\n    // 点击数据设置\n    const handleSetting = () => {\n      setColumnsList.value = [];\n      setVisible.value = true;\n      props.setColumnsData.forEach(item => {\n        setColumnsList.value.push(item.analysis);\n      });\n    };\n    const changeSet = val => {\n      console.log(val, 'val');\n      let arr = [];\n      data.value = props.data;\n      props.setColumnsData.forEach(item => {\n        if (val.indexOf(item.analysis) !== -1) {\n          arr.push(item);\n        }\n      });\n      console.log(arr, 'arr');\n      data.value = arr.concat(data.value);\n      console.log(data.value, 'data.value');\n    };\n    const __returned__ = {\n      props,\n      modalVisible,\n      setVisible,\n      setColumnsList,\n      defaultCheckList,\n      data,\n      activeRowClass,\n      handleDifference,\n      handleClose,\n      handleSetting,\n      changeSet,\n      ref,\n      reactive,\n      Different\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"mappings":";AAsFA,SAASA,GAAG,EAACC,QAAQ,QAAO,KAAK;AACjC,OAAOC,SAAS,MAAO,4BAA4B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IA4BnD,MAAMC,YAAY,GAAGH,GAAG,CAAC,KAAK,CAAC;IAC/B,MAAMI,UAAU,GAAGJ,GAAG,CAAC,KAAK,CAAC;IAC7B,MAAMK,cAAc,GAAGL,GAAG,CAAC,EAAE,CAAC;IAC9B,MAAMM,gBAAgB,GAAGN,GAAG,CAAC,EAAE,CAAC;IAChC,MAAMO,IAAI,GAAGP,GAAG,CAACQ,KAAK,CAACD,IAAI,CAAC;IAC5B;IACA,MAAME,cAAc,GAAIC,MAAM,IAAK;MAC/B,IAAGA,MAAM,CAACC,GAAG,CAACC,YAAY,EAAC;QACvB,OAAO,gBAAgB;MAC3B,CAAC,MAAK,IAAGF,MAAM,CAACC,GAAG,CAACE,MAAM,EAAC;QACvB,OAAO,iBAAiB;MAC5B,CAAC,MAAI;QACD,OAAO,EAAE;MACb;IACJ,CAAC;IACD;IACA,MAAMC,gBAAgB,GAAG,MAAM;MAC3BX,YAAY,CAACY,KAAK,GAAG,IAAI;IAC7B,CAAC;IACD;IACA,MAAMC,WAAW,GAAG,MAAM;MAC1Bb,YAAY,CAACY,KAAK,GAAG,KAAK;IAC1B,CAAC;IACD;IACA,MAAME,aAAa,GAAG,MAAI;MACtBZ,cAAc,CAACU,KAAK,GAAG,EAAE;MACzBX,UAAU,CAACW,KAAK,GAAG,IAAI;MACvBP,KAAK,CAACU,cAAc,CAACC,OAAO,CAACC,IAAI,IAAE;QAC/Bf,cAAc,CAACU,KAAK,CAACM,IAAI,CAACD,IAAI,CAACE,QAAQ,CAAC;MAC5C,CAAC,CAAC;IACN,CAAC;IACD,MAAMC,SAAS,GAAGC,GAAG,IAAG;MACxBC,OAAO,CAACC,GAAG,CAACF,GAAG,EAAC,KAAK,CAAC;MACtB,IAAIG,GAAG,GAAG,EAAE;MACZpB,IAAI,CAACQ,KAAK,GAAEP,KAAK,CAACD,IAAI;MACtBC,KAAK,CAACU,cAAc,CAACC,OAAO,CAACC,IAAI,IAAE;QAC/B,IAAGI,GAAG,CAACI,OAAO,CAACR,IAAI,CAACE,QAAQ,CAAC,KAAG,CAAC,CAAC,EAAC;UAC/BK,GAAG,CAACN,IAAI,CAACD,IAAI,CAAC;QAClB;MACJ,CAAC,CAAC;MACFK,OAAO,CAACC,GAAG,CAACC,GAAG,EAAC,KAAK,CAAC;MACtBpB,IAAI,CAACQ,KAAK,GAAGY,GAAG,CAACE,MAAM,CAACtB,IAAI,CAACQ,KAAK,CAAC;MACnCU,OAAO,CAACC,GAAG,CAACnB,IAAI,CAACQ,KAAK,EAAC,YAAY,CAAC;IACpC,CAAC","names":["ref","reactive","Different","modalVisible","setVisible","setColumnsList","defaultCheckList","data","props","activeRowClass","record","raw","isGreenLight","isRate","handleDifference","value","handleClose","handleSetting","setColumnsData","forEach","item","push","analysis","changeSet","val","console","log","arr","indexOf","concat"],"sources":["/Users/lijiaxin/Documents/workspace/hydsoft-oms-frontend/src/components/noCollapseTable.vue"],"sourcesContent":["<template>\n  <div>\n      <!-- 不折叠表格部分 -->\n      <div class=\"m-t-40 flex-between\">\n          <div class=\"flex-column-start\">\n              <a-button type=\"text\" style=\"color:#333\">\n                  <template #icon>\n                      <icon-layers />\n                  </template>\n                  <h3>{{ props.title }}</h3>\n              </a-button>\n              <span style=\"font-size: 12px;color:#666;font-weight: 500;margin-top:6px\">金额单位：万元</span>\n          </div>\n          <div>\n              <a-button type=\"text\" style=\"color:#5370FF;font-weight:500\" @click=\"handleDifference\">\n                  环比差\n              </a-button>\n              <!-- <a-trigger trigger=\"click\"  style=\"width: 160px;height:200px;padding: 10px;background-color: white;box-shadow: 0px 1px 4px rgba(0, 0, 0, 0.2);\">\n                <icon-settings style=\"color:#5370FF;margin-left:20px;font-size: 14px;font-weight:500\" @click=\"handleSetting\"/>\n                <template #content>\n                    <div >\n                        <div class=\"title\"> \n                            数据设置\n                            <hr>\n                        </div>\n                        <div class=\"m-t-40\" style=\"overflow: scroll;\">\n                            <a-checkbox-group v-model=\"defaultCheckList\" @change=\"changeSet\" style=\"margin-bottom: 30px;\">\n                                <a-checkbox  v-for=\"item of setColumnsList\" :key=\"item\" :value=\"item\">\n                                    {{ item }}\n                                </a-checkbox>\n                            </a-checkbox-group>\n                        </div>\n                    </div>\n                    <div style=\"background-color: antiquewhite;position: absolute;bottom: 0;\">\n                        <a-button style=\"width: 50px;height:20px;\" type=\"primary\">取消</a-button>\n                        <a-button style=\"width: 50px;height:20px;margin-left: 10px;\" type=\"primary\">确认</a-button>\n                    </div>\n                </template>\n             </a-trigger> -->\n              <a-dropdown position=\"bl\" :hide-on-select=\"false\">\n                <icon-settings style=\"color:#5370FF;margin-left:20px;font-size: 14px;font-weight:500\" @click=\"handleSetting\"/>\n                <template #content>\n                    <a-dgroup>\n                        <template #title>\n                        <div> \n                            数据设置\n                            <hr>\n                        </div>\n                        </template>\n                        <div class=\"m-t-40\">\n                            <a-doption v-for=\"item of setColumnsList\" :key=\"item\" >     \n                                <a-checkbox-group v-model=\"defaultCheckList\" @change=\"changeSet\">\n                                <a-checkbox  :value=\"item\">\n                                    {{ item }}\n                                </a-checkbox>\n                                </a-checkbox-group>\n                            </a-doption>\n                        </div>\n                    </a-dgroup>\n                </template>\n                <template #footer>\n                    <div style=\"padding: 10px;\">\n                        <a-button style=\"width: 50px;height:20px;\" type=\"primary\">取消</a-button>\n                        <a-button style=\"width: 50px;height:20px;margin-left: 10px;\" type=\"primary\">确认</a-button>\n                    </div>\n                </template>\n              </a-dropdown>\n          </div>\n      </div>\n      <a-table \n      class=\"m-t-20 arcoTable_columnsWidthAuto\" \n      :columns=\"(props.columns.length && props.columns) || []\"  \n      :data=\"data\"  \n      :loading=\"props.loading\"\n      :expanded-keys=\"props.expandedRowKeys\"\n      :pagination=\"false\" \n      :row-class=\"activeRowClass\"\n      show-empty-tree \n      :bordered=\"{wrapper: true, cell: true}\" \n      />\n      <Different :modalVisible=\"modalVisible\" :data=\"props.data\" :columns=\"props.columns\" @handleClose=\"handleClose\"/>\n      <!-- <a-modal  title=\"环比配置\" width=\"200px\" title-align=\"start\" :mask=\"false\" v-model:visible=\"setVisible\" :alignCenter=\"false\"/> -->\n  </div>\n</template>\n\n<script setup>\nimport { ref,reactive} from 'vue';\nimport Different from  '@/components/different.vue';\nconst props = defineProps({\n    title:{\n        type:String,\n        default:''\n    },\n    columns: {\n        type: Array,\n        default: () => [],\n    },\n    setColumnsData:{\n        type: Array,\n        default: () => [],\n    },\n    // 表头\n    data: {\n        type: Array,\n        default: () => [],\n    },\n    loading:{\n        type:Boolean,\n        default:false\n    },\n    expandedRowKeys:{\n        type: Array,\n        default: () => [],\n    },\n});\nconst modalVisible = ref(false);\nconst setVisible = ref(false);\nconst setColumnsList = ref([]);\nconst defaultCheckList = ref([]);\nconst data = ref(props.data);\n//单行高亮处理\nconst activeRowClass = (record) => {\n    if(record.raw.isGreenLight){\n        return 'activeRowGreen'\n    }else if(record.raw.isRate){\n        return 'activeRowPurple'\n    }else{\n        return ''\n    }\n};\n// 打开环比差\nconst handleDifference = () => {\n    modalVisible.value = true;\n};\n// 关闭\nconst handleClose = () => {\nmodalVisible.value = false;\n};\n// 点击数据设置\nconst handleSetting = ()=>{\n    setColumnsList.value = []\n    setVisible.value = true;\n    props.setColumnsData.forEach(item=>{\n        setColumnsList.value.push(item.analysis)\n    })\n}\nconst changeSet =(val)=>{\nconsole.log(val,'val');\nlet arr = [];\ndata.value =props.data;\nprops.setColumnsData.forEach(item=>{\n    if(val.indexOf(item.analysis)!==-1){\n        arr.push(item);\n    }\n})\nconsole.log(arr,'arr');\ndata.value = arr.concat(data.value);\nconsole.log(data.value,'data.value');\n}\n</script>\n\n<style lang=\"scss\" scoped>\n:deep(.activeRowGreen > .arco-table-td) {\n    background-color: rgb(234, 248, 243) !important;\n}\n:deep(.activeRowPurple > .arco-table-td) {\n    background-color: rgb(240, 237, 248) !important;\n}\n:global(.arco-dropdown-group-title){\n    background-color: white;\n    position: fixed;\n    margin-top:-40px !important;\n    z-index:9999;\n    font-size:12px;\n    color:rgba(0, 0, 0, 0.647058823529412);\n}\n.title{\n    width: 100%;\n    background-color: white;\n    position: fixed;\n    margin-top:-40px !important;\n    z-index:9999;\n    font-size:12px;\n    color:rgba(0, 0, 0, 0.647058823529412);\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}