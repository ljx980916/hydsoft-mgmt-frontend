{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, reactive, watch, onBeforeMount } from 'vue';\nimport { differentColumns } from '@/views/demo/constColumns.js';\nimport Icon from '@/components/icon.vue';\nimport { getCurrentDate } from '@/utils/util.js';\nimport { countWorkdaysByMonth } from \"@/api/drillAnalyze.js\";\nexport default {\n  __name: 'different',\n  props: {\n    data: {\n      type: Array,\n      default: () => []\n    },\n    columns: {\n      type: Array,\n      default: () => []\n    },\n    modalVisible: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [\"handleClose\"],\n  setup(__props, {\n    expose,\n    emit\n  }) {\n    expose();\n    const props = __props;\n    let {\n      year\n    } = getCurrentDate();\n    const dataContent = reactive({\n      columns: JSON.parse(JSON.stringify(differentColumns)),\n      dataSourse: [],\n      loading: false\n    });\n    const visible = ref(props.modalVisible);\n    const expandedRowKeys = ref([]);\n    const monthBeforeIcon = ref('caret-right');\n    const monthBeforeValue = ref('');\n    const monthAfterIcon = ref('caret-right');\n    const monthAfterValue = ref('');\n    const QBeforeIcon = ref('caret-right');\n    const QBeforeValue = ref('');\n    const QAfterIcon = ref('caret-right');\n    const QAfterValue = ref('');\n    watch(() => props.modalVisible, (newVal, oldVal) => {\n      if (newVal) {\n        visible.value = newVal;\n        dataContent.columns = JSON.parse(JSON.stringify(differentColumns));\n        dataContent.dataSourse = dealDifferentData(props.data).arr;\n        expandedRowKeys.value = dealDifferentData(props.data).keyArr;\n      }\n    });\n    onBeforeMount(() => {\n      differentColumns.forEach(item => {\n        let month = 0;\n        if (item.dataIndex.substring(0, 5) == 'month') {\n          month = item.dataIndex.substring(5);\n          const params = {\n            month: `${year}-${month}`\n          };\n          countWorkdaysByMonth(params).then(res => {\n            if (res.code === \"200\") {\n              item.days = res.data;\n            }\n          }).catch(() => {\n            Message.error(\"请求失败\");\n          });\n        }\n      });\n    });\n\n    // 展开\n    const expandedChange = rowkeys => {\n      expandedRowKeys.value = rowkeys;\n    };\n    const dealQData = Q => {\n      if (isNaN(Q) || Q == 0) {\n        Q1 = '-';\n      }\n    };\n    // 环差比数据处理\n    let keyArr = [];\n    const dealDifferentData = arr => {\n      let dataIndex1 = '';\n      let dataIndex2 = '';\n      let dataIndex3 = '';\n      let dataIndex4 = '';\n      dataContent.columns.forEach(ele => {\n        if (ele.titleSlotName == \"monthBefore\") {\n          dataIndex1 = ele.dataIndex;\n        }\n        if (ele.titleSlotName == \"monthAfter\") {\n          dataIndex2 = ele.dataIndex;\n        }\n        if (ele.titleSlotName == \"QBefore\") {\n          dataIndex3 = ele.dataIndex;\n        }\n        if (ele.titleSlotName == \"QAfter\") {\n          dataIndex4 = ele.dataIndex;\n        }\n      });\n      Array.isArray(arr) && arr.forEach((item, index) => {\n        keyArr.push(item.key);\n        // 季度数据\n        for (var i = 1; i <= 12; i++) {\n          if (item[`month${i}`] == '-') {\n            item[`month${i}`] = 0;\n          }\n        }\n        console.log(item.month1, item.month2, 11);\n        item.Q1 = Number(item.month1 + item.month2 + item.month3).toFixed(2);\n        item.Q2 = Number(item.month4 + item.month5 + item.month6).toFixed(2);\n        item.Q3 = Number(item.month7 + item.month8 + item.month9).toFixed(2);\n        item.Q4 = Number(item.month10 + item.month11 + item.month12).toFixed(2);\n        dealQData(item.Q1);\n        dealQData(item.Q2);\n        dealQData(item.Q3);\n        dealQData(item.Q4);\n        for (var i = 1; i <= 12; i++) {\n          if (item[`month${i}`] == 0) {\n            item[`month${i}`] = '-';\n          }\n        }\n        // 月份\n        if (!item.isRate) {\n          if (item[dataIndex2] !== '-' && item[dataIndex1] !== '-') {\n            item.monthDifferent = Number(item[dataIndex2] - item[dataIndex1]).toFixed(2);\n            item.MonthonMonth = Number((item[dataIndex2] - item[dataIndex1]) / item[dataIndex1] * 100).toFixed(2) + '%';\n          } else if (item[dataIndex1] !== '-' && item[dataIndex2] == '-') {\n            item.monthDifferent = Number(0 - item[dataIndex1]).toFixed(2);\n            item.MonthonMonth = Number((0 - item[dataIndex1]) / item[dataIndex1] * 100).toFixed(2) + '%';\n          } else if (item[dataIndex1] == '-' && item[dataIndex2] !== '-') {\n            item.monthDifferent = Number(item[dataIndex2] - 0).toFixed(2);\n            item.MonthonMonth = '-';\n          } else {\n            item.monthDifferent = '-';\n            item.MonthonMonth = '-';\n          }\n        } else {\n          if (item[dataIndex2] !== '-' && item[dataIndex1] !== '-') {\n            let num1 = item[dataIndex1].substring(0, item[dataIndex1].length - 1);\n            let num2 = item[dataIndex2].substring(0, item[dataIndex2].length - 1);\n            item.monthDifferent = Number(num2 - num1).toFixed(2) + '%';\n            item.MonthonMonth = Number((num2 - num1) / num1).toFixed(2) + '%';\n          } else if (item[dataIndex1] !== '-' && item[dataIndex2] == '-') {\n            let num1 = item[dataIndex1].substring(0, item[dataIndex1].length - 1);\n            item.monthDifferent = Number(0 - num1).toFixed(2) + '%';\n            item.MonthonMonth = Number((0 - num1) / num1).toFixed(2) + '%';\n          } else if (item[dataIndex1] == '-' && item[dataIndex2] !== '-') {\n            let num2 = item[dataIndex2].substring(0, item[dataIndex2].length - 1);\n            item.monthDifferent = Number(num2 - 0).toFixed(2) + '%';\n            item.MonthonMonth = '-';\n          } else {\n            item.monthDifferent = '-';\n            item.MonthonMonth = '-';\n          }\n        }\n        // 季度\n        if (!item.isRate) {\n          if (item[dataIndex4] !== '-' && item[dataIndex3] !== '-') {\n            item.QDifferent = Number(item[dataIndex4] - item[dataIndex3]).toFixed(2);\n            item.QonQ = Number((item[dataIndex4] - item[dataIndex3]) / item[dataIndex3] * 100).toFixed(2) + '%';\n          } else if (item[dataIndex3] !== '-' && item[dataIndex4] == '-') {\n            item.QDifferent = Number(0 - item[dataIndex3]).toFixed(2);\n            item.QonQ = Number((0 - item[dataIndex3]) / item[dataIndex3] * 100).toFixed(2) + '%';\n          } else if (item[dataIndex3] == '-' && item[dataIndex4] !== '-') {\n            item.QDifferent = Number(item[dataIndex4] - 0).toFixed(2);\n            item.QonQ = '-';\n          } else {\n            item.QDifferent = '-';\n            item.QonQ = '-';\n          }\n        } else {\n          if (item[dataIndex4] !== '-' && item[dataIndex3] !== '-') {\n            let num1 = item[dataIndex3].substring(0, item[dataIndex3].length - 1);\n            let num2 = item[dataIndex4].substring(0, item[dataIndex4].length - 1);\n            item.QDifferent = Number(num2 - num1).toFixed(2) + '%';\n            item.QonQ = Number((num2 - num1) / num1).toFixed(2) + '%';\n          } else if (item[dataIndex3] !== '-' && item[dataIndex4] == '-') {\n            let num1 = item[dataIndex3].substring(0, item[dataIndex3].length - 1);\n            item.QDifferent = Number(0 - num1).toFixed(2) + '%';\n            item.QonQ = Number((0 - num1) / num1).toFixed(2) + '%';\n          } else if (item[dataIndex3] == '-' && item[dataIndex4] !== '-') {\n            let num2 = item[dataIndex4].substring(0, item[dataIndex4].length - 1);\n            item.QDifferent = Number(num2 - 0).toFixed(2) + '%';\n            item.QonQ = '-';\n          } else {\n            item.QDifferent = '-';\n            item.QonQ = '-';\n          }\n        }\n        if (item.children && item.children.length) {\n          dealDifferentData(item.children);\n        }\n      });\n      return {\n        arr,\n        keyArr\n      };\n    };\n    // 时间选择器开关\n    const changeVisible = (e, flag) => {\n      if (flag == 'MB') {\n        if (e) {\n          monthBeforeIcon.value = 'caret-down';\n        } else {\n          monthBeforeIcon.value = 'caret-right';\n        }\n      }\n      if (flag == 'MA') {\n        if (e) {\n          monthAfterIcon.value = 'caret-down';\n        } else {\n          monthAfterIcon.value = 'caret-right';\n        }\n      }\n      if (flag == 'QB') {\n        if (e) {\n          QBeforeIcon.value = 'caret-down';\n        } else {\n          QBeforeIcon.value = 'caret-right';\n        }\n      }\n      if (flag == 'QA') {\n        if (e) {\n          QAfterIcon.value = 'caret-down';\n        } else {\n          QAfterIcon.value = 'caret-right';\n        }\n      }\n    };\n    // 处理月份标题\n    const dealMonthTitle = (e, flag) => {\n      let str = e.substr(e.length - 2);\n      let num = '';\n      if (str.substr(0, 1) == 0) {\n        num = str.substr(1);\n      } else {\n        num = str;\n      }\n      props.columns.forEach(item => {\n        // 确定是month表头\n        if (item.dataIndex.substr(0, 5) == 'month') {\n          // 选择的月份 == 折叠表格的某个表头\n          if (num == item.dataIndex.substr(5)) {\n            // 对应的表头更换\n            dataContent.columns.forEach(ele => {\n              if (flag == 'MB') {\n                if (ele.titleSlotName == 'monthBefore') {\n                  ele.dataIndex = item.dataIndex;\n                  ele.title = num + '月';\n                  ele.days = item.days;\n                }\n                if (ele.dataIndex == 'monthDifferent') {\n                  const parts = ele.title.split('-'); // 将字符串分割为两部分  \n                  parts[1] = num; // 替换'-'后的数字  \n                  ele.title = parts.join('-') + '月'; // 将两部分重新组合为字符串，并用'-'连接\n                }\n              }\n\n              if (flag == 'MA') {\n                if (ele.titleSlotName == 'monthAfter') {\n                  ele.dataIndex = item.dataIndex;\n                  ele.title = num + '月';\n                  ele.days = item.days;\n                }\n                if (ele.dataIndex == 'monthDifferent') {\n                  const parts = ele.title.split('-'); // 将字符串分割为两部分  \n                  parts[0] = num; // 替换'-'前的数字  \n                  ele.title = parts.join('-'); // 将两部分重新组合为字符串，并用'-'连接\n                }\n              }\n            });\n          }\n        }\n      });\n\n      dataContent.dataSourse = dealDifferentData(props.data).arr;\n    };\n    // 处理季度标题\n    const dealQTitle = (e, flag) => {\n      let str = e.substr(e.length - 2);\n      let num = '';\n      if (str.substr(0, 1) == 0) {\n        num = str.substr(1);\n      } else {\n        num = str;\n      }\n      const QList = [{\n        label: '1',\n        value: 'Q1'\n      }, {\n        label: '4',\n        value: 'Q2'\n      }, {\n        label: '7',\n        value: 'Q3'\n      }, {\n        label: '10',\n        value: 'Q4'\n      }];\n      // 对应的表头更换\n      dataContent.columns.forEach(ele => {\n        if (flag == 'QB') {\n          if (ele.titleSlotName == 'QBefore') {\n            //num对应的Q\n            ele.title = ele.dataIndex = QList.filter(item => item.label == num)[0].value;\n          }\n          if (ele.dataIndex == 'QDifferent') {\n            const parts = ele.title.split('-'); // 将字符串分割为两部分  \n            parts[1] = QList.filter(item => item.label == num)[0].value; // 替换'-'后的数字\n            ele.title = parts.join('-'); // 将两部分重新组合为字符串，并用'-'连接\n          }\n        }\n\n        if (flag == 'QA') {\n          if (ele.titleSlotName == 'QAfter') {\n            ele.title = ele.dataIndex = QList.filter(item => item.label == num)[0].value;\n          }\n          if (ele.dataIndex == 'QDifferent') {\n            const parts = ele.title.split('-'); // 将字符串分割为两部分  \n            parts[0] = QList.filter(item => item.label == num)[0].value; // 替换'-'前的数字  \n            ele.title = parts.join('-'); // 将两部分重新组合为字符串，并用'-'连接\n          }\n        }\n      });\n\n      dataContent.dataSourse = dealDifferentData(props.data).arr;\n    };\n    // 更改时间\n    const changeTime = (e, flag) => {\n      if (flag == 'MB') {\n        monthBeforeValue.value = e;\n        dealMonthTitle(e, flag);\n      }\n      if (flag == 'MA') {\n        monthAfterValue.value = e;\n        dealMonthTitle(e, flag);\n      }\n      if (flag == 'QA') {\n        QAfterValue.value = e;\n        dealQTitle(e, flag);\n      }\n      if (flag == 'QB') {\n        QBeforeValue.value = e;\n        dealQTitle(e, flag);\n      }\n    };\n    // 关闭\n    const handleClose = () => {\n      emit(\"handleClose\", false);\n    };\n    //单行高亮处理\n    const activeRowClass = record => {\n      if (record.raw.isGreenLight) {\n        return 'activeRowGreen';\n      } else if (record.raw.isRate) {\n        return 'activeRowPurple';\n      } else {\n        return '';\n      }\n    };\n    const __returned__ = {\n      get year() {\n        return year;\n      },\n      set year(v) {\n        year = v;\n      },\n      props,\n      dataContent,\n      visible,\n      expandedRowKeys,\n      monthBeforeIcon,\n      monthBeforeValue,\n      monthAfterIcon,\n      monthAfterValue,\n      QBeforeIcon,\n      QBeforeValue,\n      QAfterIcon,\n      QAfterValue,\n      emit,\n      expandedChange,\n      dealQData,\n      get keyArr() {\n        return keyArr;\n      },\n      set keyArr(v) {\n        keyArr = v;\n      },\n      dealDifferentData,\n      changeVisible,\n      dealMonthTitle,\n      dealQTitle,\n      changeTime,\n      handleClose,\n      activeRowClass,\n      ref,\n      reactive,\n      watch,\n      onBeforeMount,\n      get differentColumns() {\n        return differentColumns;\n      },\n      Icon,\n      get getCurrentDate() {\n        return getCurrentDate;\n      },\n      get countWorkdaysByMonth() {\n        return countWorkdaysByMonth;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"mappings":"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","names":["ref","reactive","watch","onBeforeMount","differentColumns","Icon","getCurrentDate","countWorkdaysByMonth","year","dataContent","columns","JSON","parse","stringify","dataSourse","loading","visible","props","modalVisible","expandedRowKeys","monthBeforeIcon","monthBeforeValue","monthAfterIcon","monthAfterValue","QBeforeIcon","QBeforeValue","QAfterIcon","QAfterValue","newVal","oldVal","value","dealDifferentData","data","arr","keyArr","forEach","item","month","dataIndex","substring","params","then","res","code","days","catch","Message","error","expandedChange","rowkeys","dealQData","Q","isNaN","Q1","dataIndex1","dataIndex2","dataIndex3","dataIndex4","ele","titleSlotName","Array","isArray","index","push","key","i","console","log","month1","month2","Number","month3","toFixed","Q2","month4","month5","month6","Q3","month7","month8","month9","Q4","month10","month11","month12","isRate","monthDifferent","MonthonMonth","num1","length","num2","QDifferent","QonQ","children","changeVisible","e","flag","dealMonthTitle","str","substr","num","title","parts","split","join","dealQTitle","QList","label","filter","changeTime","handleClose","emit","activeRowClass","record","raw","isGreenLight"],"sources":["/Users/lijiaxin/Documents/workspace/hydsoft-oms-frontend/src/components/different.vue"],"sourcesContent":["<template>\n  <div>\n    <!-- 环比配置 -->\n    <a-modal  title=\"环比配置\" width=\"auto\" title-align=\"start\" v-model:visible=\"visible\" :footer=\"null\" :body-style=\"{padding:'25px'}\" @close=\"handleClose\">\n        <div>\n            <a-table \n                class=\"arcoTable_columnsWidthAuto\" \n                :columns=\"dataContent.columns ||[]\"  \n                :data=\"(dataContent.dataSourse.length && dataContent.dataSourse) || []\"  \n                :loading=\"dataContent.loading\"\n                :pagination=\"false\" \n                :expanded-keys=\"expandedRowKeys\"\n                @expanded-change=\"expandedChange\"\n                show-empty-tree \n                :row-class=\"activeRowClass\"\n                :bordered=\"{wrapper: true, cell: true}\" \n            >\n                <template  v-for=\"item in dataContent.columns\" :key = \"item.dataIndex\"  #[item.titleSlotName]>\n                        <span v-if=\"item.titleSlotName =='monthAfter' || item.titleSlotName =='monthBefore'\">{{ item.title }}<span style=\"color:#999;font-size:12px\">({{ item.days }}天)</span></span>\n                        <span v-if=\"item.titleSlotName =='QAfter' || item.titleSlotName =='QBefore'\">{{ item.title }}</span>\n                       <a-month-picker \n                        v-if=\"item.titleSlotName =='monthBefore'\"\n                        v-model:pickerValue=\"monthBeforeValue\" \n                        @popup-visible-change=\"changeVisible($event,'MB')\"\n                        @change=\"changeTime($event,'MB')\"\n                        size=\"mini\"\n                        position=\"bottom\"\n                        >\n                            <Icon :icon=\"monthBeforeIcon\"></Icon>\n                        </a-month-picker>\n                        <a-month-picker \n                        v-if=\"item.titleSlotName =='monthAfter'\"\n                        v-model:pickerValue=\"monthAfterValue\" \n                        @popup-visible-change=\"changeVisible($event,'MA')\"\n                        @change=\"changeTime($event,'MA')\"\n                        size=\"mini\"\n                        position=\"bottom\"\n                        >\n                            <Icon :icon=\"monthAfterIcon\"></Icon>\n                        </a-month-picker>\n                        <a-quarter-picker \n                        v-if=\"item.titleSlotName =='QBefore'\" \n                        v-model:pickerValue=\"QBeforeValue\" \n                        @popup-visible-change=\"changeVisible($event,'QB')\"\n                        @change=\"changeTime($event,'QB')\"\n                        size=\"mini\"\n                        position=\"bottom\">\n                            <Icon :icon=\"QBeforeIcon\"></Icon>\n                        </a-quarter-picker>\n                        <a-quarter-picker \n                        v-if=\"item.titleSlotName =='QAfter'\" \n                        v-model:pickerValue=\"QAfterValue\" \n                        @popup-visible-change=\"changeVisible($event,'QA')\"\n                        @change=\"changeTime($event,'QA')\"\n                        size=\"mini\"\n                        position=\"bottom\">\n                            <Icon :icon=\"QAfterIcon\"></Icon>\n                        </a-quarter-picker>\n                    <!-- </div> -->\n                </template>\n            </a-table>\n        </div>\n    </a-modal>\n  </div>\n</template>\n\n<script setup>\nimport { ref,reactive,watch,onBeforeMount} from 'vue';\nimport {differentColumns} from '@/views/demo/constColumns.js';\nimport Icon from '@/components/icon.vue';\nimport {getCurrentDate} from '@/utils/util.js';\nimport {countWorkdaysByMonth} from \"@/api/drillAnalyze.js\";\nlet { year} = getCurrentDate();\nconst props = defineProps({\n    data: {\n        type: Array,\n        default: () => [],\n    },\n    columns: {\n        type: Array,\n        default: () => [],\n    },\n    modalVisible:{\n        type:Boolean,\n        default:false\n    }\n});\nconst dataContent = reactive({\n    columns: JSON.parse(JSON.stringify(differentColumns)),\n    dataSourse:[],\n    loading: false\n});\nconst visible = ref(props.modalVisible);\nconst expandedRowKeys = ref([]);\nconst monthBeforeIcon = ref('caret-right');\nconst monthBeforeValue = ref('');\nconst monthAfterIcon = ref('caret-right');\nconst monthAfterValue = ref('');\nconst QBeforeIcon = ref('caret-right');\nconst QBeforeValue = ref('');\nconst QAfterIcon = ref('caret-right');\nconst QAfterValue = ref('');\nwatch(\n() => props.modalVisible,\n(newVal, oldVal) => {\n    if (newVal) {\n        visible.value = newVal;\n        dataContent.columns = JSON.parse(JSON.stringify(differentColumns));\n        dataContent.dataSourse = dealDifferentData(props.data).arr;\n        expandedRowKeys.value = dealDifferentData(props.data).keyArr;\n    }\n    }\n);\nonBeforeMount(()=>{\n    differentColumns.forEach(item=>{\n        let month = 0;\n        if(item.dataIndex.substring(0,5)=='month'){\n            month = item.dataIndex.substring(5)\n            const params = {\n                month: `${year}-${month}`,\n            };\n            countWorkdaysByMonth(params)\n            .then(res => {\n                if (res.code === \"200\") {\n                    item.days = res.data;\n                }\n            })\n            .catch(() => {\n                Message.error(\"请求失败\");\n            });\n        }\n    })\n})\nconst emit = defineEmits([\n\"handleClose\"\n]);\n// 展开\nconst expandedChange = rowkeys =>{\n    expandedRowKeys.value = rowkeys;\n}\nconst dealQData = (Q)=>{\n    if(isNaN(Q) || Q == 0){\n        Q1='-'\n    }\n\n}\n// 环差比数据处理\nlet keyArr = [];\nconst dealDifferentData = (arr)=>{\n    let dataIndex1 = '';\n    let dataIndex2 = '';\n    let dataIndex3 = '';\n    let dataIndex4 = '';\n    dataContent.columns.forEach(ele=>{\n        if(ele.titleSlotName ==\"monthBefore\"){\n            dataIndex1 = ele.dataIndex\n        }\n        if(ele.titleSlotName ==\"monthAfter\"){\n            dataIndex2 = ele.dataIndex\n        }\n        if(ele.titleSlotName ==\"QBefore\"){\n            dataIndex3 = ele.dataIndex\n        }if(ele.titleSlotName ==\"QAfter\"){\n            dataIndex4 = ele.dataIndex\n        }\n    })\n    Array.isArray(arr) && arr.forEach((item,index) => {\n        keyArr.push(item.key);\n        // 季度数据\n        for(var i=1;i<=12;i++){\n            if(item[`month${i}`] == '-'){\n              item[`month${i}`] = 0 ;\n            }\n        } \n        console.log(item.month1,item.month2,11);\n        item.Q1 = Number(item.month1 + item.month2 + item.month3).toFixed(2);\n        item.Q2 = Number(item.month4 + item.month5 + item.month6).toFixed(2);\n        item.Q3 = Number(item.month7 + item.month8 + item.month9).toFixed(2);\n        item.Q4 = Number(item.month10 + item.month11 + item.month12).toFixed(2);\n        dealQData(item.Q1);\n        dealQData(item.Q2);\n        dealQData(item.Q3);\n        dealQData(item.Q4);\n        for(var i=1;i<=12;i++){\n            if(item[`month${i}`] == 0){\n              item[`month${i}`] ='-' ;\n            }\n        } \n        // 月份\n        if(!item.isRate){\n            if(item[dataIndex2] !=='-' && item[dataIndex1] !=='-' ){\n                item.monthDifferent = Number(item[dataIndex2]-item[dataIndex1]).toFixed(2);\n                item.MonthonMonth = Number(((item[dataIndex2]-item[dataIndex1])/item[dataIndex1])*100).toFixed(2)+ '%';\n            }else if(item[dataIndex1] !=='-' && item[dataIndex2] =='-' ){\n                item.monthDifferent = Number(0-item[dataIndex1]).toFixed(2);\n                item.MonthonMonth = Number(((0-item[dataIndex1])/item[dataIndex1])*100).toFixed(2)+ '%';\n            } else if (item[dataIndex1] =='-' && item[dataIndex2] !=='-' ){\n                item.monthDifferent = Number(item[dataIndex2]-0).toFixed(2);\n                item.MonthonMonth = '-';\n            }else{\n                item.monthDifferent='-'\n                item.MonthonMonth='-'\n            }\n        }else{\n            if(item[dataIndex2] !=='-' && item[dataIndex1] !=='-' ){\n                let num1= item[dataIndex1].substring(0,item[dataIndex1].length-1);\n                let num2= item[dataIndex2].substring(0,item[dataIndex2].length-1);\n                item.monthDifferent = Number(num2-num1).toFixed(2)+ '%';\n                item.MonthonMonth = Number((num2-num1)/num1).toFixed(2)+ '%';\n            }else if(item[dataIndex1] !=='-' && item[dataIndex2] =='-' ){\n                let num1= item[dataIndex1].substring(0,item[dataIndex1].length-1);\n                item.monthDifferent = Number(0-num1).toFixed(2)+ '%';\n                item.MonthonMonth = Number((0-num1)/num1).toFixed(2)+ '%';\n            } else if (item[dataIndex1] =='-' && item[dataIndex2] !=='-' ){\n                let num2= item[dataIndex2].substring(0,item[dataIndex2].length-1);\n                item.monthDifferent = Number(num2-0).toFixed(2)+ '%';\n                item.MonthonMonth = '-';\n            }else{\n                item.monthDifferent='-'\n                item.MonthonMonth='-'\n            }\n        }\n        // 季度\n        if(!item.isRate){\n            if(item[dataIndex4] !=='-' && item[dataIndex3] !=='-' ){\n                item.QDifferent = Number(item[dataIndex4]-item[dataIndex3]).toFixed(2);\n                item.QonQ = Number(((item[dataIndex4]-item[dataIndex3])/item[dataIndex3])*100).toFixed(2)+ '%';\n            }else if(item[dataIndex3] !=='-' && item[dataIndex4] =='-' ){\n                item.QDifferent = Number(0-item[dataIndex3]).toFixed(2);\n                item.QonQ = Number(((0-item[dataIndex3])/item[dataIndex3])*100).toFixed(2)+ '%';\n            } else if (item[dataIndex3] =='-' && item[dataIndex4] !=='-' ){\n                item.QDifferent = Number(item[dataIndex4]-0).toFixed(2);\n                item.QonQ = '-';\n            }else{\n                item.QDifferent='-'\n                item.QonQ='-'\n            }\n        }else{\n            if(item[dataIndex4] !=='-' && item[dataIndex3] !=='-' ){\n                let num1= item[dataIndex3].substring(0,item[dataIndex3].length-1);\n                let num2= item[dataIndex4].substring(0,item[dataIndex4].length-1);\n                item.QDifferent = Number(num2-num1).toFixed(2)+ '%';\n                item.QonQ = Number((num2-num1)/num1).toFixed(2)+ '%';\n            }else if(item[dataIndex3] !=='-' && item[dataIndex4] =='-' ){\n                let num1= item[dataIndex3].substring(0,item[dataIndex3].length-1);\n                item.QDifferent = Number(0-num1).toFixed(2)+ '%';\n                item.QonQ = Number((0-num1)/num1).toFixed(2)+ '%';\n            } else if (item[dataIndex3] =='-' && item[dataIndex4] !=='-' ){\n                let num2= item[dataIndex4].substring(0,item[dataIndex4].length-1);\n                item.QDifferent = Number(num2-0).toFixed(2)+ '%';\n                item.QonQ = '-';\n            }else{\n                item.QDifferent='-'\n                item.QonQ='-'\n            }\n        }\n        if(item.children && item.children.length){\n            dealDifferentData(item.children)\n        }\n    })\n    \n    return {arr,keyArr}\n};\n// 时间选择器开关\nconst changeVisible = (e,flag)=>{\n    if(flag =='MB'){\n        if(e){\n                monthBeforeIcon.value = 'caret-down'\n        }else{\n            monthBeforeIcon.value = 'caret-right'\n        }\n    }\n    if(flag =='MA'){\n        if(e){\n                monthAfterIcon.value = 'caret-down'\n        }else{\n            monthAfterIcon.value = 'caret-right'\n        }\n    }\n    if(flag =='QB'){\n        if(e){\n                QBeforeIcon.value = 'caret-down'\n        }else{\n            QBeforeIcon.value = 'caret-right'\n        }\n    }\n    if(flag =='QA'){\n        if(e){\n            QAfterIcon.value = 'caret-down'\n        }else{\n            QAfterIcon.value = 'caret-right'\n        }\n    }\n}\n// 处理月份标题\nconst dealMonthTitle = (e,flag)=>{\n    let str = e.substr(e.length - 2);\n    let num =''\n    if(str.substr(0,1)==0){\n        num = str.substr(1)\n    }else{\n        num = str\n    }\n    props.columns.forEach(item=>{\n        // 确定是month表头\n        if(item.dataIndex.substr(0,5)=='month'){\n            // 选择的月份 == 折叠表格的某个表头\n            if(num == item.dataIndex.substr(5)){\n                // 对应的表头更换\n                dataContent.columns.forEach(ele=>{\n                    if(flag =='MB'){\n                        if(ele.titleSlotName == 'monthBefore'){\n                            ele.dataIndex = item.dataIndex;\n                            ele.title = num +'月';\n                            ele.days = item.days;\n                        }\n                        if(ele.dataIndex =='monthDifferent'){\n                            const parts = ele.title.split('-'); // 将字符串分割为两部分  \n                            parts[1] = num; // 替换'-'后的数字  \n                            ele.title = parts.join('-')+'月'; // 将两部分重新组合为字符串，并用'-'连接\n                        }\n                    }\n                    if(flag =='MA'){\n                        if(ele.titleSlotName == 'monthAfter'){\n                            ele.dataIndex = item.dataIndex;\n                            ele.title = num +'月';\n                            ele.days = item.days;\n                        }\n                        if(ele.dataIndex =='monthDifferent'){\n                            const parts = ele.title.split('-'); // 将字符串分割为两部分  \n                            parts[0] = num; // 替换'-'前的数字  \n                            ele.title = parts.join('-'); // 将两部分重新组合为字符串，并用'-'连接\n                        }\n                    }\n                })\n            }\n        }\n    })\n    dataContent.dataSourse = dealDifferentData(props.data).arr;\n};\n// 处理季度标题\nconst dealQTitle = (e,flag)=>{\n    let str = e.substr(e.length - 2);\n    let num =''\n    if(str.substr(0,1)==0){\n        num = str.substr(1)\n    }else{\n        num = str\n    }\n    const  QList = [\n        {\n            label:'1',\n            value:'Q1'\n        },\n        {\n            label:'4',\n            value:'Q2'\n        },\n        {\n            label:'7',\n            value:'Q3'\n        },\n        {\n            label:'10',\n            value:'Q4'\n        },\n    ]\n    // 对应的表头更换\n    dataContent.columns.forEach(ele=>{\n        if(flag =='QB'){\n            if(ele.titleSlotName == 'QBefore'){\n                //num对应的Q\n                ele.title = ele.dataIndex = QList.filter(item=>item.label == num)[0].value;\n            }\n            if(ele.dataIndex =='QDifferent'){\n                const parts = ele.title.split('-'); // 将字符串分割为两部分  \n                parts[1] = QList.filter(item=>item.label == num)[0].value; // 替换'-'后的数字\n                ele.title = parts.join('-'); // 将两部分重新组合为字符串，并用'-'连接\n            }\n        }\n        if(flag =='QA'){\n            if(ele.titleSlotName == 'QAfter'){\n                ele.title = ele.dataIndex = QList.filter(item=>item.label == num)[0].value;\n            }\n            if(ele.dataIndex =='QDifferent'){\n                const parts = ele.title.split('-'); // 将字符串分割为两部分  \n                parts[0] = QList.filter(item=>item.label == num)[0].value; // 替换'-'前的数字  \n                ele.title = parts.join('-'); // 将两部分重新组合为字符串，并用'-'连接\n            }\n        }\n    })\n    dataContent.dataSourse = dealDifferentData(props.data).arr;\n};\n// 更改时间\nconst changeTime=(e,flag)=>{\n    if(flag == 'MB'){\n        monthBeforeValue.value = e;\n        dealMonthTitle(e,flag);\n    }\n    if(flag == 'MA'){\n        monthAfterValue.value = e;\n        dealMonthTitle(e,flag);\n    }\n    if(flag == 'QA'){\n        QAfterValue.value = e;\n        dealQTitle(e,flag)\n    }\n    if(flag == 'QB'){\n        QBeforeValue.value = e;\n        dealQTitle(e,flag)\n    }\n};\n// 关闭\nconst handleClose = ()=>{\n    emit(\"handleClose\", false);\n};\n//单行高亮处理\nconst activeRowClass = (record) => {\n    if(record.raw.isGreenLight){\n        return 'activeRowGreen'\n    }else if(record.raw.isRate){\n        return 'activeRowPurple'\n    }else{\n        return ''\n    }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n:deep(.activeRowGreen > .arco-table-td) {\n    background-color: rgb(234, 248, 243) !important;\n}\n:deep(.activeRowPurple > .arco-table-td) {\n    background-color: rgb(240, 237, 248) !important;\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}