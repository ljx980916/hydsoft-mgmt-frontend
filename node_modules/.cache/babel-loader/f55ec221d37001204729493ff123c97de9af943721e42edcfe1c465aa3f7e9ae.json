{"ast":null,"code":"import * as d3 from 'd3';\nimport { onMounted, ref } from 'vue';\nimport * as viz from \"wnm-d3-viz\";\nexport default {\n  __name: 'sangjiDemo',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const data = [\n    //分别为左边，右边，数据\n    ['天猫', '上海', 15216, 25216], ['线下自营店', '上海', 13244], ['苏宁易购', '上海', 27, 24], ['网上自营店', '上海', 27648, 35411], ['线下代理商', '上海', 1551, 1545], ['京东', '上海', 22141, 25441], ['天猫', '广州', 15453, 15353], ['线下自营店', '广州', 24683, 24623], ['苏宁易购', '广州', 1862, 654], ['线下代理商', '广州', 16228, 13228], ['天猫', '北京', 15001, 18001], ['线下自营店', '北京', 15001, 1654], ['苏宁易购', '北京', 5001, 6541], ['网上自营店', '北京', 28648, 29648], ['线下代理商', '北京', 9648, 9648], ['天猫', '深圳', 3313, 541], ['线下自营店', '深圳', 22396, 24396], ['苏宁易购', '深圳', 3362, 3762], ['网上自营店', '深圳', 22396, 21396], ['线下代理商', '深圳', 2473, 2973], ['京东', '深圳', 16541, 11541], ['苏宁易购', '杭州', 3541, 3599], ['线下代理商', '杭州', 3541, 8741], ['京东', '杭州', 3654, 9874], ['天猫', '武汉', 1738, 110], ['线下自营店', '武汉', 12925, 13], ['苏宁易购', '武汉', 15413, 0], ['线下自营店', '重庆', 2166, 654], ['苏宁易购', '重庆', 2286, 3654], ['网上自营店', '重庆', 348, 3654], ['线下代理商', '重庆', 4244, 3654], ['京东', '重庆', 1536, 1654], ['线下自营店', '长沙', 351, 654], ['线下代理商', '长沙', 405, 541], ['线下自营店', '成都', 914, 654], ['苏宁易购', '成都', 127, 354], ['线下代理商', '成都', 1470, 654], ['京东', '成都', 516, 354], ['天猫', '东莞', 43, 0], ['线下自营店', '东莞', 667, 654], ['苏宁易购', '东莞', 172, 354], ['网上自营店', '东莞', 149, 541], ['线下代理商', '东莞', 1380, 3254], ['京东', '东莞', 791, 754], ['线下自营店', '苏州', 541, 687], ['线下代理商', '苏州', 654, 541], ['线下自营店', '南京', 1070, 654], ['线下代理商', '南京', 1171, 1541], ['京东', '南京', 33, 45], ['线下自营店', '佛山', 407, 654], ['苏宁易购', '佛山', 541, 874], ['线下代理商', '佛山', 457, 674], ['京东', '佛山', 541, 365], ['线下自营店', '天津', 557, 654], ['苏宁易购', '天津', 167, 541], ['网上自营店', '天津', 95, 100], ['线下代理商', '天津', 1090, 1321], ['京东', '天津', 676, 541], ['天猫', '合肥', 1195, 1654], ['线下自营店', '合肥', 5412, 6541], ['苏宁易购', '合肥', 212, 241], ['线下代理商', '合肥', 1509, 1654], ['天猫', '温州', 3899, 389], ['线下自营店', '温州', 147, 321], ['苏宁易购', '温州', 455, 541], ['网上自营店', '温州', 321, 254], ['线下代理商', '温州', 4100, 4512], ['天猫', '南宁', 123, 133], ['线下自营店', '南宁', 634, 654], ['苏宁易购', '南宁', 749, 541], ['网上自营店', '南宁', 119, 654], ['线下代理商', '南宁', 3705, 4574], ['京东', '南宁', 3456, 4000], ['线下自营店', '厦门', 828, 1201], ['苏宁易购', '厦门', 2808, 3541], ['网上自营店', '厦门', 1452, 2000], ['线下代理商', '厦门', 2625, 1541], ['京东', '厦门', 1920, 1234], ['线下自营店', '西安', 1146, 1541], ['苏宁易购', '西安', 212, 321], ['网上自营店', '西安', 223, 241], ['线下代理商', '西安', 1803, 2000], ['京东', '西安', 761, 465], ['线下自营店', '长春', 527, 654], ['苏宁易购', '长春', 90, 120], ['线下代理商', '长春', 930, 1241], ['京东', '长春', 395, 410], ['天猫', '哈尔滨', 7232, 8451], ['线下自营店', '哈尔滨', 1272, 2141], ['苏宁易购', '哈尔滨', 1896, 3541], ['网上自营店', '哈尔滨', 200, 1241], ['线下代理商', '哈尔滨', 10782, 15412], ['京东', '哈尔滨', 1911, 2000], ['线下自营店', '青岛', 495, 521], ['苏宁易购', '青岛', 432, 541], ['网上自营店', '青岛', 241, 320], ['线下代理商', '青岛', 1557, 1600], ['京东', '青岛', 24, 30], ['线下自营店', '沈阳', 460, 541], ['网上自营店', '沈阳', 88, 99], ['线下代理商', '沈阳', 956, 365], ['线下自营店', '济南', 232, 365], ['苏宁易购', '济南', 71, 99], ['线下代理商', '济南', 575, 654], ['京东', '济南', 368, 354]];\n    const chartRef = ref();\n    const drawSg = () => {\n      //绘制桑基图 D3js\n      let chart = d3.select(chartRef.value);\n      let z = d3.scaleOrdinal().range(d3.schemeCategory20);\n      let g = chart.append('g').attr('transform', 'translate(200,80)'); //translate(150,100)控制位置\n      let bp = viz.bP() // 定义两个BP图\n      .data(data).min(12).pad(1).height(700).width(400).barSize(30).fill(d => z(d.primary));\n      // 输出BP图数据\n      g.call(bp); // 输出BP图\n      g.append('text').attr('x', -50).attr('y', -8).style('text-anchor', 'middle').text('出货渠道');\n      g.append('text').attr('x', 430).attr('y', -8).style('text-anchor', 'middle').text('城市');\n      g.selectAll('.mainBars') //鼠标滑过事件\n      .on('mouseover', mouseover).on('mouseout', mouseout);\n      g.selectAll('.mainBars').append('text').attr('class', 'label').attr('x', d => d.part === 'primary' ? -30 : 30).attr('y', d => +6).text(d => d.key).attr('text-anchor', d => d.part === 'primary' ? 'end' : 'start');\n      g.selectAll('.mainBars').append('text').attr('class', 'perc').attr('x', d => d.part === 'primary' ? -100 : 80).attr('y', d => +6).text(function (d) {\n        return d3.format('0.0%')(d.percent);\n      }).attr('text-anchor', d => d.part === 'primary' ? 'end' : 'start');\n      g.selectAll('.mainBars') // hover\n      .append('title').text(function (d) {\n        return d.key + '\\n' + d.value + ' 台手机';\n      });\n      function mouseover(d) {\n        bp.mouseover(d);\n        g.selectAll('.mainBars').select('.perc').text(function (d) {\n          return d3.format('0.0%')(d.percent);\n        });\n        g.selectAll('.mainBars').select('title').text(function (d) {\n          return d.key + '\\n' + d.value + ' 台手机';\n        });\n      }\n      function mouseout(d) {\n        bp.mouseout(d);\n        g.selectAll('.mainBars').select('.perc').text(function (d) {\n          return d3.format('0.0%')(d.percent);\n        });\n        g.selectAll('.mainBars').select('title').text(function (d) {\n          return d.key + '\\n' + d.value + ' 台手机';\n        });\n      }\n    };\n    onMounted(() => {\n      drawSg();\n    });\n    const __returned__ = {\n      data,\n      chartRef,\n      drawSg,\n      get d3() {\n        return d3;\n      },\n      onMounted,\n      ref,\n      get viz() {\n        return viz;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"mappings":"AASA,OAAO,KAAKA,EAAE,MAAM,IAAI;AACxB,SAASC,SAAS,EAAEC,GAAG,QAAQ,KAAK;AACpC,OAAO,KAAKC,GAAG,MAAM,YAAY;;;;;;;IACjC,MAAMC,IAAI,GAAG;IACP;IACA,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,EAC1B,CAAC,OAAO,EAAC,IAAI,EAAE,KAAK,CAAC,EACrB,CAAC,MAAM,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC,EACtB,CAAC,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,EAC7B,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAC3B,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,EAC1B,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,EAC1B,CAAC,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,EAC7B,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,CAAC,EACzB,CAAC,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,EAC7B,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,EAC1B,CAAC,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,EAC5B,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAC1B,CAAC,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,EAC7B,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAC3B,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,CAAC,EACvB,CAAC,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,EAC7B,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAC1B,CAAC,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,EAC7B,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAC3B,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,EAC1B,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAC1B,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAC3B,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EACxB,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,CAAC,EACvB,CAAC,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE,CAAC,EAC1B,CAAC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,CAAC,EACxB,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,CAAC,EAC1B,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAC1B,CAAC,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,CAAC,EAC1B,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAC3B,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EACxB,CAAC,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACzB,CAAC,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACzB,CAAC,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACzB,CAAC,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACxB,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,CAAC,EAC1B,CAAC,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACtB,CAAC,IAAI,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC,EACnB,CAAC,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACzB,CAAC,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACxB,CAAC,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACzB,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAC3B,CAAC,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACtB,CAAC,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACzB,CAAC,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACzB,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,CAAC,EAC1B,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAC3B,CAAC,IAAI,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC,EACpB,CAAC,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACzB,CAAC,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACxB,CAAC,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACzB,CAAC,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACtB,CAAC,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACzB,CAAC,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACxB,CAAC,OAAO,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,CAAC,EACxB,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAC3B,CAAC,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACtB,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EACxB,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAC3B,CAAC,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACxB,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAC3B,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,CAAC,EACvB,CAAC,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACzB,CAAC,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACxB,CAAC,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACzB,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAC3B,CAAC,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACtB,CAAC,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACzB,CAAC,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACxB,CAAC,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACzB,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAC3B,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EACxB,CAAC,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,CAAC,EAC1B,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAC1B,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAC3B,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAC3B,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EACxB,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAC3B,CAAC,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACxB,CAAC,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACzB,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAC3B,CAAC,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACtB,CAAC,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACzB,CAAC,MAAM,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,CAAC,EACvB,CAAC,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,CAAC,EAC1B,CAAC,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACtB,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,EACzB,CAAC,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,EAC5B,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,EAC3B,CAAC,OAAO,EAAE,KAAK,EAAE,GAAG,EAAE,IAAI,CAAC,EAC3B,CAAC,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,EAC9B,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,EACzB,CAAC,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACzB,CAAC,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACxB,CAAC,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACzB,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAC3B,CAAC,IAAI,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC,EACpB,CAAC,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACzB,CAAC,OAAO,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC,EACvB,CAAC,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACzB,CAAC,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACzB,CAAC,MAAM,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC,EACtB,CAAC,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,EACzB,CAAC,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,CACvB;IACL,MAAMC,QAAQ,GAAGH,GAAG,EAAE;IACtB,MAAMI,MAAM,GAAE,MAAI;MAAC;MACX,IAAIC,KAAK,GAAGP,EAAE,CAACQ,MAAM,CAACH,QAAQ,CAACI,KAAK,CAAC;MACrC,IAAIC,CAAC,GAAGV,EAAE,CAACW,YAAY,EAAE,CAACC,KAAK,CAACZ,EAAE,CAACa,gBAAgB,CAAC;MACpD,IAAIC,CAAC,GAAGP,KAAK,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,WAAW,EAAE,mBAAmB,CAAC;MAChE,IAAIC,EAAE,GAAGd,GAAG,CACHe,EAAE,EAAE,CAAC;MAAA,CACLd,IAAI,CAACA,IAAI,CAAC,CACVe,GAAG,CAAC,EAAE,CAAC,CACPC,GAAG,CAAC,CAAC,CAAC,CACNC,MAAM,CAAC,GAAG,CAAC,CACXC,KAAK,CAAC,GAAG,CAAC,CACVC,OAAO,CAAC,EAAE,CAAC,CACXC,IAAI,CAACC,CAAC,IAAIf,CAAC,CAACe,CAAC,CAACC,OAAO,CAAC,CAAC;MAChC;MACAZ,CAAC,CAACa,IAAI,CAACV,EAAE,CAAC,EAAC;MACXH,CAAC,CAACC,MAAM,CAAC,MAAM,CAAC,CACPC,IAAI,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CACdA,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CACbY,KAAK,CAAC,aAAa,EAAE,QAAQ,CAAC,CAC9BC,IAAI,CAAC,MAAM,CAAC;MAErBf,CAAC,CAACC,MAAM,CAAC,MAAM,CAAC,CACPC,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,CACdA,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CACbY,KAAK,CAAC,aAAa,EAAE,QAAQ,CAAC,CAC9BC,IAAI,CAAC,IAAI,CAAC;MAEnBf,CAAC,CAACgB,SAAS,CAAC,WAAW,CAAC;MAAA,CACfC,EAAE,CAAC,WAAW,EAAEC,SAAS,CAAC,CAC1BD,EAAE,CAAC,UAAU,EAAEE,QAAQ,CAAC;MAEjCnB,CAAC,CAACgB,SAAS,CAAC,WAAW,CAAC,CACff,MAAM,CAAC,MAAM,CAAC,CACdC,IAAI,CAAC,OAAO,EAAE,OAAO,CAAC,CACtBA,IAAI,CAAC,GAAG,EAAES,CAAC,IAAKA,CAAC,CAACS,IAAI,KAAK,SAAS,GAAG,CAAC,EAAE,GAAG,EAAG,CAAC,CACjDlB,IAAI,CAAC,GAAG,EAAES,CAAC,IAAI,CAAC,CAAC,CAAC,CAClBI,IAAI,CAACJ,CAAC,IAAIA,CAAC,CAACU,GAAG,CAAC,CAChBnB,IAAI,CAAC,aAAa,EAAES,CAAC,IAAKA,CAAC,CAACS,IAAI,KAAK,SAAS,GAAG,KAAK,GAAG,OAAQ,CAAC;MAE3EpB,CAAC,CAACgB,SAAS,CAAC,WAAW,CAAC,CACff,MAAM,CAAC,MAAM,CAAC,CACdC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CACrBA,IAAI,CAAC,GAAG,EAAES,CAAC,IAAKA,CAAC,CAACS,IAAI,KAAK,SAAS,GAAG,CAAC,GAAG,GAAG,EAAG,CAAC,CAClDlB,IAAI,CAAC,GAAG,EAAES,CAAC,IAAI,CAAC,CAAC,CAAC,CAClBI,IAAI,CAAC,UAASJ,CAAC,EAAE;QAChB,OAAOzB,EAAE,CAACoC,MAAM,CAAC,MAAM,CAAC,CAACX,CAAC,CAACY,OAAO,CAAC;MACrC,CAAC,CAAC,CACDrB,IAAI,CAAC,aAAa,EAAES,CAAC,IAAKA,CAAC,CAACS,IAAI,KAAK,SAAS,GAAG,KAAK,GAAG,OAAQ,CAAC;MAE3EpB,CAAC,CAACgB,SAAS,CAAC,WAAW,CAAC,CAAC;MAAA,CAChBf,MAAM,CAAC,OAAO,CAAC,CACfc,IAAI,CAAC,UAASJ,CAAC,EAAE;QAChB,OAAOA,CAAC,CAACU,GAAG,GAAG,IAAI,GAAGV,CAAC,CAAChB,KAAK,GAAG,MAAM;MACxC,CAAC,CAAC;MAEV,SAASuB,SAAS,CAACP,CAAC,EAAE;QACpBR,EAAE,CAACe,SAAS,CAACP,CAAC,CAAC;QAEfX,CAAC,CAACgB,SAAS,CAAC,WAAW,CAAC,CACftB,MAAM,CAAC,OAAO,CAAC,CACfqB,IAAI,CAAC,UAASJ,CAAC,EAAE;UAChB,OAAOzB,EAAE,CAACoC,MAAM,CAAC,MAAM,CAAC,CAACX,CAAC,CAACY,OAAO,CAAC;QACrC,CAAC,CAAC;QAEVvB,CAAC,CAACgB,SAAS,CAAC,WAAW,CAAC,CACftB,MAAM,CAAC,OAAO,CAAC,CACfqB,IAAI,CAAC,UAASJ,CAAC,EAAE;UAChB,OAAOA,CAAC,CAACU,GAAG,GAAG,IAAI,GAAGV,CAAC,CAAChB,KAAK,GAAG,MAAM;QACxC,CAAC,CAAC;MACZ;MACA,SAASwB,QAAQ,CAACR,CAAC,EAAE;QACnBR,EAAE,CAACgB,QAAQ,CAACR,CAAC,CAAC;QACdX,CAAC,CAACgB,SAAS,CAAC,WAAW,CAAC,CACftB,MAAM,CAAC,OAAO,CAAC,CACfqB,IAAI,CAAC,UAASJ,CAAC,EAAE;UAChB,OAAOzB,EAAE,CAACoC,MAAM,CAAC,MAAM,CAAC,CAACX,CAAC,CAACY,OAAO,CAAC;QACrC,CAAC,CAAC;QAEVvB,CAAC,CAACgB,SAAS,CAAC,WAAW,CAAC,CACftB,MAAM,CAAC,OAAO,CAAC,CACfqB,IAAI,CAAC,UAASJ,CAAC,EAAE;UAChB,OAAOA,CAAC,CAACU,GAAG,GAAG,IAAI,GAAGV,CAAC,CAAChB,KAAK,GAAG,MAAM;QACxC,CAAC,CAAC;MACZ;IACF,CAAC;IACPR,SAAS,CAAC,MAAI;MACVK,MAAM,EAAE;IACZ,CAAC,CAAC","names":["d3","onMounted","ref","viz","data","chartRef","drawSg","chart","select","value","z","scaleOrdinal","range","schemeCategory20","g","append","attr","bp","bP","min","pad","height","width","barSize","fill","d","primary","call","style","text","selectAll","on","mouseover","mouseout","part","key","format","percent"],"sources":["/Users/lijiaxin/Documents/workspace/hydsoft-mgmt-frontend/src/views/demo/sangjiDemo.vue"],"sourcesContent":["<template>\n    <div class=\"defaultPadding\">\n        <div class=\"drawerDiv\">\n            <svg ref=\"chartRef\" class=\"chartSG\"></svg>\n        </div>\n    </div>\n</template>\n\n<script setup>\nimport * as d3 from 'd3';\nimport { onMounted, ref } from 'vue';\nimport * as viz from \"wnm-d3-viz\";\nconst data = [\n      //分别为左边，右边，数据\n      ['天猫', '上海', 15216, 25216],\n      ['线下自营店','上海', 13244],\n      ['苏宁易购', '上海', 27, 24],\n      ['网上自营店', '上海', 27648, 35411],\n      ['线下代理商', '上海', 1551, 1545],\n      ['京东', '上海', 22141, 25441],\n      ['天猫', '广州', 15453, 15353],\n      ['线下自营店', '广州', 24683, 24623],\n      ['苏宁易购', '广州', 1862, 654],\n      ['线下代理商', '广州', 16228, 13228],\n      ['天猫', '北京', 15001, 18001],\n      ['线下自营店', '北京', 15001, 1654],\n      ['苏宁易购', '北京', 5001, 6541],\n      ['网上自营店', '北京', 28648, 29648],\n      ['线下代理商', '北京', 9648, 9648],\n      ['天猫', '深圳', 3313, 541],\n      ['线下自营店', '深圳', 22396, 24396],\n      ['苏宁易购', '深圳', 3362, 3762],\n      ['网上自营店', '深圳', 22396, 21396],\n      ['线下代理商', '深圳', 2473, 2973],\n      ['京东', '深圳', 16541, 11541],\n      ['苏宁易购', '杭州', 3541, 3599],\n      ['线下代理商', '杭州', 3541, 8741],\n      ['京东', '杭州', 3654, 9874],\n      ['天猫', '武汉', 1738, 110],\n      ['线下自营店', '武汉', 12925, 13],\n      ['苏宁易购', '武汉', 15413, 0],\n      ['线下自营店', '重庆', 2166, 654],\n      ['苏宁易购', '重庆', 2286, 3654],\n      ['网上自营店', '重庆', 348, 3654],\n      ['线下代理商', '重庆', 4244, 3654],\n      ['京东', '重庆', 1536, 1654],\n      ['线下自营店', '长沙', 351, 654],\n      ['线下代理商', '长沙', 405, 541],\n      ['线下自营店', '成都', 914, 654],\n      ['苏宁易购', '成都', 127, 354],\n      ['线下代理商', '成都', 1470, 654],\n      ['京东', '成都', 516, 354],\n      ['天猫', '东莞', 43, 0],\n      ['线下自营店', '东莞', 667, 654],\n      ['苏宁易购', '东莞', 172, 354],\n      ['网上自营店', '东莞', 149, 541],\n      ['线下代理商', '东莞', 1380, 3254],\n      ['京东', '东莞', 791, 754],\n      ['线下自营店', '苏州', 541, 687],\n      ['线下代理商', '苏州', 654, 541],\n      ['线下自营店', '南京', 1070, 654],\n      ['线下代理商', '南京', 1171, 1541],\n      ['京东', '南京', 33, 45],\n      ['线下自营店', '佛山', 407, 654],\n      ['苏宁易购', '佛山', 541, 874],\n      ['线下代理商', '佛山', 457, 674],\n      ['京东', '佛山', 541, 365],\n      ['线下自营店', '天津', 557, 654],\n      ['苏宁易购', '天津', 167, 541],\n      ['网上自营店', '天津', 95, 100],\n      ['线下代理商', '天津', 1090, 1321],\n      ['京东', '天津', 676, 541],\n      ['天猫', '合肥', 1195, 1654],\n      ['线下自营店', '合肥', 5412, 6541],\n      ['苏宁易购', '合肥', 212, 241],\n      ['线下代理商', '合肥', 1509, 1654],\n      ['天猫', '温州', 3899, 389],\n      ['线下自营店', '温州', 147, 321],\n      ['苏宁易购', '温州', 455, 541],\n      ['网上自营店', '温州', 321, 254],\n      ['线下代理商', '温州', 4100, 4512],\n      ['天猫', '南宁', 123, 133],\n      ['线下自营店', '南宁', 634, 654],\n      ['苏宁易购', '南宁', 749, 541],\n      ['网上自营店', '南宁', 119, 654],\n      ['线下代理商', '南宁', 3705, 4574],\n      ['京东', '南宁', 3456, 4000],\n      ['线下自营店', '厦门', 828, 1201],\n      ['苏宁易购', '厦门', 2808, 3541],\n      ['网上自营店', '厦门', 1452, 2000],\n      ['线下代理商', '厦门', 2625, 1541],\n      ['京东', '厦门', 1920, 1234],\n      ['线下自营店', '西安', 1146, 1541],\n      ['苏宁易购', '西安', 212, 321],\n      ['网上自营店', '西安', 223, 241],\n      ['线下代理商', '西安', 1803, 2000],\n      ['京东', '西安', 761, 465],\n      ['线下自营店', '长春', 527, 654],\n      ['苏宁易购', '长春', 90, 120],\n      ['线下代理商', '长春', 930, 1241],\n      ['京东', '长春', 395, 410],\n      ['天猫', '哈尔滨', 7232, 8451],\n      ['线下自营店', '哈尔滨', 1272, 2141],\n      ['苏宁易购', '哈尔滨', 1896, 3541],\n      ['网上自营店', '哈尔滨', 200, 1241],\n      ['线下代理商', '哈尔滨', 10782, 15412],\n      ['京东', '哈尔滨', 1911, 2000],\n      ['线下自营店', '青岛', 495, 521],\n      ['苏宁易购', '青岛', 432, 541],\n      ['网上自营店', '青岛', 241, 320],\n      ['线下代理商', '青岛', 1557, 1600],\n      ['京东', '青岛', 24, 30],\n      ['线下自营店', '沈阳', 460, 541],\n      ['网上自营店', '沈阳', 88, 99],\n      ['线下代理商', '沈阳', 956, 365],\n      ['线下自营店', '济南', 232, 365],\n      ['苏宁易购', '济南', 71, 99],\n      ['线下代理商', '济南', 575, 654],\n      ['京东', '济南', 368, 354]\n    ]\nconst chartRef = ref()\nconst drawSg =()=>{//绘制桑基图 D3js\n        let chart = d3.select(chartRef.value)\n        let z = d3.scaleOrdinal().range(d3.schemeCategory20)\n        let g = chart.append('g').attr('transform', 'translate(200,80)')//translate(150,100)控制位置\n        let bp = viz\n                .bP() // 定义两个BP图\n                .data(data)\n                .min(12)\n                .pad(1)\n                .height(700)\n                .width(400)\n                .barSize(30)\n                .fill(d => z(d.primary));\n        // 输出BP图数据\n        g.call(bp) // 输出BP图\n        g.append('text')\n                .attr('x', -50)\n                .attr('y', -8)\n                .style('text-anchor', 'middle')\n                .text('出货渠道')\n\n        g.append('text')\n                .attr('x', 430)\n                .attr('y', -8)\n                .style('text-anchor', 'middle')\n                .text('城市')\n\n        g.selectAll('.mainBars')//鼠标滑过事件\n                .on('mouseover', mouseover)\n                .on('mouseout', mouseout)\n\n        g.selectAll('.mainBars')\n                .append('text')\n                .attr('class', 'label')\n                .attr('x', d => (d.part === 'primary' ? -30 : 30))\n                .attr('y', d => +6)\n                .text(d => d.key)\n                .attr('text-anchor', d => (d.part === 'primary' ? 'end' : 'start'))\n\n        g.selectAll('.mainBars')\n                .append('text')\n                .attr('class', 'perc')\n                .attr('x', d => (d.part === 'primary' ? -100 : 80))\n                .attr('y', d => +6)\n                .text(function(d) {\n                  return d3.format('0.0%')(d.percent)\n                })\n                .attr('text-anchor', d => (d.part === 'primary' ? 'end' : 'start'))\n\n        g.selectAll('.mainBars') // hover\n                .append('title')\n                .text(function(d) {\n                  return d.key + '\\n' + d.value + ' 台手机'\n                })\n\n        function mouseover(d) {\n          bp.mouseover(d)\n\n          g.selectAll('.mainBars')\n                  .select('.perc')\n                  .text(function(d) {\n                    return d3.format('0.0%')(d.percent)\n                  })\n\n          g.selectAll('.mainBars')\n                  .select('title')\n                  .text(function(d) {\n                    return d.key + '\\n' + d.value + ' 台手机'\n                  })\n        }\n        function mouseout(d) {\n          bp.mouseout(d)\n          g.selectAll('.mainBars')\n                  .select('.perc')\n                  .text(function(d) {\n                    return d3.format('0.0%')(d.percent)\n                  })\n\n          g.selectAll('.mainBars')\n                  .select('title')\n                  .text(function(d) {\n                    return d.key + '\\n' + d.value + ' 台手机'\n                  })\n        }\n      }\nonMounted(()=>{\n    drawSg()\n})\n</script>\n\n<style lang=\"scss\">\n// .drawerDiv{\n//     height: 100%;\n//     background-color: black;\n//     color: white;\n//   }\n  .chartSG{\n    width: 1000px;\n    height: 1000px;\n    color: white;\n  }\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}