{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar util_1 = require(\"./util\");\nvar addBorderSegments = function (g) {\n  var _a;\n  var dfs = function (v) {\n    var children = g.children(v);\n    var node = g.node(v);\n    if (children === null || children === void 0 ? void 0 : children.length) {\n      children.forEach(function (child) {\n        return dfs(child);\n      });\n    }\n    if (node.hasOwnProperty(\"minRank\")) {\n      node.borderLeft = [];\n      node.borderRight = [];\n      for (var rank = node.minRank, maxRank = node.maxRank + 1; rank < maxRank; rank += 1) {\n        addBorderNode(g, \"borderLeft\", \"_bl\", v, node, rank);\n        addBorderNode(g, \"borderRight\", \"_br\", v, node, rank);\n      }\n    }\n  };\n  (_a = g.children()) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n    return dfs(child);\n  });\n};\nvar addBorderNode = function (g, prop, prefix, sg, sgNode, rank) {\n  var label = {\n    rank: rank,\n    borderType: prop,\n    width: 0,\n    height: 0\n  };\n  var prev = sgNode[prop][rank - 1];\n  var curr = (0, util_1.addDummyNode)(g, \"border\", label, prefix);\n  sgNode[prop][rank] = curr;\n  g.setParent(curr, sg);\n  if (prev) {\n    g.setEdge(prev, curr, {\n      weight: 1\n    });\n  }\n};\nexports.default = addBorderSegments;","map":{"version":3,"mappings":";;;;;AACA;AAEA,IAAMA,iBAAiB,GAAG,UAACC,CAAQ;;EACjC,IAAMC,GAAG,GAAG,UAACC,CAAS;IACpB,IAAMC,QAAQ,GAAGH,CAAC,CAACG,QAAQ,CAACD,CAAC,CAAC;IAC9B,IAAME,IAAI,GAAGJ,CAAC,CAACI,IAAI,CAACF,CAAC,CAAE;IACvB,IAAIC,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEE,MAAM,EAAE;MACpBF,QAAQ,CAACG,OAAO,CAAC,UAACC,KAAK;QAAK,UAAG,CAACA,KAAK,CAAC;MAAV,CAAU,CAAC;;IAGzC,IAAIH,IAAI,CAACI,cAAc,CAAC,SAAS,CAAC,EAAE;MAClCJ,IAAI,CAACK,UAAU,GAAG,EAAE;MACpBL,IAAI,CAACM,WAAW,GAAG,EAAE;MACrB,KACE,IAAIC,IAAI,GAAGP,IAAI,CAACQ,OAAQ,EAAEC,OAAO,GAAGT,IAAI,CAACS,OAAQ,GAAG,CAAC,EACrDF,IAAI,GAAGE,OAAO,EACdF,IAAI,IAAI,CAAC,EACT;QACAG,aAAa,CAACd,CAAC,EAAE,YAAY,EAAE,KAAK,EAAEE,CAAC,EAAEE,IAAI,EAAEO,IAAI,CAAC;QACpDG,aAAa,CAACd,CAAC,EAAE,aAAa,EAAE,KAAK,EAAEE,CAAC,EAAEE,IAAI,EAAEO,IAAI,CAAC;;;EAG3D,CAAC;EAED,OAAC,CAACR,QAAQ,EAAE,0CAAEG,OAAO,CAAC,UAACC,KAAK;IAAK,UAAG,CAACA,KAAK,CAAC;EAAV,CAAU,CAAC;AAC9C,CAAC;AAED,IAAMO,aAAa,GAAG,UACpBd,CAAQ,EACRe,IAAY,EACZC,MAAc,EACdC,EAAU,EACVC,MAAiC,EACjCP,IAAY;EAEZ,IAAMQ,KAAK,GAAG;IAAER,IAAI;IAAES,UAAU,EAAEL,IAAI;IAAEM,KAAK,EAAE,CAAC;IAAEC,MAAM,EAAE;EAAC,CAAE;EAC7D,IAAMC,IAAI,GAAGL,MAAM,CAACH,IAAI,CAAC,CAACJ,IAAI,GAAG,CAAC,CAAC;EACnC,IAAMa,IAAI,GAAG,uBAAY,EAACxB,CAAC,EAAE,QAAQ,EAAEmB,KAAK,EAAEH,MAAM,CAAC;EACrDE,MAAM,CAACH,IAAI,CAAC,CAACJ,IAAI,CAAC,GAAGa,IAAI;EACzBxB,CAAC,CAACyB,SAAS,CAACD,IAAI,EAAEP,EAAE,CAAC;EACrB,IAAIM,IAAI,EAAE;IACRvB,CAAC,CAAC0B,OAAO,CAACH,IAAI,EAAEC,IAAI,EAAE;MAAEG,MAAM,EAAE;IAAC,CAAE,CAAC;;AAExC,CAAC;AAEDC,kBAAe7B,iBAAiB","names":["addBorderSegments","g","dfs","v","children","node","length","forEach","child","hasOwnProperty","borderLeft","borderRight","rank","minRank","maxRank","addBorderNode","prop","prefix","sg","sgNode","label","borderType","width","height","prev","curr","setParent","setEdge","weight","exports"],"sourceRoot":"","sources":["../../../../src/layout/dagre/src/add-border-segments.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script","externalDependencies":[]}