{"ast":null,"code":"import { getTextWidth, getTextHeight, assembleFont } from '../util/text';\nexport default function (shape) {\n  var attrs = shape.attr();\n  var x = attrs.x,\n    y = attrs.y,\n    text = attrs.text,\n    fontSize = attrs.fontSize,\n    lineHeight = attrs.lineHeight;\n  var font = attrs.font;\n  if (!font) {\n    // 如果未组装 font\n    font = assembleFont(attrs);\n  }\n  var width = getTextWidth(text, font);\n  var bbox;\n  if (!width) {\n    // 如果width不存在，四点共其实点\n    bbox = {\n      x: x,\n      y: y,\n      width: 0,\n      height: 0\n    };\n  } else {\n    var textAlign = attrs.textAlign,\n      textBaseline = attrs.textBaseline;\n    var height = getTextHeight(text, fontSize, lineHeight); // attrs.height\n    // 默认左右对齐：left, 默认上下对齐 bottom\n    var point = {\n      x: x,\n      y: y - height\n    };\n    if (textAlign) {\n      if (textAlign === 'end' || textAlign === 'right') {\n        point.x -= width;\n      } else if (textAlign === 'center') {\n        point.x -= width / 2;\n      }\n    }\n    if (textBaseline) {\n      if (textBaseline === 'top') {\n        point.y += height;\n      } else if (textBaseline === 'middle') {\n        point.y += height / 2;\n      }\n    }\n    bbox = {\n      x: point.x,\n      y: point.y,\n      width: width,\n      height: height\n    };\n  }\n  return bbox;\n}","map":{"version":3,"mappings":"AAEA,SAASA,YAAY,EAAEC,aAAa,EAAEC,YAAY,QAAQ,cAAc;AAExE,eAAc,UAAWC,KAAa;EACpC,IAAMC,KAAK,GAAGD,KAAK,CAACE,IAAI,EAAE;EAClB,KAAC,GAAoCD,KAAK,EAAzC;IAAEE,CAAC,GAAiCF,KAAK,EAAtC;IAAEG,IAAI,GAA2BH,KAAK,KAAhC;IAAEI,QAAQ,GAAiBJ,KAAK,SAAtB;IAAEK,UAAU,GAAKL,KAAK,WAAV;EACxC,IAAIM,IAAI,GAAGN,KAAK,CAACM,IAAI;EACrB,IAAI,CAACA,IAAI,EAAE;IACT;IACAA,IAAI,GAAGR,YAAY,CAACE,KAAK,CAAC;;EAE5B,IAAMO,KAAK,GAAGX,YAAY,CAACO,IAAI,EAAEG,IAAI,CAAC;EACtC,IAAIE,IAAI;EACR,IAAI,CAACD,KAAK,EAAE;IACV;IACAC,IAAI,GAAG;MACLC,CAAC;MACDP,CAAC;MACDK,KAAK,EAAE,CAAC;MACRG,MAAM,EAAE;KACT;GACF,MAAM;IACG,aAAS,GAAmBV,KAAK,UAAxB;MAAEW,YAAY,GAAKX,KAAK,aAAV;IAC/B,IAAMU,MAAM,GAAGb,aAAa,CAACM,IAAI,EAAEC,QAAQ,EAAEC,UAAU,CAAC,CAAC,CAAC;IAC1D;IACA,IAAMO,KAAK,GAAG;MACZH,CAAC;MACDP,CAAC,EAAEA,CAAC,GAAGQ;KACR;IACD,IAAIG,SAAS,EAAE;MACb,IAAIA,SAAS,KAAK,KAAK,IAAIA,SAAS,KAAK,OAAO,EAAE;QAChDD,KAAK,CAACH,CAAC,IAAIF,KAAK;OACjB,MAAM,IAAIM,SAAS,KAAK,QAAQ,EAAE;QACjCD,KAAK,CAACH,CAAC,IAAIF,KAAK,GAAG,CAAC;;;IAGxB,IAAII,YAAY,EAAE;MAChB,IAAIA,YAAY,KAAK,KAAK,EAAE;QAC1BC,KAAK,CAACV,CAAC,IAAIQ,MAAM;OAClB,MAAM,IAAIC,YAAY,KAAK,QAAQ,EAAE;QACpCC,KAAK,CAACV,CAAC,IAAIQ,MAAM,GAAG,CAAC;;;IAIzBF,IAAI,GAAG;MACLC,CAAC,EAAEG,KAAK,CAACH,CAAC;MACVP,CAAC,EAAEU,KAAK,CAACV,CAAC;MACVK,KAAK,EAAEA,KAAK;MACZG,MAAM,EAAEA;KACT;;EAEH,OAAOF,IAAI;AACb","names":["getTextWidth","getTextHeight","assembleFont","shape","attrs","attr","y","text","fontSize","lineHeight","font","width","bbox","x","height","textBaseline","point","textAlign"],"sourceRoot":"","sources":["../../src/bbox/text.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module","externalDependencies":[]}