{"ast":null,"code":"import { Generic } from './basic.mjs';\nimport { ElementView } from '../dia/ElementView.mjs';\nimport V from '../V/index.mjs';\nimport { Link as diaLink } from '../dia/Link.mjs';\nexport const Place = Generic.define('pn.Place', {\n  size: {\n    width: 50,\n    height: 50\n  },\n  attrs: {\n    '.root': {\n      r: 25,\n      fill: '#ffffff',\n      stroke: '#000000',\n      transform: 'translate(25, 25)'\n    },\n    '.label': {\n      'text-anchor': 'middle',\n      'ref-x': .5,\n      'ref-y': -20,\n      ref: '.root',\n      fill: '#000000',\n      'font-size': 12\n    },\n    '.tokens > circle': {\n      fill: '#000000',\n      r: 5\n    },\n    '.tokens.one > circle': {\n      transform: 'translate(25, 25)'\n    },\n    '.tokens.two > circle:nth-child(1)': {\n      transform: 'translate(19, 25)'\n    },\n    '.tokens.two > circle:nth-child(2)': {\n      transform: 'translate(31, 25)'\n    },\n    '.tokens.three > circle:nth-child(1)': {\n      transform: 'translate(18, 29)'\n    },\n    '.tokens.three > circle:nth-child(2)': {\n      transform: 'translate(25, 19)'\n    },\n    '.tokens.three > circle:nth-child(3)': {\n      transform: 'translate(32, 29)'\n    },\n    '.tokens.alot > text': {\n      transform: 'translate(25, 18)',\n      'text-anchor': 'middle',\n      fill: '#000000'\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><circle class=\"root\"/><g class=\"tokens\" /></g><text class=\"label\"/></g>'\n});\nexport const PlaceView = ElementView.extend({\n  presentationAttributes: ElementView.addPresentationAttributes({\n    tokens: ['TOKENS']\n  }),\n  initFlag: ElementView.prototype.initFlag.concat(['TOKENS']),\n  confirmUpdate: function (...args) {\n    let flags = ElementView.prototype.confirmUpdate.call(this, ...args);\n    if (this.hasFlag(flags, 'TOKENS')) {\n      this.renderTokens();\n      this.update();\n      flags = this.removeFlag(flags, 'TOKENS');\n    }\n    return flags;\n  },\n  renderTokens: function () {\n    const vTokens = this.vel.findOne('.tokens').empty();\n    ['one', 'two', 'three', 'alot'].forEach(function (className) {\n      vTokens.removeClass(className);\n    });\n    var tokens = this.model.get('tokens');\n    if (!tokens) return;\n    switch (tokens) {\n      case 1:\n        vTokens.addClass('one');\n        vTokens.append(V('circle'));\n        break;\n      case 2:\n        vTokens.addClass('two');\n        vTokens.append([V('circle'), V('circle')]);\n        break;\n      case 3:\n        vTokens.addClass('three');\n        vTokens.append([V('circle'), V('circle'), V('circle')]);\n        break;\n      default:\n        vTokens.addClass('alot');\n        vTokens.append(V('text').text(tokens + ''));\n        break;\n    }\n  }\n});\nexport const Transition = Generic.define('pn.Transition', {\n  size: {\n    width: 12,\n    height: 50\n  },\n  attrs: {\n    'rect': {\n      width: 12,\n      height: 50,\n      fill: '#000000',\n      stroke: '#000000'\n    },\n    '.label': {\n      'text-anchor': 'middle',\n      'ref-x': .5,\n      'ref-y': -20,\n      ref: 'rect',\n      fill: '#000000',\n      'font-size': 12\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><rect class=\"root\"/></g></g><text class=\"label\"/>'\n});\nexport const Link = diaLink.define('pn.Link', {\n  attrs: {\n    '.marker-target': {\n      d: 'M 10 0 L 0 5 L 10 10 z'\n    }\n  }\n});","map":{"version":3,"names":["Generic","ElementView","V","Link","diaLink","Place","define","size","width","height","attrs","r","fill","stroke","transform","ref","markup","PlaceView","extend","presentationAttributes","addPresentationAttributes","tokens","initFlag","prototype","concat","confirmUpdate","args","flags","call","hasFlag","renderTokens","update","removeFlag","vTokens","vel","findOne","empty","forEach","className","removeClass","model","get","addClass","append","text","Transition","d"],"sources":["/Users/lijiaxin/Documents/workspace/hydsoft-oms-frontend/node_modules/jointjs/src/shapes/pn.mjs"],"sourcesContent":["import { Generic } from './basic.mjs';\nimport { ElementView } from '../dia/ElementView.mjs';\nimport V from '../V/index.mjs';\nimport { Link as diaLink } from '../dia/Link.mjs';\n\nexport const Place = Generic.define('pn.Place', {\n    size: { width: 50, height: 50 },\n    attrs: {\n        '.root': {\n            r: 25,\n            fill: '#ffffff',\n            stroke: '#000000',\n            transform: 'translate(25, 25)'\n        },\n        '.label': {\n            'text-anchor': 'middle',\n            'ref-x': .5,\n            'ref-y': -20,\n            ref: '.root',\n            fill: '#000000',\n            'font-size': 12\n        },\n        '.tokens > circle': {\n            fill: '#000000',\n            r: 5\n        },\n        '.tokens.one > circle': { transform: 'translate(25, 25)' },\n\n        '.tokens.two > circle:nth-child(1)': { transform: 'translate(19, 25)' },\n        '.tokens.two > circle:nth-child(2)': { transform: 'translate(31, 25)' },\n\n        '.tokens.three > circle:nth-child(1)': { transform: 'translate(18, 29)' },\n        '.tokens.three > circle:nth-child(2)': { transform: 'translate(25, 19)' },\n        '.tokens.three > circle:nth-child(3)': { transform: 'translate(32, 29)' },\n\n        '.tokens.alot > text': {\n            transform: 'translate(25, 18)',\n            'text-anchor': 'middle',\n            fill: '#000000'\n        }\n    }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><circle class=\"root\"/><g class=\"tokens\" /></g><text class=\"label\"/></g>',\n});\n\nexport const PlaceView = ElementView.extend({\n\n    presentationAttributes: ElementView.addPresentationAttributes({\n        tokens: ['TOKENS']\n    }),\n\n    initFlag: ElementView.prototype.initFlag.concat(['TOKENS']),\n\n    confirmUpdate: function(...args) {\n        let flags = ElementView.prototype.confirmUpdate.call(this, ...args);\n        if (this.hasFlag(flags, 'TOKENS')) {\n            this.renderTokens();\n            this.update();\n            flags = this.removeFlag(flags, 'TOKENS');\n        }\n        return flags;\n    },\n\n    renderTokens: function() {\n\n        const vTokens = this.vel.findOne('.tokens').empty();\n        ['one', 'two', 'three', 'alot'].forEach(function(className) {\n            vTokens.removeClass(className);\n        });\n\n        var tokens = this.model.get('tokens');\n        if (!tokens) return;\n\n        switch (tokens) {\n\n            case 1:\n                vTokens.addClass('one');\n                vTokens.append(V('circle'));\n                break;\n\n            case 2:\n                vTokens.addClass('two');\n                vTokens.append([V('circle'), V('circle')]);\n                break;\n\n            case 3:\n                vTokens.addClass('three');\n                vTokens.append([V('circle'), V('circle'), V('circle')]);\n                break;\n\n            default:\n                vTokens.addClass('alot');\n                vTokens.append(V('text').text(tokens + ''));\n                break;\n        }\n    }\n});\n\nexport const Transition = Generic.define('pn.Transition', {\n    size: { width: 12, height: 50 },\n    attrs: {\n        'rect': {\n            width: 12,\n            height: 50,\n            fill: '#000000',\n            stroke: '#000000'\n        },\n        '.label': {\n            'text-anchor': 'middle',\n            'ref-x': .5,\n            'ref-y': -20,\n            ref: 'rect',\n            fill: '#000000',\n            'font-size': 12\n        }\n    }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><rect class=\"root\"/></g></g><text class=\"label\"/>',\n});\n\nexport const Link = diaLink.define('pn.Link', {\n    attrs: { '.marker-target': { d: 'M 10 0 L 0 5 L 10 10 z' }}\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}