{"ast":null,"code":"\"use strict\";\n\n/**\n * @fileOverview random layout\n * @author shiwu.wyy@antfin.com\n */\nrequire(\"core-js/modules/es.error.cause.js\");\nrequire(\"core-js/modules/es.array.push.js\");\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CircularLayout = void 0;\nvar base_1 = require(\"./base\");\nvar util_1 = require(\"../util\");\nfunction initHierarchy(nodes, edges, nodeMap, directed) {\n  nodes.forEach(function (_, i) {\n    nodes[i].children = [];\n    nodes[i].parent = [];\n  });\n  if (directed) {\n    edges.forEach(function (e) {\n      var source = (0, util_1.getEdgeTerminal)(e, 'source');\n      var target = (0, util_1.getEdgeTerminal)(e, 'target');\n      var sourceIdx = 0;\n      if (source) {\n        sourceIdx = nodeMap[source];\n      }\n      var targetIdx = 0;\n      if (target) {\n        targetIdx = nodeMap[target];\n      }\n      var child = nodes[sourceIdx].children;\n      var parent = nodes[targetIdx].parent;\n      child.push(nodes[targetIdx].id);\n      parent.push(nodes[sourceIdx].id);\n    });\n  } else {\n    edges.forEach(function (e) {\n      var source = (0, util_1.getEdgeTerminal)(e, 'source');\n      var target = (0, util_1.getEdgeTerminal)(e, 'target');\n      var sourceIdx = 0;\n      if (source) {\n        sourceIdx = nodeMap[source];\n      }\n      var targetIdx = 0;\n      if (target) {\n        targetIdx = nodeMap[target];\n      }\n      var sourceChildren = nodes[sourceIdx].children;\n      var targetChildren = nodes[targetIdx].children;\n      sourceChildren.push(nodes[targetIdx].id);\n      targetChildren.push(nodes[sourceIdx].id);\n    });\n  }\n}\nfunction connect(a, b, edges) {\n  var m = edges.length;\n  for (var i = 0; i < m; i++) {\n    var source = (0, util_1.getEdgeTerminal)(edges[i], 'source');\n    var target = (0, util_1.getEdgeTerminal)(edges[i], 'target');\n    if (a.id === source && b.id === target || b.id === source && a.id === target) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction compareDegree(a, b) {\n  var aDegree = a.degree;\n  var bDegree = b.degree;\n  if (aDegree < bDegree) {\n    return -1;\n  }\n  if (aDegree > bDegree) {\n    return 1;\n  }\n  return 0;\n}\n/**\n * 圆形布局\n */\nvar CircularLayout = /** @class */function (_super) {\n  __extends(CircularLayout, _super);\n  function CircularLayout(options) {\n    var _this = _super.call(this) || this;\n    /** 固定半径，若设置了 radius，则 startRadius 与 endRadius 不起效 */\n    _this.radius = null;\n    /** 节点大小，配合 nodeSpacing，一起用于计算 radius。若不配置，节点大小默认为 30 */\n    _this.nodeSize = undefined;\n    /** 起始半径 */\n    _this.startRadius = null;\n    /** 终止半径 */\n    _this.endRadius = null;\n    /** 起始角度 */\n    _this.startAngle = 0;\n    /** 终止角度 */\n    _this.endAngle = 2 * Math.PI;\n    /** 是否顺时针 */\n    _this.clockwise = true;\n    /** 节点在环上分成段数（几个段将均匀分布），在 endRadius - startRadius != 0 时生效 */\n    _this.divisions = 1;\n    /** 节点在环上排序的依据，可选: 'topology', 'degree', 'null' */\n    _this.ordering = null;\n    /** how many 2*pi from first to last nodes */\n    _this.angleRatio = 1;\n    _this.nodes = [];\n    _this.edges = [];\n    _this.nodeMap = {};\n    _this.degrees = [];\n    _this.width = 300;\n    _this.height = 300;\n    _this.updateCfg(options);\n    return _this;\n  }\n  CircularLayout.prototype.getDefaultCfg = function () {\n    return {\n      radius: null,\n      startRadius: null,\n      endRadius: null,\n      startAngle: 0,\n      endAngle: 2 * Math.PI,\n      clockwise: true,\n      divisions: 1,\n      ordering: null,\n      angleRatio: 1\n    };\n  };\n  /**\n   * 执行布局\n   */\n  CircularLayout.prototype.execute = function () {\n    var _a;\n    var self = this;\n    var nodes = self.nodes;\n    var edges = self.edges;\n    var n = nodes.length;\n    if (n === 0) {\n      if (self.onLayoutEnd) self.onLayoutEnd();\n      return;\n    }\n    if (!self.width && typeof window !== \"undefined\") {\n      self.width = window.innerWidth;\n    }\n    if (!self.height && typeof window !== \"undefined\") {\n      self.height = window.innerHeight;\n    }\n    if (!self.center) {\n      self.center = [self.width / 2, self.height / 2];\n    }\n    var center = self.center;\n    if (n === 1) {\n      nodes[0].x = center[0];\n      nodes[0].y = center[1];\n      if (self.onLayoutEnd) self.onLayoutEnd();\n      return;\n    }\n    var radius = self.radius,\n      startRadius = self.startRadius,\n      endRadius = self.endRadius;\n    var divisions = self.divisions,\n      startAngle = self.startAngle,\n      endAngle = self.endAngle,\n      angleRatio = self.angleRatio,\n      ordering = self.ordering,\n      clockwise = self.clockwise,\n      paramNodeSpacing = self.nodeSpacing,\n      paramNodeSize = self.nodeSize;\n    var angleStep = (endAngle - startAngle) / n;\n    // layout\n    var nodeMap = {};\n    nodes.forEach(function (node, i) {\n      nodeMap[node.id] = i;\n    });\n    self.nodeMap = nodeMap;\n    var degrees = (0, util_1.getDegree)(nodes.length, nodeMap, edges);\n    self.degrees = degrees;\n    if (paramNodeSpacing) {\n      var nodeSpacing_1 = (0, util_1.getFuncByUnknownType)(10, paramNodeSpacing);\n      var nodeSize_1 = (0, util_1.getFuncByUnknownType)(10, paramNodeSize);\n      var maxNodeSize_1 = -Infinity;\n      nodes.forEach(function (node) {\n        var nSize = nodeSize_1(node);\n        if (maxNodeSize_1 < nSize) maxNodeSize_1 = nSize;\n      });\n      var length_1 = 0;\n      nodes.forEach(function (node, i) {\n        if (i === 0) length_1 += maxNodeSize_1 || 10;else length_1 += (nodeSpacing_1(node) || 0) + (maxNodeSize_1 || 10);\n      });\n      radius = length_1 / (2 * Math.PI);\n    } else if (!radius && !startRadius && !endRadius) {\n      radius = self.height > self.width ? self.width / 2 : self.height / 2;\n    } else if (!startRadius && endRadius) {\n      startRadius = endRadius;\n    } else if (startRadius && !endRadius) {\n      endRadius = startRadius;\n    }\n    var astep = angleStep * angleRatio;\n    var layoutNodes = [];\n    if (ordering === \"topology\") {\n      // layout according to the topology\n      layoutNodes = self.topologyOrdering();\n    } else if (ordering === \"topology-directed\") {\n      // layout according to the topology\n      layoutNodes = self.topologyOrdering(true);\n    } else if (ordering === \"degree\") {\n      // layout according to the descent order of degrees\n      layoutNodes = self.degreeOrdering();\n    } else {\n      // layout according to the original order in the data.nodes\n      layoutNodes = nodes;\n    }\n    var divN = Math.ceil(n / divisions); // node number in each division\n    for (var i = 0; i < n; ++i) {\n      var r = radius;\n      if (!r && startRadius !== null && endRadius !== null) {\n        r = startRadius + i * (endRadius - startRadius) / (n - 1);\n      }\n      if (!r) {\n        r = 10 + i * 100 / (n - 1);\n      }\n      var angle = startAngle + i % divN * astep + 2 * Math.PI / divisions * Math.floor(i / divN);\n      if (!clockwise) {\n        angle = endAngle - i % divN * astep - 2 * Math.PI / divisions * Math.floor(i / divN);\n      }\n      layoutNodes[i].x = center[0] + Math.cos(angle) * r;\n      layoutNodes[i].y = center[1] + Math.sin(angle) * r;\n      layoutNodes[i].weight = degrees[i].all;\n    }\n    (_a = self.onLayoutEnd) === null || _a === void 0 ? void 0 : _a.call(self);\n    return {\n      nodes: layoutNodes,\n      edges: this.edges\n    };\n  };\n  /**\n   * 根据节点的拓扑结构排序\n   * @return {array} orderedNodes 排序后的结果\n   */\n  CircularLayout.prototype.topologyOrdering = function (directed) {\n    if (directed === void 0) {\n      directed = false;\n    }\n    var self = this;\n    var degrees = self.degrees;\n    var edges = self.edges;\n    var nodes = self.nodes;\n    var cnodes = (0, util_1.clone)(nodes);\n    var nodeMap = self.nodeMap;\n    var orderedCNodes = [cnodes[0]];\n    var resNodes = [nodes[0]];\n    var pickFlags = [];\n    var n = nodes.length;\n    pickFlags[0] = true;\n    initHierarchy(cnodes, edges, nodeMap, directed);\n    var k = 0;\n    cnodes.forEach(function (cnode, i) {\n      if (i !== 0) {\n        if ((i === n - 1 || degrees[i].all !== degrees[i + 1].all || connect(orderedCNodes[k], cnode, edges)) && !pickFlags[i]) {\n          orderedCNodes.push(cnode);\n          resNodes.push(nodes[nodeMap[cnode.id]]);\n          pickFlags[i] = true;\n          k++;\n        } else {\n          var children = orderedCNodes[k].children;\n          var foundChild = false;\n          for (var j = 0; j < children.length; j++) {\n            var childIdx = nodeMap[children[j]];\n            if (degrees[childIdx].all === degrees[i].all && !pickFlags[childIdx]) {\n              orderedCNodes.push(cnodes[childIdx]);\n              resNodes.push(nodes[nodeMap[cnodes[childIdx].id]]);\n              pickFlags[childIdx] = true;\n              foundChild = true;\n              break;\n            }\n          }\n          var ii = 0;\n          while (!foundChild) {\n            if (!pickFlags[ii]) {\n              orderedCNodes.push(cnodes[ii]);\n              resNodes.push(nodes[nodeMap[cnodes[ii].id]]);\n              pickFlags[ii] = true;\n              foundChild = true;\n            }\n            ii++;\n            if (ii === n) {\n              break;\n            }\n          }\n        }\n      }\n    });\n    return resNodes;\n  };\n  /**\n   * 根据节点度数大小排序\n   * @return {array} orderedNodes 排序后的结果\n   */\n  CircularLayout.prototype.degreeOrdering = function () {\n    var self = this;\n    var nodes = self.nodes;\n    var orderedNodes = [];\n    var degrees = self.degrees;\n    nodes.forEach(function (node, i) {\n      node.degree = degrees[i].all;\n      orderedNodes.push(node);\n    });\n    orderedNodes.sort(compareDegree);\n    return orderedNodes;\n  };\n  CircularLayout.prototype.getType = function () {\n    return \"circular\";\n  };\n  return CircularLayout;\n}(base_1.Base);\nexports.CircularLayout = CircularLayout;","map":{"version":3,"mappings":"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","names":["initHierarchy","nodes","edges","nodeMap","directed","forEach","_","i","children","parent","e","source","target","sourceIdx","targetIdx","child","push","id","sourceChildren","targetChildren","connect","a","b","m","length","compareDegree","aDegree","degree","bDegree","__extends","options","_super","_this","undefined","Math","PI","updateCfg","CircularLayout","radius","startRadius","endRadius","startAngle","endAngle","clockwise","divisions","ordering","angleRatio","self","n","onLayoutEnd","width","window","innerWidth","height","innerHeight","center","x","y","paramNodeSpacing","paramNodeSize","angleStep","node","degrees","nodeSpacing_1","nodeSize_1","maxNodeSize_1","Infinity","nSize","length_1","astep","layoutNodes","topologyOrdering","degreeOrdering","divN","ceil","r","angle","floor","cos","sin","weight","all","cnodes","orderedCNodes","resNodes","pickFlags","k","cnode","foundChild","j","childIdx","ii","orderedNodes","sort","base_1","exports"],"sourceRoot":"","sources":["../../src/layout/circular.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script","externalDependencies":[]}