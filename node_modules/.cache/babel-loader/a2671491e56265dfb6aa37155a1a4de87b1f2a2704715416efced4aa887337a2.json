{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { reactive, ref, onBeforeMount } from 'vue';\nimport modalData from '@/utils/data.json';\nimport { Notification } from '@arco-design/web-vue';\nimport { timeFix, version } from '@/utils/util';\nimport { Message } from '@arco-design/web-vue';\nimport { useRouter } from 'vue-router';\nimport { useUserInfoStore } from '../store/index';\nimport { removeWaterMask } from '../utils/watermark';\nexport default {\n  __name: 'LoginView',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const store = useUserInfoStore();\n    const logo = require('../assets/images/logo.png');\n    const bigImg = require('../assets/images/talent-agent.jpg');\n    const pwdLogin = require('../assets/images/pwdLogin.svg');\n    const loginRq = require('../assets/images/rq.svg');\n    const bigLoginRq = require('../assets/images/loginRq.png');\n    const router = useRouter();\n    const showLoginRq = ref(true);\n    const form = reactive({\n      userName: localStorage.getItem('loginUserName') || '',\n      password: ''\n    });\n    const isChecked = ref(localStorage.getItem('checkBox') === '1');\n    const loginBtn = ref(false);\n    const modalVisible = ref(false);\n    const modalDt = ref(JSON.parse(JSON.stringify(modalData)));\n    onBeforeMount(() => {\n      removeWaterMask();\n    });\n    const showAgreementModal = () => {\n      modalVisible.value = true;\n    };\n    const handleSubmitSuccess = record => {\n      loginBtn.value = true;\n      store.Login(record).then(() => {\n        router.push({\n          path: '/'\n        });\n        // 延迟 1 秒显示欢迎信息\n        setTimeout(() => {\n          Notification.success({\n            title: '登录成功',\n            content: `${timeFix()}，欢迎回来`\n          });\n        }, 1000);\n        localStorage.setItem('checkBox', '1');\n      }).catch(err => {\n        Message.error(err || '登陆失败');\n      }).finally(() => {\n        loginBtn.value = false;\n      });\n    };\n    const __returned__ = {\n      store,\n      logo,\n      bigImg,\n      pwdLogin,\n      loginRq,\n      bigLoginRq,\n      router,\n      showLoginRq,\n      form,\n      isChecked,\n      loginBtn,\n      modalVisible,\n      modalDt,\n      showAgreementModal,\n      handleSubmitSuccess,\n      reactive,\n      ref,\n      onBeforeMount,\n      get modalData() {\n        return modalData;\n      },\n      get Notification() {\n        return Notification;\n      },\n      get timeFix() {\n        return timeFix;\n      },\n      get version() {\n        return version;\n      },\n      get Message() {\n        return Message;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get useUserInfoStore() {\n        return useUserInfoStore;\n      },\n      get removeWaterMask() {\n        return removeWaterMask;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"mappings":";AAoGI,SAASA,QAAQ,EAACC,GAAG,EAACC,aAAa,QAAQ,KAAK;AAChD,OAAOC,SAAS,MAAM,mBAAmB;AACzC,SAASC,YAAY,QAAQ,sBAAsB;AACnD,SAASC,OAAO,EAACC,OAAO,QAAQ,cAAc;AAC9C,SAASC,OAAO,QAAQ,sBAAsB;AAC9C,SAASC,SAAS,QAAQ,YAAY;AACtC,SAASC,gBAAgB,QAAQ,gBAAgB;AACjD,SAASC,eAAe,QAAQ,oBAAoB;;;;;;;IACpD,MAAMC,KAAK,GAAGF,gBAAgB,EAAE;IAChC,MAAMG,IAAI,GAAGC,OAAO,CAAC,2BAA2B,CAAC;IACjD,MAAMC,MAAM,GAAGD,OAAO,CAAC,mCAAmC,CAAC;IAC3D,MAAME,QAAQ,GAAGF,OAAO,CAAC,+BAA+B,CAAC;IACzD,MAAMG,OAAO,GAAGH,OAAO,CAAC,yBAAyB,CAAC;IAClD,MAAMI,UAAU,GAAGJ,OAAO,CAAC,8BAA8B,CAAC;IAC1D,MAAMK,MAAM,GAAGV,SAAS,EAAE;IAE1B,MAAMW,WAAW,GAAGlB,GAAG,CAAC,IAAI,CAAC;IAE7B,MAAMmB,IAAI,GAAGpB,QAAQ,CAAC;MAClBqB,QAAQ,EAAGC,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC,IAAI,EAAE;MACtDC,QAAQ,EAAG;IACf,CAAC,CAAC;IACF,MAAMC,SAAS,GAAGxB,GAAG,CAACqB,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC;IAC/D,MAAMG,QAAQ,GAAGzB,GAAG,CAAC,KAAK,CAAC;IAC3B,MAAM0B,YAAY,GAAG1B,GAAG,CAAC,KAAK,CAAC;IAC/B,MAAM2B,OAAO,GAAG3B,GAAG,CAAC4B,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAAC5B,SAAS,CAAC,CAAC,CAAC;IAC1DD,aAAa,CAAC,MAAI;MACdQ,eAAe,EAAE;IACrB,CAAC,CAAC;IACF,MAAMsB,kBAAkB,GAAG,MAAI;MAC3BL,YAAY,CAACM,KAAK,GAAG,IAAI;IAC7B,CAAC;IACD,MAAMC,mBAAmB,GAAIC,MAAM,IAAG;MAClCT,QAAQ,CAACO,KAAK,GAAG,IAAI;MACrBtB,KAAK,CAACyB,KAAK,CAACD,MAAM,CAAC,CAACE,IAAI,CAAC,MAAI;QACzBnB,MAAM,CAACoB,IAAI,CAAC;UAAEC,IAAI,EAAE;QAAI,CAAC,CAAC;QACtB;QACAC,UAAU,CAAC,MAAM;UACbpC,YAAY,CAACqC,OAAO,CAAC;YACjBC,KAAK,EAAE,MAAM;YACbC,OAAO,EAAG,GAAEtC,OAAO,EAAG;UAC1B,CAAC,CAAC;QACN,CAAC,EAAE,IAAI,CAAC;QACRiB,YAAY,CAACsB,OAAO,CAAC,UAAU,EAAE,GAAG,CAAC;MAC7C,CAAC,CAAC,CAACC,KAAK,CAACC,GAAG,IAAE;QACVvC,OAAO,CAACwC,KAAK,CAACD,GAAG,IAAI,MAAM,CAAC;MAChC,CAAC,CAAC,CAACE,OAAO,CAAC,MAAI;QACXtB,QAAQ,CAACO,KAAK,GAAG,KAAK;MAC1B,CAAC,CAAC;IACN,CAAC","names":["reactive","ref","onBeforeMount","modalData","Notification","timeFix","version","Message","useRouter","useUserInfoStore","removeWaterMask","store","logo","require","bigImg","pwdLogin","loginRq","bigLoginRq","router","showLoginRq","form","userName","localStorage","getItem","password","isChecked","loginBtn","modalVisible","modalDt","JSON","parse","stringify","showAgreementModal","value","handleSubmitSuccess","record","Login","then","push","path","setTimeout","success","title","content","setItem","catch","err","error","finally"],"sources":["/Users/lijiaxin/Documents/workspace/hydsoft-mgmt-frontend/src/views/LoginView.vue"],"sourcesContent":["<template>\n    <div id=\"userLayout\">\n      <div class=\"container\">\n        <div class=\"content-box\">\n          <div class=\"login-container\">\n            <div class=\"login-content\">\n              <div></div>\n              <div class=\"login-form\">\n                <!-- <div class=\"overflow-hidden\">\n                  <div class=\"float-right padding-4 pointer\" v-if=\"showLoginRq\" @click=\"showLoginRq=!showLoginRq\">\n                      <a class=\"m-r-12 vertical-30 blue\">二维码登录</a>\n                      <div class=\"loginImg\">\n                          <img :src=\"pwdLogin\" alt=\"\" width=\"50\">\n                      </div>\n                  </div>\n                  <div class=\"float-right padding-4 pointer\" v-else @click=\"showLoginRq=!showLoginRq\">\n                      <a class=\"m-r-12 vertical-30 blue\">密码登录</a>\n                      <div class=\"loginImg\">\n                          <img :src=\"loginRq\" alt=\"\" width=\"50\">\n                      </div>\n                  </div>\n                </div> -->\n                <h1 class=\"login-form-title\">OMS系统登录</h1>\n                <h3 class=\"login-form-version\" :style=\"{marginBottom: showLoginRq?'50px':'30px'}\">V{{ version }}</h3>\n                <div class=\"login-form-container\" v-if=\"showLoginRq\">\n                    <a-form :model=\"form\" @submit-success=\"handleSubmitSuccess\">\n                        <a-form-item field=\"userName\" :hide-label=\"true\" :rules=\"[{ required: true, message: '请输入账号' }]\" :validate-trigger=\"['change','input']\">\n                            <a-input\n                                size=\"large\"\n                                type=\"text\"\n                                placeholder=\"请输入账号\"\n                                v-model=\"form.userName\"\n                            >\n                            <template #prefix>\n                            <icon-user :style=\"{ color: 'rgba(0,0,0,.25)' }\"/>\n                            </template>\n                            </a-input>\n                        </a-form-item>\n                        <a-form-item field=\"password\" :hide-label=\"true\" :rules=\"[{ required: true, message: '请输入密码' }]\" :validate-trigger=\"['change','input']\"> \n                            <a-input-password\n                                size=\"large\"\n                                placeholder=\"请输入密码\"\n                                v-model=\"form.password\"\n                            >\n                            <template #prefix>\n                            <icon-lock :style=\"{ color: 'rgba(0,0,0,.25)' }\"/>\n                            </template>\n                            </a-input-password>\n                        </a-form-item>\n                        <a-form-item :hide-label=\"true\">\n                            <a-checkbox v-model=\"isChecked\" style=\"margin-right: 4px;\" />\n                            勾选表示您已同意<a-button type=\"text\" @click=\"showAgreementModal\">《用户服务协议》</a-button>\n                        </a-form-item>\n                        <a-form-item :hide-label=\"true\">\n                            <a-button\n                                size=\"large\"\n                                type=\"primary\"\n                                htmlType=\"submit\"\n                                class=\"login-button\"\n                                :loading=\"loginBtn\"\n                                :disabled=\"!isChecked\"\n                            >登 录</a-button>\n                        </a-form-item>\n                    </a-form>\n                </div>\n                <div v-else>\n                    <div class=\"rqContainer\">\n                        <div class=\"rqContent m-b-15\">\n                            <img :src=\"bigLoginRq\" alt=\"\" width=\"150\" srcset=\"\">\n                        </div>\n                    </div>\n                    <div class=\"m-b-66 black text-center\">\n                        请使用微信扫描二维码登录\n                    </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"mask\"></div>\n      </div>\n    </div>\n    <a-modal\n        title=\"OMS用户服务协议\"\n        v-model:visible=\"modalVisible\"\n        :footer=\"null\"\n        :width=\"900\"\n        :modal-style=\"{height:'600px',overflowY :'scroll'}\"\n      >\n        <div class=\"m-b-20\">欢迎使用OMS！在使用本OMS前，请仔细阅读以下的《用户服务协议》（以下简称“协议”）。</div>\n        <div v-for=\"(item, i) in modalDt\" :key=\"i\" class=\"m-t-14\">\n          <div>{{ item.title }}</div>\n          <div v-for=\"(jtem, j) in item.children\" :key=\"i + j\">\n            {{ jtem }}\n          </div>\n        </div>\n      </a-modal>\n  </template>\n  \n  <script setup>\n    import { reactive,ref,onBeforeMount } from 'vue';\n    import modalData from '@/utils/data.json';\n    import { Notification } from '@arco-design/web-vue';\n    import { timeFix,version } from '@/utils/util'\n    import { Message } from '@arco-design/web-vue';\n    import { useRouter } from 'vue-router'\n    import { useUserInfoStore } from '../store/index'\n    import { removeWaterMask } from '../utils/watermark'\n    const store = useUserInfoStore()\n    const logo = require('../assets/images/logo.png')\n    const bigImg = require('../assets/images/talent-agent.jpg')\n    const pwdLogin = require('../assets/images/pwdLogin.svg')\n    const loginRq = require('../assets/images/rq.svg')\n    const bigLoginRq = require('../assets/images/loginRq.png')\n    const router = useRouter()\n\n    const showLoginRq = ref(true)\n\n    const form = reactive({\n        userName : localStorage.getItem('loginUserName') || '',\n        password : ''\n    })\n    const isChecked = ref(localStorage.getItem('checkBox') === '1')\n    const loginBtn = ref(false)\n    const modalVisible = ref(false)\n    const modalDt = ref(JSON.parse(JSON.stringify(modalData)))\n    onBeforeMount(()=>{\n        removeWaterMask()\n    })\n    const showAgreementModal = ()=>{\n        modalVisible.value = true\n    }\n    const handleSubmitSuccess = (record)=>{\n        loginBtn.value = true\n        store.Login(record).then(()=>{\n            router.push({ path: '/' });\n                // 延迟 1 秒显示欢迎信息\n                setTimeout(() => {\n                    Notification.success({\n                        title: '登录成功',\n                        content: `${timeFix()}，欢迎回来`\n                    });\n                }, 1000);\n                localStorage.setItem('checkBox', '1');\n        }).catch(err=>{\n            Message.error(err || '登陆失败');\n        }).finally(()=>{\n            loginBtn.value = false;\n        })\n    }\n  </script>\n  \n  <style lang=\"scss\" scoped>\n  #userLayout{\n    height: 100vh;\n  }\n  .container {\n    width: 100%;\n    min-height: 100%;\n    background: url(~@/assets/images/loginBanner.jpg) no-repeat center;\n    background-size: cover;\n    position: relative;\n    .mask{\n      position: absolute;\n      left: 0;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      background-color: rgba(0, 0, 0, 0.45);\n    }\n    .content-box{\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n  }\n  .login-container{\n    display: flex;\n    justify-content: center;\n    .login-content{\n      position: relative;\n      z-index: 1;\n      width: 1005px;\n      height: 510px;\n      & >  div{\n        width: 50%;\n        height: 100%;\n        display: inline-block;\n        box-sizing: border-box;\n      }\n      & > div:first-child{\n        position: absolute;\n        left: 0;\n        top: 0;\n        background: url(~@/assets/images/loginBanner.jpg) no-repeat;\n        background-size: cover;\n        background-position: 44%;\n        background-origin :content-box;\n      }\n      & > div:last-child{\n        position: absolute;\n        top: 0;\n        right: 0;\n      }\n    }\n    .login-form{\n      background-color: #F2F2F2;\n      padding-top: 40px;\n      .loginImg{\n          display: inline-block;\n          position: relative;\n          overflow: hidden;\n      }\n      .loginImg::after{\n          content: '';\n          position: absolute;\n          left: -20px;\n          top: 20px;\n          width: 40px;\n          height: 50px;\n          transform: rotate(45deg);\n          background-color: #F2F2F2;\n      }\n      .login-form-title {\n        color: rgba(0, 0, 0, 0.85);\n        font-weight: bold;\n        text-align: center;\n        font-size: 22px;\n      }\n      .login-form-version{\n        text-align: center;\n        font-size: 20px;\n        font-weight: 600;\n      }\n      .login-form-container{\n        padding: 0 42px;\n      }\n      .login-button {\n        width: 100%;\n      }\n      \n    }\n    .rqContainer{\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        .rqContent{\n            padding: 24px;\n            background: #fff;\n            border: 1px solid #CCCCCC;\n        }\n    }\n  }\n    :deep(.ant-modal-body) {\n      height: 600px !important;\n      overflow-y: auto;\n  \n      &::-webkit-scrollbar {\n        width: 6px; /*高宽分别对应横竖滚动条的尺寸*/\n        height: 6px;\n      }\n      &::-webkit-scrollbar-thumb {\n        border-radius: 6px;\n        background: rgba(144, 147, 153, 0.5);\n      }\n      &::-webkit-scrollbar-track {\n        border-radius: 5px;\n        background: transparent;\n      }\n    }\n    .overflow-hidden{\n        overflow: hidden;\n    }\n    .float-right{\n        float: right;\n    }\n    .vertical-30{\n        vertical-align: 30px;\n    }\n    .padding-4{\n        padding: 4px;\n    }\n    .blue {\n        color: #1890FF;\n    }\n    .black{\n        color: #333;\n    }\n    .text-center{\n      text-align: center;\n    }\n    .m-b-15{\n        margin-bottom: 15px;\n    }\n    .m-b-66{\n        margin-bottom: 66px;\n    }\n  </style>\n  "]},"metadata":{},"sourceType":"module","externalDependencies":[]}