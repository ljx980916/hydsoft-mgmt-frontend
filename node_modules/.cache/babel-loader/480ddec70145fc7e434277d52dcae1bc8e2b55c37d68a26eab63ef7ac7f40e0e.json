{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.error.cause.js\");\nrequire(\"core-js/modules/es.array.push.js\");\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.width = exports.sep = exports.positionX = exports.balance = exports.alignCoordinates = exports.findSmallestWidthAlignment = exports.buildBlockGraph = exports.horizontalCompaction = exports.verticalAlignment = exports.hasConflict = exports.addConflict = exports.findOtherInnerSegmentNode = exports.findType2Conflicts = exports.findType1Conflicts = void 0;\n/*\n * This module provides coordinate assignment based on Brandes and Köpf, \"Fast\n * and Simple Horizontal Coordinate Assignment.\"\n */\nvar graphlib_1 = require(\"@antv/graphlib\");\nvar util_1 = require(\"@antv/util\");\nvar util_2 = require(\"../util\");\nvar BlockGraph = /** @class */function (_super) {\n  __extends(BlockGraph, _super);\n  function BlockGraph() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  return BlockGraph;\n}(graphlib_1.Graph);\nvar findType1Conflicts = function (g, layering) {\n  var conflicts = {};\n  var visitLayer = function (prevLayer, layer) {\n    // last visited node in the previous layer that is incident on an inner\n    // segment.\n    var k0 = 0;\n    // Tracks the last node in this layer scanned for crossings with a type-1\n    // segment.\n    var scanPos = 0;\n    var prevLayerLength = prevLayer.length;\n    var lastNode = layer === null || layer === void 0 ? void 0 : layer[(layer === null || layer === void 0 ? void 0 : layer.length) - 1];\n    layer === null || layer === void 0 ? void 0 : layer.forEach(function (v, i) {\n      var _a;\n      var w = (0, exports.findOtherInnerSegmentNode)(g, v);\n      var k1 = w ? g.node(w).order : prevLayerLength;\n      if (w || v === lastNode) {\n        (_a = layer.slice(scanPos, i + 1)) === null || _a === void 0 ? void 0 : _a.forEach(function (scanNode) {\n          var _a;\n          (_a = g.predecessors(scanNode)) === null || _a === void 0 ? void 0 : _a.forEach(function (u) {\n            var _a;\n            var uLabel = g.node(u);\n            var uPos = uLabel.order;\n            if ((uPos < k0 || k1 < uPos) && !(uLabel.dummy && ((_a = g.node(scanNode)) === null || _a === void 0 ? void 0 : _a.dummy))) {\n              (0, exports.addConflict)(conflicts, u, scanNode);\n            }\n          });\n        });\n        scanPos = i + 1;\n        k0 = k1;\n      }\n    });\n    return layer;\n  };\n  if (layering === null || layering === void 0 ? void 0 : layering.length) {\n    layering.reduce(visitLayer);\n  }\n  return conflicts;\n};\nexports.findType1Conflicts = findType1Conflicts;\nvar findType2Conflicts = function (g, layering) {\n  var conflicts = {};\n  function scan(south, southPos, southEnd, prevNorthBorder, nextNorthBorder) {\n    var _a, _b;\n    var v;\n    for (var i = southPos; i < southEnd; i++) {\n      v = south[i];\n      if ((_a = g.node(v)) === null || _a === void 0 ? void 0 : _a.dummy) {\n        (_b = g.predecessors(v)) === null || _b === void 0 ? void 0 : _b.forEach(function (u) {\n          var uNode = g.node(u);\n          if (uNode.dummy && (uNode.order < prevNorthBorder || uNode.order > nextNorthBorder)) {\n            (0, exports.addConflict)(conflicts, u, v);\n          }\n        });\n      }\n    }\n  }\n  ;\n  function getScannedKey(params) {\n    // south数组可能很大，不适合做key\n    return JSON.stringify(params.slice(1));\n  }\n  function scanIfNeeded(params, scanCache) {\n    var cacheKey = getScannedKey(params);\n    if (scanCache.get(cacheKey)) return;\n    scan.apply(void 0, params);\n    scanCache.set(cacheKey, true);\n  }\n  var visitLayer = function (north, south) {\n    var prevNorthPos = -1;\n    var nextNorthPos;\n    var southPos = 0;\n    var scanned = new Map();\n    south === null || south === void 0 ? void 0 : south.forEach(function (v, southLookahead) {\n      var _a;\n      if (((_a = g.node(v)) === null || _a === void 0 ? void 0 : _a.dummy) === \"border\") {\n        var predecessors = g.predecessors(v) || [];\n        if (predecessors.length) {\n          nextNorthPos = g.node(predecessors[0]).order;\n          scanIfNeeded([south, southPos, southLookahead, prevNorthPos, nextNorthPos], scanned);\n          southPos = southLookahead;\n          prevNorthPos = nextNorthPos;\n        }\n      }\n      scanIfNeeded([south, southPos, south.length, nextNorthPos, north.length], scanned);\n    });\n    return south;\n  };\n  if (layering === null || layering === void 0 ? void 0 : layering.length) {\n    layering.reduce(visitLayer);\n  }\n  return conflicts;\n};\nexports.findType2Conflicts = findType2Conflicts;\nvar findOtherInnerSegmentNode = function (g, v) {\n  var _a, _b;\n  if ((_a = g.node(v)) === null || _a === void 0 ? void 0 : _a.dummy) {\n    return (_b = g.predecessors(v)) === null || _b === void 0 ? void 0 : _b.find(function (u) {\n      return g.node(u).dummy;\n    });\n  }\n};\nexports.findOtherInnerSegmentNode = findOtherInnerSegmentNode;\nvar addConflict = function (conflicts, v, w) {\n  var vv = v;\n  var ww = w;\n  if (vv > ww) {\n    var tmp = vv;\n    vv = ww;\n    ww = tmp;\n  }\n  var conflictsV = conflicts[vv];\n  if (!conflictsV) {\n    conflicts[vv] = conflictsV = {};\n  }\n  conflictsV[ww] = true;\n};\nexports.addConflict = addConflict;\nvar hasConflict = function (conflicts, v, w) {\n  var vv = v;\n  var ww = w;\n  if (vv > ww) {\n    var tmp = v;\n    vv = ww;\n    ww = tmp;\n  }\n  return !!conflicts[vv];\n};\nexports.hasConflict = hasConflict;\n/*\n * Try to align nodes into vertical \"blocks\" where possible. This algorithm\n * attempts to align a node with one of its median neighbors. If the edge\n * connecting a neighbor is a type-1 conflict then we ignore that possibility.\n * If a previous node has already formed a block with a node after the node\n * we're trying to form a block with, we also ignore that possibility - our\n * blocks would be split in that scenario.\n */\nvar verticalAlignment = function (g, layering, conflicts, neighborFn) {\n  var root = {};\n  var align = {};\n  var pos = {};\n  // We cache the position here based on the layering because the graph and\n  // layering may be out of sync. The layering matrix is manipulated to\n  // generate different extreme alignments.\n  layering === null || layering === void 0 ? void 0 : layering.forEach(function (layer) {\n    layer === null || layer === void 0 ? void 0 : layer.forEach(function (v, order) {\n      root[v] = v;\n      align[v] = v;\n      pos[v] = order;\n    });\n  });\n  layering === null || layering === void 0 ? void 0 : layering.forEach(function (layer) {\n    var prevIdx = -1;\n    layer === null || layer === void 0 ? void 0 : layer.forEach(function (v) {\n      var ws = neighborFn(v);\n      if (ws.length) {\n        ws = ws.sort(function (a, b) {\n          return pos[a] - pos[b];\n        });\n        var mp = (ws.length - 1) / 2;\n        for (var i = Math.floor(mp), il = Math.ceil(mp); i <= il; ++i) {\n          var w = ws[i];\n          if (align[v] === v && prevIdx < pos[w] && !(0, exports.hasConflict)(conflicts, v, w)) {\n            align[w] = v;\n            align[v] = root[v] = root[w];\n            prevIdx = pos[w];\n          }\n        }\n      }\n    });\n  });\n  return {\n    root: root,\n    align: align\n  };\n};\nexports.verticalAlignment = verticalAlignment;\nvar horizontalCompaction = function (g, layering, root, align, reverseSep) {\n  var _a;\n  // This portion of the algorithm differs from BK due to a number of problems.\n  // Instead of their algorithm we construct a new block graph and do two\n  // sweeps. The first sweep places blocks with the smallest possible\n  // coordinates. The second sweep removes unused space by moving blocks to the\n  // greatest coordinates without violating separation.\n  var xs = {};\n  var blockG = (0, exports.buildBlockGraph)(g, layering, root, reverseSep);\n  var borderType = reverseSep ? \"borderLeft\" : \"borderRight\";\n  var iterate = function (setXsFunc, nextNodesFunc) {\n    var stack = blockG.nodes();\n    var elem = stack.pop();\n    var visited = {};\n    while (elem) {\n      if (visited[elem]) {\n        setXsFunc(elem);\n      } else {\n        visited[elem] = true;\n        stack.push(elem);\n        stack = stack.concat(nextNodesFunc(elem));\n      }\n      elem = stack.pop();\n    }\n  };\n  // First pass, assign smallest coordinates\n  var pass1 = function (elem) {\n    xs[elem] = (blockG.inEdges(elem) || []).reduce(function (acc, e) {\n      return Math.max(acc, (xs[e.v] || 0) + blockG.edge(e));\n    }, 0);\n  };\n  // Second pass, assign greatest coordinates\n  var pass2 = function (elem) {\n    var min = (blockG.outEdges(elem) || []).reduce(function (acc, e) {\n      return Math.min(acc, (xs[e.w] || 0) - blockG.edge(e));\n    }, Number.POSITIVE_INFINITY);\n    var node = g.node(elem);\n    if (min !== Number.POSITIVE_INFINITY && node.borderType !== borderType) {\n      xs[elem] = Math.max(xs[elem], min);\n    }\n  };\n  iterate(pass1, blockG.predecessors.bind(blockG));\n  iterate(pass2, blockG.successors.bind(blockG));\n  // Assign x coordinates to all nodes\n  (_a = Object.values(align)) === null || _a === void 0 ? void 0 : _a.forEach(function (v) {\n    xs[v] = xs[root[v]];\n  });\n  return xs;\n};\nexports.horizontalCompaction = horizontalCompaction;\nvar buildBlockGraph = function (g, layering, root, reverseSep) {\n  var blockGraph = new BlockGraph();\n  var graphLabel = g.graph();\n  var sepFn = (0, exports.sep)(graphLabel.nodesep, graphLabel.edgesep, reverseSep);\n  layering === null || layering === void 0 ? void 0 : layering.forEach(function (layer) {\n    var u;\n    layer === null || layer === void 0 ? void 0 : layer.forEach(function (v) {\n      var vRoot = root[v];\n      blockGraph.setNode(vRoot);\n      if (u) {\n        var uRoot = root[u];\n        var prevMax = blockGraph.edgeFromArgs(uRoot, vRoot);\n        blockGraph.setEdge(uRoot, vRoot, Math.max(sepFn(g, v, u), prevMax || 0));\n      }\n      u = v;\n    });\n  });\n  return blockGraph;\n};\nexports.buildBlockGraph = buildBlockGraph;\n/*\n * Returns the alignment that has the smallest width of the given alignments.\n */\nvar findSmallestWidthAlignment = function (g, xss) {\n  return (0, util_2.minBy)(Object.values(xss), function (xs) {\n    var _a;\n    var max = Number.NEGATIVE_INFINITY;\n    var min = Number.POSITIVE_INFINITY;\n    (_a = Object.keys(xs)) === null || _a === void 0 ? void 0 : _a.forEach(function (v) {\n      var x = xs[v];\n      var halfWidth = (0, exports.width)(g, v) / 2;\n      max = Math.max(x + halfWidth, max);\n      min = Math.min(x - halfWidth, min);\n    });\n    return max - min;\n  });\n};\nexports.findSmallestWidthAlignment = findSmallestWidthAlignment;\n/*\n * Align the coordinates of each of the layout alignments such that\n * left-biased alignments have their minimum coordinate at the same point as\n * the minimum coordinate of the smallest width alignment and right-biased\n * alignments have their maximum coordinate at the same point as the maximum\n * coordinate of the smallest width alignment.\n */\nfunction alignCoordinates(xss, alignTo) {\n  var alignToVals = Object.values(alignTo);\n  var alignToMin = (0, util_1.min)(alignToVals);\n  var alignToMax = (0, util_1.max)(alignToVals);\n  [\"u\", \"d\"].forEach(function (vert) {\n    [\"l\", \"r\"].forEach(function (horiz) {\n      var alignment = vert + horiz;\n      var xs = xss[alignment];\n      var delta;\n      if (xs === alignTo) return;\n      var xsVals = Object.values(xs);\n      delta = horiz === \"l\" ? alignToMin - (0, util_1.min)(xsVals) : alignToMax - (0, util_1.max)(xsVals);\n      if (delta) {\n        xss[alignment] = {};\n        Object.keys(xs).forEach(function (key) {\n          xss[alignment][key] = xs[key] + delta;\n        });\n      }\n    });\n  });\n}\nexports.alignCoordinates = alignCoordinates;\nvar balance = function (xss, align) {\n  var result = {};\n  Object.keys(xss.ul).forEach(function (key) {\n    if (align) {\n      result[key] = xss[align.toLowerCase()][key];\n    } else {\n      var values = Object.values(xss).map(function (x) {\n        return x[key];\n      });\n      result[key] = (values[0] + values[1]) / 2; // (ur + ul) / 2\n    }\n  });\n\n  return result;\n};\nexports.balance = balance;\nvar positionX = function (g) {\n  var layering = (0, util_2.buildLayerMatrix)(g);\n  var conflicts = Object.assign((0, exports.findType1Conflicts)(g, layering), (0, exports.findType2Conflicts)(g, layering));\n  var xss = {};\n  var adjustedLayering;\n  [\"u\", \"d\"].forEach(function (vert) {\n    adjustedLayering = vert === \"u\" ? layering : Object.values(layering).reverse();\n    [\"l\", \"r\"].forEach(function (horiz) {\n      if (horiz === \"r\") {\n        adjustedLayering = adjustedLayering.map(function (inner) {\n          return Object.values(inner).reverse();\n        });\n      }\n      var neighborFn = (vert === \"u\" ? g.predecessors : g.successors).bind(g);\n      var align = (0, exports.verticalAlignment)(g, adjustedLayering, conflicts, neighborFn);\n      var xs = (0, exports.horizontalCompaction)(g, adjustedLayering, align.root, align.align, horiz === \"r\");\n      if (horiz === \"r\") {\n        Object.keys(xs).forEach(function (key) {\n          xs[key] = -xs[key];\n        });\n      }\n      xss[vert + horiz] = xs;\n    });\n  });\n  var smallestWidth = (0, exports.findSmallestWidthAlignment)(g, xss);\n  alignCoordinates(xss, smallestWidth);\n  return (0, exports.balance)(xss, g.graph().align);\n};\nexports.positionX = positionX;\nvar sep = function (nodeSep, edgeSep, reverseSep) {\n  return function (g, v, w) {\n    var vLabel = g.node(v);\n    var wLabel = g.node(w);\n    var sum = 0;\n    var delta;\n    sum += vLabel.width / 2;\n    if (vLabel.hasOwnProperty(\"labelpos\")) {\n      switch ((vLabel.labelpos || \"\").toLowerCase()) {\n        case \"l\":\n          delta = -vLabel.width / 2;\n          break;\n        case \"r\":\n          delta = vLabel.width / 2;\n          break;\n      }\n    }\n    if (delta) {\n      sum += reverseSep ? delta : -delta;\n    }\n    delta = 0;\n    sum += (vLabel.dummy ? edgeSep : nodeSep) / 2;\n    sum += (wLabel.dummy ? edgeSep : nodeSep) / 2;\n    sum += wLabel.width / 2;\n    if (wLabel.labelpos) {\n      switch ((wLabel.labelpos || \"\").toLowerCase()) {\n        case \"l\":\n          delta = wLabel.width / 2;\n          break;\n        case \"r\":\n          delta = -wLabel.width / 2;\n          break;\n      }\n    }\n    if (delta) {\n      sum += reverseSep ? delta : -delta;\n    }\n    delta = 0;\n    return sum;\n  };\n};\nexports.sep = sep;\nvar width = function (g, v) {\n  return g.node(v).width || 0;\n};\nexports.width = width;","map":{"version":3,"mappings":"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","names":["__extends","graphlib_1","findType1Conflicts","g","layering","conflicts","visitLayer","prevLayer","layer","k0","scanPos","prevLayerLength","length","lastNode","forEach","v","i","w","k1","node","order","slice","scanNode","predecessors","u","uLabel","uPos","dummy","reduce","exports","findType2Conflicts","scan","south","southPos","southEnd","prevNorthBorder","nextNorthBorder","uNode","getScannedKey","params","JSON","stringify","scanIfNeeded","scanCache","cacheKey","get","set","north","prevNorthPos","nextNorthPos","scanned","Map","southLookahead","findOtherInnerSegmentNode","find","addConflict","vv","ww","tmp","conflictsV","hasConflict","verticalAlignment","neighborFn","root","align","pos","prevIdx","ws","sort","a","b","mp","Math","floor","il","ceil","horizontalCompaction","reverseSep","xs","blockG","borderType","iterate","setXsFunc","nextNodesFunc","stack","nodes","elem","pop","visited","push","concat","pass1","inEdges","acc","e","max","edge","pass2","min","outEdges","Number","POSITIVE_INFINITY","bind","successors","values","buildBlockGraph","blockGraph","BlockGraph","graphLabel","graph","sepFn","nodesep","edgesep","vRoot","setNode","uRoot","prevMax","edgeFromArgs","setEdge","findSmallestWidthAlignment","xss","Object","NEGATIVE_INFINITY","keys","x","halfWidth","alignCoordinates","alignTo","alignToVals","alignToMin","alignToMax","vert","horiz","alignment","delta","xsVals","key","balance","result","ul","toLowerCase","map","positionX","assign","adjustedLayering","reverse","inner","smallestWidth","sep","nodeSep","edgeSep","vLabel","wLabel","sum","width","hasOwnProperty","labelpos"],"sourceRoot":"","sources":["../../../../../src/layout/dagre/src/position/bk.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script","externalDependencies":[]}