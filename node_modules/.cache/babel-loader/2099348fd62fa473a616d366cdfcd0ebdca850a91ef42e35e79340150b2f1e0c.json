{"ast":null,"code":"import { isAnyArray } from 'is-any-array';\nimport Matrix from './matrix';\nexport function covariance(xMatrix, yMatrix = xMatrix, options = {}) {\n  xMatrix = new Matrix(xMatrix);\n  let yIsSame = false;\n  if (typeof yMatrix === 'object' && !Matrix.isMatrix(yMatrix) && !isAnyArray(yMatrix)) {\n    options = yMatrix;\n    yMatrix = xMatrix;\n    yIsSame = true;\n  } else {\n    yMatrix = new Matrix(yMatrix);\n  }\n  if (xMatrix.rows !== yMatrix.rows) {\n    throw new TypeError('Both matrices must have the same number of rows');\n  }\n  const {\n    center = true\n  } = options;\n  if (center) {\n    xMatrix = xMatrix.center('column');\n    if (!yIsSame) {\n      yMatrix = yMatrix.center('column');\n    }\n  }\n  const cov = xMatrix.transpose().mmul(yMatrix);\n  for (let i = 0; i < cov.rows; i++) {\n    for (let j = 0; j < cov.columns; j++) {\n      cov.set(i, j, cov.get(i, j) * (1 / (xMatrix.rows - 1)));\n    }\n  }\n  return cov;\n}","map":{"version":3,"names":["isAnyArray","Matrix","covariance","xMatrix","yMatrix","options","yIsSame","isMatrix","rows","TypeError","center","cov","transpose","mmul","i","j","columns","set","get"],"sources":["/Users/lijiaxin/Documents/workspace/hydsoft-oms-frontend/node_modules/ml-matrix/src/covariance.js"],"sourcesContent":["import { isAnyArray } from 'is-any-array';\n\nimport Matrix from './matrix';\n\nexport function covariance(xMatrix, yMatrix = xMatrix, options = {}) {\n  xMatrix = new Matrix(xMatrix);\n  let yIsSame = false;\n  if (\n    typeof yMatrix === 'object' &&\n    !Matrix.isMatrix(yMatrix) &&\n    !isAnyArray(yMatrix)\n  ) {\n    options = yMatrix;\n    yMatrix = xMatrix;\n    yIsSame = true;\n  } else {\n    yMatrix = new Matrix(yMatrix);\n  }\n  if (xMatrix.rows !== yMatrix.rows) {\n    throw new TypeError('Both matrices must have the same number of rows');\n  }\n  const { center = true } = options;\n  if (center) {\n    xMatrix = xMatrix.center('column');\n    if (!yIsSame) {\n      yMatrix = yMatrix.center('column');\n    }\n  }\n  const cov = xMatrix.transpose().mmul(yMatrix);\n  for (let i = 0; i < cov.rows; i++) {\n    for (let j = 0; j < cov.columns; j++) {\n      cov.set(i, j, cov.get(i, j) * (1 / (xMatrix.rows - 1)));\n    }\n  }\n  return cov;\n}\n"],"mappings":"AAAA,SAASA,UAAU,QAAQ,cAAc;AAEzC,OAAOC,MAAM,MAAM,UAAU;AAE7B,OAAO,SAASC,UAAU,CAACC,OAAO,EAAEC,OAAO,GAAGD,OAAO,EAAEE,OAAO,GAAG,CAAC,CAAC,EAAE;EACnEF,OAAO,GAAG,IAAIF,MAAM,CAACE,OAAO,CAAC;EAC7B,IAAIG,OAAO,GAAG,KAAK;EACnB,IACE,OAAOF,OAAO,KAAK,QAAQ,IAC3B,CAACH,MAAM,CAACM,QAAQ,CAACH,OAAO,CAAC,IACzB,CAACJ,UAAU,CAACI,OAAO,CAAC,EACpB;IACAC,OAAO,GAAGD,OAAO;IACjBA,OAAO,GAAGD,OAAO;IACjBG,OAAO,GAAG,IAAI;EAChB,CAAC,MAAM;IACLF,OAAO,GAAG,IAAIH,MAAM,CAACG,OAAO,CAAC;EAC/B;EACA,IAAID,OAAO,CAACK,IAAI,KAAKJ,OAAO,CAACI,IAAI,EAAE;IACjC,MAAM,IAAIC,SAAS,CAAC,iDAAiD,CAAC;EACxE;EACA,MAAM;IAAEC,MAAM,GAAG;EAAK,CAAC,GAAGL,OAAO;EACjC,IAAIK,MAAM,EAAE;IACVP,OAAO,GAAGA,OAAO,CAACO,MAAM,CAAC,QAAQ,CAAC;IAClC,IAAI,CAACJ,OAAO,EAAE;MACZF,OAAO,GAAGA,OAAO,CAACM,MAAM,CAAC,QAAQ,CAAC;IACpC;EACF;EACA,MAAMC,GAAG,GAAGR,OAAO,CAACS,SAAS,EAAE,CAACC,IAAI,CAACT,OAAO,CAAC;EAC7C,KAAK,IAAIU,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,GAAG,CAACH,IAAI,EAAEM,CAAC,EAAE,EAAE;IACjC,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,GAAG,CAACK,OAAO,EAAED,CAAC,EAAE,EAAE;MACpCJ,GAAG,CAACM,GAAG,CAACH,CAAC,EAAEC,CAAC,EAAEJ,GAAG,CAACO,GAAG,CAACJ,CAAC,EAAEC,CAAC,CAAC,IAAI,CAAC,IAAIZ,OAAO,CAACK,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC;IACzD;EACF;EACA,OAAOG,GAAG;AACZ"},"metadata":{},"sourceType":"module","externalDependencies":[]}