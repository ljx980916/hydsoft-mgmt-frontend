{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-16f8210a\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"defaultPadding\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"tag\"\n}, \"部门\", -1 /* HOISTED */));\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"dept\"\n}, \"BG1\", -1 /* HOISTED */));\n\nexport function render(_ctx, _cache) {\n  const _component_a_space = _resolveComponent(\"a-space\");\n  const _component_CollapseTable = _resolveComponent(\"CollapseTable\");\n  const _component_NoCollapseTable = _resolveComponent(\"NoCollapseTable\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"header\", null, [_createVNode(_component_a_space, null, {\n    default: _withCtx(() => [_hoisted_2, _hoisted_3]),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"main\", null, [_createElementVNode(\"div\", null, [_createCommentVNode(\" 营业收入 \"), _createVNode(_component_CollapseTable, {\n    title: '营业收入',\n    columns: _ctx.dataContent.columns,\n    data: _ctx.dataContent.dataSource,\n    loading: _ctx.dataContent.loading,\n    expandedRowKeys: _ctx.expandedRowKeys,\n    onExpandedChange: _ctx.expandedChange\n  }, null, 8 /* PROPS */, [\"columns\", \"data\", \"loading\", \"expandedRowKeys\", \"onExpandedChange\"])]), _createCommentVNode(\" 外币 \"), _createElementVNode(\"div\", null, [_createVNode(_component_NoCollapseTable, {\n    title: '外币',\n    columns: _ctx.tableContent.columns,\n    data: _ctx.tableContent.dataSource,\n    loading: _ctx.tableContent.loading,\n    expandedRowKeys: _ctx.noexpandedRowKeys,\n    setColumnsData: _ctx.dataContent.dataSource,\n    onNoexpandedChange: _ctx.noexpandedChange\n  }, null, 8 /* PROPS */, [\"columns\", \"data\", \"loading\", \"expandedRowKeys\", \"setColumnsData\", \"onNoexpandedChange\"])])])]);\n}","map":{"version":3,"mappings":";;;EACOA,KAAK,EAAC;AAAgB;gEAGrBC,oBAAyB;EAApBD,KAAK,EAAC;AAAK,GAAC,IAAE;gEACnBC,oBAA8B;EAAvBD,KAAK,EAAC;AAAM,GAAC,KAAG;;;;;;uBAJ7BE,oBAgCM,OAhCNC,UAgCM,GA/BJF,oBAKS,iBAJNG,aAGWC;sBAFV,MAAyB,CAAzBC,UAAyB,EACzBC,UAA8B;;QAGlCN,oBAwBO,eAvBHA,oBAUM,cATFO,6BAAa,EACbJ,aAOEK;IANGC,KAAK,EAAE,MAAM;IACbC,OAAO,EAAIC,gBAAW,CAACD,OAAO;IAC9BE,IAAI,EAAID,gBAAW,CAACE,UAAU;IAC9BC,OAAO,EAAGH,gBAAW,CAACG,OAAO;IAC7BC,eAAe,EAAEJ,oBAAe;IAChCK,gBAAc,EAAEL;oGAGxBJ,2BAAW,EACZP,oBAUM,cATFG,aAQEc;IAPGR,KAAK,EAAE,IAAI;IACXC,OAAO,EAAIC,iBAAY,CAACD,OAAO;IAC/BE,IAAI,EAAID,iBAAY,CAACE,UAAU;IAC/BC,OAAO,EAAGH,iBAAY,CAACG,OAAO;IAC9BC,eAAe,EAAEJ,sBAAiB;IAClCO,cAAc,EAAEP,gBAAW,CAACE,UAAU;IACtCM,kBAAgB,EAAER","names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_createVNode","_component_a_space","_hoisted_2","_hoisted_3","_createCommentVNode","_component_CollapseTable","title","columns","_ctx","data","dataSource","loading","expandedRowKeys","onExpandedChange","_component_NoCollapseTable","setColumnsData","onNoexpandedChange"],"sourceRoot":"","sources":["/Users/lijiaxin/Documents/workspace/hydsoft-oms-frontend/src/views/demo/revenue.vue"],"sourcesContent":["<template>\n  <div class=\"defaultPadding\">\n    <header>\n       <a-space>\n        <div class=\"tag\">部门</div>\n        <span  class=\"dept\">BG1</span>\n        </a-space>\n    </header>\n    <main>\n        <div>\n            <!-- 营业收入 -->\n            <CollapseTable \n                :title=\"'营业收入'\"\n                :columns = \"dataContent.columns\" \n                :data = \"dataContent.dataSource\" \n                :loading =\"dataContent.loading\"\n                :expandedRowKeys=\"expandedRowKeys\"\n                @expandedChange=\"expandedChange\"\n            />\n        </div>\n         <!-- 外币 -->\n        <div>\n            <NoCollapseTable\n                :title=\"'外币'\"\n                :columns = \"tableContent.columns\" \n                :data = \"tableContent.dataSource\" \n                :loading =\"tableContent.loading\"\n                :expandedRowKeys=\"noexpandedRowKeys\"\n                :setColumnsData=\"dataContent.dataSource\"\n                @noexpandedChange=\"noexpandedChange\"\n            />\n        </div>\n    </main>\n  </div>\n</template>\n\n\n<script setup>\nimport { ref,reactive } from 'vue';\nimport {revenueColumns,List} from './constColumns.js';\nimport {getRevenueList,getForeignCurrency} from '@/api/revenue.js';\nimport {dealData,getCurrentDate} from '@/utils/util.js';\nimport CollapseTable from '@/components/collapseTable.vue';\nimport NoCollapseTable from '@/components/noCollapseTable.vue';\nimport {countWorkdaysByMonth} from \"@/api/drillAnalyze.js\";\nlet { year} = getCurrentDate();\n// let currentDate = `${year}-${month}`;\n// const dateNow = ref(currentDate);\nconst expandedRowKeys = ref([]);\nconst noexpandedRowKeys = ref([]);\n// 折叠表格配置信息\nconst dataContent = reactive({\n  columns: revenueColumns,\n  dataSource: [],\n  loading: false\n});\n// 表格配置信息\nconst tableContent = reactive({\n  columns: revenueColumns,\n  dataSource: [],\n  loading: false\n});\n// 已展开的数据行发生改变时触发\nconst expandedChange = (rowkeys)=>{\n    expandedRowKeys.value = rowkeys\n};\nconst noexpandedChange = (rowkeys)=>{\n    noexpandedRowKeys.value = rowkeys\n};\n// 获取收入列表数据\nconst getRevenueTable = ()=>{\n    List.forEach(item=>{\n        let month = 0;\n        if(item.dataIndex.substring(0,5)=='month'){\n            if(Number(item.dataIndex.substring(5))<10){\n                month = `0${item.dataIndex.substring(5)}`\n            }else{\n                month = item.dataIndex.substring(5)\n            }\n            const params = {\n                month: `${year}-${month}`,\n            };\n            countWorkdaysByMonth(params)\n            .then(res => {\n                if (res.code === \"200\") {\n                    item.days = res.data;\n                }\n            })\n            .catch(() => {\n                Message.error(\"请求失败\");\n            });\n        }\n        // 2023-12\n\n    })\n    List.forEach(item=>{\n        const objItem = {\n            // title : item.title,\n            title(){\n                return (\n                    <div>\n                    <p>{{item.title}}<span style=\"color:#999;font-size:12px\">({{item.days}})</span></p>\n                    </div>\n                )\n            },\n            dataIndex : item.dataIndex,\n            // render({record}){\n            //  return <a href=\"javaScript:void(0)\" onClick={()=>{goRingContrastChart(record,'customer')}}>看图</a>\n            // }\n        }\n    })\n    getRevenueList().then(res=>{\n        if(res.code =='000000000000'){\n            dataContent.dataSource =  dealData(res.data.list).arr;\n            expandedRowKeys.value = dealData(res.data.list).keyArr;\n        }\n    })\n};\ngetRevenueTable()\n//获取外币列表数据\nconst getForeignCurrencyTable =()=>{\n    getForeignCurrency().then(res=>{\n        if(res.code =='000000000000'){\n            tableContent.dataSource = dealData(res.data.list).arr;\n        }\n    })\n};\ngetForeignCurrencyTable()\n</script>\n\n<style lang=\"scss\" scoped>\n.tag{\n    border-width: 0px;\n    position:relative;\n    left:-40px;\n    top:6px;\n    width: 66px;\n    height: 29px;\n    background: linear-gradient(210deg, rgba(168, 113, 227, 1) 0%, rgba(168, 113, 227, 1) 0%, rgba(141, 78, 218, 1) 100%, rgba(141, 78, 218, 1) 100%);\n    border: none;\n    border-radius: 2px;\n    box-shadow: none;\n    color:#fff;\n    font-weight: 600;\n    text-align: center;\n    line-height: 29px;\n    transform-style:preserve-3d;\n}\n.tag::after{\n    content: '';\n    position:absolute;\n    left:-8px;\n    top:20px;\n    width: 0;\n    height: 0;\n    border: 9px solid;\n    border-color: transparent transparent rgb(113, 52, 178);\n    transform:translateZ(-1px) rotate(270deg);\n}\n.dept{\n    font-family: 'PingFangSC-Medium', 'PingFang SC Medium', 'PingFang SC';\n    font-weight: bold;\n    font-style: normal;\n    color: #4C5767;\n    margin: 12px 0px 0px 0px;\n}\n:deep(.arco-icon-plus){\n    background-image: url(@/assets/images/Triangle-right.png);\n    background-size: 110% 100%;\n    width: 14px!important;\n    height: 14px!important;\n    color: #FFFFFF00;\n    background-position:center;\n    background-repeat: no-repeat;\n}\n:deep(.arco-icon-minus){\n\tbackground-image: url(@/assets/images/Triangle-bottom.png);\n    background-size: 110% 100%;\n    background-repeat: no-repeat;\n    width: 14px!important;\n    height: 14px!important;\n    color: #FFFFFF00;\n    background-position:center;\n}\n:deep(.arco-table .arco-table-expand-btn){\n    background-color: #fff !important;\n}\n:deep(.activeRowGreen > .arco-table-td) {\n    background-color: rgb(234, 248, 243) !important;\n}\n:deep(.activeRowPurple > .arco-table-td) {\n    background-color: rgb(240, 237, 248) !important;\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}