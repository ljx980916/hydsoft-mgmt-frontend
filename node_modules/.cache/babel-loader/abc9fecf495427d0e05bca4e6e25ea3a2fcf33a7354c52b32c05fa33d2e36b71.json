{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, reactive, watch, onBeforeMount } from 'vue';\nimport { differentColumns } from '@/views/demo/constColumns.js';\nimport Icon from '@/components/icon.vue';\nimport { getCurrentDate } from '@/utils/util.js';\nimport { countWorkdaysByMonth } from \"@/api/drillAnalyze.js\";\nexport default {\n  __name: 'different',\n  props: {\n    data: {\n      type: Array,\n      default: () => []\n    },\n    columns: {\n      type: Array,\n      default: () => []\n    },\n    modalVisible: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [\"handleClose\"],\n  setup(__props, {\n    expose,\n    emit\n  }) {\n    expose();\n    const props = __props;\n    let {\n      year\n    } = getCurrentDate();\n    const dataContent = reactive({\n      columns: JSON.parse(JSON.stringify(differentColumns)),\n      dataSourse: [],\n      loading: false\n    });\n    const visible = ref(props.modalVisible);\n    const expandedRowKeys = ref([]);\n    const monthBeforeIcon = ref('caret-right');\n    const monthBeforeValue = ref('');\n    const monthAfterIcon = ref('caret-right');\n    const monthAfterValue = ref('');\n    const QBeforeIcon = ref('caret-right');\n    const QBeforeValue = ref('');\n    const QAfterIcon = ref('caret-right');\n    const QAfterValue = ref('');\n    watch(() => props.modalVisible, (newVal, oldVal) => {\n      if (newVal) {\n        visible.value = newVal;\n        dataContent.columns = JSON.parse(JSON.stringify(differentColumns));\n        dataContent.dataSourse = dealDifferentData(props.data).arr;\n        expandedRowKeys.value = dealDifferentData(props.data).keyArr;\n      }\n    });\n    onBeforeMount(() => {\n      differentColumns.forEach(item => {\n        let month = 0;\n        if (item.dataIndex.substring(0, 5) == 'month') {\n          month = item.dataIndex.substring(5);\n          const params = {\n            month: `${year}-${month}`\n          };\n          countWorkdaysByMonth(params).then(res => {\n            if (res.code === \"200\") {\n              item.days = res.data;\n            }\n          }).catch(() => {\n            Message.error(\"请求失败\");\n          });\n        }\n      });\n    });\n\n    // 展开\n    const expandedChange = rowkeys => {\n      expandedRowKeys.value = rowkeys;\n    };\n    // 环差比数据处理\n    let keyArr = [];\n    const dealDifferentData = arr => {\n      let dataIndex1 = '';\n      let dataIndex2 = '';\n      let dataIndex3 = '';\n      let dataIndex4 = '';\n      dataContent.columns.forEach(ele => {\n        if (ele.titleSlotName == \"monthBefore\") {\n          dataIndex1 = ele.dataIndex;\n        }\n        if (ele.titleSlotName == \"monthAfter\") {\n          dataIndex2 = ele.dataIndex;\n        }\n        if (ele.titleSlotName == \"QBefore\") {\n          dataIndex3 = ele.dataIndex;\n        }\n        if (ele.titleSlotName == \"QAfter\") {\n          dataIndex4 = ele.dataIndex;\n        }\n      });\n      Array.isArray(arr) && arr.forEach((item, index) => {\n        keyArr.push(item.key);\n        // 季度数据\n        for (var i = 1; i <= 12; i++) {\n          if (item[`month${i}`] !== '-') {\n            item.Q1 = Number(item.month1 + item.month2 + item.month3).toFixed(2);\n            item.Q2 = Number(item.month4 + item.month5 + item.month6).toFixed(2);\n            item.Q3 = Number(item.month7 + item.month8 + item.month9).toFixed(2);\n            item.Q4 = Number(item.month10 + item.month11 + item.month12).toFixed(2);\n          }\n        }\n        console.log(item.month7, item.month8, item.month9, 789);\n        console.log(item.Q3, 'item.Q3');\n        if (isNaN(item.Q1)) {\n          item.Q1 = '-';\n        }\n        if (isNaN(item.Q2)) {\n          item.Q2 = '-';\n        }\n        if (isNaN(item.Q3)) {\n          item.Q3 = '-';\n        }\n        if (isNaN(item.Q4)) {\n          item.Q4 = '-';\n        }\n        // 月份\n        if (!item.isRate) {\n          if (item[dataIndex2] !== '-' && item[dataIndex1] !== '-') {\n            item.monthDifferent = Number(item[dataIndex2] - item[dataIndex1]).toFixed(2);\n            item.MonthonMonth = Number((item[dataIndex2] - item[dataIndex1]) / item[dataIndex1] * 100).toFixed(2) + '%';\n          } else if (item[dataIndex1] !== '-' && item[dataIndex2] == '-') {\n            item.monthDifferent = Number(0 - item[dataIndex1]).toFixed(2);\n            item.MonthonMonth = Number((0 - item[dataIndex1]) / item[dataIndex1] * 100).toFixed(2) + '%';\n          } else if (item[dataIndex1] == '-' && item[dataIndex2] !== '-') {\n            item.monthDifferent = Number(item[dataIndex2] - 0).toFixed(2);\n            item.MonthonMonth = '-';\n          } else {\n            item.monthDifferent = '-';\n            item.MonthonMonth = '-';\n          }\n        } else {\n          if (item[dataIndex2] !== '-' && item[dataIndex1] !== '-') {\n            let num1 = item[dataIndex1].substring(0, item[dataIndex1].length - 1);\n            let num2 = item[dataIndex2].substring(0, item[dataIndex2].length - 1);\n            item.monthDifferent = Number(num2 - num1).toFixed(2) + '%';\n            item.MonthonMonth = Number((num2 - num1) / num1).toFixed(2) + '%';\n          } else if (item[dataIndex1] !== '-' && item[dataIndex2] == '-') {\n            let num1 = item[dataIndex1].substring(0, item[dataIndex1].length - 1);\n            item.monthDifferent = Number(0 - num1).toFixed(2) + '%';\n            item.MonthonMonth = Number((0 - num1) / num1).toFixed(2) + '%';\n          } else if (item[dataIndex1] == '-' && item[dataIndex2] !== '-') {\n            let num2 = item[dataIndex2].substring(0, item[dataIndex2].length - 1);\n            item.monthDifferent = Number(num2 - 0).toFixed(2) + '%';\n            item.MonthonMonth = '-';\n          } else {\n            item.monthDifferent = '-';\n            item.MonthonMonth = '-';\n          }\n        }\n        // 季度\n        if (!item.isRate) {\n          if (item[dataIndex4] !== '-' && item[dataIndex3] !== '-') {\n            item.QDifferent = Number(item[dataIndex4] - item[dataIndex3]).toFixed(2);\n            item.QonQ = Number((item[dataIndex4] - item[dataIndex3]) / item[dataIndex3] * 100).toFixed(2) + '%';\n          } else if (item[dataIndex3] !== '-' && item[dataIndex4] == '-') {\n            item.QDifferent = Number(0 - item[dataIndex3]).toFixed(2);\n            item.QonQ = Number((0 - item[dataIndex3]) / item[dataIndex3] * 100).toFixed(2) + '%';\n          } else if (item[dataIndex3] == '-' && item[dataIndex4] !== '-') {\n            item.QDifferent = Number(item[dataIndex4] - 0).toFixed(2);\n            item.QonQ = '-';\n          } else {\n            item.QDifferent = '-';\n            item.QonQ = '-';\n          }\n        } else {\n          if (item[dataIndex4] !== '-' && item[dataIndex3] !== '-') {\n            let num1 = item[dataIndex3].substring(0, item[dataIndex3].length - 1);\n            let num2 = item[dataIndex4].substring(0, item[dataIndex4].length - 1);\n            item.QDifferent = Number(num2 - num1).toFixed(2) + '%';\n            item.QonQ = Number((num2 - num1) / num1).toFixed(2) + '%';\n          } else if (item[dataIndex3] !== '-' && item[dataIndex4] == '-') {\n            let num1 = item[dataIndex3].substring(0, item[dataIndex3].length - 1);\n            item.QDifferent = Number(0 - num1).toFixed(2) + '%';\n            item.QonQ = Number((0 - num1) / num1).toFixed(2) + '%';\n          } else if (item[dataIndex3] == '-' && item[dataIndex4] !== '-') {\n            let num2 = item[dataIndex4].substring(0, item[dataIndex4].length - 1);\n            item.QDifferent = Number(num2 - 0).toFixed(2) + '%';\n            item.QonQ = '-';\n          } else {\n            item.QDifferent = '-';\n            item.QonQ = '-';\n          }\n        }\n        if (item.children && item.children.length) {\n          dealDifferentData(item.children);\n        }\n      });\n      return {\n        arr,\n        keyArr\n      };\n    };\n    // 时间选择器开关\n    const changeVisible = (e, flag) => {\n      if (flag == 'MB') {\n        if (e) {\n          monthBeforeIcon.value = 'caret-down';\n        } else {\n          monthBeforeIcon.value = 'caret-right';\n        }\n      }\n      if (flag == 'MA') {\n        if (e) {\n          monthAfterIcon.value = 'caret-down';\n        } else {\n          monthAfterIcon.value = 'caret-right';\n        }\n      }\n      if (flag == 'QB') {\n        if (e) {\n          QBeforeIcon.value = 'caret-down';\n        } else {\n          QBeforeIcon.value = 'caret-right';\n        }\n      }\n      if (flag == 'QA') {\n        if (e) {\n          QAfterIcon.value = 'caret-down';\n        } else {\n          QAfterIcon.value = 'caret-right';\n        }\n      }\n    };\n    // 处理月份标题\n    const dealMonthTitle = (e, flag) => {\n      let str = e.substr(e.length - 2);\n      let num = '';\n      if (str.substr(0, 1) == 0) {\n        num = str.substr(1);\n      } else {\n        num = str;\n      }\n      props.columns.forEach(item => {\n        // 确定是month表头\n        if (item.dataIndex.substr(0, 5) == 'month') {\n          // 选择的月份 == 折叠表格的某个表头\n          if (num == item.dataIndex.substr(5)) {\n            // 对应的表头更换\n            dataContent.columns.forEach(ele => {\n              if (flag == 'MB') {\n                if (ele.titleSlotName == 'monthBefore') {\n                  ele.dataIndex = item.dataIndex;\n                  ele.title = num + '月';\n                  ele.days = item.days;\n                }\n                if (ele.dataIndex == 'monthDifferent') {\n                  const parts = ele.title.split('-'); // 将字符串分割为两部分  \n                  parts[1] = num; // 替换'-'后的数字  \n                  ele.title = parts.join('-') + '月'; // 将两部分重新组合为字符串，并用'-'连接\n                }\n              }\n\n              if (flag == 'MA') {\n                if (ele.titleSlotName == 'monthAfter') {\n                  ele.dataIndex = item.dataIndex;\n                  ele.title = num + '月';\n                  ele.days = item.days;\n                }\n                if (ele.dataIndex == 'monthDifferent') {\n                  const parts = ele.title.split('-'); // 将字符串分割为两部分  \n                  parts[0] = num; // 替换'-'前的数字  \n                  ele.title = parts.join('-'); // 将两部分重新组合为字符串，并用'-'连接\n                }\n              }\n            });\n          }\n        }\n      });\n\n      dataContent.dataSourse = dealDifferentData(props.data).arr;\n    };\n    // 处理季度标题\n    const dealQTitle = (e, flag) => {\n      let str = e.substr(e.length - 2);\n      let num = '';\n      if (str.substr(0, 1) == 0) {\n        num = str.substr(1);\n      } else {\n        num = str;\n      }\n      const QList = [{\n        label: '1',\n        value: 'Q1'\n      }, {\n        label: '4',\n        value: 'Q2'\n      }, {\n        label: '7',\n        value: 'Q3'\n      }, {\n        label: '10',\n        value: 'Q4'\n      }];\n      // 对应的表头更换\n      dataContent.columns.forEach(ele => {\n        if (flag == 'QB') {\n          if (ele.titleSlotName == 'QBefore') {\n            //num对应的Q\n            ele.title = ele.dataIndex = QList.filter(item => item.label == num)[0].value;\n          }\n          if (ele.dataIndex == 'QDifferent') {\n            const parts = ele.title.split('-'); // 将字符串分割为两部分  \n            parts[1] = QList.filter(item => item.label == num)[0].value; // 替换'-'后的数字\n            ele.title = parts.join('-'); // 将两部分重新组合为字符串，并用'-'连接\n          }\n        }\n\n        if (flag == 'QA') {\n          if (ele.titleSlotName == 'QAfter') {\n            ele.title = ele.dataIndex = QList.filter(item => item.label == num)[0].value;\n          }\n          if (ele.dataIndex == 'QDifferent') {\n            const parts = ele.title.split('-'); // 将字符串分割为两部分  \n            parts[0] = QList.filter(item => item.label == num)[0].value; // 替换'-'前的数字  \n            ele.title = parts.join('-'); // 将两部分重新组合为字符串，并用'-'连接\n          }\n        }\n      });\n\n      dataContent.dataSourse = dealDifferentData(props.data).arr;\n    };\n    // 更改时间\n    const changeTime = (e, flag) => {\n      if (flag == 'MB') {\n        monthBeforeValue.value = e;\n        dealMonthTitle(e, flag);\n      }\n      if (flag == 'MA') {\n        monthAfterValue.value = e;\n        dealMonthTitle(e, flag);\n      }\n      if (flag == 'QA') {\n        QAfterValue.value = e;\n        dealQTitle(e, flag);\n      }\n      if (flag == 'QB') {\n        QBeforeValue.value = e;\n        dealQTitle(e, flag);\n      }\n    };\n    // 关闭\n    const handleClose = () => {\n      emit(\"handleClose\", false);\n    };\n    //单行高亮处理\n    const activeRowClass = record => {\n      if (record.raw.isGreenLight) {\n        return 'activeRowGreen';\n      } else if (record.raw.isRate) {\n        return 'activeRowPurple';\n      } else {\n        return '';\n      }\n    };\n    const __returned__ = {\n      get year() {\n        return year;\n      },\n      set year(v) {\n        year = v;\n      },\n      props,\n      dataContent,\n      visible,\n      expandedRowKeys,\n      monthBeforeIcon,\n      monthBeforeValue,\n      monthAfterIcon,\n      monthAfterValue,\n      QBeforeIcon,\n      QBeforeValue,\n      QAfterIcon,\n      QAfterValue,\n      emit,\n      expandedChange,\n      get keyArr() {\n        return keyArr;\n      },\n      set keyArr(v) {\n        keyArr = v;\n      },\n      dealDifferentData,\n      changeVisible,\n      dealMonthTitle,\n      dealQTitle,\n      changeTime,\n      handleClose,\n      activeRowClass,\n      ref,\n      reactive,\n      watch,\n      onBeforeMount,\n      get differentColumns() {\n        return differentColumns;\n      },\n      Icon,\n      get getCurrentDate() {\n        return getCurrentDate;\n      },\n      get countWorkdaysByMonth() {\n        return countWorkdaysByMonth;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"mappings":"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","names":["ref","reactive","watch","onBeforeMount","differentColumns","Icon","getCurrentDate","countWorkdaysByMonth","year","dataContent","columns","JSON","parse","stringify","dataSourse","loading","visible","props","modalVisible","expandedRowKeys","monthBeforeIcon","monthBeforeValue","monthAfterIcon","monthAfterValue","QBeforeIcon","QBeforeValue","QAfterIcon","QAfterValue","newVal","oldVal","value","dealDifferentData","data","arr","keyArr","forEach","item","month","dataIndex","substring","params","then","res","code","days","catch","Message","error","expandedChange","rowkeys","dataIndex1","dataIndex2","dataIndex3","dataIndex4","ele","titleSlotName","Array","isArray","index","push","key","i","Q1","Number","month1","month2","month3","toFixed","Q2","month4","month5","month6","Q3","month7","month8","month9","Q4","month10","month11","month12","console","log","isNaN","isRate","monthDifferent","MonthonMonth","num1","length","num2","QDifferent","QonQ","children","changeVisible","e","flag","dealMonthTitle","str","substr","num","title","parts","split","join","dealQTitle","QList","label","filter","changeTime","handleClose","emit","activeRowClass","record","raw","isGreenLight"],"sources":["/Users/lijiaxin/Documents/workspace/hydsoft-oms-frontend/src/components/different.vue"],"sourcesContent":["<template>\n  <div>\n    <!-- 环比配置 -->\n    <a-modal  title=\"环比配置\" width=\"auto\" title-align=\"start\" v-model:visible=\"visible\" :footer=\"null\" :body-style=\"{padding:'25px'}\" @close=\"handleClose\">\n        <div>\n            <a-table \n                class=\"arcoTable_columnsWidthAuto\" \n                :columns=\"dataContent.columns ||[]\"  \n                :data=\"(dataContent.dataSourse.length && dataContent.dataSourse) || []\"  \n                :loading=\"dataContent.loading\"\n                :pagination=\"false\" \n                :expanded-keys=\"expandedRowKeys\"\n                @expanded-change=\"expandedChange\"\n                show-empty-tree \n                :row-class=\"activeRowClass\"\n                :bordered=\"{wrapper: true, cell: true}\" \n            >\n                <template  v-for=\"item in dataContent.columns\" :key = \"item.dataIndex\"  #[item.titleSlotName]>\n                        <span v-if=\"item.titleSlotName =='monthAfter' || item.titleSlotName =='monthBefore'\">{{ item.title }}<span style=\"color:#999;font-size:12px\">({{ item.days }}天)</span></span>\n                        <span v-if=\"item.titleSlotName =='QAfter' || item.titleSlotName =='QBefore'\">{{ item.title }}</span>\n                       <a-month-picker \n                        v-if=\"item.titleSlotName =='monthBefore'\"\n                        v-model:pickerValue=\"monthBeforeValue\" \n                        @popup-visible-change=\"changeVisible($event,'MB')\"\n                        @change=\"changeTime($event,'MB')\"\n                        size=\"mini\"\n                        position=\"bottom\"\n                        >\n                            <Icon :icon=\"monthBeforeIcon\"></Icon>\n                        </a-month-picker>\n                        <a-month-picker \n                        v-if=\"item.titleSlotName =='monthAfter'\"\n                        v-model:pickerValue=\"monthAfterValue\" \n                        @popup-visible-change=\"changeVisible($event,'MA')\"\n                        @change=\"changeTime($event,'MA')\"\n                        size=\"mini\"\n                        position=\"bottom\"\n                        >\n                            <Icon :icon=\"monthAfterIcon\"></Icon>\n                        </a-month-picker>\n                        <a-quarter-picker \n                        v-if=\"item.titleSlotName =='QBefore'\" \n                        v-model:pickerValue=\"QBeforeValue\" \n                        @popup-visible-change=\"changeVisible($event,'QB')\"\n                        @change=\"changeTime($event,'QB')\"\n                        size=\"mini\"\n                        position=\"bottom\">\n                            <Icon :icon=\"QBeforeIcon\"></Icon>\n                        </a-quarter-picker>\n                        <a-quarter-picker \n                        v-if=\"item.titleSlotName =='QAfter'\" \n                        v-model:pickerValue=\"QAfterValue\" \n                        @popup-visible-change=\"changeVisible($event,'QA')\"\n                        @change=\"changeTime($event,'QA')\"\n                        size=\"mini\"\n                        position=\"bottom\">\n                            <Icon :icon=\"QAfterIcon\"></Icon>\n                        </a-quarter-picker>\n                    <!-- </div> -->\n                </template>\n            </a-table>\n        </div>\n    </a-modal>\n  </div>\n</template>\n\n<script setup>\nimport { ref,reactive,watch,onBeforeMount} from 'vue';\nimport {differentColumns} from '@/views/demo/constColumns.js';\nimport Icon from '@/components/icon.vue';\nimport {getCurrentDate} from '@/utils/util.js';\nimport {countWorkdaysByMonth} from \"@/api/drillAnalyze.js\";\nlet { year} = getCurrentDate();\nconst props = defineProps({\n    data: {\n        type: Array,\n        default: () => [],\n    },\n    columns: {\n        type: Array,\n        default: () => [],\n    },\n    modalVisible:{\n        type:Boolean,\n        default:false\n    }\n});\nconst dataContent = reactive({\n    columns: JSON.parse(JSON.stringify(differentColumns)),\n    dataSourse:[],\n    loading: false\n});\nconst visible = ref(props.modalVisible);\nconst expandedRowKeys = ref([]);\nconst monthBeforeIcon = ref('caret-right');\nconst monthBeforeValue = ref('');\nconst monthAfterIcon = ref('caret-right');\nconst monthAfterValue = ref('');\nconst QBeforeIcon = ref('caret-right');\nconst QBeforeValue = ref('');\nconst QAfterIcon = ref('caret-right');\nconst QAfterValue = ref('');\nwatch(\n() => props.modalVisible,\n(newVal, oldVal) => {\n    if (newVal) {\n        visible.value = newVal;\n        dataContent.columns = JSON.parse(JSON.stringify(differentColumns));\n        dataContent.dataSourse = dealDifferentData(props.data).arr;\n        expandedRowKeys.value = dealDifferentData(props.data).keyArr;\n    }\n    }\n);\nonBeforeMount(()=>{\n    differentColumns.forEach(item=>{\n        let month = 0;\n        if(item.dataIndex.substring(0,5)=='month'){\n            month = item.dataIndex.substring(5)\n            const params = {\n                month: `${year}-${month}`,\n            };\n            countWorkdaysByMonth(params)\n            .then(res => {\n                if (res.code === \"200\") {\n                    item.days = res.data;\n                }\n            })\n            .catch(() => {\n                Message.error(\"请求失败\");\n            });\n        }\n    })\n})\nconst emit = defineEmits([\n\"handleClose\"\n]);\n// 展开\nconst expandedChange = rowkeys =>{\n    expandedRowKeys.value = rowkeys;\n}\n// 环差比数据处理\nlet keyArr = [];\nconst dealDifferentData = (arr)=>{\n    let dataIndex1 = '';\n    let dataIndex2 = '';\n    let dataIndex3 = '';\n    let dataIndex4 = '';\n    dataContent.columns.forEach(ele=>{\n        if(ele.titleSlotName ==\"monthBefore\"){\n            dataIndex1 = ele.dataIndex\n        }\n        if(ele.titleSlotName ==\"monthAfter\"){\n            dataIndex2 = ele.dataIndex\n        }\n        if(ele.titleSlotName ==\"QBefore\"){\n            dataIndex3 = ele.dataIndex\n        }if(ele.titleSlotName ==\"QAfter\"){\n            dataIndex4 = ele.dataIndex\n        }\n    })\n    Array.isArray(arr) && arr.forEach((item,index) => {\n        keyArr.push(item.key);\n        // 季度数据\n        for(var i=1;i<=12;i++){\n            if(item[`month${i}`] !== '-'){\n                item.Q1 = Number(item.month1 + item.month2 + item.month3).toFixed(2);\n                item.Q2 = Number(item.month4 + item.month5 + item.month6).toFixed(2);\n                item.Q3 = Number(item.month7 + item.month8 + item.month9).toFixed(2);\n                item.Q4 = Number(item.month10 + item.month11 + item.month12).toFixed(2);\n            }\n        } \n        console.log(item.month7,item.month8,item.month9,789);\n        console.log(item.Q3,'item.Q3');\n        if(isNaN(item.Q1)){\n            item.Q1='-'\n        }\n        if(isNaN(item.Q2)){\n            item.Q2='-'\n        }\n        if(isNaN(item.Q3)){\n            item.Q3='-'\n        }\n        if(isNaN(item.Q4)){\n            item.Q4='-'\n        }\n        // 月份\n        if(!item.isRate){\n            if(item[dataIndex2] !=='-' && item[dataIndex1] !=='-' ){\n                item.monthDifferent = Number(item[dataIndex2]-item[dataIndex1]).toFixed(2);\n                item.MonthonMonth = Number(((item[dataIndex2]-item[dataIndex1])/item[dataIndex1])*100).toFixed(2)+ '%';\n            }else if(item[dataIndex1] !=='-' && item[dataIndex2] =='-' ){\n                item.monthDifferent = Number(0-item[dataIndex1]).toFixed(2);\n                item.MonthonMonth = Number(((0-item[dataIndex1])/item[dataIndex1])*100).toFixed(2)+ '%';\n            } else if (item[dataIndex1] =='-' && item[dataIndex2] !=='-' ){\n                item.monthDifferent = Number(item[dataIndex2]-0).toFixed(2);\n                item.MonthonMonth = '-';\n            }else{\n                item.monthDifferent='-'\n                item.MonthonMonth='-'\n            }\n        }else{\n            if(item[dataIndex2] !=='-' && item[dataIndex1] !=='-' ){\n                let num1= item[dataIndex1].substring(0,item[dataIndex1].length-1);\n                let num2= item[dataIndex2].substring(0,item[dataIndex2].length-1);\n                item.monthDifferent = Number(num2-num1).toFixed(2)+ '%';\n                item.MonthonMonth = Number((num2-num1)/num1).toFixed(2)+ '%';\n            }else if(item[dataIndex1] !=='-' && item[dataIndex2] =='-' ){\n                let num1= item[dataIndex1].substring(0,item[dataIndex1].length-1);\n                item.monthDifferent = Number(0-num1).toFixed(2)+ '%';\n                item.MonthonMonth = Number((0-num1)/num1).toFixed(2)+ '%';\n            } else if (item[dataIndex1] =='-' && item[dataIndex2] !=='-' ){\n                let num2= item[dataIndex2].substring(0,item[dataIndex2].length-1);\n                item.monthDifferent = Number(num2-0).toFixed(2)+ '%';\n                item.MonthonMonth = '-';\n            }else{\n                item.monthDifferent='-'\n                item.MonthonMonth='-'\n            }\n        }\n        // 季度\n        if(!item.isRate){\n            if(item[dataIndex4] !=='-' && item[dataIndex3] !=='-' ){\n                item.QDifferent = Number(item[dataIndex4]-item[dataIndex3]).toFixed(2);\n                item.QonQ = Number(((item[dataIndex4]-item[dataIndex3])/item[dataIndex3])*100).toFixed(2)+ '%';\n            }else if(item[dataIndex3] !=='-' && item[dataIndex4] =='-' ){\n                item.QDifferent = Number(0-item[dataIndex3]).toFixed(2);\n                item.QonQ = Number(((0-item[dataIndex3])/item[dataIndex3])*100).toFixed(2)+ '%';\n            } else if (item[dataIndex3] =='-' && item[dataIndex4] !=='-' ){\n                item.QDifferent = Number(item[dataIndex4]-0).toFixed(2);\n                item.QonQ = '-';\n            }else{\n                item.QDifferent='-'\n                item.QonQ='-'\n            }\n        }else{\n            if(item[dataIndex4] !=='-' && item[dataIndex3] !=='-' ){\n                let num1= item[dataIndex3].substring(0,item[dataIndex3].length-1);\n                let num2= item[dataIndex4].substring(0,item[dataIndex4].length-1);\n                item.QDifferent = Number(num2-num1).toFixed(2)+ '%';\n                item.QonQ = Number((num2-num1)/num1).toFixed(2)+ '%';\n            }else if(item[dataIndex3] !=='-' && item[dataIndex4] =='-' ){\n                let num1= item[dataIndex3].substring(0,item[dataIndex3].length-1);\n                item.QDifferent = Number(0-num1).toFixed(2)+ '%';\n                item.QonQ = Number((0-num1)/num1).toFixed(2)+ '%';\n            } else if (item[dataIndex3] =='-' && item[dataIndex4] !=='-' ){\n                let num2= item[dataIndex4].substring(0,item[dataIndex4].length-1);\n                item.QDifferent = Number(num2-0).toFixed(2)+ '%';\n                item.QonQ = '-';\n            }else{\n                item.QDifferent='-'\n                item.QonQ='-'\n            }\n        }\n        if(item.children && item.children.length){\n            dealDifferentData(item.children)\n        }\n    })\n    \n    return {arr,keyArr}\n};\n// 时间选择器开关\nconst changeVisible = (e,flag)=>{\n    if(flag =='MB'){\n        if(e){\n                monthBeforeIcon.value = 'caret-down'\n        }else{\n            monthBeforeIcon.value = 'caret-right'\n        }\n    }\n    if(flag =='MA'){\n        if(e){\n                monthAfterIcon.value = 'caret-down'\n        }else{\n            monthAfterIcon.value = 'caret-right'\n        }\n    }\n    if(flag =='QB'){\n        if(e){\n                QBeforeIcon.value = 'caret-down'\n        }else{\n            QBeforeIcon.value = 'caret-right'\n        }\n    }\n    if(flag =='QA'){\n        if(e){\n            QAfterIcon.value = 'caret-down'\n        }else{\n            QAfterIcon.value = 'caret-right'\n        }\n    }\n}\n// 处理月份标题\nconst dealMonthTitle = (e,flag)=>{\n    let str = e.substr(e.length - 2);\n    let num =''\n    if(str.substr(0,1)==0){\n        num = str.substr(1)\n    }else{\n        num = str\n    }\n    props.columns.forEach(item=>{\n        // 确定是month表头\n        if(item.dataIndex.substr(0,5)=='month'){\n            // 选择的月份 == 折叠表格的某个表头\n            if(num == item.dataIndex.substr(5)){\n                // 对应的表头更换\n                dataContent.columns.forEach(ele=>{\n                    if(flag =='MB'){\n                        if(ele.titleSlotName == 'monthBefore'){\n                            ele.dataIndex = item.dataIndex;\n                            ele.title = num +'月';\n                            ele.days = item.days;\n                        }\n                        if(ele.dataIndex =='monthDifferent'){\n                            const parts = ele.title.split('-'); // 将字符串分割为两部分  \n                            parts[1] = num; // 替换'-'后的数字  \n                            ele.title = parts.join('-')+'月'; // 将两部分重新组合为字符串，并用'-'连接\n                        }\n                    }\n                    if(flag =='MA'){\n                        if(ele.titleSlotName == 'monthAfter'){\n                            ele.dataIndex = item.dataIndex;\n                            ele.title = num +'月';\n                            ele.days = item.days;\n                        }\n                        if(ele.dataIndex =='monthDifferent'){\n                            const parts = ele.title.split('-'); // 将字符串分割为两部分  \n                            parts[0] = num; // 替换'-'前的数字  \n                            ele.title = parts.join('-'); // 将两部分重新组合为字符串，并用'-'连接\n                        }\n                    }\n                })\n            }\n        }\n    })\n    dataContent.dataSourse = dealDifferentData(props.data).arr;\n};\n// 处理季度标题\nconst dealQTitle = (e,flag)=>{\n    let str = e.substr(e.length - 2);\n    let num =''\n    if(str.substr(0,1)==0){\n        num = str.substr(1)\n    }else{\n        num = str\n    }\n    const  QList = [\n        {\n            label:'1',\n            value:'Q1'\n        },\n        {\n            label:'4',\n            value:'Q2'\n        },\n        {\n            label:'7',\n            value:'Q3'\n        },\n        {\n            label:'10',\n            value:'Q4'\n        },\n    ]\n    // 对应的表头更换\n    dataContent.columns.forEach(ele=>{\n        if(flag =='QB'){\n            if(ele.titleSlotName == 'QBefore'){\n                //num对应的Q\n                ele.title = ele.dataIndex = QList.filter(item=>item.label == num)[0].value;\n            }\n            if(ele.dataIndex =='QDifferent'){\n                const parts = ele.title.split('-'); // 将字符串分割为两部分  \n                parts[1] = QList.filter(item=>item.label == num)[0].value; // 替换'-'后的数字\n                ele.title = parts.join('-'); // 将两部分重新组合为字符串，并用'-'连接\n            }\n        }\n        if(flag =='QA'){\n            if(ele.titleSlotName == 'QAfter'){\n                ele.title = ele.dataIndex = QList.filter(item=>item.label == num)[0].value;\n            }\n            if(ele.dataIndex =='QDifferent'){\n                const parts = ele.title.split('-'); // 将字符串分割为两部分  \n                parts[0] = QList.filter(item=>item.label == num)[0].value; // 替换'-'前的数字  \n                ele.title = parts.join('-'); // 将两部分重新组合为字符串，并用'-'连接\n            }\n        }\n    })\n    dataContent.dataSourse = dealDifferentData(props.data).arr;\n};\n// 更改时间\nconst changeTime=(e,flag)=>{\n    if(flag == 'MB'){\n        monthBeforeValue.value = e;\n        dealMonthTitle(e,flag);\n    }\n    if(flag == 'MA'){\n        monthAfterValue.value = e;\n        dealMonthTitle(e,flag);\n    }\n    if(flag == 'QA'){\n        QAfterValue.value = e;\n        dealQTitle(e,flag)\n    }\n    if(flag == 'QB'){\n        QBeforeValue.value = e;\n        dealQTitle(e,flag)\n    }\n};\n// 关闭\nconst handleClose = ()=>{\n    emit(\"handleClose\", false);\n};\n//单行高亮处理\nconst activeRowClass = (record) => {\n    if(record.raw.isGreenLight){\n        return 'activeRowGreen'\n    }else if(record.raw.isRate){\n        return 'activeRowPurple'\n    }else{\n        return ''\n    }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n:deep(.activeRowGreen > .arco-table-td) {\n    background-color: rgb(234, 248, 243) !important;\n}\n:deep(.activeRowPurple > .arco-table-td) {\n    background-color: rgb(240, 237, 248) !important;\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}