{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createBlock as _createBlock, createVNode as _createVNode, createElementVNode as _createElementVNode, vShow as _vShow, withDirectives as _withDirectives, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-1ad56996\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"defaultPadding\"\n};\nconst _hoisted_2 = {\n  class: \"flex-between\"\n};\nconst _hoisted_3 = {\n  style: {\n    \"position\": \"relative\",\n    \"top\": \"-1px\"\n  }\n};\nconst _hoisted_4 = {\n  class: \"m-t-20\"\n};\nconst _hoisted_5 = {\n  class: \"pointer\"\n};\nconst _hoisted_6 = {\n  class: \"flex-between\"\n};\nconst _hoisted_7 = {\n  style: {\n    \"position\": \"relative\",\n    \"top\": \"-1px\"\n  }\n};\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = {\n  key: 1,\n  class: \"pointer\"\n};\nconst _hoisted_10 = {\n  class: \"flex-between\"\n};\nconst _hoisted_11 = {\n  style: {\n    \"position\": \"relative\",\n    \"top\": \"-1px\"\n  }\n};\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = {\n  key: 1,\n  class: \"pointer\"\n};\nexport function render(_ctx, _cache) {\n  const _component_a_tag = _resolveComponent(\"a-tag\");\n  const _component_a_space = _resolveComponent(\"a-space\");\n  const _component_a_option = _resolveComponent(\"a-option\");\n  const _component_icon_calendar = _resolveComponent(\"icon-calendar\");\n  const _component_a_select = _resolveComponent(\"a-select\");\n  const _component_a_popover = _resolveComponent(\"a-popover\");\n  const _component_a_table = _resolveComponent(\"a-table\");\n  const _component_a_tab_pane = _resolveComponent(\"a-tab-pane\");\n  const _component_a_radio = _resolveComponent(\"a-radio\");\n  const _component_a_radio_group = _resolveComponent(\"a-radio-group\");\n  const _component_echart_container = _resolveComponent(\"echart-container\");\n  const _component_a_tabs = _resolveComponent(\"a-tabs\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_a_tabs, {\n    \"active-key\": _ctx.tabKey,\n    \"onUpdate:activeKey\": _cache[3] || (_cache[3] = $event => _ctx.tabKey = $event),\n    onChange: _ctx.changeTabs\n  }, {\n    default: _withCtx(() => [_createVNode(_component_a_tab_pane, {\n      key: \"1\",\n      title: \"环比分析\",\n      class: \"p-t-10\"\n    }, {\n      default: _withCtx(() => [_createCommentVNode(\" 配置表头 \"), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_a_space, {\n        size: ['small', 0],\n        wrap: \"\"\n      }, {\n        default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.tabChangeColumInfo.columnTabs, (item, index) => {\n          return _openBlock(), _createBlock(_component_a_tag, {\n            key: index,\n            color: item.isShow === 1 ? 'arcoblue' : '',\n            size: \"large\",\n            class: \"pointer\",\n            onClick: $event => _ctx.handleTabChange(item)\n          }, {\n            default: _withCtx(() => [_createTextVNode(_toDisplayString(item.title), 1 /* TEXT */)]),\n            _: 2 /* DYNAMIC */\n          }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"color\", \"onClick\"]);\n        }), 128 /* KEYED_FRAGMENT */))]),\n        _: 1 /* STABLE */\n      }), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_a_select, {\n        \"model-value\": _ctx.selectMonth,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.selectMonth = $event),\n        onChange: _ctx.handleMonthChange\n      }, {\n        \"arrow-icon\": _withCtx(() => [_createVNode(_component_icon_calendar, {\n          size: 16\n        })]),\n        default: _withCtx(() => [_createVNode(_component_a_option, {\n          value: \"3\"\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"近3个月\")]),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_a_option, {\n          value: \"6\"\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"近6个月\")]),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_a_option, {\n          value: \"12\"\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"近12个月\")]),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"model-value\", \"onChange\"])])]), _createCommentVNode(\" 表格 \"), _createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_a_table, {\n        columns: _ctx.tableInfo.columns,\n        data: _ctx.tableInfo.data,\n        \"default-expand-all-rows\": true,\n        bordered: {\n          cell: true\n        },\n        \"column-resizable\": \"\",\n        \"expanded-keys\": _ctx.tableInfo.defaultExpandedKeys,\n        scroll: {\n          maxHeight: _ctx.tableInfo.maxHeight\n        },\n        scrollbar: {\n          x: true,\n          y: 1500\n        },\n        pagination: false,\n        loading: _ctx.tableInfo.loading,\n        ref: \"tableRef\",\n        onExpandedChange: _ctx.expandedChange\n      }, {\n        lastDeptName: _withCtx(({\n          record\n        }) => [_createVNode(_component_a_popover, {\n          \"content-style\": {\n            background: 'rgba(0,0,0,.8)',\n            color: '#fff'\n          },\n          \"arrow-style\": {\n            background: 'rgba(0,0,0,.8)'\n          }\n        }, {\n          content: _withCtx(() => [_createTextVNode(_toDisplayString(record.deptName), 1 /* TEXT */)]),\n          default: _withCtx(() => [_createElementVNode(\"span\", _hoisted_5, _toDisplayString(record.lastDeptName), 1 /* TEXT */)]),\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"content-style\", \"arrow-style\"])]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"columns\", \"data\", \"expanded-keys\", \"scroll\", \"loading\", \"onExpandedChange\"])])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_a_tab_pane, {\n      key: \"2\",\n      title: \"同比分析\",\n      class: \"p-t-10\"\n    }, {\n      default: _withCtx(() => [_withDirectives(_createElementVNode(\"div\", null, [_createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_a_space, {\n        size: ['small', 0],\n        wrap: \"\"\n      }, {\n        default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.allTableList, (item, index) => {\n          return _openBlock(), _createBlock(_component_a_tag, {\n            key: index,\n            color: item.isShow === 1 ? 'arcoblue' : '',\n            size: \"large\",\n            class: \"pointer\",\n            onClick: $event => _ctx.handleSameContrastTabChange(item)\n          }, {\n            default: _withCtx(() => [_createTextVNode(_toDisplayString(item.title), 1 /* TEXT */)]),\n            _: 2 /* DYNAMIC */\n          }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"color\", \"onClick\"]);\n        }), 128 /* KEYED_FRAGMENT */))]),\n        _: 1 /* STABLE */\n      }), _createElementVNode(\"div\", _hoisted_7, [_createVNode(_component_a_radio_group, {\n        \"model-value\": _ctx.raidoGroupType,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.raidoGroupType = $event),\n        type: \"button\",\n        onChange: _ctx.constructSameTabChange\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_radio, {\n          value: \"total\"\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"汇总\")]),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_a_radio, {\n          value: \"detail\"\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"明细\")]),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"model-value\", \"onChange\"])])]), _createVNode(_component_a_table, {\n        columns: _ctx.sameTotalTableInfo.columns,\n        data: _ctx.sameTotalTableInfo.data,\n        \"default-expand-all-rows\": true,\n        bordered: {\n          cell: true\n        },\n        \"column-resizable\": \"\",\n        \"expanded-keys\": _ctx.sameTotalTableInfo.defaultExpandedKeys,\n        scroll: {\n          maxHeight: _ctx.sameTotalTableInfo.maxHeight\n        },\n        scrollbar: {\n          x: true,\n          y: 1500\n        },\n        pagination: false,\n        loading: _ctx.sameTotalTableInfo.loading,\n        ref: \"sameTotalTableRef\",\n        class: \"m-t-20\",\n        onExpandedChange: _ctx.sameTotalTableExpandedChange\n      }, {\n        lastDeptName: _withCtx(({\n          record\n        }) => [_createVNode(_component_a_popover, {\n          \"content-style\": {\n            background: 'rgba(0,0,0,.8)',\n            color: '#fff'\n          },\n          \"arrow-style\": {\n            background: 'rgba(0,0,0,.8)'\n          }\n        }, {\n          content: _withCtx(() => [_createTextVNode(_toDisplayString(record.deptName), 1 /* TEXT */)]),\n          default: _withCtx(() => [!record.children ? (_openBlock(), _createElementBlock(\"a\", {\n            key: 0,\n            href: \"javaScript:void(0)\",\n            style: {\n              \"color\": \"#165dff\"\n            },\n            onClick: $event => _ctx.jump(record, 2)\n          }, _toDisplayString(record.lastDeptName), 9 /* TEXT, PROPS */, _hoisted_8)) : (_openBlock(), _createElementBlock(\"span\", _hoisted_9, _toDisplayString(record.lastDeptName), 1 /* TEXT */))]),\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"content-style\", \"arrow-style\"])]),\n        canvasLine1: _withCtx(({\n          record,\n          column\n        }) => [_createVNode(_component_echart_container, {\n          route: _ctx.createEchartsRoute(record, column),\n          height: 74,\n          width: 100\n        }, null, 8 /* PROPS */, [\"route\"])]),\n        canvasLine2: _withCtx(({\n          record,\n          column\n        }) => [_createVNode(_component_echart_container, {\n          route: _ctx.createEchartsRoute(record, column),\n          height: 74,\n          width: 100\n        }, null, 8 /* PROPS */, [\"route\"])]),\n        canvasLine3: _withCtx(({\n          record,\n          column\n        }) => [_createVNode(_component_echart_container, {\n          route: _ctx.createEchartsRoute(record, column),\n          height: 74,\n          width: 100\n        }, null, 8 /* PROPS */, [\"route\"])]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"columns\", \"data\", \"expanded-keys\", \"scroll\", \"loading\", \"onExpandedChange\"])], 512 /* NEED_PATCH */), [[_vShow, _ctx.raidoGroupType === 'total']]), _withDirectives(_createElementVNode(\"div\", null, [_createElementVNode(\"div\", _hoisted_10, [_createVNode(_component_a_space, {\n        size: ['small', 0],\n        wrap: \"\"\n      }, {\n        default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.allTableList, (item, index) => {\n          return _openBlock(), _createBlock(_component_a_tag, {\n            key: index,\n            color: item.isShow === 1 ? 'arcoblue' : '',\n            size: \"large\",\n            class: \"pointer\",\n            onClick: $event => _ctx.handleSameContrastTabChange(item)\n          }, {\n            default: _withCtx(() => [_createTextVNode(_toDisplayString(item.title), 1 /* TEXT */)]),\n            _: 2 /* DYNAMIC */\n          }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"color\", \"onClick\"]);\n        }), 128 /* KEYED_FRAGMENT */))]),\n        _: 1 /* STABLE */\n      }), _createElementVNode(\"div\", _hoisted_11, [_createVNode(_component_a_radio_group, {\n        \"model-value\": _ctx.raidoGroupType,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => _ctx.raidoGroupType = $event),\n        type: \"button\",\n        onChange: _ctx.constructSameTabChange\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_radio, {\n          value: \"total\"\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"汇总\")]),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_a_radio, {\n          value: \"detail\"\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"明细\")]),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"model-value\", \"onChange\"])])]), _createVNode(_component_a_table, {\n        columns: _ctx.sameDetailTableInfo.columns,\n        data: _ctx.sameDetailTableInfo.data,\n        \"default-expand-all-rows\": true,\n        bordered: {\n          cell: true\n        },\n        \"column-resizable\": \"\",\n        \"expanded-keys\": _ctx.sameDetailTableInfo.defaultExpandedKeys,\n        scroll: {\n          maxHeight: _ctx.sameDetailTableInfo.maxHeight\n        },\n        scrollbar: {\n          x: true,\n          y: 1500\n        },\n        pagination: false,\n        loading: _ctx.sameDetailTableInfo.loading,\n        ref: \"sameDetailTableRef\",\n        class: \"m-t-20\",\n        onExpandedChange: _ctx.detailTableExpandedChange\n      }, {\n        lastDeptName: _withCtx(({\n          record\n        }) => [_createVNode(_component_a_popover, {\n          \"content-style\": {\n            background: 'rgba(0,0,0,.8)',\n            color: '#fff'\n          },\n          \"arrow-style\": {\n            background: 'rgba(0,0,0,.8)'\n          }\n        }, {\n          content: _withCtx(() => [_createTextVNode(_toDisplayString(record.deptName), 1 /* TEXT */)]),\n          default: _withCtx(() => [!record.children ? (_openBlock(), _createElementBlock(\"a\", {\n            key: 0,\n            href: \"javaScript:void(0)\",\n            style: {\n              \"color\": \"#165dff\"\n            },\n            onClick: $event => _ctx.jump(record, 2)\n          }, _toDisplayString(record.lastDeptName), 9 /* TEXT, PROPS */, _hoisted_12)) : (_openBlock(), _createElementBlock(\"span\", _hoisted_13, _toDisplayString(record.lastDeptName), 1 /* TEXT */))]),\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"content-style\", \"arrow-style\"])]),\n        canvasLine1: _withCtx(({\n          record,\n          column\n        }) => [_createVNode(_component_echart_container, {\n          route: _ctx.createEchartsRoute(record, column),\n          height: 74,\n          width: 100\n        }, null, 8 /* PROPS */, [\"route\"])]),\n        canvasLine2: _withCtx(({\n          record,\n          column\n        }) => [_createVNode(_component_echart_container, {\n          route: _ctx.createEchartsRoute(record, column),\n          height: 74,\n          width: 100\n        }, null, 8 /* PROPS */, [\"route\"])]),\n        canvasLine3: _withCtx(({\n          record,\n          column\n        }) => [_createVNode(_component_echart_container, {\n          route: _ctx.createEchartsRoute(record, column),\n          height: 74,\n          width: 100\n        }, null, 8 /* PROPS */, [\"route\"])]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"columns\", \"data\", \"expanded-keys\", \"scroll\", \"loading\", \"onExpandedChange\"])], 512 /* NEED_PATCH */), [[_vShow, _ctx.raidoGroupType === 'detail']])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"active-key\", \"onChange\"])]);\n}","map":{"version":3,"names":["class","style","key","_createElementBlock","_hoisted_1","_createVNode","_component_a_tabs","_ctx","tabKey","_cache","$event","onChange","changeTabs","default","_withCtx","_component_a_tab_pane","title","_createCommentVNode","_createElementVNode","_hoisted_2","_component_a_space","size","wrap","_Fragment","_renderList","tabChangeColumInfo","columnTabs","item","index","_createBlock","_component_a_tag","color","isShow","onClick","handleTabChange","_createTextVNode","_toDisplayString","_","_hoisted_3","_component_a_select","selectMonth","handleMonthChange","_component_icon_calendar","_component_a_option","value","_hoisted_4","_component_a_table","columns","tableInfo","data","bordered","cell","defaultExpandedKeys","scroll","maxHeight","scrollbar","x","y","pagination","loading","ref","onExpandedChange","expandedChange","lastDeptName","record","_component_a_popover","background","content","deptName","_hoisted_5","_hoisted_6","allTableList","handleSameContrastTabChange","_hoisted_7","_component_a_radio_group","raidoGroupType","type","constructSameTabChange","_component_a_radio","sameTotalTableInfo","sameTotalTableExpandedChange","children","href","jump","_hoisted_8","_hoisted_9","canvasLine1","column","_component_echart_container","route","createEchartsRoute","height","width","canvasLine2","canvasLine3","_hoisted_10","_hoisted_11","sameDetailTableInfo","detailTableExpandedChange","_hoisted_12","_hoisted_13"],"sources":["/Users/lijiaxin/Documents/workspace/hydsoft-oms-frontend/src/views/ringAnalyze/departmentRingSame.vue"],"sourcesContent":["<template>\n  <div class=\"defaultPadding\">\n    <a-tabs v-model:active-key=\"tabKey\" @change=\"changeTabs\">\n      <a-tab-pane key=\"1\" title=\"环比分析\" class=\"p-t-10\">\n        <!-- 配置表头 -->\n        <div class=\"flex-between\">\n          <a-space :size=\"['small', 0]\" wrap>\n            <a-tag\n              v-for=\"(item, index) of tabChangeColumInfo.columnTabs\"\n              :key=\"index\"\n              :color=\"item.isShow === 1 ? 'arcoblue' : ''\"\n              size=\"large\"\n              class=\"pointer\"\n              @click=\"handleTabChange(item)\"\n            >\n              {{ item.title }}\n            </a-tag>\n          </a-space>\n          <div style=\"position: relative; top: -1px\">\n            <a-select v-model:model-value=\"selectMonth\" @change=\"handleMonthChange\">\n              <a-option value=\"3\">近3个月</a-option>\n              <a-option value=\"6\">近6个月</a-option>\n              <a-option value=\"12\">近12个月</a-option>\n              <template #arrow-icon>\n                <icon-calendar :size=\"16\" />\n              </template>\n            </a-select>\n          </div>\n        </div>\n        <!-- 表格 -->\n        <div class=\"m-t-20\">\n          <a-table\n            :columns=\"tableInfo.columns\"\n            :data=\"tableInfo.data\"\n            :default-expand-all-rows=\"true\"\n            :bordered=\"{ cell: true }\"\n            column-resizable\n            :expanded-keys=\"tableInfo.defaultExpandedKeys\"\n            :scroll=\"{ maxHeight: tableInfo.maxHeight }\"\n            :scrollbar=\"{ x: true, y: 1500 }\"\n            :pagination=\"false\"\n            :loading=\"tableInfo.loading\"\n            ref=\"tableRef\"\n            @expanded-change=\"expandedChange\"\n          >\n            <template #lastDeptName=\"{ record }\">\n              <a-popover\n                :content-style=\"{ background: 'rgba(0,0,0,.8)', color: '#fff' }\"\n                :arrow-style=\"{ background: 'rgba(0,0,0,.8)' }\"\n              >\n                <span class=\"pointer\">{{ record.lastDeptName }}</span>\n                <template #content>\n                  {{ record.deptName }}\n                </template>\n              </a-popover>\n            </template>\n          </a-table>\n        </div>\n      </a-tab-pane>\n      <a-tab-pane key=\"2\" title=\"同比分析\" class=\"p-t-10\">\n        <div v-show=\"raidoGroupType === 'total'\">\n          <div class=\"flex-between\">\n            <a-space :size=\"['small', 0]\" wrap>\n              <a-tag\n                v-for=\"(item, index) of allTableList\"\n                :key=\"index\"\n                :color=\"item.isShow === 1 ? 'arcoblue' : ''\"\n                size=\"large\"\n                class=\"pointer\"\n                @click=\"handleSameContrastTabChange(item)\"\n              >\n                {{ item.title }}\n              </a-tag>\n            </a-space>\n            <div style=\"position: relative; top: -1px\">\n              <a-radio-group v-model:model-value=\"raidoGroupType\" type=\"button\" @change=\"constructSameTabChange\">\n                <a-radio value=\"total\">汇总</a-radio>\n                <a-radio value=\"detail\">明细</a-radio>\n              </a-radio-group>\n            </div>\n          </div>\n          <a-table\n            :columns=\"sameTotalTableInfo.columns\"\n            :data=\"sameTotalTableInfo.data\"\n            :default-expand-all-rows=\"true\"\n            :bordered=\"{ cell: true }\"\n            column-resizable\n            :expanded-keys=\"sameTotalTableInfo.defaultExpandedKeys\"\n            :scroll=\"{ maxHeight: sameTotalTableInfo.maxHeight }\"\n            :scrollbar=\"{ x: true, y: 1500 }\"\n            :pagination=\"false\"\n            :loading=\"sameTotalTableInfo.loading\"\n            ref=\"sameTotalTableRef\"\n            class=\"m-t-20\"\n            @expanded-change=\"sameTotalTableExpandedChange\"\n          >\n            <template #lastDeptName=\"{ record }\">\n              <a-popover\n                :content-style=\"{ background: 'rgba(0,0,0,.8)', color: '#fff' }\"\n                :arrow-style=\"{ background: 'rgba(0,0,0,.8)' }\"\n              >\n              <a href=\"javaScript:void(0)\" v-if=\"!record.children\" style=\"color: #165dff\" @click=\"jump(record,2)\">\n                {{ record.lastDeptName }}\n              </a>\n              <span class=\"pointer\" v-else>{{ record.lastDeptName }}</span>\n                <template #content>\n                  {{ record.deptName }}\n                </template>\n              </a-popover>\n            </template>\n            <template #canvasLine1=\"{record,column}\">\n              <echart-container :route=\"createEchartsRoute(record,column)\" :height=74 :width=100 />\n            </template>\n            <template #canvasLine2=\"{record,column}\">\n              <echart-container :route=\"createEchartsRoute(record,column)\" :height=74 :width=100 />\n            </template>\n            <template #canvasLine3=\"{record,column}\">\n              <echart-container :route=\"createEchartsRoute(record,column)\" :height=74 :width=100 />\n            </template>\n          </a-table>\n        </div>\n        <div v-show=\"raidoGroupType === 'detail'\">\n          <div class=\"flex-between\">\n            <a-space :size=\"['small', 0]\" wrap>\n              <a-tag\n                v-for=\"(item, index) of allTableList\"\n                :key=\"index\"\n                :color=\"item.isShow === 1 ? 'arcoblue' : ''\"\n                size=\"large\"\n                class=\"pointer\"\n                @click=\"handleSameContrastTabChange(item)\"\n              >\n                {{ item.title }}\n              </a-tag>\n            </a-space>\n            <div style=\"position: relative; top: -1px\">\n              <a-radio-group v-model:model-value=\"raidoGroupType\" type=\"button\" @change=\"constructSameTabChange\">\n                <a-radio value=\"total\">汇总</a-radio>\n                <a-radio value=\"detail\">明细</a-radio>\n              </a-radio-group>\n            </div>\n          </div>\n          <a-table\n            :columns=\"sameDetailTableInfo.columns\"\n            :data=\"sameDetailTableInfo.data\"\n            :default-expand-all-rows=\"true\"\n            :bordered=\"{ cell: true }\"\n            column-resizable\n            :expanded-keys=\"sameDetailTableInfo.defaultExpandedKeys\"\n            :scroll=\"{ maxHeight: sameDetailTableInfo.maxHeight }\"\n            :scrollbar=\"{ x: true, y: 1500 }\"\n            :pagination=\"false\"\n            :loading=\"sameDetailTableInfo.loading\"\n            ref=\"sameDetailTableRef\"\n            class=\" m-t-20\"\n            @expanded-change=\"detailTableExpandedChange\"\n          >\n            <template #lastDeptName=\"{ record }\">\n              <a-popover\n                :content-style=\"{ background: 'rgba(0,0,0,.8)', color: '#fff' }\"\n                :arrow-style=\"{ background: 'rgba(0,0,0,.8)' }\"\n              >\n              <a href=\"javaScript:void(0)\" v-if=\"!record.children\" style=\"color: #165dff\" @click=\"jump(record,2)\">\n                {{ record.lastDeptName }}\n              </a>\n              <span class=\"pointer\" v-else>{{ record.lastDeptName }}</span>\n                <template #content>\n                  {{ record.deptName }}\n                </template>\n              </a-popover>\n            </template>\n            <template #canvasLine1=\"{record,column}\">\n              <echart-container :route=\"createEchartsRoute(record,column)\" :height=74 :width=100 />\n            </template>\n            <template #canvasLine2=\"{record,column}\">\n              <echart-container :route=\"createEchartsRoute(record,column)\" :height=74 :width=100 />\n            </template>\n            <template #canvasLine3=\"{record,column}\">\n              <echart-container :route=\"createEchartsRoute(record,column)\" :height=74 :width=100 />\n            </template>\n          </a-table>\n        </div>\n      </a-tab-pane>\n    </a-tabs>\n  </div>\n</template>\n\n<script setup>\nimport { Message } from \"@arco-design/web-vue\";\nimport { onBeforeMount, reactive, ref, nextTick, onMounted, toRaw, markRaw, shallowRef } from \"vue\";\nimport { useTagColumnListStore } from \"../../store/index\";\nimport { getDepartmentRingList,queryYoyAnalysis } from \"@/api/loopAnalyze.js\";\nimport {\n  dataAddKey,\n  getRedNum,\n  getLastMonth,\n  getLastYearDay,\n  getCurrentTime,\n  mapDataIndex,\n} from \"../../utils/util\";\nimport echartContainer from \"@/components/echartsContainer.vue\";\nimport { useRouter } from \"vue-router\";\nconst router = useRouter();\nlet { lYear } = getLastMonth();\nlet { lastYear, lastMonth } = getLastYearDay();\nlet { year, month } = getCurrentTime();\nlet tagColumnList = useTagColumnListStore();\nlet columConfig = {};\nconst tableInfo = reactive({\n  columns: [],\n  data: [],\n  defaultExpandedKeys: [],\n  maxHeight: \"200px\",\n  loading: false,\n});\n//同比汇总表格数据\nconst sameTotalTableInfo = reactive({\n  columns: [],\n  data: [],\n  defaultExpandedKeys: [],\n  maxHeight: \"600px\",\n  loading: false,\n});\n//同比明细表格数据\nconst sameDetailTableInfo = reactive({\n  columns: [],\n  data: [],\n  defaultExpandedKeys: [],\n  maxHeight: \"600px\",\n  loading: false,\n});\nconst selectMonth = ref(\"3\");\nconst tableRef = ref(null);\nconst tabChangeColumInfo = reactive({\n  columnTabs: [],\n});\nlet filterShowChildrenColumn = [];\nconst chartColumMap = {\n  发薪人数: [],\n  营业收入: [],\n  销售毛利率: [],\n};\nconst chartColumnNameMap = {\n  canvasLine1: \"发薪人数\",\n  canvasLine2: \"营业收入\",\n  canvasLine3: \"销售毛利率\",\n};\nconst tabKey = ref(\"1\");\nconst raidoGroupType = ref(\"total\");\nonBeforeMount(() => {\n  seltColumns();\n  getList();\n  initTotalColumns();\n});\nonMounted(() => {\n  if (tableRef.value) {\n    let head = tableRef.value.$el;\n    nextTick(() => {\n      let innerHeight = window.innerHeight;\n      let elHeight = head.getBoundingClientRect().top;\n      tableInfo.maxHeight = innerHeight - elHeight - 30 + \"px\";\n    });\n  }\n});\n// 更改环比分析/同比分析\nconst changeTabs = key => {\n  tabKey.value = key;\n};\n// TODO环比分析-------------------------------------------------------------\n// 初始化\nconst seltColumns = () => {\n  let tagColumns = toRaw(tagColumnList.getTagColumnList) || [];\n  let currentPageColumn = tagColumns.filter(item => item.report === \"环比分析\") || [];\n  if (currentPageColumn.length) {\n    currentPageColumn[0].tier.forEach((item, index) => {\n      let tabs = [];\n      let columnTabs = [];\n      let columnHasSonTabs = [];\n      let noHiddenColumn = [];\n      let defaultColumHasSonTabs = [];\n      let defaultColumnTabs = [];\n      item.tags.forEach(jtem => {\n        tabs.push(jtem.tag);\n        jtem.columns.forEach(ktem => {\n          let { col, conf, title } = ktem;\n          conf = conf || {};\n          let columnItemConfig = {\n            title,\n            dataIndex: col,\n            align: conf.align,\n            cellStyle: { \"text-align\": conf.cellAlign },\n            width: conf.width,\n            ellipsis: true,\n            headerCellClass: \"noEllipsis\",\n            slotName: col,\n            bodyCellClass: \"bodyCell\",\n            fixed : conf.fixed\n          };\n          columnItemConfig.isShow = conf.isShow;\n          columnItemConfig.render = ({ record, column }) => {\n            let cellVal = record[column.dataIndex];\n            if (!Array.isArray(cellVal)) {\n              if (column.slotName === \"lastDeptName\") {\n                return (\n                  <a-popover\n                    content-style={{ background: \"rgba(0,0,0,.8)\", color: \"#fff\" }}\n                    arrow-style={{ background: \"rgba(0,0,0,.8)\" }}\n                  >\n                    {{\n                      default: () =>\n                        record.leafNode == \"1\" ? (\n                          <span class=\"pointer\" style={{ color: \"#165dff\" }} onclick={() => jump(record,1)}>\n                            {record.lastDeptName}\n                          </span>\n                        ) : (\n                          <span class=\"pointer\">{record.lastDeptName}</span>\n                        ),\n                      content: () => record.deptName,\n                    }}\n                  </a-popover>\n                );\n              }\n              return '<span innerHTML={getRedNum(cellVal)}></span>';\n            } else {\n              let route = chartColumMap[chartColumnNameMap[column.dataIndex]].map((item,i)=>({name:item.month+'-'+record[item.col],value:cellVal[i]}))\n              return '<echartContainer route={route} height={74} width={100} />';\n            }\n          };\n          if (conf.canHide === 1) {\n            if (conf.parentCol === 0) {\n              columnTabs.push(columnItemConfig);\n            } else {\n              columnHasSonTabs.push(columnItemConfig);\n            }\n          } else {\n            noHiddenColumn.push(columnItemConfig);\n          }\n          if (conf.parentCol === 1) {\n            defaultColumHasSonTabs.push(columnItemConfig);\n          } else {\n            defaultColumnTabs.push(columnItemConfig);\n          }\n        });\n      });\n      columConfig[\"level\" + (index + 1)] = {\n        tabs,\n        params: item.params || [],\n        columnTabs,\n        columnHasSonTabs,\n        noHiddenColumn,\n        defaultColumnTabs,\n        defaultColumHasSonTabs,\n      };\n    });\n  }\n  tabChangeColumInfo.columnTabs = columConfig.level1.columnHasSonTabs;\n};\n// 更换表头\nconst analysiisColumn = months => {\n  let { columnTabs, noHiddenColumn, defaultColumHasSonTabs } = columConfig.level1;\n  let num = 4;\n  switch (selectMonth.value) {\n    case \"3\":\n      let children1 = [];\n      let filterHasSonShowColumn1 = defaultColumHasSonTabs.filter(item => item.isShow === 1);\n      months.forEach((item, i) => {\n        let columnHasSonConfig = {};\n        columnHasSonConfig.title = item;\n        columnHasSonConfig.children = filterHasSonShowColumn1.map((jtem, j) => {\n          num++;\n          return {\n            ...jtem,\n            dataIndex: `colNo${num}`,\n            slotName: `colNo${num}`,\n          };\n        });\n        children1.push(columnHasSonConfig);\n      });\n      num = 4;\n      filterShowChildrenColumn = children1;\n      break;\n    case \"6\":\n      let children2 = [];\n      let filterHasSonShowColumn2 = defaultColumHasSonTabs.filter(item => item.isShow === 1);\n      months.forEach((item, i) => {\n        let columnHasSonConfig = {};\n        columnHasSonConfig.title = item;\n        columnHasSonConfig.children = filterHasSonShowColumn2.map((jtem, j) => {\n          num++;\n          return {\n            ...jtem,\n            dataIndex: `colNo${num}`,\n            slotName: `colNo${num}`,\n          };\n        });\n        children2.push(columnHasSonConfig);\n      });\n      num = 4;\n      filterShowChildrenColumn = children2;\n      break;\n    case \"12\":\n      let children3 = [];\n      let filterHasSonShowColumn3 = defaultColumHasSonTabs.filter(item => item.isShow === 1);\n      months.forEach((item, i) => {\n        let columnHasSonConfig = {};\n        columnHasSonConfig.title = item;\n        columnHasSonConfig.children = filterHasSonShowColumn3.map((jtem, j) => {\n          num++;\n          return {\n            ...jtem,\n            dataIndex: `colNo${num}`,\n            slotName: `colNo${num}`,\n          };\n        });\n        children3.push(columnHasSonConfig);\n      });\n      num = 4;\n      filterShowChildrenColumn = children3;\n      break;\n    default:\n      break;\n  }\n  Object.keys(chartColumMap).forEach(key => {\n    chartColumMap[key] = [];\n  });\n  filterShowChildrenColumn.forEach(item => {\n    if (item.children?.length) {\n      let filterShowColumns = [];\n      item.children.forEach(jtem => {\n        if (jtem.isShow === 1) {\n          filterShowColumns.push(jtem);\n        }\n        if (chartColumMap.hasOwnProperty(jtem.title)) {\n          chartColumMap[jtem.title].push({\n            month: item.title,\n            col: jtem.dataIndex,\n          });\n        }\n      });\n      item.children = filterShowColumns;\n    }\n  });\n  Object.keys(chartColumMap).forEach(key => chartColumMap[key].reverse());\n\n  let actionColumn = {\n    title : '操作',\n    dataIndex : 'action',\n    width : 80,\n    fixed : 'right',\n    cellStyle : {textAlign : 'center'},\n    render({record}){\n      return <a href=\"javaScript:void(0)\" onClick={()=>{goRingContrastChart(record,'dept')}}>看图</a>\n    }\n  }\n  let filterAllShowColumn = [...columnTabs.filter(item => item.isShow === 1), ...noHiddenColumn, ...filterShowChildrenColumn,actionColumn];\n  tableInfo.columns = filterAllShowColumn;\n};\n//展开环比分析\nconst expandedChange = rowKeys => {\n  tableInfo.defaultExpandedKeys = rowKeys;\n};\n// 切换时间区间\nconst handleMonthChange = month => {\n  selectMonth.value = month;\n  getList();\n};\n// 点击标签\nconst handleTabChange = tab => {\n  switch (tab.isShow) {\n    case 0:\n      tab.isShow = 1;\n      changeShowStatus({\n        type: \"self\",\n        title: tab.title,\n        val: 1,\n        tab,\n      });\n      break;\n    case 1:\n      tab.isShow = 0;\n      changeShowStatus({\n        type: \"self\",\n        title: tab.title,\n        val: 0,\n        tab,\n      });\n      break;\n    default:\n      break;\n  }\n};\n// 更改高亮状态并更换表头\nconst changeShowStatus = obj => {\n  let { columnTabs, defaultColumHasSonTabs } = columConfig.level1;\n  let filterHasSonShowColumn = defaultColumHasSonTabs.filter(item => item.isShow === 1);\n  if (filterHasSonShowColumn.length === 0) {\n    Message.error(\"至少选择一项\");\n    obj.tab.isShow = obj.tab.isShow === 0 ? 1 : 0;\n    return;\n  }\n  if (obj.type === \"parent\") {\n    columnTabs.forEach(item => {\n      if (obj.title === item.title) {\n        item.isShow = obj.val;\n      }\n    });\n  }\n  if (obj.type === \"self\") {\n    defaultColumHasSonTabs.forEach(item => {\n      if (obj.title === item.title) {\n        item.isShow = obj.val;\n      }\n    });\n  }\n  getList();\n};\n// 处理趋势数据\nconst construcLine = arr => {\n  arr.forEach(item => {\n    item.colNo2 = JSON.parse(item.colNo2);\n    item.colNo3 = JSON.parse(item.colNo3);\n    item.colNo4 = JSON.parse(item.colNo4);\n    if (item.children) {\n      construcLine(item.children);\n    }\n  });\n};\n// 获取列表数据\nconst getList = () => {\n  tableInfo.data = [];\n  tableInfo.loading = true;\n  let arr = [];\n  const mappings = {\n    发薪人数: \"colNo1\",\n    营业收入: \"colNo2\",\n    销售毛利: \"colNo3\",\n    销售毛利率: \"colNo4\",\n    直接成本: \"colNo5\",\n    人均营业收入: \"colNo6\",\n    人均直接成本: \"colNo7\",\n    未完工项目成本: \"colNo8\",\n    招聘费用: \"colNo9\",\n    销售费用: \"colNo10\",\n    管理费用: \"colNo11\",\n  };\n  tabChangeColumInfo.columnTabs\n    .filter(item => item.isShow === 1)\n    .forEach(item => {\n      if (mappings[item.title]) {\n        arr.push(mappings[item.title]);\n      }\n      if (item.children) {\n        item.children.forEach(jtem => {\n          if (mappings[jtem.title]) {\n            arr.push(mappings[jtem.title]);\n          }\n        });\n      }\n    });\n  const params = {\n    interval: Number(selectMonth.value),\n    dynamicHeaderParam: Array.from(new Set(arr)),\n    xAxis: 74,\n    yAxis: 100,\n    tagKey: \"linkAnalysis\",\n  };\n  getDepartmentRingList(params)\n    .then(res => {\n      if (res.code == \"200\") {\n        analysiisColumn(res.data.month);\n        construcLine(res.data.data);\n        let data = dataAddKey(res.data.data, \"key\", \"deptId\");\n        let keys = [];\n        res.data.data.forEach(item => keys.push(item.deptId));\n        tableInfo.defaultExpandedKeys = keys;\n        tableInfo.data = markRaw(data);\n      } else {\n        Message.error(res.message);\n      }\n      tableInfo.loading = false;\n    })\n    .catch(err => {\n      if (err?.code === \"ERR_CANCELED\") {\n        tableInfo.loading = true;\n      } else {\n        Message.error(err?.message || \"数据请求错误\");\n        tableInfo.loading = false;\n      }\n    });\n};\nconst allHeadTagList = ref([]); // 所有的标签\nconst allTableList = ref([]); // 表头数据\nconst notShowList = shallowRef([]); // 初始没显示的表头数据\nconst sameDetailTableRef = ref(null) //同比明细表格dom\nconst sameTotalTableRef = ref(null)//同比汇总表格dom\n// TODO同比分析----汇总------------------------------------------------------\n// 初始化表头和标签数据\nconst initTotalColumns = () => {\n  allHeadTagList.value = [];\n  allTableList.value = [];\n  notShowList.value = [];\n  let tagColumns = toRaw(tagColumnList.getTagColumnList) || [];\n  let currentPageColumn = tagColumns.filter(item => item.report === \"同比分析\") || [];\n  if (currentPageColumn.length) {\n    const currentColumnList = currentPageColumn[0].tier[0].tags[0].columns;\n    currentColumnList.forEach(item => {\n      const { col, conf, title } = item;\n      let columnItemConfig = {\n        title,\n        dataIndex: col,\n        align: conf.align,\n        cellStyle: { \"text-align\": conf.cellAlign },\n        width: conf.width,\n        ellipsis: true,\n        headerCellClass: \"noEllipsis\",\n        slotName: col,\n        bodyCellClass: \"bodyCell\",\n        isShow: conf.isShow,\n        fixed : conf.fixed\n      };\n      // 需要把部门名称的canHide改成0 level1\n      // 如果canHide=1,则push到allHeadTagList,如果isShow=1push到tableList,再配标签配点击事件，对表头进行格式处理。\n      if (conf.canHide == 1) {\n        allHeadTagList.value.push(columnItemConfig);\n      } else {\n        notShowList.value.push(columnItemConfig);\n      }\n      if(conf.fixed !== undefined){\n        columnItemConfig.fixed = conf.fixed\n      }\n      if (conf.parentCol == 1) {\n        allTableList.value.push(columnItemConfig);\n      }\n    });\n    if (raidoGroupType.value == \"total\") {\n      constructSameTotalColumns(allHeadTagList.value);\n    } else {\n      constructSameDetailColumns(allHeadTagList.value);\n    }\n  }\n};\n// 点击标签\nconst handleSameContrastTabChange = value => {\n  value.isShow = value.isShow === 0 ? 1 : 0;\n  let filterHasSonShowColumn = allHeadTagList.value.filter(item => item.isShow === 1);\n  if (filterHasSonShowColumn.length === 0) {\n    Message.error(\"至少选择一项\");\n    value.isShow = value.isShow === 0 ? 1 : 0;\n    return;\n  }\n  handleAbortRequest()\n  if (raidoGroupType.value === \"total\") {\n    constructSameTotalColumns(allHeadTagList.value);\n  } else {\n    constructSameDetailColumns(allHeadTagList.value);\n  }\n};\n// 构造同比汇总的表头\nconst constructSameTotalColumns = list => {\n  let tableList = list.filter(item => item.isShow === 1);\n  let createColumns = []\n  let childrenColumns = [\n        {\n          title: lastYear + \"/1-12\",\n        },\n        {\n          title: lastYear + `/1-${lastMonth}`,\n        },\n        {\n          title: year + `/1-${lastMonth}`,\n        },\n        {\n          title: \"同比\",\n        },\n  ]\n  let colNo = 5\n  tableList.forEach(item => {\n    let columnConfig = {\n      title : item.title,\n      children : childrenColumns.map((jtem,i)=>{\n        let childrenColumnItemConfig = {\n          title : jtem.title,\n          dataIndex: `colNo${colNo}`,\n          slotName: `colNo${colNo}`,\n          width: 110,\n          cellStyle: {textAlign : 'right'},\n        }\n        if(i === (childrenColumns.length -1)){\n          childrenColumnItemConfig.title = item.title.endsWith('率')?'偏离':jtem.title\n        }\n        colNo++\n        return childrenColumnItemConfig\n      })\n    }\n    createColumns.push(columnConfig)\n  });\n  let actionColumn = {\n    title : '操作',\n    dataIndex : 'action',\n    width : 80,\n    fixed : 'right',\n    cellStyle : {textAlign : 'center'},\n    render({record}){\n      return <a href=\"javaScript:void(0)\" onClick={()=>{goLookChat(record,'dept')}}>看图</a>\n    }\n  }\n  sameTotalTableInfo.columns = [...notShowList.value,...createColumns,actionColumn]\n  getConstructSameTotalList()\n};\n\nconst sameTotalTableExpandedChange = keys=>{\n  sameTotalTableInfo.defaultExpandedKeys = keys\n}\n\n//跳转看图页\nconst goLookChat = (record,type)=>{\n  router.push({\n    name : 'lookChart',\n    state : {\n      barChartOptions : JSON.stringify(allHeadTagList.value),\n      deptId : record.deptId,\n      sourceType : type,\n      deptName : record.deptName\n    }\n  })\n}\n\nconst goRingContrastChart = (record,type)=>{\n  router.push({\n    name : 'ringContrastChart',\n    state : {\n      deptName : record.deptName,\n      interval:selectMonth.value,\n      deptId : record.deptId,\n      sourceType : type\n    }\n  })\n}\n\n// 同比分析-----明细-------------------------------------------------------------\n// 更改汇总/明细\nconst constructSameTabChange = value => {\n  raidoGroupType.value = value;\n  initTotalColumns();\n};\n// 构造同比明细的表头结构\nconst constructSameDetailColumns = list => {\n  const timeData = [];\n  let activeTableList = list.filter(item => item.isShow === 1);\n  if (month == 1) {\n    for (var i = 1; i <= 12; i++) {\n      timeData.push({\n        title: i + \"月\",\n        children: [],\n      });\n    }\n  } else {\n    for (var i = 1; i <= lastMonth; i++) {\n      timeData.push({\n        title: i + \"月\",\n        children: [],\n      });\n    }\n  }\n  const years = [lastYear, year];\n  let colNo = 5\n  timeData.forEach(item=>{\n    let childrenColumns = []\n    activeTableList.forEach(jtem=>{\n      years.forEach(ktem=>{\n        let contrastColumnConfig = {\n          title: `${jtem.title}${ktem}`,\n          dataIndex: `colNo${colNo}`,\n          slotName: `colNo${colNo}`,\n          width: jtem.width,\n          cellStyle: toRaw(jtem.cellStyle),\n        }\n        childrenColumns.push(contrastColumnConfig)\n        colNo++\n      })\n    })\n    item.children = childrenColumns\n  })\n  let actionColumn = {\n    title : '操作',\n    dataIndex : 'action',\n    width : 80,\n    fixed : 'right',\n    cellStyle : {textAlign : 'center'},\n    render({record}){\n      return <a href=\"javaScript:void(0)\" onClick={()=>{goLookChat(record,'dept')}}>看图</a>\n    }\n  }\n  sameDetailTableInfo.columns = [...notShowList.value,...timeData,actionColumn]\n  getConstructSameDetailList()\n};\n\n//同比分析明细表格展开/折叠\nconst detailTableExpandedChange = rowKeys => {\n  sameDetailTableInfo.defaultExpandedKeys = rowKeys;\n};\n\n//同比分析明细接口\nconst getConstructSameDetailList = ()=>{\n  let params = {\n    interval:lastMonth,\n    dynamicHeaderParam:allTableList.value.filter(item=>item.isShow ===1).map(item=>item.dataIndex),\n    xAxis:74,\n    yAxis:100,\n    tagKey:\"yoyAnalysis\",\n    type : '2'\n  }\n  sameDetailTableInfo.loading = true\n  queryYoyAnalysis(params).then(res=>{\n    if(res.code === '200'){\n      dataAddKey(res.data.data,'key','deptId')\n      let expandKeys = []\n      res.data.data.forEach(item=>expandKeys.push(item.key))\n      sameDetailTableInfo.defaultExpandedKeys = expandKeys\n      sameDetailTableInfo.data = res.data.data\n      //计算表格不出滚动条的最大高度\n      if(sameDetailTableInfo.maxHeight === '600px'){\n        nextTick(() => {\n              if (sameDetailTableRef.value) {\n              let head = sameDetailTableRef.value.$el;\n              let innerHeight = window.innerHeight;\n              let elHeight = head.getBoundingClientRect().top;\n              sameDetailTableInfo.maxHeight = Math.round(innerHeight - elHeight - 32) + \"px\";\n            }\n          });\n        }\n    }else {\n      Message.error(res.desc || '请求数据失败')\n    }\n    sameDetailTableInfo.loading = false;\n  }).catch(err=>{\n    if (err?.code === \"ERR_CANCELED\") {\n      sameDetailTableInfo.loading = true;\n      } else {\n        Message.error(err?.message || \"数据请求错误\");\n        sameDetailTableInfo.loading = false;\n      }\n  })\n}\n\n//同比分析汇总接口\nconst getConstructSameTotalList = ()=>{\n  let params = {\n    interval:lastMonth,\n    dynamicHeaderParam:allTableList.value.filter(item=>item.isShow ===1).map(item=>item.dataIndex),\n    xAxis:74,\n    yAxis:100,\n    tagKey:\"yoyAnalysis\",\n    type : '1'\n  }\n  sameTotalTableInfo.loading = true\n  queryYoyAnalysis(params).then(res=>{\n    if(res.code === '200'){\n      dataAddKey(res.data.data,'key','deptId')\n      let expandKeys = []\n      res.data.data.forEach(item=>expandKeys.push(item.key))\n      sameTotalTableInfo.defaultExpandedKeys = expandKeys\n      sameTotalTableInfo.data = res.data.data\n      //计算表格不出滚动条的最大高度\n      if(sameTotalTableInfo.maxHeight === '600px'){\n        nextTick(() => {\n              if (sameTotalTableRef.value) {\n                let head = sameTotalTableRef.value.$el;\n                let innerHeight = window.innerHeight;\n                let elHeight = head.getBoundingClientRect().top;\n                sameTotalTableInfo.maxHeight = Math.round(innerHeight - elHeight - 32) + \"px\";\n            }\n          });\n        }\n    }else {\n      Message.error(res.desc || '请求数据失败')\n    }\n    sameTotalTableInfo.loading = false;\n  }).catch(err=>{\n    if (err?.code === \"ERR_CANCELED\") {\n      sameTotalTableInfo.loading = true;\n      } else {\n        Message.error(err?.message || \"数据请求错误\");\n        sameTotalTableInfo.loading = false;\n      }\n  })\n}\n//echarts缩略图的路径信息\nconst createEchartsRoute = (record,column)=>{\n  return chartColumMap[chartColumnNameMap[column.dataIndex]].map((item,i)=>({value:record[column.dataIndex][i]}))\n}\n// 跳转到客户\nconst jump = (record,tab) => {\n  router.push({\n    path: \"/customerRingSame\",\n    query: {\n      id: record.deptId,\n      deptName : record.deptName,\n      tab\n    },\n  });\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.p-t-10 {\n  padding-top: 10px;\n}\n:deep(.tabs .arco-tabs-nav-type-line .arco-tabs-tab-title) {\n  font-size: 15px;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}