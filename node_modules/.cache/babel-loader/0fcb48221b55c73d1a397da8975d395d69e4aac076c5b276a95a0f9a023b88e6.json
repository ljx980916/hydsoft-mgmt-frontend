{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * @description 扩展方法，提供 gl-matrix 为提供的方法\n * */\nvar gl_matrix_1 = require(\"gl-matrix\");\nfunction leftTranslate(out, a, v) {\n  var transMat = [0, 0, 0, 0, 0, 0, 0, 0, 0];\n  gl_matrix_1.mat3.fromTranslation(transMat, v);\n  return gl_matrix_1.mat3.multiply(out, transMat, a);\n}\nexports.leftTranslate = leftTranslate;\nfunction leftRotate(out, a, rad) {\n  var rotateMat = [0, 0, 0, 0, 0, 0, 0, 0, 0];\n  gl_matrix_1.mat3.fromRotation(rotateMat, rad);\n  return gl_matrix_1.mat3.multiply(out, rotateMat, a);\n}\nexports.leftRotate = leftRotate;\nfunction leftScale(out, a, v) {\n  var scaleMat = [0, 0, 0, 0, 0, 0, 0, 0, 0];\n  gl_matrix_1.mat3.fromScaling(scaleMat, v);\n  return gl_matrix_1.mat3.multiply(out, scaleMat, a);\n}\nexports.leftScale = leftScale;\nfunction leftMultiply(out, a, a1) {\n  return gl_matrix_1.mat3.multiply(out, a1, a);\n}\n/**\n * 根据 actions 来做 transform\n * @param m\n * @param actions\n */\nfunction transform(m, actions) {\n  var matrix = m ? [].concat(m) : [1, 0, 0, 0, 1, 0, 0, 0, 1];\n  for (var i = 0, len = actions.length; i < len; i++) {\n    var action = actions[i];\n    switch (action[0]) {\n      case 't':\n        leftTranslate(matrix, matrix, [action[1], action[2]]);\n        break;\n      case 's':\n        leftScale(matrix, matrix, [action[1], action[2]]);\n        break;\n      case 'r':\n        leftRotate(matrix, matrix, action[1]);\n        break;\n      case 'm':\n        leftMultiply(matrix, matrix, action[1]);\n        break;\n      default:\n        break;\n    }\n  }\n  return matrix;\n}\nexports.transform = transform;\n/**\n * 向量 v1 到 向量 v2 夹角的方向\n * @param  {Array} v1 向量\n * @param  {Array} v2 向量\n * @return {Boolean} >= 0 顺时针 < 0 逆时针\n */\nfunction direction(v1, v2) {\n  return v1[0] * v2[1] - v2[0] * v1[1];\n}\nexports.direction = direction;\n/**\n * 二维向量 v1 到 v2 的夹角\n * @param v1\n * @param v2\n * @param direct\n */\nfunction angleTo(v1, v2, direct) {\n  var ang = gl_matrix_1.vec2.angle(v1, v2);\n  var angleLargeThanPI = direction(v1, v2) >= 0;\n  if (direct) {\n    if (angleLargeThanPI) {\n      return Math.PI * 2 - ang;\n    }\n    return ang;\n  }\n  if (angleLargeThanPI) {\n    return ang;\n  }\n  return Math.PI * 2 - ang;\n}\nexports.angleTo = angleTo;\n/**\n * 计算二维向量的垂直向量\n * @param out\n * @param v\n * @param flag\n */\nfunction vertical(out, v, flag) {\n  if (flag) {\n    out[0] = v[1];\n    out[1] = -1 * v[0];\n  } else {\n    out[0] = -1 * v[1];\n    out[1] = v[0];\n  }\n  return out;\n}\nexports.vertical = vertical;","map":{"version":3,"mappings":"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","names":["leftTranslate","out","a","v","transMat","gl_matrix_1","fromTranslation","multiply","exports","leftRotate","rad","rotateMat","fromRotation","leftScale","scaleMat","fromScaling","leftMultiply","a1","transform","m","actions","matrix","concat","i","len","length","action","direction","v1","v2","angleTo","direct","ang","angle","angleLargeThanPI","Math","PI","vertical","flag"],"sourceRoot":"","sources":["../src/ext.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script","externalDependencies":[]}