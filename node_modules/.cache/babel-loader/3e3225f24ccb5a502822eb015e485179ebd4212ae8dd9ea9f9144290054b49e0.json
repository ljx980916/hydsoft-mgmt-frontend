{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { onMounted, ref, reactive, onUnmounted, watchEffect } from \"vue\";\nimport * as echarts from \"echarts\";\nimport { getSplitNum, getCurrentTime } from \"@/utils/util.js\";\nimport { useRouter, useRoute } from \"vue-router\";\nimport { getPieChartData, getCauseGroup, getPostChartData } from \"@/api/staffStatics.js\";\nimport { getCurrentInstance } from \"@vue/runtime-core\";\nimport moment from \"moment\";\nexport default {\n  __name: 'staticPicture',\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    let $bus = getCurrentInstance().appContext.config.globalProperties.$bus;\n    const router = useRouter();\n    const route = useRoute();\n    const form = reactive({\n      title: \"各BG汇总\",\n      c1People: 1477,\n      Gpeople: 60,\n      c2People: 100,\n      sPeople: 4,\n      rPeople: 200,\n      formalPeople: 1477,\n      partTimePeople: 60,\n      practicePeople: 100\n    });\n    let {\n      year,\n      month,\n      days\n    } = getCurrentTime();\n    let currentDate = `${year}/${month}/${days}`;\n    const isPie = ref(false);\n    const isPost = ref(false);\n    var pieData = [];\n    var pieDatas = [];\n    var entryList = [];\n    var departList = [];\n    var formalList = [];\n    var xAxisList = [];\n    var pieColor = [\"#8E83BD\", \"#F0886F\", \"#6D99C8\", \"#C59E63\", \"#4D8192\", \"#7DAE99\"];\n    var subText = 0;\n    var myPieChart;\n    var myPostChart;\n    const time = ref(\"1\");\n    const dataIndex = ref(-1);\n    const timeList = ref([{\n      label: \"1\",\n      value: \"近12月\"\n    }, {\n      label: \"2\",\n      value: \"近26周\"\n    }, {\n      label: \"3\",\n      value: \"近30自然日\"\n    }]);\n    // 视口宽度\n    watchEffect(() => {\n      $bus.emit(\"updateStructure\", [{\n        type: \"text\",\n        color: \"#333\",\n        msg: `人员分析`\n      }, {\n        type: \"text\",\n        color: \"#333\",\n        msg: `人员统计`\n      }]);\n    });\n\n    // 环状图-------------------------------------------------\n    const getPieData = () => {\n      pieDatas = [];\n      pieData = [];\n      subText = 0;\n      getPieChartData().then(res => {\n        if (res.code === \"000000000000\") {\n          res.data.forEach(item => {\n            pieData.push({\n              name: item.deptName,\n              value: item.extendColumn2\n            });\n            subText += item.extendColumn2;\n          });\n          pieDatas = pieData.map((item, index) => {\n            return {\n              name: item.name,\n              value: item.value,\n              label: {\n                color: pieColor[index]\n              }\n            };\n          });\n          getPieCharts();\n          const deptNames = [\"BG1\", \"BG2\", \"BG3\", \"BG4\"];\n          deptNames.forEach((item, index) => {\n            if (form.title === item) {\n              myPieChart.dispatchAction({\n                type: \"highlight\",\n                //突出高亮显示;\n                seriesIndex: 0,\n                dataIndex: index\n              });\n            }\n          });\n        }\n      });\n    };\n    const getPieCharts = () => {\n      if (myPieChart != null && myPieChart != \"\" && myPieChart != undefined) {\n        myPieChart.dispose();\n      }\n      var chartDom = document.getElementById(\"pie\");\n      if (chartDom) {\n        myPieChart = echarts.init(chartDom);\n        var option = {\n          tooltip: {\n            trigger: \"item\",\n            triggerOn: \"none\",\n            formatter: \"{b}\",\n            position: function (point, params, dom, rect, size) {\n              if (params.name == \"BG1\") {\n                return {\n                  left: rect.x,\n                  top: rect.y + 50\n                };\n              }\n              if (params.name == \"BG3\") {\n                return {\n                  left: rect.x + 30,\n                  top: rect.y + 50\n                };\n              }\n              if (params.name == \"BG4\") {\n                return {\n                  left: rect.x,\n                  top: rect.y\n                };\n              }\n              if (params.name == \"BG2\") {\n                return {\n                  left: rect.x + 60,\n                  top: rect.y + 50\n                };\n              }\n            }\n          },\n          //环形图中间文字\n          title: {\n            text: \"总人数\",\n            subtext: getSplitNum(subText),\n            textStyle: {\n              fontSize: \"14px\",\n              color: \"#6B7785\",\n              fontWeight: 300,\n              fontFamily: \"PingFangSC-Thin\"\n            },\n            subtextStyle: {\n              fontSize: \"18px\",\n              color: \"#6B7785\",\n              fontWeight: 500,\n              fontFamily: \"PingFang SC\"\n            },\n            textAlign: \"center\",\n            //图例文字居中显示\n            x: \"48.3%\",\n            //距离左边的距离\n            y: \"38.5%\" //距离上边的距离\n          },\n\n          animation: false,\n          //数据的颜色设置\n          color: [\"#8E83BD\", \"#F0886F\", \"#6D99C8\", \"#C59E63\", \"#4D8192\", \"#7DAE99\"],\n          //图例设置\n          legend: {\n            bottom: -5,\n            itemGap: 20,\n            //数据上下的距离\n            itemWidth: 20,\n            // 设置宽度\n            data: pieData\n          },\n          series: [{\n            radius: [\"53%\", \"80%\"],\n            //第一个是中间圆的大小，第二个是外边圆的大小\n            center: [\"49%\", \"47%\"],\n            //左边的距离，上边的距离\n            type: \"pie\",\n            label: {\n              position: \"inner\",\n              //文字显示在内部，如果在外边把这个去掉就好\n              color: \"#fff\",\n              //文字的颜色\n              fontSize: \"14px\",\n              textAlign: \"left\"\n            },\n            emphasis: {\n              itemStyle: {\n                shadowBlur: 6,\n                shadowOffsetX: 0,\n                shadowColor: \"rgba(100, 114, 123, 0.5)\"\n              },\n              label: {\n                show: true,\n                formatter: \"{b}\",\n                fontSize: \"18px\",\n                color: \"#fff\"\n              },\n              scale: true,\n              scaleSize: 10\n            },\n            data: pieData,\n            startAngle: 45,\n            //起始角度\n            clockwise: false //生长方向，是否顺时针\n          }, {\n            radius: [\"53%\", \"80%\"],\n            //第一个是中间圆的大小，第二个是外边圆的大小\n            center: [\"49%\", \"47%\"],\n            //左边的距离，上边的距离\n            type: \"pie\",\n            label: {\n              formatter: function (data) {\n                let c = getSplitNum(data.value);\n                return c;\n              },\n              position: \"outer\",\n              //文字显示在内部，如果在外边把这个去掉就好\n              fontSize: \"14px\",\n              textAlign: \"left\"\n            },\n            emphasis: {\n              itemStyle: {\n                shadowBlur: 10,\n                shadowOffsetX: 0,\n                shadowColor: \"rgba(100, 114, 123, 0.5)\"\n              },\n              label: {\n                show: true\n              },\n              scale: true,\n              scaleSize: 10\n            },\n            data: pieDatas,\n            startAngle: 45,\n            //起始角度\n            clockwise: false //生长方向，是否顺时针\n          }]\n        };\n\n        option && myPieChart.setOption(option);\n        window.addEventListener(\"resize\", handlePieResize);\n        myPieChart.on(\"click\", function (params) {\n          dataIndex.value = params.dataIndex;\n          isPie.value = true;\n          form.title = params.name;\n          for (var i = 0; i < pieDatas.length; i++) {\n            if (i != params.dataIndex) {\n              myPieChart.dispatchAction({\n                type: \"downplay\",\n                //取消突出高亮显示;\n                seriesIndex: 0,\n                dataIndex: i\n              });\n            }\n          }\n          myPieChart.dispatchAction({\n            type: \"hideTip\",\n            seriesIndex: 0,\n            dataIndex: params.dataIndex\n          });\n          myPieChart.dispatchAction({\n            type: \"highlight\",\n            //突出高亮显示;\n            seriesIndex: 0,\n            dataIndex: params.dataIndex\n          });\n        });\n        myPieChart.on(\"mouseover\", function (params) {\n          if (params.dataIndex == dataIndex.value || params.name == form.title) {\n            myPieChart.dispatchAction({\n              type: \"hideTip\",\n              seriesIndex: 0,\n              dataIndex: params.dataIndex\n            });\n          } else {\n            myPieChart.dispatchAction({\n              type: \"showTip\",\n              seriesIndex: 0,\n              dataIndex: params.dataIndex\n            });\n          }\n        });\n        myPieChart.on(\"mouseout\", function (params) {\n          myPieChart.dispatchAction({\n            type: \"hideTip\",\n            seriesIndex: 0,\n            dataIndex: params.dataIndex\n          });\n        });\n      }\n    };\n    const handlePieResize = () => {\n      myPieChart.resize();\n    };\n    const handleClickOutside = event => {\n      if (event.target.tagName !== \"SPAN\" && !isPost.value && event.target.tagName !== \"BUTTON\") {\n        if (isPie.value) {\n          getCauseGroupData(form.title);\n          isPie.value = false;\n          getPostData(time.value);\n        } else {\n          form.title = \"各BG汇总\";\n          getPieCharts();\n          getCauseGroupData(\"各BG汇总\");\n          getPostData(time.value);\n        }\n      }\n      if (isPost.value) {\n        isPost.value = false;\n      }\n    };\n    //获取事业群全部数据\n    const getCauseGroupData = deptName => {\n      if (deptName !== \"各BG汇总\") {\n        const formData = new FormData();\n        formData.append(\"deptName\", form.title);\n        getCauseGroup(formData).then(res => {\n          const {\n            code,\n            data\n          } = res;\n          if (code === \"000000000000\") {\n            form.c1People = data.C1;\n            form.Gpeople = data.G;\n            form.c2People = data.C2;\n            form.sPeople = data.S;\n            form.rPeople = data.R;\n            form.formalPeople = data.official;\n            form.partTimePeople = data.pluralistic;\n            form.practicePeople = data.practice;\n          }\n        });\n      } else {\n        getCauseGroup().then(res => {\n          const {\n            code,\n            data\n          } = res;\n          if (code === \"000000000000\") {\n            form.c1People = data.C1;\n            form.Gpeople = data.G;\n            form.c2People = data.C2;\n            form.sPeople = data.S;\n            form.rPeople = data.R;\n            form.formalPeople = data.official;\n            form.partTimePeople = data.pluralistic;\n            form.practicePeople = data.practice;\n            form.title = \"各BG汇总\";\n          }\n        });\n      }\n    };\n    // 明细\n    const handleDetail = () => {\n      router.push({\n        path: \"/staticDetail\",\n        state: {\n          deptName: form.title === \"各BG汇总\" ? \"全部\" : form.title\n        }\n      });\n    };\n    // 柱状图-----------------------------------------------------------\n    const handleIsPost = () => {\n      isPost.value = true;\n    };\n    const getPostData = val => {\n      const formData = new FormData();\n      formData.append(\"histogram\", val);\n      if (form.title !== \"各BG汇总\") {\n        formData.append(\"deptName\", form.title);\n      }\n      getPostChartData(formData).then(res => {\n        if (res.code == \"000000000000\") {\n          departList = [];\n          entryList = [];\n          formalList = [];\n          xAxisList = [];\n          if (val == \"1\") {\n            res.data.forEach(item => {\n              if (item.extendColumn1.slice(0, 4) !== \"2022\") {\n                const parts = item.extendColumn1.split(\"-\");\n                const year = parts[0];\n                const month = parts[1];\n                var months = `${year}.${month}`;\n                xAxisList.push(months);\n                formalList.push(item.extendColumn2);\n                entryList.push(item.extendColumn3);\n                departList.push(item.extendColumn4);\n              }\n            });\n          } else {\n            res.data.forEach(item => {\n              formalList.push(item.extendColumn2);\n              entryList.push(item.extendColumn3);\n              departList.push(item.extendColumn4);\n              const date = moment(item.extendColumn1);\n              const formattedDate = date.format(\"M/D\");\n              xAxisList.push(formattedDate);\n            });\n          }\n          getPostCharts();\n        }\n      });\n    };\n    const getPostCharts = () => {\n      if (myPostChart != null && myPostChart != \"\" && myPostChart != undefined) {\n        myPostChart.dispose();\n      }\n      var chartDoms = document.getElementById(\"post\");\n      if (chartDoms) {\n        myPostChart = echarts.init(chartDoms);\n        const colors = [\"#69D1B0\", \"#F98981\", \"#3491FA\"];\n        var option = {\n          color: colors,\n          tooltip: {\n            axisPointer: {\n              type: \"cross\"\n            },\n            extraCssText: \"text-align: left;\",\n            formatter: params => {\n              if (params.seriesIndex == 0) return \"时间：\" + params.name + \"</br>\" + params.seriesName + \"：\" + params.value;\n              if (params.seriesIndex == 1) return \"时间：\" + params.name + \"</br>\" + params.seriesName + \"：\" + params.value;\n              if (params.seriesIndex == 2) return \"时间：\" + params.name + \"</br>\" + params.seriesName + \"：\" + params.value;\n            }\n          },\n          grid: {\n            right: \"10%\",\n            left: \"20%\",\n            top: \"8%\"\n          },\n          legend: {\n            data: [\"入职人数\", \"离职人数\", \"在职员工人数\"],\n            bottom: \"2%\",\n            itemGap: 26 //数据上下的距离\n          },\n\n          xAxis: [{\n            type: \"category\",\n            axisTick: {\n              alignWithLabel: true\n            },\n            axisLabel: {\n              interval: \"auto\"\n            },\n            data: xAxisList\n          }],\n          yAxis: [{\n            type: \"value\",\n            name: \"柱状\",\n            position: \"left\",\n            alignTicks: true,\n            splitLine: false,\n            axisLine: {\n              show: true\n            },\n            axisLabel: {\n              formatter: \"{value}\"\n            }\n          }, {\n            type: \"value\",\n            name: \"折线\",\n            position: \"left\",\n            alignTicks: true,\n            splitLine: false,\n            offset: 50,\n            axisLine: {\n              show: true,\n              lineStyle: {\n                color: colors[2]\n              }\n            },\n            axisLabel: {\n              formatter: \"{value}\"\n            }\n          }],\n          series: [{\n            name: \"入职人数\",\n            type: \"bar\",\n            data: entryList\n          }, {\n            name: \"离职人数\",\n            type: \"bar\",\n            data: departList\n          }, {\n            name: \"在职员工人数\",\n            type: \"line\",\n            yAxisIndex: 1,\n            data: formalList\n          }]\n        };\n        option && myPostChart.setOption(option);\n        window.addEventListener(\"resize\", handlePostResize);\n      }\n    };\n    const handlePostResize = () => {\n      myPostChart.resize();\n    };\n    // 更改时间\n    const changeTime = val => {\n      time.value = val;\n      getPostData(val);\n    };\n    onMounted(() => {\n      document.addEventListener(\"click\", handleClickOutside);\n      form.title = history.state.deptName ? history.state.deptName == \"全部\" ? \"各BG汇总\" : history.state.deptName : \"各BG汇总\";\n      getCauseGroupData(form.title);\n      getPieData();\n      getPostData(time.value);\n    });\n    onUnmounted(() => {\n      window.removeEventListener(\"resize\", handlePieResize);\n      document.removeEventListener(\"click\", handleClickOutside);\n      window.removeEventListener(\"resize\", handlePostResize);\n    });\n    const __returned__ = {\n      get $bus() {\n        return $bus;\n      },\n      set $bus(v) {\n        $bus = v;\n      },\n      router,\n      route,\n      form,\n      get year() {\n        return year;\n      },\n      set year(v) {\n        year = v;\n      },\n      get month() {\n        return month;\n      },\n      set month(v) {\n        month = v;\n      },\n      get days() {\n        return days;\n      },\n      set days(v) {\n        days = v;\n      },\n      get currentDate() {\n        return currentDate;\n      },\n      set currentDate(v) {\n        currentDate = v;\n      },\n      isPie,\n      isPost,\n      get pieData() {\n        return pieData;\n      },\n      set pieData(v) {\n        pieData = v;\n      },\n      get pieDatas() {\n        return pieDatas;\n      },\n      set pieDatas(v) {\n        pieDatas = v;\n      },\n      get entryList() {\n        return entryList;\n      },\n      set entryList(v) {\n        entryList = v;\n      },\n      get departList() {\n        return departList;\n      },\n      set departList(v) {\n        departList = v;\n      },\n      get formalList() {\n        return formalList;\n      },\n      set formalList(v) {\n        formalList = v;\n      },\n      get xAxisList() {\n        return xAxisList;\n      },\n      set xAxisList(v) {\n        xAxisList = v;\n      },\n      get pieColor() {\n        return pieColor;\n      },\n      set pieColor(v) {\n        pieColor = v;\n      },\n      get subText() {\n        return subText;\n      },\n      set subText(v) {\n        subText = v;\n      },\n      get myPieChart() {\n        return myPieChart;\n      },\n      set myPieChart(v) {\n        myPieChart = v;\n      },\n      get myPostChart() {\n        return myPostChart;\n      },\n      set myPostChart(v) {\n        myPostChart = v;\n      },\n      time,\n      dataIndex,\n      timeList,\n      getPieData,\n      getPieCharts,\n      handlePieResize,\n      handleClickOutside,\n      getCauseGroupData,\n      handleDetail,\n      handleIsPost,\n      getPostData,\n      getPostCharts,\n      handlePostResize,\n      changeTime,\n      onMounted,\n      ref,\n      reactive,\n      onUnmounted,\n      watchEffect,\n      get echarts() {\n        return echarts;\n      },\n      get getSplitNum() {\n        return getSplitNum;\n      },\n      get getCurrentTime() {\n        return getCurrentTime;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get useRoute() {\n        return useRoute;\n      },\n      get getPieChartData() {\n        return getPieChartData;\n      },\n      get getCauseGroup() {\n        return getCauseGroup;\n      },\n      get getPostChartData() {\n        return getPostChartData;\n      },\n      get getCurrentInstance() {\n        return getCurrentInstance;\n      },\n      get moment() {\n        return moment;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"mappings":"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","names":["onMounted","ref","reactive","onUnmounted","watchEffect","echarts","getSplitNum","getCurrentTime","useRouter","useRoute","getPieChartData","getCauseGroup","getPostChartData","getCurrentInstance","moment","$bus","appContext","config","globalProperties","router","route","form","title","c1People","Gpeople","c2People","sPeople","rPeople","formalPeople","partTimePeople","practicePeople","year","month","days","currentDate","isPie","isPost","pieData","pieDatas","entryList","departList","formalList","xAxisList","pieColor","subText","myPieChart","myPostChart","time","dataIndex","timeList","label","value","emit","type","color","msg","getPieData","then","res","code","data","forEach","item","push","name","deptName","extendColumn2","map","index","getPieCharts","deptNames","dispatchAction","seriesIndex","undefined","dispose","chartDom","document","getElementById","init","option","tooltip","trigger","triggerOn","formatter","position","point","params","dom","rect","size","left","x","top","y","text","subtext","textStyle","fontSize","fontWeight","fontFamily","subtextStyle","textAlign","animation","legend","bottom","itemGap","itemWidth","series","radius","center","emphasis","itemStyle","shadowBlur","shadowOffsetX","shadowColor","show","scale","scaleSize","startAngle","clockwise","c","setOption","window","addEventListener","handlePieResize","on","i","length","resize","handleClickOutside","event","target","tagName","getCauseGroupData","getPostData","formData","FormData","append","C1","G","C2","S","R","official","pluralistic","practice","handleDetail","path","state","handleIsPost","val","extendColumn1","slice","parts","split","months","extendColumn3","extendColumn4","date","formattedDate","format","getPostCharts","chartDoms","colors","axisPointer","extraCssText","seriesName","grid","right","xAxis","axisTick","alignWithLabel","axisLabel","interval","yAxis","alignTicks","splitLine","axisLine","offset","lineStyle","yAxisIndex","handlePostResize","changeTime","history","removeEventListener"],"sources":["/Users/lijiaxin/Documents/workspace/hydsoft-mgmt-frontend/src/views/staffStatistics/staffStatics/staticPicture.vue"],"sourcesContent":["<template>\n  <div style=\"position: relative; overflow: hidden\" class=\"defaultPadding\">\n    <p class=\"tip\"><span>提示：点击饼状图切换事业群</span></p>\n    <div id=\"pie\"></div>\n    <!-- 弹框 -->\n    <div class=\"modal\">\n      <p class=\"title\">在职人数统计：{{ form.title }}</p>\n      <p class=\"subtitle\">{{ currentDate }}</p>\n      <ul>\n        <div>\n          <li>\n            <span>C1人数</span>\n            <span>{{ getSplitNum(form.c1People) }}</span>\n          </li>\n          <li>\n            <span class=\"m-r-8\">G人数</span>\n            <span>{{ form.Gpeople }}</span>\n          </li>\n          <li>\n            <span>C2人数</span>\n            <span>{{ form.c2People }}</span>\n          </li>\n          <li>\n            <span class=\"m-r-12\">S人数</span>\n            <span>{{ form.sPeople }}</span>\n          </li>\n          <li>\n            <span class=\"m-r-10\">R人数</span>\n            <span>{{ form.rPeople }}</span>\n          </li>\n        </div>\n        <div class=\"m-l-40\">\n          <li>\n            <span>正式人数</span>\n            <span>{{ getSplitNum(form.formalPeople) }}</span>\n          </li>\n          <li>\n            <span>兼职人数</span>\n            <span>{{ form.partTimePeople }}</span>\n          </li>\n          <li>\n            <span>实习人数</span>\n            <span>{{ form.practicePeople }}</span>\n          </li>\n        </div>\n      </ul>\n      <a-button class=\"button\" type=\"primary\" @click=\"handleDetail\">明细</a-button>\n    </div>\n    <div class=\"time\">\n      <a-radio-group type=\"button\" size=\"large\" v-model=\"time\" @change=\"changeTime\">\n        <a-radio v-for=\"item of timeList\" :value=\"item.label\">{{ item.value }}</a-radio>\n      </a-radio-group>\n    </div>\n    <div id=\"post\" @click=\"handleIsPost\"></div>\n  </div>\n</template>\n\n<script setup>\nimport { onMounted, ref, reactive, onUnmounted, watchEffect } from \"vue\";\nimport * as echarts from \"echarts\";\nimport { getSplitNum, getCurrentTime } from \"@/utils/util.js\";\nimport { useRouter, useRoute } from \"vue-router\";\nimport { getPieChartData, getCauseGroup, getPostChartData } from \"@/api/staffStatics.js\";\nimport { getCurrentInstance } from \"@vue/runtime-core\";\nlet $bus = getCurrentInstance().appContext.config.globalProperties.$bus;\nimport moment from \"moment\";\nconst router = useRouter();\nconst route = useRoute();\nconst form = reactive({\n  title: \"各BG汇总\",\n  c1People: 1477,\n  Gpeople: 60,\n  c2People: 100,\n  sPeople: 4,\n  rPeople: 200,\n  formalPeople: 1477,\n  partTimePeople: 60,\n  practicePeople: 100,\n});\nlet { year, month, days } = getCurrentTime();\nlet currentDate = `${year}/${month}/${days}`;\nconst isPie = ref(false);\nconst isPost = ref(false);\nvar pieData = [];\nvar pieDatas = [];\nvar entryList = [];\nvar departList = [];\nvar formalList = [];\nvar xAxisList = [];\nvar pieColor = [\"#8E83BD\", \"#F0886F\", \"#6D99C8\", \"#C59E63\", \"#4D8192\", \"#7DAE99\"];\nvar subText = 0;\nvar myPieChart;\nvar myPostChart;\nconst time = ref(\"1\");\nconst dataIndex = ref(-1);\nconst timeList = ref([\n  {\n    label: \"1\",\n    value: \"近12月\",\n  },\n  {\n    label: \"2\",\n    value: \"近26周\",\n  },\n  {\n    label: \"3\",\n    value: \"近30自然日\",\n  },\n]);\n// 视口宽度\nwatchEffect(() => {\n  $bus.emit(\"updateStructure\", [\n    { type: \"text\", color: \"#333\", msg: `人员分析` },\n    { type: \"text\", color: \"#333\", msg: `人员统计` },\n  ]);\n});\n\n// 环状图-------------------------------------------------\nconst getPieData = () => {\n  pieDatas = [];\n  pieData = [];\n  subText = 0;\n  getPieChartData().then(res => {\n    if (res.code === \"000000000000\") {\n      res.data.forEach(item => {\n        pieData.push({\n          name: item.deptName,\n          value: item.extendColumn2,\n        });\n        subText += item.extendColumn2;\n      });\n      pieDatas = pieData.map((item, index) => {\n        return {\n          name: item.name,\n          value: item.value,\n          label: { color: pieColor[index] },\n        };\n      });\n      getPieCharts();\n      const deptNames = [\"BG1\", \"BG2\", \"BG3\", \"BG4\"];\n      deptNames.forEach((item, index) => {\n        if (form.title === item) {\n          myPieChart.dispatchAction({\n            type: \"highlight\", //突出高亮显示;\n            seriesIndex: 0,\n            dataIndex: index,\n          });\n        }\n      });\n    }\n  });\n};\nconst getPieCharts = () => {\n  if (myPieChart != null && myPieChart != \"\" && myPieChart != undefined) {\n    myPieChart.dispose();\n  }\n  var chartDom = document.getElementById(\"pie\");\n  if (chartDom) {\n    myPieChart = echarts.init(chartDom);\n    var option = {\n      tooltip: {\n        trigger: \"item\",\n        triggerOn: \"none\",\n        formatter: \"{b}\",\n        position: function (point, params, dom, rect, size) {\n          if (params.name == \"BG1\") {\n            return { left: rect.x, top: rect.y + 50 };\n          }\n          if (params.name == \"BG3\") {\n            return { left: rect.x + 30, top: rect.y + 50 };\n          }\n          if (params.name == \"BG4\") {\n            return { left: rect.x, top: rect.y };\n          }\n          if (params.name == \"BG2\") {\n            return { left: rect.x + 60, top: rect.y + 50 };\n          }\n        },\n      },\n      //环形图中间文字\n      title: {\n        text: \"总人数\",\n        subtext: getSplitNum(subText),\n        textStyle: {\n          fontSize: \"14px\",\n          color: \"#6B7785\",\n          fontWeight: 300,\n          fontFamily: \"PingFangSC-Thin\",\n        },\n        subtextStyle: {\n          fontSize: \"18px\",\n          color: \"#6B7785\",\n          fontWeight: 500,\n          fontFamily: \"PingFang SC\",\n        },\n        textAlign: \"center\", //图例文字居中显示\n        x: \"48.3%\", //距离左边的距离\n        y: \"38.5%\", //距离上边的距离\n      },\n      animation: false,\n      //数据的颜色设置\n      color: [\"#8E83BD\", \"#F0886F\", \"#6D99C8\", \"#C59E63\", \"#4D8192\", \"#7DAE99\"],\n      //图例设置\n      legend: {\n        bottom: -5,\n        itemGap: 20, //数据上下的距离\n        itemWidth: 20, // 设置宽度\n        data: pieData,\n      },\n      series: [\n        {\n          radius: [\"53%\", \"80%\"], //第一个是中间圆的大小，第二个是外边圆的大小\n          center: [\"49%\", \"47%\"], //左边的距离，上边的距离\n          type: \"pie\",\n          label: {\n            position: \"inner\", //文字显示在内部，如果在外边把这个去掉就好\n            color: \"#fff\", //文字的颜色\n            fontSize: \"14px\",\n            textAlign: \"left\",\n          },\n          emphasis: {\n            itemStyle: {\n              shadowBlur: 6,\n              shadowOffsetX: 0,\n              shadowColor: \"rgba(100, 114, 123, 0.5)\",\n            },\n            label: {\n              show: true,\n              formatter: \"{b}\",\n              fontSize: \"18px\",\n              color: \"#fff\",\n            },\n            scale: true,\n            scaleSize: 10,\n          },\n          data: pieData,\n          startAngle: 45, //起始角度\n          clockwise: false, //生长方向，是否顺时针\n        },\n        {\n          radius: [\"53%\", \"80%\"], //第一个是中间圆的大小，第二个是外边圆的大小\n          center: [\"49%\", \"47%\"], //左边的距离，上边的距离\n          type: \"pie\",\n          label: {\n            formatter: function (data) {\n              let c = getSplitNum(data.value);\n              return c;\n            },\n            position: \"outer\", //文字显示在内部，如果在外边把这个去掉就好\n            fontSize: \"14px\",\n            textAlign: \"left\",\n          },\n          emphasis: {\n            itemStyle: {\n              shadowBlur: 10,\n              shadowOffsetX: 0,\n              shadowColor: \"rgba(100, 114, 123, 0.5)\",\n            },\n            label: {\n              show: true,\n            },\n            scale: true,\n            scaleSize: 10,\n          },\n          data: pieDatas,\n          startAngle: 45, //起始角度\n          clockwise: false, //生长方向，是否顺时针\n        },\n      ],\n    };\n    option && myPieChart.setOption(option);\n    window.addEventListener(\"resize\", handlePieResize);\n    myPieChart.on(\"click\", function (params) {\n      dataIndex.value = params.dataIndex;\n      isPie.value = true;\n      form.title = params.name;\n      for (var i = 0; i < pieDatas.length; i++) {\n        if (i != params.dataIndex) {\n          myPieChart.dispatchAction({\n            type: \"downplay\", //取消突出高亮显示;\n            seriesIndex: 0,\n            dataIndex: i,\n          });\n        }\n      }\n      myPieChart.dispatchAction({\n        type: \"hideTip\",\n        seriesIndex: 0,\n        dataIndex: params.dataIndex,\n      });\n      myPieChart.dispatchAction({\n        type: \"highlight\", //突出高亮显示;\n        seriesIndex: 0,\n        dataIndex: params.dataIndex,\n      });\n    });\n    myPieChart.on(\"mouseover\", function (params) {\n      if (params.dataIndex == dataIndex.value || params.name == form.title) {\n        myPieChart.dispatchAction({\n          type: \"hideTip\",\n          seriesIndex: 0,\n          dataIndex: params.dataIndex,\n        });\n      } else {\n        myPieChart.dispatchAction({\n          type: \"showTip\",\n          seriesIndex: 0,\n          dataIndex: params.dataIndex,\n        });\n      }\n    });\n    myPieChart.on(\"mouseout\", function (params) {\n      myPieChart.dispatchAction({\n        type: \"hideTip\",\n        seriesIndex: 0,\n        dataIndex: params.dataIndex,\n      });\n    });\n  }\n};\nconst handlePieResize = () => {\n  myPieChart.resize();\n};\nconst handleClickOutside = event => {\n  if (event.target.tagName !== \"SPAN\" && !isPost.value && event.target.tagName !== \"BUTTON\") {\n    if (isPie.value) {\n      getCauseGroupData(form.title);\n      isPie.value = false;\n      getPostData(time.value);\n    } else {\n      form.title = \"各BG汇总\";\n      getPieCharts();\n      getCauseGroupData(\"各BG汇总\");\n      getPostData(time.value);\n    }\n  }\n  if (isPost.value) {\n    isPost.value = false;\n  }\n};\n//获取事业群全部数据\nconst getCauseGroupData = deptName => {\n  if (deptName !== \"各BG汇总\") {\n    const formData = new FormData();\n    formData.append(\"deptName\", form.title);\n    getCauseGroup(formData).then(res => {\n      const { code, data } = res;\n      if (code === \"000000000000\") {\n        form.c1People = data.C1;\n        form.Gpeople = data.G;\n        form.c2People = data.C2;\n        form.sPeople = data.S;\n        form.rPeople = data.R;\n        form.formalPeople = data.official;\n        form.partTimePeople = data.pluralistic;\n        form.practicePeople = data.practice;\n      }\n    });\n  } else {\n    getCauseGroup().then(res => {\n      const { code, data } = res;\n      if (code === \"000000000000\") {\n        form.c1People = data.C1;\n        form.Gpeople = data.G;\n        form.c2People = data.C2;\n        form.sPeople = data.S;\n        form.rPeople = data.R;\n        form.formalPeople = data.official;\n        form.partTimePeople = data.pluralistic;\n        form.practicePeople = data.practice;\n        form.title = \"各BG汇总\";\n      }\n    });\n  }\n};\n// 明细\nconst handleDetail = () => {\n  router.push({\n    path: \"/staticDetail\",\n    state: {\n      deptName: form.title === \"各BG汇总\" ? \"全部\" : form.title,\n    },\n  });\n};\n// 柱状图-----------------------------------------------------------\nconst handleIsPost = () => {\n  isPost.value = true;\n};\nconst getPostData = val => {\n  const formData = new FormData();\n  formData.append(\"histogram\", val);\n  if (form.title !== \"各BG汇总\") {\n    formData.append(\"deptName\", form.title);\n  }\n  getPostChartData(formData).then(res => {\n    if (res.code == \"000000000000\") {\n      departList = [];\n      entryList = [];\n      formalList = [];\n      xAxisList = [];\n      if (val == \"1\") {\n        res.data.forEach(item => {\n          if (item.extendColumn1.slice(0, 4) !== \"2022\") {\n            const parts = item.extendColumn1.split(\"-\");\n            const year = parts[0];\n            const month = parts[1];\n            var months = `${year}.${month}`;\n            xAxisList.push(months);\n            formalList.push(item.extendColumn2);\n            entryList.push(item.extendColumn3);\n            departList.push(item.extendColumn4);\n          }\n        });\n      } else {\n        res.data.forEach(item => {\n          formalList.push(item.extendColumn2);\n          entryList.push(item.extendColumn3);\n          departList.push(item.extendColumn4);\n          const date = moment(item.extendColumn1);\n          const formattedDate = date.format(\"M/D\");\n          xAxisList.push(formattedDate);\n        });\n      }\n      getPostCharts();\n    }\n  });\n};\nconst getPostCharts = () => {\n  if (myPostChart != null && myPostChart != \"\" && myPostChart != undefined) {\n    myPostChart.dispose();\n  }\n  var chartDoms = document.getElementById(\"post\");\n  if (chartDoms) {\n    myPostChart = echarts.init(chartDoms);\n    const colors = [\"#69D1B0\", \"#F98981\", \"#3491FA\"];\n    var option = {\n      color: colors,\n      tooltip: {\n        axisPointer: {\n          type: \"cross\",\n        },\n        extraCssText: \"text-align: left;\",\n        formatter: params => {\n          if (params.seriesIndex == 0) return \"时间：\" + params.name + \"</br>\" + params.seriesName + \"：\" + params.value;\n          if (params.seriesIndex == 1) return \"时间：\" + params.name + \"</br>\" + params.seriesName + \"：\" + params.value;\n          if (params.seriesIndex == 2) return \"时间：\" + params.name + \"</br>\" + params.seriesName + \"：\" + params.value;\n        },\n      },\n      grid: {\n        right: \"10%\",\n        left: \"20%\",\n        top: \"8%\",\n      },\n      legend: {\n        data: [\"入职人数\", \"离职人数\", \"在职员工人数\"],\n        bottom: \"2%\",\n        itemGap: 26, //数据上下的距离\n      },\n      xAxis: [\n        {\n          type: \"category\",\n          axisTick: {\n            alignWithLabel: true,\n          },\n          axisLabel: {\n            interval: \"auto\",\n          },\n          data: xAxisList,\n        },\n      ],\n      yAxis: [\n        {\n          type: \"value\",\n          name: \"柱状\",\n          position: \"left\",\n          alignTicks: true,\n          splitLine: false,\n          axisLine: {\n            show: true,\n          },\n          axisLabel: {\n            formatter: \"{value}\",\n          },\n        },\n        {\n          type: \"value\",\n          name: \"折线\",\n          position: \"left\",\n          alignTicks: true,\n          splitLine: false,\n          offset: 50,\n          axisLine: {\n            show: true,\n            lineStyle: {\n              color: colors[2],\n            },\n          },\n          axisLabel: {\n            formatter: \"{value}\",\n          },\n        },\n      ],\n      series: [\n        {\n          name: \"入职人数\",\n          type: \"bar\",\n          data: entryList,\n        },\n        {\n          name: \"离职人数\",\n          type: \"bar\",\n          data: departList,\n        },\n        {\n          name: \"在职员工人数\",\n          type: \"line\",\n          yAxisIndex: 1,\n          data: formalList,\n        },\n      ],\n    };\n    option && myPostChart.setOption(option);\n    window.addEventListener(\"resize\", handlePostResize);\n  }\n};\nconst handlePostResize = () => {\n  myPostChart.resize();\n};\n// 更改时间\nconst changeTime = val => {\n  time.value = val;\n  getPostData(val);\n};\nonMounted(() => {\n  document.addEventListener(\"click\", handleClickOutside);\n  form.title = history.state.deptName ? (history.state.deptName == \"全部\" ? \"各BG汇总\" : history.state.deptName) : \"各BG汇总\";\n  getCauseGroupData(form.title);\n  getPieData();\n  getPostData(time.value);\n});\nonUnmounted(() => {\n  window.removeEventListener(\"resize\", handlePieResize);\n  document.removeEventListener(\"click\", handleClickOutside);\n  window.removeEventListener(\"resize\", handlePostResize);\n});\n</script>\n\n<style scoped lang=\"scss\">\n#pie {\n  height: 300px;\n  width: 52%;\n}\n.tip {\n  font-weight: 400;\n  font-style: normal;\n  font-size: 10px;\n  color: #a8b4cc;\n  display: inline-block;\n  width: 50%;\n  text-align: center;\n}\n.modal {\n  width: 560px;\n  box-shadow: 0px 0px 5px rgb(209, 211, 224);\n  position: absolute;\n  left: 45%;\n  top: 7%;\n}\n.title {\n  margin: 26px 0 0 40px;\n  font-size: 16px;\n  font-weight: 500;\n  color: rgba(0, 0, 0, 0.847058823529412);\n  font-family: \"PingFangSC-Medium\", \"PingFang SC Medium\";\n}\n.subtitle {\n  margin-left: 40px;\n  font-weight: 400;\n  font-family: \"PingFangSC-Regular\", \"PingFang SC\";\n  font-style: normal;\n  font-size: 12px;\n  color: #a8b4cc;\n}\nul {\n  width: 450px;\n  margin-left: 50px;\n  list-style: none;\n  display: flex;\n  margin-top: 30px;\n}\nli {\n  margin: 0 60px 10px 0;\n  > span:first-child {\n    font-weight: 400;\n    font-size: 14px;\n    color: #a8b4cc;\n    line-height: 22px;\n  }\n  > span:nth-child(2) {\n    font-weight: 400;\n    font-style: normal;\n    font-size: 14px;\n    color: #778092;\n    line-height: 22px;\n    margin-left: 10px;\n  }\n}\n.button {\n  position: relative;\n  left: 75%;\n  top: -30px;\n}\n.time {\n  position: absolute;\n  left: 61%;\n  top: 46%;\n}\n#post {\n  max-width: 90%;\n  height: 400px;\n  margin-top: 80px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}